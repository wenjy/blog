{"meta":{"version":1,"warehouse":"4.0.0"},"models":{"Asset":[{"_id":"themes/hexo-theme-matery/source/favicon.png","path":"favicon.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/css/gitment.css","path":"css/gitment.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/css/matery.css","path":"css/matery.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/css/my-gitalk.css","path":"css/my-gitalk.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/css/my.css","path":"css/my.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/js/search.js","path":"js/search.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/js/matery.js","path":"js/matery.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/avatar.jpg","path":"medias/avatar.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/comment_bg.png","path":"medias/comment_bg.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/cover.jpg","path":"medias/cover.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/icp.png","path":"medias/icp.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/logo.png","path":"medias/logo.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/animate/animate.min.css","path":"libs/animate/animate.min.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/aos/aos.js","path":"libs/aos/aos.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/aos/aos.css","path":"libs/aos/aos.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/aplayer/APlayer.min.js","path":"libs/aplayer/APlayer.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/aplayer/APlayer.min.css","path":"libs/aplayer/APlayer.min.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/background/ribbon-dynamic.js","path":"libs/background/ribbon-dynamic.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/background/ribbon-refresh.min.js","path":"libs/background/ribbon-refresh.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/background/ribbon.min.js","path":"libs/background/ribbon.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/background/canvas-nest.js","path":"libs/background/canvas-nest.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/codeBlock/codeBlockFuction.js","path":"libs/codeBlock/codeBlockFuction.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/codeBlock/codeShrink.js","path":"libs/codeBlock/codeShrink.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/codeBlock/codeLang.js","path":"libs/codeBlock/codeLang.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/codeBlock/codeCopy.js","path":"libs/codeBlock/codeCopy.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/cryptojs/crypto-js.min.js","path":"libs/cryptojs/crypto-js.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/dplayer/DPlayer.min.css","path":"libs/dplayer/DPlayer.min.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/dplayer/DPlayer.min.js","path":"libs/dplayer/DPlayer.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/gitalk/gitalk.css","path":"libs/gitalk/gitalk.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/gitalk/gitalk.min.js","path":"libs/gitalk/gitalk.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/gitment/gitment-default.css","path":"libs/gitment/gitment-default.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/gitment/gitment.js","path":"libs/gitment/gitment.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/echarts/echarts.min.js","path":"libs/echarts/echarts.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/instantpage/instantpage.js","path":"libs/instantpage/instantpage.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/jqcloud/jqcloud-1.0.4.min.js","path":"libs/jqcloud/jqcloud-1.0.4.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/jqcloud/jqcloud.css","path":"libs/jqcloud/jqcloud.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/jquery/jquery.min.js","path":"libs/jquery/jquery.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/masonry/masonry.pkgd.min.js","path":"libs/masonry/masonry.pkgd.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/minivaline/MiniValine.js","path":"libs/minivaline/MiniValine.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/materialize/materialize.min.js","path":"libs/materialize/materialize.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/materialize/materialize.min.css","path":"libs/materialize/materialize.min.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/others/busuanzi.pure.mini.js","path":"libs/others/busuanzi.pure.mini.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/others/clicklove.js","path":"libs/others/clicklove.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/scrollprogress/scrollProgress.min.js","path":"libs/scrollprogress/scrollProgress.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/tocbot/tocbot.min.js","path":"libs/tocbot/tocbot.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/tocbot/tocbot.css","path":"libs/tocbot/tocbot.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/valine/av-min.js","path":"libs/valine/av-min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/valine/Valine.min.js","path":"libs/valine/Valine.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/banner/1.jpg","path":"medias/banner/1.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/banner/2.jpg","path":"medias/banner/2.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/banner/3.jpg","path":"medias/banner/3.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/banner/4.jpg","path":"medias/banner/4.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/banner/5.jpg","path":"medias/banner/5.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/banner/6.jpg","path":"medias/banner/6.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/banner/0.jpg","path":"medias/banner/0.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/1.jpg","path":"medias/featureimages/1.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/10.jpg","path":"medias/featureimages/10.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/11.jpg","path":"medias/featureimages/11.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/12.jpg","path":"medias/featureimages/12.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/13.jpg","path":"medias/featureimages/13.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/14.jpg","path":"medias/featureimages/14.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/15.jpg","path":"medias/featureimages/15.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/16.jpg","path":"medias/featureimages/16.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/0.jpg","path":"medias/featureimages/0.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/17.jpg","path":"medias/featureimages/17.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/18.jpg","path":"medias/featureimages/18.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/19.jpg","path":"medias/featureimages/19.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/2.jpg","path":"medias/featureimages/2.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/20.jpg","path":"medias/featureimages/20.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/21.jpg","path":"medias/featureimages/21.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/22.jpg","path":"medias/featureimages/22.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/23.jpg","path":"medias/featureimages/23.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/3.jpg","path":"medias/featureimages/3.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/4.jpg","path":"medias/featureimages/4.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/5.jpg","path":"medias/featureimages/5.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/6.jpg","path":"medias/featureimages/6.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/7.jpg","path":"medias/featureimages/7.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/8.jpg","path":"medias/featureimages/8.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/9.jpg","path":"medias/featureimages/9.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/reward/alipay.jpg","path":"medias/reward/alipay.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/reward/wechat.png","path":"medias/reward/wechat.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/awesome/css/all.css","path":"libs/awesome/css/all.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/awesome/webfonts/fa-brands-400.eot","path":"libs/awesome/webfonts/fa-brands-400.eot","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/awesome/webfonts/fa-brands-400.svg","path":"libs/awesome/webfonts/fa-brands-400.svg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/awesome/webfonts/fa-brands-400.ttf","path":"libs/awesome/webfonts/fa-brands-400.ttf","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/awesome/webfonts/fa-brands-400.woff","path":"libs/awesome/webfonts/fa-brands-400.woff","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/awesome/webfonts/fa-brands-400.woff2","path":"libs/awesome/webfonts/fa-brands-400.woff2","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/awesome/webfonts/fa-regular-400.eot","path":"libs/awesome/webfonts/fa-regular-400.eot","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/awesome/webfonts/fa-regular-400.svg","path":"libs/awesome/webfonts/fa-regular-400.svg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/awesome/webfonts/fa-regular-400.ttf","path":"libs/awesome/webfonts/fa-regular-400.ttf","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/awesome/webfonts/fa-regular-400.woff","path":"libs/awesome/webfonts/fa-regular-400.woff","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/awesome/webfonts/fa-regular-400.woff2","path":"libs/awesome/webfonts/fa-regular-400.woff2","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/awesome/webfonts/fa-solid-900.eot","path":"libs/awesome/webfonts/fa-solid-900.eot","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/awesome/webfonts/fa-solid-900.svg","path":"libs/awesome/webfonts/fa-solid-900.svg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/awesome/webfonts/fa-solid-900.ttf","path":"libs/awesome/webfonts/fa-solid-900.ttf","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/awesome/webfonts/fa-solid-900.woff","path":"libs/awesome/webfonts/fa-solid-900.woff","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/awesome/webfonts/fa-solid-900.woff2","path":"libs/awesome/webfonts/fa-solid-900.woff2","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/css/lightgallery.min.css","path":"libs/lightGallery/css/lightgallery.min.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/fonts/lg.eot","path":"libs/lightGallery/fonts/lg.eot","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/fonts/lg.svg","path":"libs/lightGallery/fonts/lg.svg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/fonts/lg.woff","path":"libs/lightGallery/fonts/lg.woff","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/fonts/lg.ttf","path":"libs/lightGallery/fonts/lg.ttf","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/img/video-play.png","path":"libs/lightGallery/img/video-play.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/img/loading.gif","path":"libs/lightGallery/img/loading.gif","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/img/youtube-play.png","path":"libs/lightGallery/img/youtube-play.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/img/vimeo-play.png","path":"libs/lightGallery/img/vimeo-play.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/js/lightgallery-all.min.js","path":"libs/lightGallery/js/lightgallery-all.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/share/css/share.min.css","path":"libs/share/css/share.min.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/share/fonts/iconfont.eot","path":"libs/share/fonts/iconfont.eot","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/share/fonts/iconfont.svg","path":"libs/share/fonts/iconfont.svg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/share/fonts/iconfont.ttf","path":"libs/share/fonts/iconfont.ttf","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/share/fonts/iconfont.woff","path":"libs/share/fonts/iconfont.woff","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/share/js/social-share.min.js","path":"libs/share/js/social-share.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/share/js/jquery.share.min.js","path":"libs/share/js/jquery.share.min.js","modified":0,"renderable":1}],"Cache":[{"_id":"source/_posts/hello-world.md","hash":"7d98d6592de80fdcd2949bd7401cec12afd98cdf","modified":1605187824738},{"_id":"themes/jacman/.gitignore","hash":"7d65523f2a5afb69d76824dd1dfa62a34faa3197","modified":1605188984434},{"_id":"themes/jacman/README.md","hash":"098545637b0aeb27b14707c15e429470c603d78d","modified":1605188984435},{"_id":"themes/jacman/README_zh.md","hash":"9c73931bca4883de13eedd4be254da547d4ca52e","modified":1605188984436},{"_id":"themes/jacman/_config.yml","hash":"4e7a9a91e22c7805edb535781636f2203b963b15","modified":1605188984437},{"_id":"themes/jacman/languages/default.yml","hash":"eea72d6138497287c0b3f4bd93e4f6f62b7aff37","modified":1605188984438},{"_id":"themes/jacman/languages/zh-CN.yml","hash":"1f3b9d00dd4322352b0c9c82a76dc9865a616d41","modified":1605188984438},{"_id":"themes/jacman/layout/archive.ejs","hash":"a18842e3d719fe3ca9b977a6995f8facc75c8673","modified":1605188984446},{"_id":"themes/jacman/languages/zh-TW.yml","hash":"61a02ba818d641579a86fcd7f5926ab1e6ab5f70","modified":1605188984438},{"_id":"themes/jacman/layout/category.ejs","hash":"9b740fc33f6f028df60f0bc4312bf3ebd03aa8ea","modified":1605188984446},{"_id":"themes/jacman/layout/index.ejs","hash":"75cef2172c286994af412e11ab7f4f5a0daaf1f5","modified":1605188984446},{"_id":"themes/jacman/layout/layout.ejs","hash":"5b4289a4526899809b9c2facea535367ff51ba2b","modified":1605188984446},{"_id":"themes/jacman/layout/page.ejs","hash":"bd6bbf2ea8e183bd835867ff617dc6366b56748c","modified":1605188984446},{"_id":"themes/jacman/layout/post.ejs","hash":"3114134775bdde5a83cf14feb019606fa2b2b2be","modified":1605188984446},{"_id":"themes/jacman/scripts/fancybox.js","hash":"aa411cd072399df1ddc8e2181a3204678a5177d9","modified":1605188984447},{"_id":"themes/jacman/layout/tag.ejs","hash":"45150a2365768b6b67880193c9264ad2bb4814db","modified":1605188984447},{"_id":"themes/jacman/layout/_widget/archive.ejs","hash":"39ea6b7888406fbd1b4cf236ebd718e881493374","modified":1605188984444},{"_id":"themes/jacman/layout/_widget/category.ejs","hash":"c1fae96b5053da021bcc04ab2ce5c2c8d30de8a2","modified":1605188984445},{"_id":"themes/jacman/layout/_widget/douban.ejs","hash":"e3820c36169e88663e6c9177666b2904c1ce47e6","modified":1605188984445},{"_id":"themes/jacman/layout/_widget/github-card.ejs","hash":"d49a8d609c5fbafa9e7ad328163565af03306519","modified":1605188984445},{"_id":"themes/jacman/layout/_widget/links.ejs","hash":"e49868063439c2092cdf9a8ec82cc295b0e42f66","modified":1605188984445},{"_id":"themes/jacman/layout/_widget/rss.ejs","hash":"0a4b5f2a2e36a1d504fe2e7c6c8372cbb4628aab","modified":1605188984445},{"_id":"themes/jacman/layout/_widget/tag.ejs","hash":"7e82ad9c916b9ce871b2f65ce8f283c5ba47947b","modified":1605188984445},{"_id":"themes/jacman/layout/_widget/tagcloud.ejs","hash":"10a1001189d5c28ce6d42494563b9637c302b454","modified":1605188984445},{"_id":"themes/jacman/layout/_widget/weibo.ejs","hash":"a31c2b223d0feb2a227e203cac9e5d13b7d328a8","modified":1605188984446},{"_id":"themes/jacman/layout/_partial/after_footer.ejs","hash":"3e1f1d8dc38b1e17c523d1176f7ee503fc648045","modified":1605188984439},{"_id":"themes/jacman/layout/_partial/analytics.ejs","hash":"697601996220fe0a0f9cd628be67dec3c86ae2aa","modified":1605188984439},{"_id":"themes/jacman/layout/_partial/archive.ejs","hash":"2c7395e7563fe016521712a645c28a13f952d52a","modified":1605188984440},{"_id":"themes/jacman/layout/_partial/article_row.ejs","hash":"4cb855d91ece7f67b2ca0992fffa55472d0b9c93","modified":1605188984440},{"_id":"themes/jacman/layout/_partial/categories.ejs","hash":"8a52d0344d5bce1925cf586ed73c11192925209b","modified":1605188984440},{"_id":"themes/jacman/layout/_partial/article.ejs","hash":"261ecacb8456f4cb972632b6a9103860fa63b9a3","modified":1605188984440},{"_id":"themes/jacman/layout/_partial/footer.ejs","hash":"5f80bf6c6ddcf8c28c4599cd1540b14b25d54f18","modified":1605188984441},{"_id":"themes/jacman/layout/_partial/head.ejs","hash":"761941be4922cd3c177c8130296b909bf7db5c09","modified":1605188984441},{"_id":"themes/jacman/layout/_partial/header.ejs","hash":"18515612344ff048b9372b91b7eef6f3b143801f","modified":1605188984441},{"_id":"themes/jacman/layout/_partial/mathjax.ejs","hash":"d42994ac696f52ba99c1cbac382cd76d5b04a3e8","modified":1605188984441},{"_id":"themes/jacman/layout/_partial/pagination.ejs","hash":"6146ac37dfb4f8613090bc52b3fc8cfa911a186a","modified":1605188984441},{"_id":"themes/jacman/layout/_partial/search.ejs","hash":"1083824a6c6c3df02767f2f3b727aee78ebb76ec","modified":1605188984444},{"_id":"themes/jacman/layout/_partial/sidebar.ejs","hash":"c4f527fff0070fbe65919053a16224412317f40d","modified":1605188984444},{"_id":"themes/jacman/layout/_partial/tags.ejs","hash":"b33b2b5d08f1d53a8de25a95f660f7f1cea7b3cb","modified":1605188984444},{"_id":"themes/jacman/layout/_partial/tinysou_search.ejs","hash":"06ecddc8a9d40b480fe2e958af1dab857a9d5441","modified":1605188984444},{"_id":"themes/jacman/layout/_partial/totop.ejs","hash":"bea5bb7cb9350b8af7d97a8d223af63a5b30ab78","modified":1605188984444},{"_id":"themes/jacman/source/css/style.styl","hash":"a0a45af186a72ae68979bf26f2a5d0d2303189ca","modified":1605188984451},{"_id":"themes/jacman/source/fancybox/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1605188984452},{"_id":"themes/jacman/source/fancybox/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1605188984452},{"_id":"themes/jacman/source/fancybox/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1605188984453},{"_id":"themes/jacman/source/fancybox/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1605188984453},{"_id":"themes/jacman/source/fancybox/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1605188984453},{"_id":"themes/jacman/source/fancybox/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1605188984453},{"_id":"themes/jacman/source/fancybox/jquery.fancybox.css","hash":"aaa582fb9eb4b7092dc69fcb2d5b1c20cca58ab6","modified":1605188984456},{"_id":"themes/jacman/source/fancybox/jquery.fancybox.js","hash":"d08b03a42d5c4ba456ef8ba33116fdbb7a9cabed","modified":1605188984456},{"_id":"themes/jacman/source/fancybox/jquery.fancybox.pack.js","hash":"9e0d51ca1dbe66f6c0c7aefd552dc8122e694a6e","modified":1605188984457},{"_id":"themes/jacman/source/img/author.jpg","hash":"2a292e681b4c6c975eec9c8c356d99647a465542","modified":1605188984469},{"_id":"themes/jacman/source/img/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1605188984471},{"_id":"themes/jacman/source/img/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1605188984471},{"_id":"themes/jacman/source/img/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1605188984476},{"_id":"themes/jacman/source/img/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1605188984476},{"_id":"themes/jacman/source/img/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1605188984476},{"_id":"themes/jacman/source/img/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1605188984479},{"_id":"themes/jacman/source/img/favicon.ico","hash":"2d22a3e0c7905a894e832c831dd91c29c209c7a5","modified":1605188984487},{"_id":"themes/jacman/source/img/logo.svg","hash":"9ae38f7225c38624faeb7b74996efa9de7bf065b","modified":1605188984488},{"_id":"themes/jacman/source/img/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1605188984476},{"_id":"themes/jacman/source/img/jacman.jpg","hash":"0ba14a4a5e3be012826fc713c33479912126d34e","modified":1605188984487},{"_id":"themes/jacman/source/img/scrollup.png","hash":"2137d4f1739aa8aa3fcb0348c3ddf1e41d62f2e3","modified":1605188984488},{"_id":"themes/jacman/source/font/coveredbyyourgrace-webfont.ttf","hash":"194ccb4acf77a03dc25bcc174edb266143704fec","modified":1605188984461},{"_id":"themes/jacman/source/font/coveredbyyourgrace-webfont.eot","hash":"a17d0f10534303e40f210c506ebb8703fa23b7de","modified":1605188984459},{"_id":"themes/jacman/source/font/FontAwesome.otf","hash":"b5b4f9be85f91f10799e87a083da1d050f842734","modified":1605188984458},{"_id":"themes/jacman/source/font/coveredbyyourgrace-webfont.woff","hash":"c6f8dc1a2f6ce914f120e80a876b8fd77b98888e","modified":1605188984462},{"_id":"themes/jacman/source/font/fontawesome-webfont.eot","hash":"7619748fe34c64fb157a57f6d4ef3678f63a8f5e","modified":1605188984462},{"_id":"themes/jacman/source/font/fontawesome-webfont.woff","hash":"04c3bf56d87a0828935bd6b4aee859995f321693","modified":1605188984465},{"_id":"themes/jacman/source/font/fontdiao.eot","hash":"9544a0d7ba208989302bc4da5a184faeb0e883c9","modified":1605188984466},{"_id":"themes/jacman/source/font/fontdiao.ttf","hash":"ee9fd7be2493c9bf6d2841044e69a0830d9d3fab","modified":1605188984468},{"_id":"themes/jacman/source/font/fontdiao.woff","hash":"71f54eb6e98aa28cafeb04aab71c0e5b349ea89f","modified":1605188984468},{"_id":"themes/jacman/source/js/gallery.js","hash":"f8a4ba7fb8349cca374a3c69fff9b2bf21f742ed","modified":1605188984488},{"_id":"themes/jacman/source/js/jquery.imagesloaded.min.js","hash":"4109837b1f6477bacc6b095a863b1b95b1b3693f","modified":1605188984489},{"_id":"themes/jacman/source/js/jquery.qrcode-0.12.0.min.js","hash":"57c3987166a26415a71292162690e82c21e315ad","modified":1605188984490},{"_id":"themes/jacman/layout/_partial/post/catetags.ejs","hash":"0e37bababc8f4659f5b59a552a946b46d89e4158","modified":1605188984442},{"_id":"themes/jacman/source/js/totop.js","hash":"cad23c5ea7163d1e5c05a0fd3ef9233469da10cb","modified":1605188984490},{"_id":"themes/jacman/layout/_partial/post/article.ejs","hash":"b09e3acea7076e1f01dfe0c2295e19951ea09437","modified":1605188984441},{"_id":"themes/jacman/layout/_partial/post/comment.ejs","hash":"548c69c570d5aac567bc6f088e9ee0c02223b088","modified":1605188984442},{"_id":"themes/jacman/layout/_partial/post/footer.ejs","hash":"b12ec08a5845a3d8c01257614f1dfead879c87d2","modified":1605188984442},{"_id":"themes/jacman/layout/_partial/post/gallery.ejs","hash":"fafc2501d7e65983b0f5c2b58151ca12e57c0574","modified":1605188984443},{"_id":"themes/jacman/layout/_partial/post/header.ejs","hash":"36a705942b691abe0d643ea8afa339981b32f6f2","modified":1605188984443},{"_id":"themes/jacman/source/css/_base/public.styl","hash":"f016180726019927b9a835ed01e04d153f27a149","modified":1605188984448},{"_id":"themes/jacman/source/css/_base/variable.styl","hash":"cb652eb83c28a208743fabab92de896f8b7cbf7b","modified":1605188984448},{"_id":"themes/jacman/source/css/_partial/article.styl","hash":"c69641b4a34a8c62986b335414413dbde26de25e","modified":1605188984449},{"_id":"themes/jacman/source/css/_partial/duoshuo.styl","hash":"e85f1192283f043115c272a9deb3cb6ced793990","modified":1605188984449},{"_id":"themes/jacman/layout/_partial/post/jiathis.ejs","hash":"d7f5960039ac74924559ab6ba03c64457b8f0966","modified":1605188984443},{"_id":"themes/jacman/layout/_partial/post/pagination.ejs","hash":"7de9c07a4c968429a8088c31a28b7f3a993ded1b","modified":1605188984443},{"_id":"themes/jacman/source/css/_base/font.styl","hash":"c8a0faf43b08e37ad07a5669db76d595da966159","modified":1605188984447},{"_id":"themes/jacman/source/css/_partial/aside.styl","hash":"506fde1d67ce750452cbe84bee01a19c7d027c5e","modified":1605188984449},{"_id":"themes/jacman/source/css/_partial/header.styl","hash":"5121ceb712be3f2dde98b8b6e589b546e19eab8f","modified":1605188984450},{"_id":"themes/jacman/source/css/_partial/index.styl","hash":"a72ff14effd276015264f870f47ed8f8413bf5d3","modified":1605188984451},{"_id":"themes/jacman/source/css/_partial/footer.styl","hash":"1911613a19b605a58f801c21b03b5d4c83b90f9c","modified":1605188984450},{"_id":"themes/jacman/source/css/_partial/gallery.styl","hash":"7246809f4ce3166ec1b259bf475cae1a48e29aad","modified":1605188984450},{"_id":"themes/jacman/source/fancybox/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1605188984454},{"_id":"themes/jacman/source/fancybox/helpers/jquery.fancybox-buttons.js","hash":"dc3645529a4bf72983a39fa34c1eb9146e082019","modified":1605188984454},{"_id":"themes/jacman/source/css/_partial/helper.styl","hash":"1136600932b97534b88465bf05ef313630b2de3d","modified":1605188984451},{"_id":"themes/jacman/source/css/_partial/totop.styl","hash":"96363d7c5aaed5f649667fc0752a62620a67e872","modified":1605188984451},{"_id":"themes/jacman/source/fancybox/helpers/jquery.fancybox-media.js","hash":"294420f9ff20f4e3584d212b0c262a00a96ecdb3","modified":1605188984455},{"_id":"themes/jacman/source/fancybox/helpers/jquery.fancybox-thumbs.css","hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1605188984455},{"_id":"themes/jacman/source/fancybox/helpers/jquery.fancybox-buttons.css","hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1605188984454},{"_id":"themes/jacman/source/fancybox/helpers/jquery.fancybox-thumbs.js","hash":"47da1ae5401c24b5c17cc18e2730780f5c1a7a0c","modified":1605188984455},{"_id":"themes/jacman/source/css/_base/highlight/theme.styl","hash":"e3a59bd427ba37a54ead9eeba9a5356b3f720a48","modified":1605188984448},{"_id":"themes/jacman/LICENSE","hash":"931516aa36c53eb7843c83d82662eb50cc3c4367","modified":1605188984434},{"_id":"themes/jacman/source/css/_base/highlight/highlight.styl","hash":"91b62bfc58390b0d5db782a75be6965ee3665eb3","modified":1605188984448},{"_id":"themes/jacman/source/img/logo.png","hash":"fd08d12d1fa147cf894e8f8327e38f1758de32ed","modified":1605188984487},{"_id":"themes/jacman/source/font/coveredbyyourgrace-webfont.svg","hash":"eabdb262d8e246865dfb56031f01ff6e8d2f9d53","modified":1605188984460},{"_id":"themes/jacman/source/font/fontawesome-webfont.ttf","hash":"7f09c97f333917034ad08fa7295e916c9f72fd3f","modified":1605188984465},{"_id":"themes/jacman/source/font/fontdiao.svg","hash":"334a94e6a66a8b089be7315d876bec93efe38d2b","modified":1605188984467},{"_id":"themes/jacman/source/js/jquery-2.0.3.min.js","hash":"a0ae3697b0ab8c0e8bd3186c80db42abd6d97a8d","modified":1605188984489},{"_id":"themes/jacman/source/img/banner.jpg","hash":"5104860c4f8b2e84ef734ba6c37fe7a288bf0d74","modified":1605188984471},{"_id":"themes/jacman/source/font/fontawesome-webfont.svg","hash":"46fcc0194d75a0ddac0a038aee41b23456784814","modified":1605188984464},{"_id":"themes/hexo-theme-matery/.gitignore","hash":"727607929a51db7ea10968f547c26041eee9cfff","modified":1605192443566},{"_id":"themes/hexo-theme-matery/README_CN.md","hash":"011ed6522859e600c27ea6dce9591fbc447db177","modified":1605192443568},{"_id":"themes/hexo-theme-matery/README.md","hash":"56299cf1fe60a11fef61b3948fe148f995df747e","modified":1605192443567},{"_id":"themes/hexo-theme-matery/_config.yml","hash":"38a2fe4513a4bdb96ca24d6c43235833223218ce","modified":1605192443568},{"_id":"themes/hexo-theme-matery/LICENSE","hash":"7df059597099bb7dcf25d2a9aedfaf4465f72d8d","modified":1605192443567},{"_id":"themes/hexo-theme-matery/languages/zh-CN.yml","hash":"a957b05f70265a86a87d922e18488571809d2472","modified":1605192443568},{"_id":"themes/hexo-theme-matery/languages/default.yml","hash":"54ccc01b097c5bf6820f0edfcece1a87b78ab32d","modified":1605192443568},{"_id":"themes/hexo-theme-matery/layout/404.ejs","hash":"9c8ca67377211e5d60fdde272a975faa9a91a22a","modified":1605192443569},{"_id":"themes/hexo-theme-matery/layout/about.ejs","hash":"41849f9300b8dc47048333fcf4a897dd8a2a13ca","modified":1605192443583},{"_id":"themes/hexo-theme-matery/layout/archive.ejs","hash":"cdac701de8370f9f3794a0eed4165983993a1ca7","modified":1605192443584},{"_id":"themes/hexo-theme-matery/layout/categories.ejs","hash":"8e54665cc25d7c333da7d9f312987190be6215da","modified":1605192443584},{"_id":"themes/hexo-theme-matery/layout/category.ejs","hash":"00019bca11fb46477f22017cb1f5ad8444da0580","modified":1605192443584},{"_id":"themes/hexo-theme-matery/layout/contact.ejs","hash":"19d62e521c4253496db559478db5164ddfd2480e","modified":1605192443584},{"_id":"themes/hexo-theme-matery/layout/friends.ejs","hash":"f5d6459bed0f4ecb214f2dbff5b2207a80c44f66","modified":1605192443585},{"_id":"themes/hexo-theme-matery/layout/index.ejs","hash":"4dc6f08e7709cc04e886be72dbf0d06469f0effc","modified":1605192443585},{"_id":"themes/hexo-theme-matery/layout/layout.ejs","hash":"c7453d5b064d42529e8c9fdef52d0901d51acb9b","modified":1605192443585},{"_id":"themes/hexo-theme-matery/layout/post.ejs","hash":"90b5a4c1f70e4756db569c15a7c6cad0c77c4500","modified":1605192443585},{"_id":"themes/hexo-theme-matery/layout/tags.ejs","hash":"cf9517aa6a0111355121f44615d6923e312283c7","modified":1605192443586},{"_id":"themes/hexo-theme-matery/layout/tag.ejs","hash":"85a4b05bd8a6ad0f17ff2e97dae56949b379c204","modified":1605192443586},{"_id":"themes/hexo-theme-matery/source/favicon.png","hash":"774fee8c6d0be9dbb010b20f36c06848d06e3da0","modified":1605192443588},{"_id":"themes/hexo-theme-matery/layout/_partial/back-top.ejs","hash":"47ee36a042bb6d52bbe1d0f329637e8ffcf1d0aa","modified":1605192443570},{"_id":"themes/hexo-theme-matery/layout/_partial/background.ejs","hash":"aef6edeeb11209831a11d8c7f5d59992e2573335","modified":1605192443570},{"_id":"themes/hexo-theme-matery/layout/_partial/baidu-analytics.ejs","hash":"3bbcdb474ca1dcad514bdc4b7763e17c55df04fd","modified":1605192443571},{"_id":"themes/hexo-theme-matery/layout/_partial/baidu-push.ejs","hash":"2cebcc5ea3614d7f76ec36670e68050cbe611202","modified":1605192443571},{"_id":"themes/hexo-theme-matery/layout/_partial/bg-cover-content.ejs","hash":"28617bf2a35a4269eba6df466acd174e416d2d1e","modified":1605192443571},{"_id":"themes/hexo-theme-matery/layout/_partial/bg-cover.ejs","hash":"02191109712f61c0e487b8f0b8466597181a9004","modified":1605192443571},{"_id":"themes/hexo-theme-matery/layout/_partial/changyan.ejs","hash":"cd919d31564e118c2ee8d5cbfb7d51ee6da15d82","modified":1605192443571},{"_id":"themes/hexo-theme-matery/layout/_partial/disqus.ejs","hash":"b2dc2c8b5ed56815e55cc2ea54a6dc4eeba2375d","modified":1605192443571},{"_id":"themes/hexo-theme-matery/layout/_partial/footer.ejs","hash":"3be24e4c370671eda53bdfd99fb748f4a22948ba","modified":1605192443572},{"_id":"themes/hexo-theme-matery/layout/_partial/gitalk.ejs","hash":"2aa8fbb04b046fa7679092a48372d7e036835dff","modified":1605192443572},{"_id":"themes/hexo-theme-matery/layout/_partial/github-link.ejs","hash":"3aeb581bd78ab8e15b858e4c44c03bcf92f20b9e","modified":1605192443572},{"_id":"themes/hexo-theme-matery/layout/_partial/gitment.ejs","hash":"90f6218512ef2eab63ada7ad2fc766ae635a2297","modified":1605192443573},{"_id":"themes/hexo-theme-matery/layout/_partial/google-analytics.ejs","hash":"5f4992205617da5f8cc5863c62b5ec46e414e2fb","modified":1605192443573},{"_id":"themes/hexo-theme-matery/layout/_partial/head.ejs","hash":"f8438ac80df005934a330b029de292d26f0b6ecb","modified":1605192443573},{"_id":"themes/hexo-theme-matery/layout/_partial/header.ejs","hash":"59e38c70f3d8e7165e686e5e84a627835f4321b0","modified":1605192443573},{"_id":"themes/hexo-theme-matery/layout/_partial/index-cover.ejs","hash":"76b4a37e0364380b143fdf94bf1a5e6941564414","modified":1605192443574},{"_id":"themes/hexo-theme-matery/layout/_partial/livere.ejs","hash":"9c3401b42ea7f26410a5593bae93ada7e57b43be","modified":1605192443574},{"_id":"themes/hexo-theme-matery/layout/_partial/minivaline.ejs","hash":"5f09386aece8f9cf31f6059bbde79cd6c5171493","modified":1605192443574},{"_id":"themes/hexo-theme-matery/layout/_partial/mobile-nav.ejs","hash":"cb0cb452be1cd1857ba600f04025b506f3b6fc79","modified":1605192443575},{"_id":"themes/hexo-theme-matery/layout/_partial/navigation.ejs","hash":"78b70ff24b3039c871331ebec114b936c1756cc8","modified":1605192443575},{"_id":"themes/hexo-theme-matery/layout/_partial/paging.ejs","hash":"e2df12cf92a82b1a7a7add2eac1db1d954bc5511","modified":1605192443575},{"_id":"themes/hexo-theme-matery/layout/_partial/post-cover.ejs","hash":"d1c873c5de54498c722e155aadb8c0ec39485dfa","modified":1605192443575},{"_id":"themes/hexo-theme-matery/layout/_partial/post-detail-toc.ejs","hash":"a0de13cde718c7951cbf8eff809e76538e32e8e2","modified":1605192443576},{"_id":"themes/hexo-theme-matery/layout/_partial/post-detail.ejs","hash":"655ea63374186a1d5230648f70ab4d327bb663bb","modified":1605192443576},{"_id":"themes/hexo-theme-matery/layout/_partial/post-statis.ejs","hash":"04889f9031743c6b081d02fa4027b0dbfcc45ecf","modified":1605192443576},{"_id":"themes/hexo-theme-matery/layout/_partial/prev-next.ejs","hash":"c76b78782ea82340104fccc089417572e0adece4","modified":1605192443577},{"_id":"themes/hexo-theme-matery/layout/_partial/reprint-statement.ejs","hash":"0ce3f9361f558b99cc2f059c5e50b0e2a152ae38","modified":1605192443577},{"_id":"themes/hexo-theme-matery/layout/_partial/reward.ejs","hash":"ffc55bc7e73bc698bfc58d8e3780c336b83282cf","modified":1605192443577},{"_id":"themes/hexo-theme-matery/layout/_partial/search.ejs","hash":"81eca110e533693a5369c0cc9106bf0f0432ee37","modified":1605192443578},{"_id":"themes/hexo-theme-matery/layout/_partial/share.ejs","hash":"c941730a2471d6aab367cbb6e09ed08b56c83143","modified":1605192443578},{"_id":"themes/hexo-theme-matery/layout/_partial/social-link.ejs","hash":"6f871bd3a70f720e4e451f1f4f625cbc6d8994a4","modified":1605192443578},{"_id":"themes/hexo-theme-matery/layout/_partial/valine.ejs","hash":"0e4c0a6154aa34007849928ca88f05b6185b256e","modified":1605192443579},{"_id":"themes/hexo-theme-matery/layout/_widget/artitalk.ejs","hash":"b14e486f12b9ac42a273b80e4d785fcb94cf04b2","modified":1605192443579},{"_id":"themes/hexo-theme-matery/layout/_widget/category-cloud.ejs","hash":"1b3df1009234c0112424b497b18b4ad8240b3bc7","modified":1605192443579},{"_id":"themes/hexo-theme-matery/layout/_widget/category-radar.ejs","hash":"1d8747fda89a0b2ca3c7008867cbfeecad0578a6","modified":1605192443579},{"_id":"themes/hexo-theme-matery/layout/_widget/dream.ejs","hash":"9a472ad5591100cdb65d0df9d01034163bd6dd9d","modified":1605192443580},{"_id":"themes/hexo-theme-matery/layout/_widget/music.ejs","hash":"e9e3e327d5de9d7aeadbde32e1d558652d9e9195","modified":1605192443580},{"_id":"themes/hexo-theme-matery/layout/_widget/my-gallery.ejs","hash":"65a2d2f9722f84c7fd98f6bdf79087a14848ebd8","modified":1605192443580},{"_id":"themes/hexo-theme-matery/layout/_widget/my-projects.ejs","hash":"ef60b64021fa349b0048425d858dfcf6c906fede","modified":1605192443580},{"_id":"themes/hexo-theme-matery/layout/_widget/my-skills.ejs","hash":"89a0092df72d23093128f2fbbdc8ca7f83ebcfd9","modified":1605192443581},{"_id":"themes/hexo-theme-matery/layout/_widget/post-charts.ejs","hash":"ab5f986f428215941aeaa0c88aefd440c47d3bcf","modified":1605192443582},{"_id":"themes/hexo-theme-matery/layout/_widget/post-calendar.ejs","hash":"48821e644bc73553d7c5c56d2e8ee111a70cd776","modified":1605192443581},{"_id":"themes/hexo-theme-matery/layout/_widget/recommend.ejs","hash":"8551137e94ca4e2e3b8b63d5626255884cb60cb5","modified":1605192443582},{"_id":"themes/hexo-theme-matery/layout/_widget/tag-cloud.ejs","hash":"fc42b72cddc231f7485cdc1fd6852b66be6add26","modified":1605192443582},{"_id":"themes/hexo-theme-matery/layout/_widget/tag-wordcloud.ejs","hash":"487aacb2454d6bf0d21cdb07ddd1fd5ddbca9038","modified":1605192443583},{"_id":"themes/hexo-theme-matery/layout/_widget/video.ejs","hash":"a0e002377af2a7f7e4da6d9a644de97adb035925","modified":1605192443583},{"_id":"themes/hexo-theme-matery/source/css/gitment.css","hash":"2bd15cc17dca35ac3ecc0acf167a23a1dd362acd","modified":1605192443586},{"_id":"themes/hexo-theme-matery/source/css/matery.css","hash":"b53f4b6b7b2d992c904a9bf98b504fba247b220e","modified":1605192443587},{"_id":"themes/hexo-theme-matery/source/css/my-gitalk.css","hash":"eeda46a83d0db1cc239a9cd27d544faf663f9883","modified":1605192443587},{"_id":"themes/hexo-theme-matery/source/css/my.css","hash":"10577fbc30f241b126d1b51b1f56136ecba86b19","modified":1605192443587},{"_id":"themes/hexo-theme-matery/source/js/search.js","hash":"e1482406c58ea2a0eb178d7e4efb2c879cdddc80","modified":1605192443588},{"_id":"themes/hexo-theme-matery/languages/zh-HK.yml","hash":"ae34ac0e175c3037675722e436637efbceea32f0","modified":1605192443568},{"_id":"themes/hexo-theme-matery/source/medias/avatar.jpg","hash":"2a6287308628881ce27b9a7de53ba15c2be00d02","modified":1605192443691},{"_id":"themes/hexo-theme-matery/source/medias/comment_bg.png","hash":"dfc93d24081884fbc58cab0f8fd19e77d31d6123","modified":1605192443701},{"_id":"themes/hexo-theme-matery/source/medias/icp.png","hash":"27a96f31f7d0413c6ade6f40e06f021f501151c7","modified":1605192443724},{"_id":"themes/hexo-theme-matery/source/medias/logo.png","hash":"d9095f5ea8719374d9d1ff020279426f5b2a1396","modified":1605192443724},{"_id":"themes/hexo-theme-matery/source/libs/animate/animate.min.css","hash":"97afa151569f046b2e01f27c1871646e9cd87caf","modified":1605192443589},{"_id":"themes/hexo-theme-matery/source/libs/aos/aos.css","hash":"191a3705a8f63e589a50a0ff2f2c5559f1a1b6b2","modified":1605192443590},{"_id":"themes/hexo-theme-matery/source/libs/aos/aos.js","hash":"02bfb40b0c4b6e9b0b4081218357145cbb327d74","modified":1605192443591},{"_id":"themes/hexo-theme-matery/source/libs/aplayer/APlayer.min.css","hash":"07372a2ba507388d0fed166d761b1c2c2a659dce","modified":1605192443593},{"_id":"themes/hexo-theme-matery/source/libs/background/ribbon-dynamic.js","hash":"052b80c29e6bc585aa28d4504b743bdbac220a88","modified":1605192443631},{"_id":"themes/hexo-theme-matery/source/libs/aplayer/APlayer.min.js","hash":"22caa28ff6b41a16ff40f15d38f1739e22359478","modified":1605192443594},{"_id":"themes/hexo-theme-matery/source/libs/background/ribbon-refresh.min.js","hash":"6d98692b2cad8c746a562db18b170b35c24402f4","modified":1605192443632},{"_id":"themes/hexo-theme-matery/source/libs/background/ribbon.min.js","hash":"6a99d494c030388f96f6086a7aaa0f03f3fe532e","modified":1605192443632},{"_id":"themes/hexo-theme-matery/source/libs/background/canvas-nest.js","hash":"65333d0dbb9c1173a1b13031b230161fc42c8b2f","modified":1605192443631},{"_id":"themes/hexo-theme-matery/source/libs/codeBlock/codeBlockFuction.js","hash":"c7ab06d27a525b15b1eb69027135269e9b9132fb","modified":1605192443632},{"_id":"themes/hexo-theme-matery/source/libs/codeBlock/codeShrink.js","hash":"201e8cd761b4be557247bdaf1ebc7c11c83194f6","modified":1605192443634},{"_id":"themes/hexo-theme-matery/source/libs/codeBlock/codeLang.js","hash":"bac88b4d4e3679732d29bd037c34f089cf27cf05","modified":1605192443634},{"_id":"themes/hexo-theme-matery/source/libs/cryptojs/crypto-js.min.js","hash":"5989527a378b55011a59522f41eeb3981518325c","modified":1605192443635},{"_id":"themes/hexo-theme-matery/source/libs/codeBlock/codeCopy.js","hash":"6d39a766af62e625f177c4d5cf3adc35eed71e61","modified":1605192443634},{"_id":"themes/hexo-theme-matery/source/libs/dplayer/DPlayer.min.css","hash":"f7d19655f873b813ffba5d1a17145c91f82631b8","modified":1605192443636},{"_id":"themes/hexo-theme-matery/source/js/matery.js","hash":"b86de5fe3e9766b7ff80df12ea41c3a9e30825f7","modified":1605192443588},{"_id":"themes/hexo-theme-matery/source/libs/gitalk/gitalk.css","hash":"940ded3ea12c2fe1ab0820d2831ec405f3f1fe9f","modified":1605192443643},{"_id":"themes/hexo-theme-matery/source/libs/gitment/gitment-default.css","hash":"2903c59ee06b965bef32e937bd69f5b0b2190717","modified":1605192443650},{"_id":"themes/hexo-theme-matery/source/libs/instantpage/instantpage.js","hash":"83ce8919b1a69b2f1809ffaf99b52a8627e650e9","modified":1605192443651},{"_id":"themes/hexo-theme-matery/source/libs/jqcloud/jqcloud-1.0.4.min.js","hash":"257eaae3020599e4939f50d5008a743827f25b8c","modified":1605192443651},{"_id":"themes/hexo-theme-matery/source/libs/jqcloud/jqcloud.css","hash":"20d9f11a19d95c70e27cb922e0d6dccbec4eae89","modified":1605192443651},{"_id":"themes/hexo-theme-matery/source/libs/masonry/masonry.pkgd.min.js","hash":"ff940b4ea68368ca0e4d5560cbb79fb147dfc3c5","modified":1605192443661},{"_id":"themes/hexo-theme-matery/source/libs/minivaline/MiniValine.js","hash":"fbb58c37e2c74f127ae0c566afa9b48889aab79f","modified":1605192443671},{"_id":"themes/hexo-theme-matery/source/libs/others/busuanzi.pure.mini.js","hash":"6e41f31100ae7eb3a6f23f2c168f6dd56e7f7a9a","modified":1605192443672},{"_id":"themes/hexo-theme-matery/source/libs/others/clicklove.js","hash":"6a39b8c683ba5dcd92f70c6ab45d1cfac3213e8e","modified":1605192443672},{"_id":"themes/hexo-theme-matery/source/libs/scrollprogress/scrollProgress.min.js","hash":"777ffe5d07e85a14fbe97d846f45ffc0087251cc","modified":1605192443672},{"_id":"themes/hexo-theme-matery/source/libs/tocbot/tocbot.min.js","hash":"5ec27317f0270b8cf6b884c6f12025700b9a565c","modified":1605192443688},{"_id":"themes/hexo-theme-matery/source/libs/tocbot/tocbot.css","hash":"9ab8ef576c9a57115194152e79cca79b0a41dd70","modified":1605192443687},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/10.jpg","hash":"98e7f6fd9c97d4de9044b6871ca08ebf14db11b9","modified":1605192443704},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/13.jpg","hash":"35a320174f8e316e3eadaec658024276b651c6e9","modified":1605192443707},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/15.jpg","hash":"da0fbee3b7bde1607eace377ddf834c0be99edfe","modified":1605192443709},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/16.jpg","hash":"97a829c4bc94f9d2929b20a1a9b798c57b9f7205","modified":1605192443709},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/2.jpg","hash":"4bba691cf71a517ecaeaf42afd3e8f8b31e346c1","modified":1605192443716},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/21.jpg","hash":"b26edb128bb0bf58b23fd2f014e9555e89a2ca3b","modified":1605192443717},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/22.jpg","hash":"754579747a3e99747d890fca3162f370b96a7941","modified":1605192443718},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/23.jpg","hash":"7d7f37da3fa7128343adac23866449eb2c6a549a","modified":1605192443718},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/3.jpg","hash":"6ec646c2a70f5f11edacf225c1477f2200a37a96","modified":1605192443719},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/5.jpg","hash":"41ca20129a37fedc573eec28dd7d7b9e5b09228a","modified":1605192443720},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/8.jpg","hash":"8e4b7186352085483ca1174c7c0800114c48df8b","modified":1605192443722},{"_id":"themes/hexo-theme-matery/source/medias/reward/alipay.jpg","hash":"1abc719b95d1b26f1f898e6b0a9b7609146e332f","modified":1605192443726},{"_id":"themes/hexo-theme-matery/source/medias/reward/wechat.png","hash":"fe93385aa92fe328e01c8221a80b039be9e4e140","modified":1605192443726},{"_id":"themes/hexo-theme-matery/source/libs/awesome/webfonts/fa-regular-400.eot","hash":"439c8afd3373acb4a73135a34e220464a89cd5e2","modified":1605192443614},{"_id":"themes/hexo-theme-matery/source/libs/awesome/webfonts/fa-regular-400.woff","hash":"59439d3ad31d856d78ec3e2bd9f1eafa2c7a581c","modified":1605192443617},{"_id":"themes/hexo-theme-matery/source/libs/awesome/webfonts/fa-regular-400.ttf","hash":"0f4bd02942a54a6b3200d9078adff88c2812e751","modified":1605192443616},{"_id":"themes/hexo-theme-matery/source/libs/awesome/webfonts/fa-regular-400.woff2","hash":"f6f653b4ea8fc487bdb590d39d5a726258a55f40","modified":1605192443617},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/css/lightgallery.min.css","hash":"1b7227237f9785c66062a4811508916518e4132c","modified":1605192443657},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/fonts/lg.eot","hash":"54caf05a81e33d7bf04f2e420736ce6f1de5f936","modified":1605192443657},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/fonts/lg.svg","hash":"9c6632aeec67d3e84a1434884aa801514ff8103b","modified":1605192443658},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/fonts/lg.woff","hash":"3048de344dd5cad4624e0127e58eaae4b576f574","modified":1605192443658},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/fonts/lg.ttf","hash":"f6421c0c397311ae09f9257aa58bcd5e9720f493","modified":1605192443658},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/img/loading.gif","hash":"15a76af2739482d8de7354abc6d8dc4fca8d145e","modified":1605192443659},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/img/video-play.png","hash":"2962e03ddbe04d7e201a5acccac531a2bbccddfc","modified":1605192443659},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/img/youtube-play.png","hash":"f8d11384d33b7a79ee2ba8d522844f14d5067a80","modified":1605192443659},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/img/vimeo-play.png","hash":"9b72fc0f86a01467ed0b68c9cc4d604ec316d517","modified":1605192443659},{"_id":"themes/hexo-theme-matery/source/libs/share/css/share.min.css","hash":"8a778a86f3ce9a042df6be63a9f1039631e351a5","modified":1605192443674},{"_id":"themes/hexo-theme-matery/source/libs/share/fonts/iconfont.eot","hash":"00ff749c8e202401190cc98d56087cdda716abe4","modified":1605192443676},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/js/lightgallery-all.min.js","hash":"9f5ef4bc8a0a3c746ca4f3c3e6d64493b1a977d8","modified":1605192443660},{"_id":"themes/hexo-theme-matery/source/libs/share/fonts/iconfont.svg","hash":"1d56c9d5db0273f07c43cc1397e440f98ba7827a","modified":1605192443678},{"_id":"themes/hexo-theme-matery/source/libs/share/fonts/iconfont.ttf","hash":"afd898f59d363887418669520b24d175f966a083","modified":1605192443679},{"_id":"themes/hexo-theme-matery/source/libs/share/fonts/iconfont.woff","hash":"2e3fce1dcfbd6e2114e7bfbeaf72d3c62e15a1bd","modified":1605192443680},{"_id":"themes/hexo-theme-matery/source/libs/share/js/jquery.share.min.js","hash":"41367dcb857e02e3c417ebe68a554ce1d4430806","modified":1605192443682},{"_id":"themes/hexo-theme-matery/source/libs/share/js/social-share.min.js","hash":"a3090a02786dcd4efc6355c1c1dc978add8d6827","modified":1605192443685},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/7.jpg","hash":"7975141cd64e875122c0ea33daaca1a06bf00b8e","modified":1605192443721},{"_id":"themes/hexo-theme-matery/source/libs/dplayer/DPlayer.min.js","hash":"c3bad7b265574fab0ae4d45867422ea1cb9d6599","modified":1605192443637},{"_id":"themes/hexo-theme-matery/source/libs/gitment/gitment.js","hash":"28c02c45ce568e084cd1041dc493f83f9c6c88c6","modified":1605192443650},{"_id":"themes/hexo-theme-matery/source/libs/jquery/jquery.min.js","hash":"2115753ca5fb7032aec498db7bb5dca624dbe6be","modified":1605192443656},{"_id":"themes/hexo-theme-matery/source/libs/valine/Valine.min.js","hash":"6cbdbf91e1f046dd41267a5ff0691a1fccba99df","modified":1605192443689},{"_id":"themes/hexo-theme-matery/source/medias/banner/2.jpg","hash":"39fb2535460ce66cc0b34e07ffb9411db1405f09","modified":1605192443694},{"_id":"themes/hexo-theme-matery/source/medias/banner/3.jpg","hash":"4ac047e92d0363b1a61ab756aca6dac13fb77494","modified":1605192443695},{"_id":"themes/hexo-theme-matery/source/medias/banner/0.jpg","hash":"69ec96cd9b4bc3aa631adc9da61353f50c39f031","modified":1605192443692},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/1.jpg","hash":"684ae89de8cb7acefae19f5aee6c612037c46393","modified":1605192443704},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/11.jpg","hash":"f55972ce7175684f2b11c3c9fc2b5b14bccbfae8","modified":1605192443705},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/12.jpg","hash":"8a4b2e7d92ae95c3b0c921db23c35aa9a41a7d58","modified":1605192443706},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/14.jpg","hash":"38e11221406785bcd93aa9cd23e568e164630ef1","modified":1605192443708},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/0.jpg","hash":"1c3300f029fc85d6dda6fa4f1d699551034cdaf7","modified":1605192443703},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/17.jpg","hash":"42d47903551ee81885c1386022982cae165841c5","modified":1605192443710},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/18.jpg","hash":"64829272ec85bb819d55ff89e5b5fd6f64aa436b","modified":1605192443714},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/19.jpg","hash":"eb250906fdbc0c408f42ae9933725bc1a05d79fb","modified":1605192443715},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/20.jpg","hash":"3b11f9b461168d907073f793190865fe621a8573","modified":1605192443717},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/4.jpg","hash":"e06c47de27619984be9d5d02947f8370a432dfea","modified":1605192443719},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/9.jpg","hash":"b956a2291a04b2132366b53666cf34858b8bdb1f","modified":1605192443723},{"_id":"themes/hexo-theme-matery/source/libs/awesome/css/all.css","hash":"ecc41e32ad2696877a1656749841f3b5543bbe3d","modified":1605192443596},{"_id":"themes/hexo-theme-matery/source/libs/awesome/webfonts/fa-brands-400.ttf","hash":"91cbeeaceb644a971241c08362898599d6d968ce","modified":1605192443612},{"_id":"themes/hexo-theme-matery/source/libs/awesome/webfonts/fa-brands-400.eot","hash":"22f9e7d5226408eb2d0a11e118257a3ca22b8670","modified":1605192443599},{"_id":"themes/hexo-theme-matery/source/libs/awesome/webfonts/fa-brands-400.woff","hash":"18838f5260317da3c5ed29bf844ac8a4f7ad0529","modified":1605192443613},{"_id":"themes/hexo-theme-matery/source/libs/awesome/webfonts/fa-brands-400.woff2","hash":"a46bd47ff0a90b812aafafda587d095cdb844271","modified":1605192443613},{"_id":"themes/hexo-theme-matery/source/libs/awesome/webfonts/fa-solid-900.woff","hash":"92803b8753ceda573c6906774677c5a7081d2fbb","modified":1605192443630},{"_id":"themes/hexo-theme-matery/source/libs/awesome/webfonts/fa-solid-900.woff2","hash":"9c081b88b106c6c04ecb895ba7ba7d3dcb3b55ac","modified":1605192443630},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/6.jpg","hash":"c8f2aa4bbb041158b4e73733a341e6a77c8583f7","modified":1605192443721},{"_id":"themes/hexo-theme-matery/source/medias/cover.jpg","hash":"d4957ff7cc5e88555cd840f2956ab0561e6f1ccf","modified":1605192443702},{"_id":"themes/hexo-theme-matery/source/libs/materialize/materialize.min.js","hash":"c8b4c65651921d888cf5f27430dfe2ad190d35bf","modified":1605192443668},{"_id":"themes/hexo-theme-matery/source/libs/materialize/materialize.min.css","hash":"a69d456e3345e7f59cd0d47d1b3e70fd4a496a05","modified":1605192443667},{"_id":"themes/hexo-theme-matery/source/libs/valine/av-min.js","hash":"541efb9edc1ce425cbe3897cfc25803211fe6a05","modified":1605192443690},{"_id":"themes/hexo-theme-matery/source/medias/banner/1.jpg","hash":"ab122a36998a4f62a61e61a4fc5e00248113413b","modified":1605192443693},{"_id":"themes/hexo-theme-matery/source/medias/banner/5.jpg","hash":"852418f4f09e796e12bc3bab7a1488d3f37d6486","modified":1605192443699},{"_id":"themes/hexo-theme-matery/source/medias/banner/6.jpg","hash":"ed7282cc129c4ff9f322d2f2897fb4aac5c48589","modified":1605192443700},{"_id":"themes/hexo-theme-matery/source/libs/gitalk/gitalk.min.js","hash":"8fefe38f28804f90116bdcb74a0875c9de9f3b7d","modified":1605192443649},{"_id":"themes/hexo-theme-matery/source/libs/awesome/webfonts/fa-regular-400.svg","hash":"3d3a49445343d80f3b553e3e3425b9a7bd49acaf","modified":1605192443615},{"_id":"themes/hexo-theme-matery/source/libs/awesome/webfonts/fa-solid-900.eot","hash":"cab8e84ae5682d1d556e234df9c790985888def8","modified":1605192443619},{"_id":"themes/hexo-theme-matery/source/libs/awesome/webfonts/fa-solid-900.ttf","hash":"9521ed12274c2cbc910cea77657116fcf6545da3","modified":1605192443629},{"_id":"themes/hexo-theme-matery/source/medias/banner/4.jpg","hash":"e5ac5033678afa9d69edffe9a61004f836cb5734","modified":1605192443698},{"_id":"themes/hexo-theme-matery/source/libs/awesome/webfonts/fa-brands-400.svg","hash":"5e2d2a159294576bea69cc3360efb5ffe110ab2d","modified":1605192443610},{"_id":"themes/hexo-theme-matery/source/libs/echarts/echarts.min.js","hash":"9496f386a0da4601cad22c479cc5543913a4d67f","modified":1605192443643},{"_id":"themes/hexo-theme-matery/source/libs/awesome/webfonts/fa-solid-900.svg","hash":"7da88b19e1486f8c968d3cf5ab3f194f01ea17fd","modified":1605192443626},{"_id":"source/_posts/charset.md","hash":"913592e39a29c9d6f982c980932c98a8bc41a3d5","modified":1600785060000},{"_id":"source/_posts/work-debug.md","hash":"8cb539e1eb1b8526766556c7736fdb82abfabc0a","modified":1594903095000},{"_id":"source/_posts/algorithms/binary_search.md","hash":"d448bc241a422c24e25fe1538751bc4404b353cd","modified":1600785060000},{"_id":"source/_posts/algorithms/arrangement_combination.md","hash":"1aa4ef965bf18e156f1ddc31242eb18812c1a42e","modified":1600785060000},{"_id":"source/_posts/decimal.md","hash":"4186b0488770d120e4035a464604f5e488b5fea7","modified":1600785060000},{"_id":"source/_posts/algorithms/circuit_breaker.md","hash":"dc2c4cc4c241b0aa21df5378f8ed0372b4608712","modified":1600785060000},{"_id":"source/_posts/algorithms/bitmap.md","hash":"db7b2927d95cd35940ef99f2022b853ac06c0f46","modified":1600785060000},{"_id":"source/_posts/algorithms/consistent_hash.md","hash":"9462e8eb6f3eb75127b7d799595f5c34b78f3f6c","modified":1600785060000},{"_id":"source/_posts/algorithms/hyper_log_log.md","hash":"0c9ab4bb933051d3f635ddf75ecad0817997ee51","modified":1600785060000},{"_id":"source/_posts/algorithms/insertion_sort.md","hash":"e717285d8bb4daec864dec682e11a0f768257124","modified":1600785060000},{"_id":"source/_posts/algorithms/merge_sort.md","hash":"0dc31164d7c4bcb72d576d0c3afb528ce475d14a","modified":1600785060000},{"_id":"source/_posts/algorithms/probability.md","hash":"3893d7ca70037a3ef9985245863b4bbe8d87a96c","modified":1600785060000},{"_id":"source/_posts/algorithms/select_sort.md","hash":"6aa843219c84cb5c0d3721c714e6e3ec27b8ea49","modified":1600785060000},{"_id":"source/_posts/bug/redis-read_error_on_connection.md","hash":"46c8676e2f9a25e7380932e3f544fb7ece7c300d","modified":1594903095000},{"_id":"source/_posts/english/1.md","hash":"8bfedd4eb99be02a0c091199a383c8c4ba0a73dd","modified":1602401832000},{"_id":"source/_posts/english/2.md","hash":"2d92d1e17e108a9a3e1cfedd28c2a8d5c6ef57cb","modified":1602401832000},{"_id":"source/_posts/english/3.md","hash":"fed00a97e053416bdba33e454b1978c7dff0821c","modified":1602401832000},{"_id":"source/_posts/linux/file_permission.md","hash":"d8fd88c67b4a4043482842edb8d4c5cfb2707c55","modified":1585832685000},{"_id":"source/_posts/linux/lock.md","hash":"0785adee90d09a950d224b2760545ac530099dd4","modified":1594908238000},{"_id":"source/_posts/linux/lock-principle.md","hash":"288def2c1585c87170800918abf7f82f8a074984","modified":1594905706000},{"_id":"source/_posts/linux/stdin.md","hash":"77295cb35a6737e60cee72bf77ecc4ee96fbc789","modified":1594903095000},{"_id":"source/_posts/network/5g.md","hash":"8102fb92f96c1411b024b8a1fd703f48ec063b09","modified":1594903095000},{"_id":"source/_posts/network/nat.md","hash":"35587a5b7b49f7f91a34442b3c2a20248fbeffed","modified":1589641099000},{"_id":"source/_posts/network/tcp_connect_close.md","hash":"cb520b1f1df725c99431823b2c7127b0d11e2724","modified":1589641099000},{"_id":"source/_posts/.md","hash":"d4d52c2868b94a1e8ae85e143c7897148633fc9a","modified":1604241471000},{"_id":"source/_posts/network/tls.md","hash":"81b7d72e8cf424319c8ba156e08ee89abc193020","modified":1589641099000},{"_id":"source/_posts/php/php7-array.md","hash":"b9933e8403e9b66632452f6aa73c83d26369343d","modified":1585832685000},{"_id":"source/_posts/php/spl-datastructures.md","hash":"9be52f65ec1bc445bd586747c0fdb822e77377da","modified":1585226002000},{"_id":"source/_posts/php/spl-iterators.md","hash":"05e638c2ce7e3ba3932d85a889c01e519a96d866","modified":1585226002000},{"_id":"source/_posts/tools/git_command.md","hash":"eb197f03db1acc29f3d6616ddaf8246e7e5d94a4","modified":1598622542000},{"_id":"source/_posts/tools/http_response_status_codes.md","hash":"2365074eb7bb35685c60fe911e713d326f683de8","modified":1585835403000},{"_id":"source/_posts/tools/linux_command.md","hash":"a86dc0dc9049f5ef0dd4fa152bd7d2ee2f95dcce","modified":1589641099000},{"_id":"source/_posts/tools/markdown.md","hash":"c3994eed566f6a4f12bd7998c6f7a4bfae82611f","modified":1587042620000},{"_id":"source/_posts/tools/phpstorm_keymap.md","hash":"311df9e040f6992c74c350e44d947d34fbf1d861","modified":1589641099000},{"_id":"source/_posts/tools/regexp.md","hash":"6ee0d243b5c5968742094e5a418d19308273dd0d","modified":1600785060000},{"_id":"source/_posts//.md","hash":"9b062b0d924f0c8c19d6cfabdfdce82813ea8e3b","modified":1602400458000},{"_id":"source/_posts/mysql/common.md","hash":"229a162be90973489470dae222bc004bf5990b31","modified":1600785060000},{"_id":"source/_posts//.md","hash":"b4ba73d44f900adee7be610dff6b24a2ce7d4aca","modified":1603985621000},{"_id":"source/_posts/mysql/index-optimize.md","hash":"7b8d1b6b52806c4afa5631f33dc42a1bc56e7082","modified":1585832685000},{"_id":"source/_posts/mysql/lock_transaction.md","hash":"e56463a34227177fcc2f31edc061e51c8bf6394f","modified":1594908238000},{"_id":"source/_posts/design_patten/README.md","hash":"a79720f02d4abd1806ffe905836b59f52d0dd773","modified":1600785060000},{"_id":"source/_posts/design_patten/abstract_factory.md","hash":"2897e0c84ce3f8c6d65d988f7f08ab024bce5e12","modified":1600785060000},{"_id":"source/_posts/design_patten/adapter.md","hash":"24dd8606ad5edb67d441b45ffce68759148405da","modified":1600785060000},{"_id":"source/_posts/design_patten/bridge.md","hash":"b6fa861668fe0586758731f342c6c067796894c3","modified":1600785060000},{"_id":"source/_posts/design_patten/builder.md","hash":"87e4862cdaa7a70008a2a0cefb78421a591ae7a2","modified":1600785060000},{"_id":"source/_posts/design_patten/chain_of_responsibility.md","hash":"ab88d6f9a2603df1ffe6fca73f9e201f87b02149","modified":1600785060000},{"_id":"source/_posts/design_patten/command.md","hash":"b1c2ca48bede11bc551786f4c06cfbdfeea9b314","modified":1600785060000},{"_id":"source/_posts/design_patten/composite.md","hash":"d5207cb5c3f7f2ab7e250f7b0f4789048ebfdd10","modified":1600785060000},{"_id":"source/_posts/design_patten/decorator.md","hash":"c1010779c628590b9e1f81b3e2422378c2d714c6","modified":1600785060000},{"_id":"source/_posts/design_patten/facade.md","hash":"3c16c6e31204c4cbcf6f1600116547a0e9a6ad8e","modified":1600785060000},{"_id":"source/_posts/design_patten/factory_method.md","hash":"8a4a589101ef80c22ea8e34255bedd5dec70517b","modified":1600785060000},{"_id":"source/_posts/design_patten/interperter.md","hash":"218b65953f04e53018fe0ead84a1b90a055e27f2","modified":1600785060000},{"_id":"source/_posts/design_patten/mediator.md","hash":"480fde2d201404e83a7da336702af04e6082340b","modified":1600785060000},{"_id":"source/_posts/design_patten/flyweight.md","hash":"a35ed40bc9a589790ef6b689949cdd3e5f2aea21","modified":1600785060000},{"_id":"source/_posts/design_patten/memento.md","hash":"b114d919cc8a7aa64df1d17c7e8c1574397e5cf4","modified":1600785060000},{"_id":"source/_posts/design_patten/observer.md","hash":"8cd1d7d28208834d13c9570f332f3afb8eb747b9","modified":1600785060000},{"_id":"source/_posts/design_patten/operation.md","hash":"30aa215d50f9ae5ed1886258e7fab8e1507841f7","modified":1600785060000},{"_id":"source/_posts/design_patten/prototype.md","hash":"dae632da0f8b98d327c4bcc1c9dd569a43f37776","modified":1600785060000},{"_id":"source/_posts/design_patten/proxy.md","hash":"51452520401264520c64ccbcea9c0b3f6a1bcf0a","modified":1600785060000},{"_id":"source/_posts/design_patten/singleton.md","hash":"a166f3b1b31b13b08125c4bfac18cbdefc24dee1","modified":1600785060000},{"_id":"source/_posts/design_patten/state.md","hash":"70091bfb2c86a1f381316d6d0e4d7b3a8f63d048","modified":1600785060000},{"_id":"source/_posts/design_patten/state_work.md","hash":"f7584554a75118d464ad5d78670a0ed465477e2a","modified":1600785060000},{"_id":"source/_posts/design_patten/strategy.md","hash":"86b9558aef146c85e767c06eb14df1b34b5912bb","modified":1600785060000},{"_id":"source/_posts/design_patten/template_method.md","hash":"b9f230691d553c9f46dabee72e5f904a788022dd","modified":1600785060000},{"_id":"source/_posts/design_patten/visitor.md","hash":"3ec863fa3e6dcfe05413ca93d1b84d3af728f63b","modified":1600785060000},{"_id":"source/_posts/algorithms/tree/binary_tree.md","hash":"81a450a7161668208ac5e6f22f29e80e816d1d36","modified":1600785060000},{"_id":"source/_posts/algorithms/tree/balanced_binary_tree.md","hash":"681d4448ba283d9d6e425c9c5b63b21469ae3ba5","modified":1598366103000},{"_id":"source/_posts/algorithms/bubble_sort.md","hash":"1c86137c4f8df9c4af7794674a4b0bd2bb9a38e4","modified":1600785060000},{"_id":"source/_drafts/english/1.md","hash":"8bfedd4eb99be02a0c091199a383c8c4ba0a73dd","modified":1602401832000},{"_id":"source/_drafts/english/3.md","hash":"fed00a97e053416bdba33e454b1978c7dff0821c","modified":1602401832000},{"_id":"source/_drafts/english/2.md","hash":"2d92d1e17e108a9a3e1cfedd28c2a8d5c6ef57cb","modified":1602401832000},{"_id":"source/categories/index.md","hash":"abc3668f39b80c90a74f32d5888c3acf3f376b37","modified":1605271968935},{"_id":"source/contact/index.md","hash":"a95e30e238ed4ae9b4d478b372acfa0e98ec1560","modified":1605272045334},{"_id":"source/404.md","hash":"0dc985bca5a6cd6c57f9960fbf9371264708473b","modified":1605272301305},{"_id":"source/_data/friends.json","hash":"93061f196a60daf05aeb287a0fda7d399c5ccb67","modified":1605272349971},{"_id":"source/tags/index.md","hash":"0bbf6f2387c2f078b11d883dad06c75188ae7952","modified":1605272000989},{"_id":"source/friends/index.md","hash":"e2fbb86e7719541129f8df697ca883696bc4d750","modified":1605272215125},{"_id":"source/about/index.md","hash":"b0264dc1b0d44133644252af1af0e82f9c8990d5","modified":1605272022985},{"_id":"public/atom.xml","hash":"d552baed26b86ae424f8bc257f93bb47a5df5c64","modified":1605279811978},{"_id":"public/search.xml","hash":"b2b4c0ae0f6028d1d7d270906f863d75e7f71ffd","modified":1605279811978},{"_id":"public/404.html","hash":"40d25cf3656078391be71ac83a5f37ff1b321c07","modified":1605279811978},{"_id":"public/contact/index.html","hash":"7981cbd9335c1d5c37855940aa4a26337a16380c","modified":1605279811978},{"_id":"public/about/index.html","hash":"6572f3e1a1083122d2a8e833daf252d58eb4c0fb","modified":1605279811978},{"_id":"public/categories/index.html","hash":"15fb77263a7c5c86e4d801e1da4f33a8e8a99281","modified":1605279811978},{"_id":"public/friends/index.html","hash":"af45467f41dc881acf4d915f98d8ba21bd6a5e6a","modified":1605279811978},{"_id":"public/tags/index.html","hash":"a4dd3b1a49571c56e707e252ec3bc905493a43d0","modified":1605279811978},{"_id":"public/2020/11/12/hello-world.html","hash":"10d7ce0ed7a72c1ccc25dbd2fde70cb89e0519b1","modified":1605279811978},{"_id":"public/2020/11/01/wo-neng-chang-de-ge.html","hash":"fa1d983798a6d4192c1037698ff1b84cb529419c","modified":1605279811978},{"_id":"public/2020/10/11/guo-cui/zui-mei-gu-shi-ci.html","hash":"96296f56344571d52341157bc6b03ffb7737e5c9","modified":1605279811978},{"_id":"public/2020/08/25/algorithms/tree/balanced-binary-tree.html","hash":"a36b7a9bb09b474da4b65bc8292d3c11c9f65a10","modified":1605279811978},{"_id":"public/2020/08/21/guo-cui/dao-de-jing.html","hash":"41f9766f82d41965ba9185eb5e06362bd55c8dee","modified":1605279811978},{"_id":"public/2020/08/18/algorithms/tree/binary-tree.html","hash":"65e6089eb47b75e74439d361c9d156263e5d5631","modified":1605279811978},{"_id":"public/2020/08/02/mysql/common.html","hash":"10ac8d8a3fbcc1d3a121c26a61cfe03c185c45ef","modified":1605279811978},{"_id":"public/2020/07/16/linux/lock.html","hash":"805b4e9aae97222dfa0094a187c5db19aff57828","modified":1605279811978},{"_id":"public/2020/06/07/linux/stdin.html","hash":"2333873236eb03171a8ee66422a2d843e5ca5f4f","modified":1605279811978},{"_id":"public/2020/06/04/bug/redis-read-error-on-connection.html","hash":"dde5b598bf4413fa1c32da9da39277e0c9c64535","modified":1605279811978},{"_id":"public/2020/05/24/network/5g.html","hash":"6a4f9cabfb9d738dd91adb83a8e2a5fb5d2225c8","modified":1605279811978},{"_id":"public/2020/05/16/mysql/lock-transaction.html","hash":"018803392ef31f1c88cac129cc4e50d87976e3e6","modified":1605279811978},{"_id":"public/2020/05/12/charset.html","hash":"3cb3960e46ff4bf9bd17ac5f7da38165393cf355","modified":1605279811978},{"_id":"public/2020/05/12/algorithms/bitmap.html","hash":"09080b39acdf63e4f40d9a8e7367f2d5ec48d855","modified":1605279811978},{"_id":"public/2020/05/12/algorithms/hyper-log-log.html","hash":"4ce0fd3e52c7f8182607b1b62f0e8903f0e0116b","modified":1605279811978},{"_id":"public/2020/05/12/tools/phpstorm-keymap.html","hash":"716c1693650abdef9b91c650506fc7b781d9e853","modified":1605279811978},{"_id":"public/2020/05/12/decimal.html","hash":"b211b84678797f14aa8e1a454e6a2e8e9f908ac4","modified":1605279811978},{"_id":"public/2020/04/25/network/nat.html","hash":"be3527d4ca8d4095169c5e7f7687eed8dc897482","modified":1605279811978},{"_id":"public/2020/04/14/network/tls.html","hash":"d40a3ecd55b6dfbbb0c5bb7213e3b54484b9bcdc","modified":1605279811978},{"_id":"public/2020/04/14/tools/markdown.html","hash":"629f6e4c91a0078de736e8ac915953a5011d5bc5","modified":1605279811978},{"_id":"public/2020/04/14/tools/regexp.html","hash":"aa203a1dcb190f13b1ea69c083166752f4d229d1","modified":1605279811978},{"_id":"public/2020/04/02/network/tcp-connect-close.html","hash":"594504c77cdc1e43ece65f3ffdfd8c85b4eccbb9","modified":1605279811978},{"_id":"public/2020/04/01/tools/http-response-status-codes.html","hash":"6e8bb974b1fef400f7d7b219b0d08ff6a54df7b6","modified":1605279811978},{"_id":"public/2020/03/29/linux/file-permission.html","hash":"f4d29f89bf608c785839ebf6d333e20db56fae32","modified":1605279811978},{"_id":"public/2020/03/26/tools/git-command.html","hash":"73bd242470cb7a4a1d2fdccaa6bdbc95e6d17dbc","modified":1605279811978},{"_id":"public/2020/03/26/tools/linux-command.html","hash":"b1140a0e8c361d0fbc7838dd7dbac0368cad0846","modified":1605279811978},{"_id":"public/2019/10/11/work-debug.html","hash":"c32eaed629b2a9344077a3f5bf00504d87d43492","modified":1605279811978},{"_id":"public/2019/10/11/mysql/index-optimize.html","hash":"d6908787bb9f32e0d65231a8c55a11a6c006fde6","modified":1605279811978},{"_id":"public/2019/10/11/linux/lock-principle.html","hash":"6bbfc90024625b9ec12cdaff5f5dde655686247f","modified":1605279811978},{"_id":"public/2019/10/11/php/php7-array.html","hash":"1af171500f4632897d7ca1391027286c8286f19e","modified":1605279811978},{"_id":"public/2019/04/01/algorithms/circuit-breaker.html","hash":"ab10725688cc37b0b0abccee02d244e280ed13ac","modified":1605279811978},{"_id":"public/2019/04/01/algorithms/consistent-hash.html","hash":"6a7f22265746db6d8348a5d44f64f60e60d56210","modified":1605279811978},{"_id":"public/2019/04/01/algorithms/probability.html","hash":"95dbe66c12aba0fd50318de08c06bca38a66d71c","modified":1605279811978},{"_id":"public/2019/03/01/algorithms/binary-search.html","hash":"6bd5a0ba1f9ad2fd09428dfe3903cd8d9afe26cc","modified":1605279811978},{"_id":"public/2019/03/01/algorithms/arrangement-combination.html","hash":"50b5a2bbf798fbcdcee5f755af311725df8b77ba","modified":1605279811978},{"_id":"public/2019/03/01/algorithms/bubble-sort.html","hash":"64546f98d683d7475087182e1363734a3e734a4e","modified":1605279811978},{"_id":"public/2019/03/01/algorithms/insertion-sort.html","hash":"c5df7d2427dfc95a1937b0234870a288e37d3c2d","modified":1605279811978},{"_id":"public/2019/03/01/algorithms/merge-sort.html","hash":"15e742a8efcf6844adf6a75f1d995bb64e98447a","modified":1605279811978},{"_id":"public/2019/03/01/algorithms/select-sort.html","hash":"1a5ce2d1662b8044837149015bc2740248b2e636","modified":1605279811978},{"_id":"public/2018/10/23/design-patten/visitor.html","hash":"60c980c96381ffc48dfa0b81a32513c2ad1af26e","modified":1605279811978},{"_id":"public/2018/10/22/design-patten/template-method.html","hash":"4848f6ef80ae55e315f6b441998042c1d5597c3d","modified":1605279811978},{"_id":"public/2018/10/21/design-patten/strategy.html","hash":"508805b4826540184bb307c9d7af28b00abff016","modified":1605279811978},{"_id":"public/2018/10/20/design-patten/state.html","hash":"8c6c9e2916c614b0285f8ce1a547b52c8332d2d6","modified":1605279811978},{"_id":"public/2018/10/20/design-patten/state-work.html","hash":"be66d9e9c78adb50df3fd30a614efc5167bdb290","modified":1605279811978},{"_id":"public/2018/10/19/design-patten/singleton.html","hash":"6f69f8eec5ea001e208466bad3b21ad5aca25992","modified":1605279811978},{"_id":"public/2018/10/18/design-patten/proxy.html","hash":"e3a9856fe1688bbb03a183245a5a59c8e3232db3","modified":1605279811978},{"_id":"public/2018/10/17/design-patten/prototype.html","hash":"3aec911ed6fb85f560a9d0c5aabc703539ca6397","modified":1605279811978},{"_id":"public/2018/10/16/design-patten/operation.html","hash":"0a657c4230db8e6fd9b72ee35bd891d7cfbf3820","modified":1605279811978},{"_id":"public/2018/10/15/design-patten/observer.html","hash":"eb04c7c844f8007895ccd81da5fabf0a52ce26a0","modified":1605279811978},{"_id":"public/2018/10/14/design-patten/memento.html","hash":"74ca46a7b21904a8b757262072f6266d4b008e9f","modified":1605279811978},{"_id":"public/2018/10/13/design-patten/mediator.html","hash":"56be625e5c8f2d87cc12166262effefacf8fc6c5","modified":1605279811978},{"_id":"public/2018/10/12/design-patten/interperter.html","hash":"5e7031c83f7b9f57dd130eaf39c2c2331fe7ba7b","modified":1605279811978},{"_id":"public/2018/10/11/design-patten/flyweight.html","hash":"ff9ae27358d8aa44d87df25f844c3d7b502547af","modified":1605279811978},{"_id":"public/2018/10/10/design-patten/factory-method.html","hash":"53a1089179b4d5ffff05941a091336cd5fb4360c","modified":1605279811978},{"_id":"public/2018/10/09/design-patten/facade.html","hash":"9ee5d0a3bfedb61efc33f775e9822df7b5f803e8","modified":1605279811978},{"_id":"public/2018/10/08/design-patten/decorator.html","hash":"a403a58e12a657c6483dfcb394c6bd5cb6e571ed","modified":1605279811978},{"_id":"public/2018/10/07/design-patten/composite.html","hash":"39639146415533ce6aa04898f8576c911acceaec","modified":1605279811978},{"_id":"public/2018/10/06/design-patten/command.html","hash":"6701f46fd427fd1ca94243dac72ad12afc7b2d9e","modified":1605279811978},{"_id":"public/2018/10/05/design-patten/chain-of-responsibility.html","hash":"d464f94c8190e408e33403a8bb79e7092a332ada","modified":1605279811978},{"_id":"public/2018/10/04/design-patten/builder.html","hash":"661842bc8cd1f5382549c9f7d9147951ece930d0","modified":1605279811978},{"_id":"public/2018/10/03/design-patten/bridge.html","hash":"d13888a229fdec19c626381317791557179dafca","modified":1605279811978},{"_id":"public/2018/10/02/design-patten/adapter.html","hash":"77bf345301d70aa836965c76cb8e971255766134","modified":1605279811978},{"_id":"public/2018/10/01/design-patten/readme.html","hash":"d0a667be414acefc88204ed004e93108e390eb0b","modified":1605279811978},{"_id":"public/2018/10/01/design-patten/abstract-factory.html","hash":"383638c64956a358f0a407e2ae2df47b534c8329","modified":1605279811978},{"_id":"public/2017/12/20/php/spl-datastructures.html","hash":"e0143642ec141425b8263164551fbb17b134d150","modified":1605279811978},{"_id":"public/2017/12/20/php/spl-iterators.html","hash":"751dbb62421d84fb29c19d31b05b42ba097add34","modified":1605279811978},{"_id":"public/categories//index.html","hash":"17385e51caaa17623a2e8c1d64487d80f1b07415","modified":1605279811978},{"_id":"public/categories//index.html","hash":"00c6eb8dc0aca2f1d3d14c8b907d2ccea0ce4d22","modified":1605279811978},{"_id":"public/categories/PHP/index.html","hash":"ca6b8ad4a359ef8145968f68f19c024e08cab8eb","modified":1605279811978},{"_id":"public/categories/PHP/page/2/index.html","hash":"c5bd0963ffd07ec70a741cd1583e754377f37c8e","modified":1605279811978},{"_id":"public/categories/PHP/page/3/index.html","hash":"fc282e68e866badaf9dfcb076157a6792e0bafc1","modified":1605279811978},{"_id":"public/categories/PHP/page/4/index.html","hash":"25c5d51d1d19c12e00fb737a2dda6ca79f3eb7d8","modified":1605279811978},{"_id":"public/categories/PHP//index.html","hash":"acd05da18bece4b80cd0c6338f135ccedcf96454","modified":1605279811978},{"_id":"public/categories/PHP//index.html","hash":"c83f2be7be5d1c621edfbaccc753f49422980a04","modified":1605279811978},{"_id":"public/categories//index.html","hash":"b743eef4e5f00c144f5b28b8073f0f240d0aaa22","modified":1605279811978},{"_id":"public/categories/Redis/index.html","hash":"31f43fcd995648dea4691ff72b0e43012a40adb3","modified":1605279811978},{"_id":"public/categories/Linux/index.html","hash":"171b375b3d75b037cf95b5b1cebb7b1e13d70001","modified":1605279811978},{"_id":"public/categories/5G/index.html","hash":"6ad0f629aa11721d86c713a1356dbcb7e7d3512b","modified":1605279811978},{"_id":"public/categories/NAT/index.html","hash":"62f00ba534d2a6ec8e4ef4648ce6f55a81d16daf","modified":1605279811978},{"_id":"public/categories/TCP/index.html","hash":"5f91d2ea1b9cf11abeae4958d299808ced50ed1f","modified":1605279811978},{"_id":"public/categories/TLS/index.html","hash":"3e4b277c34f80649931f473612488423bb7679d0","modified":1605279811978},{"_id":"public/categories/Git/index.html","hash":"9d01674c3a5fef6b1ddf05b6914202d8798790e2","modified":1605279811978},{"_id":"public/categories/Markdown/index.html","hash":"2bae208716ed9c823072236d39cf4c8dcd938666","modified":1605279811978},{"_id":"public/categories/Phpstorm/index.html","hash":"131ef30763840540fb2d6dd21ec9c346bc3ead03","modified":1605279811978},{"_id":"public/categories//index.html","hash":"db4b6c5361ed3760d4dd2ca2ce4f3ea35b684dab","modified":1605279811978},{"_id":"public/categories/MySQL/index.html","hash":"0bac369c56887aef401eea7be20b7869da37a02e","modified":1605279811978},{"_id":"public/categories/PHP//index.html","hash":"63a31fb4554f2262a7bc9fb9b00f9203a4424116","modified":1605279811978},{"_id":"public/categories/PHP//page/2/index.html","hash":"449cc578041c02985e610e8dad47c5e46d3a6225","modified":1605279811978},{"_id":"public/categories/PHP//page/3/index.html","hash":"46d76106791d5f009b92753919acf286ad561326","modified":1605279811978},{"_id":"public/categories/Algorithms/index.html","hash":"ff37850b8422d67a7aae325d11a7b1e6fbc17399","modified":1605279811978},{"_id":"public/categories/Http/index.html","hash":"6a2301fab15d4ae278a005faec3e990cfa620535","modified":1605279811978},{"_id":"public/categories//index.html","hash":"8c6742e29f18e8cb49019a2aadbbd18be8281476","modified":1605279811978},{"_id":"public/index.html","hash":"3eb05e29910578e046854f622666ebff283989bd","modified":1605279811978},{"_id":"public/page/2/index.html","hash":"447cfc04959515e909deb16d89b0a3bb3a6715e8","modified":1605279811978},{"_id":"public/page/3/index.html","hash":"3365f12c9192cd9b17d16dabaa01ff2b9ad6b0cf","modified":1605279811978},{"_id":"public/page/4/index.html","hash":"3be6e69000e0f7c59e95fd68d700b136a4dd8b06","modified":1605279811978},{"_id":"public/archives/index.html","hash":"98f54100a74268ee9df3f5446584c72654739797","modified":1605279811978},{"_id":"public/archives/page/2/index.html","hash":"a9cb2326e825663dde93e7cbf4048274f02a2789","modified":1605279811978},{"_id":"public/archives/page/3/index.html","hash":"2cf42b48367c3d006994404e0cc2694d879326fe","modified":1605279811978},{"_id":"public/archives/page/4/index.html","hash":"a1b6f842cd05692decafaf11cf700c6a0655898c","modified":1605279811978},{"_id":"public/archives/page/5/index.html","hash":"7e288e4536c90d99c4d25463995e7de74224176e","modified":1605279811978},{"_id":"public/archives/page/6/index.html","hash":"e968dc5c08fe352a7509472a8d7d0364bd885244","modified":1605279811978},{"_id":"public/archives/2017/index.html","hash":"a2e1f013ad07ef6198f40ab7ae95c11a9dd46a8d","modified":1605279811978},{"_id":"public/archives/2017/12/index.html","hash":"9acf668dee2b97a1b4d77f18f8b5a2b2f11cedd8","modified":1605279811978},{"_id":"public/archives/2018/index.html","hash":"28a8b95c4f180d0c2c49d6e34db3c3eabce0da45","modified":1605279811978},{"_id":"public/archives/2018/page/2/index.html","hash":"7b973c426e76339982694d983c7fa4034caa56a4","modified":1605279811978},{"_id":"public/archives/2018/page/3/index.html","hash":"6534ce9b425369005d0282e1855655be4806ce5e","modified":1605279811978},{"_id":"public/archives/2018/10/index.html","hash":"465b376ce9c28e29adf606d1c864fd497b2630b3","modified":1605279811978},{"_id":"public/archives/2018/10/page/2/index.html","hash":"035b4171746b14ef8372e83a0b0824d25c3a1db8","modified":1605279811978},{"_id":"public/archives/2018/10/page/3/index.html","hash":"6916f658b834eaec258658f8519ba81155966aef","modified":1605279811978},{"_id":"public/archives/2019/index.html","hash":"86c6c09dc65ceceef6817caf432501c10bf43e5f","modified":1605279811978},{"_id":"public/archives/2019/page/2/index.html","hash":"93eab612fe647a430d011f3ccb6a98445cddea38","modified":1605279811978},{"_id":"public/archives/2019/03/index.html","hash":"a64ec4aade23fb2e6ad23e6ba252f07176cb0a63","modified":1605279811978},{"_id":"public/archives/2019/04/index.html","hash":"78a0ec32e96419d0a53aece1549d33b329b94a97","modified":1605279811978},{"_id":"public/archives/2019/10/index.html","hash":"de0c1a69ba1ac7717da5a716c699be7f0aaee3f8","modified":1605279811978},{"_id":"public/archives/2020/index.html","hash":"8a1c1e7f5c8e7954ea58662e30b65a4187c39ff9","modified":1605279811978},{"_id":"public/archives/2020/page/2/index.html","hash":"57c449a4420693c1cad585538aee2463bfe8a91c","modified":1605279811978},{"_id":"public/archives/2020/page/3/index.html","hash":"c2ab205969e801ce1111bfff0c48a30b5a499d89","modified":1605279811978},{"_id":"public/archives/2020/03/index.html","hash":"f0a5686288d175b39b3b383d4c2d0ca0dcd4f272","modified":1605279811978},{"_id":"public/archives/2020/04/index.html","hash":"b49ebf6e8540caa74208a4949c501e8d8d6740fe","modified":1605279811978},{"_id":"public/archives/2020/05/index.html","hash":"63b91f407a95afb3c7ce1e16cbd7a20ed60242c0","modified":1605279811978},{"_id":"public/archives/2020/06/index.html","hash":"9538adfa7c1cac3c1f056101790d363aaeeccf4b","modified":1605279811978},{"_id":"public/archives/2020/07/index.html","hash":"0eeeccf39fb5e60c3f6c3e65222e40f13935acb0","modified":1605279811978},{"_id":"public/archives/2020/08/index.html","hash":"f0847a08ba9e5ca59ddaf6733f0678d0d7f1ba03","modified":1605279811978},{"_id":"public/archives/2020/10/index.html","hash":"5cc119399db8f23fd798b1d53f753d28a255b32d","modified":1605279811978},{"_id":"public/archives/2020/11/index.html","hash":"843a17504447a14b52b197ccacf72567bf3c2e70","modified":1605279811978},{"_id":"public/tags//index.html","hash":"0d2bf20f4194972220710c6faad7b5be2940ff5f","modified":1605279811978},{"_id":"public/tags//index.html","hash":"01303d3c5b7b2835153af1258641f99c70f44936","modified":1605279811978},{"_id":"public/tags/PHP/index.html","hash":"bdac59773e37944663deaeb1b3ef72ff371e4805","modified":1605279811978},{"_id":"public/tags/PHP/page/2/index.html","hash":"11cd18883141224dc8cbd290c33b704215ba16c3","modified":1605279811978},{"_id":"public/tags/PHP/page/3/index.html","hash":"c3086ef34084519e3b1d4f9e187fa3f53c45fa24","modified":1605279811978},{"_id":"public/tags/PHP/page/4/index.html","hash":"689f9bdb7abcd39d21eb3930543357d4e3b9396f","modified":1605279811978},{"_id":"public/tags//index.html","hash":"331a8213d78366851aa23e869639d72645ff74f8","modified":1605279811978},{"_id":"public/tags/Redis/index.html","hash":"982cd60ae53036f8c6da45ab3042332482dc8f6b","modified":1605279811978},{"_id":"public/tags/Linux/index.html","hash":"0b497ef801232c445ef2666666e54e0659378e6d","modified":1605279811978},{"_id":"public/tags/5G/index.html","hash":"0edc865e037032288a33d096018ac2c712b19854","modified":1605279811978},{"_id":"public/tags/Network/index.html","hash":"c269504faf57f78bc7b4aa2194b7954bfebe3ce9","modified":1605279811978},{"_id":"public/tags/NAT/index.html","hash":"349274afb39ef3185c8316cc41bd05f5b7a5d176","modified":1605279811978},{"_id":"public/tags/TCP/index.html","hash":"5aacbc54cfae4682ec0910ca08cfc110812bcea1","modified":1605279811978},{"_id":"public/tags/TLS/index.html","hash":"d10fa263274f0b1fdb2364eb305fd245876a5c70","modified":1605279811978},{"_id":"public/tags/RSA/index.html","hash":"1e4bfd6f1e9ea5c9997f514cc44009021c27ff59","modified":1605279811978},{"_id":"public/tags/Git/index.html","hash":"a68a9c579310314b42cb3b6f6825d8ba29aa5575","modified":1605279811978},{"_id":"public/tags/Markdown/index.html","hash":"e0d5081d02cd835291ab14268d13e05b84b234f1","modified":1605279811978},{"_id":"public/tags/Phpstorm/index.html","hash":"20171630a169f8e1a9bfc9c815844c13e2ef1c07","modified":1605279811978},{"_id":"public/tags//index.html","hash":"6d6fe348891c11ca74dec0231bd8020ec83836c1","modified":1605279811978},{"_id":"public/tags/MySQL/index.html","hash":"354320c649ea2a89dd781c2634c677f5ffe86020","modified":1605279811978},{"_id":"public/tags//index.html","hash":"8e1c73438d77e497b0304218018d722a54e989eb","modified":1605279811978},{"_id":"public/tags//page/2/index.html","hash":"11ac661812e0a6226108201f9c7c80a61c507f31","modified":1605279811978},{"_id":"public/tags//page/3/index.html","hash":"0d22e038a7bcb18ce9accce21aaf61580a88ca01","modified":1605279811978},{"_id":"public/tags/Algorithms/index.html","hash":"db8050a43e0d044254ea658c4412fdceb23b22ab","modified":1605279811978},{"_id":"public/tags/Http/index.html","hash":"5325abad14e5d8dda834982ba2a51da2e5305885","modified":1605279811978},{"_id":"public/tags//index.html","hash":"862856b9759cecc0897e36d1706c8833ded562a3","modified":1605279811978},{"_id":"public/favicon.png","hash":"774fee8c6d0be9dbb010b20f36c06848d06e3da0","modified":1605279811978},{"_id":"public/medias/avatar.jpg","hash":"2a6287308628881ce27b9a7de53ba15c2be00d02","modified":1605279811978},{"_id":"public/medias/logo.png","hash":"d9095f5ea8719374d9d1ff020279426f5b2a1396","modified":1605279811978},{"_id":"public/medias/icp.png","hash":"27a96f31f7d0413c6ade6f40e06f021f501151c7","modified":1605279811978},{"_id":"public/medias/featureimages/10.jpg","hash":"98e7f6fd9c97d4de9044b6871ca08ebf14db11b9","modified":1605279811978},{"_id":"public/medias/featureimages/13.jpg","hash":"35a320174f8e316e3eadaec658024276b651c6e9","modified":1605279811978},{"_id":"public/medias/featureimages/15.jpg","hash":"da0fbee3b7bde1607eace377ddf834c0be99edfe","modified":1605279811978},{"_id":"public/medias/featureimages/16.jpg","hash":"97a829c4bc94f9d2929b20a1a9b798c57b9f7205","modified":1605279811978},{"_id":"public/medias/featureimages/2.jpg","hash":"4bba691cf71a517ecaeaf42afd3e8f8b31e346c1","modified":1605279811978},{"_id":"public/medias/featureimages/21.jpg","hash":"b26edb128bb0bf58b23fd2f014e9555e89a2ca3b","modified":1605279811978},{"_id":"public/medias/featureimages/22.jpg","hash":"754579747a3e99747d890fca3162f370b96a7941","modified":1605279811978},{"_id":"public/medias/featureimages/23.jpg","hash":"7d7f37da3fa7128343adac23866449eb2c6a549a","modified":1605279811978},{"_id":"public/medias/featureimages/3.jpg","hash":"6ec646c2a70f5f11edacf225c1477f2200a37a96","modified":1605279811978},{"_id":"public/medias/comment_bg.png","hash":"dfc93d24081884fbc58cab0f8fd19e77d31d6123","modified":1605279811978},{"_id":"public/medias/featureimages/7.jpg","hash":"7975141cd64e875122c0ea33daaca1a06bf00b8e","modified":1605279811978},{"_id":"public/medias/featureimages/8.jpg","hash":"8e4b7186352085483ca1174c7c0800114c48df8b","modified":1605279811978},{"_id":"public/medias/reward/alipay.jpg","hash":"1abc719b95d1b26f1f898e6b0a9b7609146e332f","modified":1605279811978},{"_id":"public/medias/reward/wechat.png","hash":"fe93385aa92fe328e01c8221a80b039be9e4e140","modified":1605279811978},{"_id":"public/medias/featureimages/5.jpg","hash":"41ca20129a37fedc573eec28dd7d7b9e5b09228a","modified":1605279811978},{"_id":"public/libs/awesome/webfonts/fa-regular-400.eot","hash":"439c8afd3373acb4a73135a34e220464a89cd5e2","modified":1605279811978},{"_id":"public/libs/awesome/webfonts/fa-regular-400.ttf","hash":"0f4bd02942a54a6b3200d9078adff88c2812e751","modified":1605279811978},{"_id":"public/libs/awesome/webfonts/fa-regular-400.woff2","hash":"f6f653b4ea8fc487bdb590d39d5a726258a55f40","modified":1605279811978},{"_id":"public/libs/awesome/webfonts/fa-regular-400.woff","hash":"59439d3ad31d856d78ec3e2bd9f1eafa2c7a581c","modified":1605279811978},{"_id":"public/libs/lightGallery/fonts/lg.eot","hash":"54caf05a81e33d7bf04f2e420736ce6f1de5f936","modified":1605279811978},{"_id":"public/libs/lightGallery/fonts/lg.woff","hash":"3048de344dd5cad4624e0127e58eaae4b576f574","modified":1605279811978},{"_id":"public/libs/lightGallery/fonts/lg.svg","hash":"9c6632aeec67d3e84a1434884aa801514ff8103b","modified":1605279811978},{"_id":"public/libs/lightGallery/fonts/lg.ttf","hash":"f6421c0c397311ae09f9257aa58bcd5e9720f493","modified":1605279811978},{"_id":"public/libs/lightGallery/img/video-play.png","hash":"2962e03ddbe04d7e201a5acccac531a2bbccddfc","modified":1605279811978},{"_id":"public/libs/lightGallery/img/loading.gif","hash":"15a76af2739482d8de7354abc6d8dc4fca8d145e","modified":1605279811978},{"_id":"public/libs/lightGallery/img/youtube-play.png","hash":"f8d11384d33b7a79ee2ba8d522844f14d5067a80","modified":1605279811978},{"_id":"public/libs/lightGallery/img/vimeo-play.png","hash":"9b72fc0f86a01467ed0b68c9cc4d604ec316d517","modified":1605279811978},{"_id":"public/libs/share/fonts/iconfont.eot","hash":"00ff749c8e202401190cc98d56087cdda716abe4","modified":1605279811978},{"_id":"public/libs/share/fonts/iconfont.svg","hash":"1d56c9d5db0273f07c43cc1397e440f98ba7827a","modified":1605279811978},{"_id":"public/libs/share/fonts/iconfont.ttf","hash":"afd898f59d363887418669520b24d175f966a083","modified":1605279811978},{"_id":"public/libs/share/fonts/iconfont.woff","hash":"2e3fce1dcfbd6e2114e7bfbeaf72d3c62e15a1bd","modified":1605279811978},{"_id":"public/css/prism-tomorrow.css","hash":"3b99487dfc9b4e51e9105a93743b92a761840e34","modified":1605279811978},{"_id":"public/medias/banner/2.jpg","hash":"39fb2535460ce66cc0b34e07ffb9411db1405f09","modified":1605279811978},{"_id":"public/medias/banner/3.jpg","hash":"4ac047e92d0363b1a61ab756aca6dac13fb77494","modified":1605279811978},{"_id":"public/medias/banner/0.jpg","hash":"69ec96cd9b4bc3aa631adc9da61353f50c39f031","modified":1605279811978},{"_id":"public/medias/featureimages/1.jpg","hash":"684ae89de8cb7acefae19f5aee6c612037c46393","modified":1605279811978},{"_id":"public/medias/featureimages/11.jpg","hash":"f55972ce7175684f2b11c3c9fc2b5b14bccbfae8","modified":1605279811978},{"_id":"public/medias/featureimages/12.jpg","hash":"8a4b2e7d92ae95c3b0c921db23c35aa9a41a7d58","modified":1605279811978},{"_id":"public/medias/featureimages/14.jpg","hash":"38e11221406785bcd93aa9cd23e568e164630ef1","modified":1605279811978},{"_id":"public/medias/featureimages/0.jpg","hash":"1c3300f029fc85d6dda6fa4f1d699551034cdaf7","modified":1605279811978},{"_id":"public/medias/featureimages/17.jpg","hash":"42d47903551ee81885c1386022982cae165841c5","modified":1605279811978},{"_id":"public/medias/featureimages/18.jpg","hash":"64829272ec85bb819d55ff89e5b5fd6f64aa436b","modified":1605279811978},{"_id":"public/medias/featureimages/19.jpg","hash":"eb250906fdbc0c408f42ae9933725bc1a05d79fb","modified":1605279811978},{"_id":"public/medias/featureimages/20.jpg","hash":"3b11f9b461168d907073f793190865fe621a8573","modified":1605279811978},{"_id":"public/medias/featureimages/4.jpg","hash":"e06c47de27619984be9d5d02947f8370a432dfea","modified":1605279811978},{"_id":"public/medias/featureimages/6.jpg","hash":"c8f2aa4bbb041158b4e73733a341e6a77c8583f7","modified":1605279811978},{"_id":"public/medias/featureimages/9.jpg","hash":"b956a2291a04b2132366b53666cf34858b8bdb1f","modified":1605279811978},{"_id":"public/libs/awesome/webfonts/fa-brands-400.eot","hash":"22f9e7d5226408eb2d0a11e118257a3ca22b8670","modified":1605279811978},{"_id":"public/libs/awesome/webfonts/fa-brands-400.ttf","hash":"91cbeeaceb644a971241c08362898599d6d968ce","modified":1605279811978},{"_id":"public/libs/awesome/webfonts/fa-brands-400.woff2","hash":"a46bd47ff0a90b812aafafda587d095cdb844271","modified":1605279811978},{"_id":"public/libs/awesome/webfonts/fa-brands-400.woff","hash":"18838f5260317da3c5ed29bf844ac8a4f7ad0529","modified":1605279811978},{"_id":"public/libs/awesome/webfonts/fa-solid-900.woff","hash":"92803b8753ceda573c6906774677c5a7081d2fbb","modified":1605279811978},{"_id":"public/libs/awesome/webfonts/fa-solid-900.woff2","hash":"9c081b88b106c6c04ecb895ba7ba7d3dcb3b55ac","modified":1605279811978},{"_id":"public/medias/cover.jpg","hash":"d4957ff7cc5e88555cd840f2956ab0561e6f1ccf","modified":1605279811978},{"_id":"public/medias/banner/1.jpg","hash":"ab122a36998a4f62a61e61a4fc5e00248113413b","modified":1605279811978},{"_id":"public/medias/banner/5.jpg","hash":"852418f4f09e796e12bc3bab7a1488d3f37d6486","modified":1605279811978},{"_id":"public/medias/banner/6.jpg","hash":"ed7282cc129c4ff9f322d2f2897fb4aac5c48589","modified":1605279811978},{"_id":"public/libs/awesome/webfonts/fa-regular-400.svg","hash":"3d3a49445343d80f3b553e3e3425b9a7bd49acaf","modified":1605279811978},{"_id":"public/libs/awesome/webfonts/fa-solid-900.eot","hash":"cab8e84ae5682d1d556e234df9c790985888def8","modified":1605279811978},{"_id":"public/css/gitment.css","hash":"2bd15cc17dca35ac3ecc0acf167a23a1dd362acd","modified":1605279811978},{"_id":"public/css/my-gitalk.css","hash":"eeda46a83d0db1cc239a9cd27d544faf663f9883","modified":1605279811978},{"_id":"public/css/my.css","hash":"10577fbc30f241b126d1b51b1f56136ecba86b19","modified":1605279811978},{"_id":"public/js/search.js","hash":"e1482406c58ea2a0eb178d7e4efb2c879cdddc80","modified":1605279811978},{"_id":"public/js/matery.js","hash":"b86de5fe3e9766b7ff80df12ea41c3a9e30825f7","modified":1605279811978},{"_id":"public/libs/aos/aos.js","hash":"02bfb40b0c4b6e9b0b4081218357145cbb327d74","modified":1605279811978},{"_id":"public/libs/aplayer/APlayer.min.css","hash":"07372a2ba507388d0fed166d761b1c2c2a659dce","modified":1605279811978},{"_id":"public/libs/background/ribbon-dynamic.js","hash":"052b80c29e6bc585aa28d4504b743bdbac220a88","modified":1605279811978},{"_id":"public/libs/background/ribbon-refresh.min.js","hash":"6d98692b2cad8c746a562db18b170b35c24402f4","modified":1605279811978},{"_id":"public/libs/background/ribbon.min.js","hash":"6a99d494c030388f96f6086a7aaa0f03f3fe532e","modified":1605279811978},{"_id":"public/libs/background/canvas-nest.js","hash":"65333d0dbb9c1173a1b13031b230161fc42c8b2f","modified":1605279811978},{"_id":"public/libs/codeBlock/codeBlockFuction.js","hash":"c7ab06d27a525b15b1eb69027135269e9b9132fb","modified":1605279811978},{"_id":"public/libs/codeBlock/codeShrink.js","hash":"201e8cd761b4be557247bdaf1ebc7c11c83194f6","modified":1605279811978},{"_id":"public/libs/codeBlock/codeLang.js","hash":"bac88b4d4e3679732d29bd037c34f089cf27cf05","modified":1605279811978},{"_id":"public/libs/codeBlock/codeCopy.js","hash":"6d39a766af62e625f177c4d5cf3adc35eed71e61","modified":1605279811978},{"_id":"public/libs/instantpage/instantpage.js","hash":"83ce8919b1a69b2f1809ffaf99b52a8627e650e9","modified":1605279811978},{"_id":"public/libs/jqcloud/jqcloud-1.0.4.min.js","hash":"257eaae3020599e4939f50d5008a743827f25b8c","modified":1605279811978},{"_id":"public/libs/jqcloud/jqcloud.css","hash":"20d9f11a19d95c70e27cb922e0d6dccbec4eae89","modified":1605279811978},{"_id":"public/libs/others/busuanzi.pure.mini.js","hash":"6e41f31100ae7eb3a6f23f2c168f6dd56e7f7a9a","modified":1605279811978},{"_id":"public/libs/others/clicklove.js","hash":"6a39b8c683ba5dcd92f70c6ab45d1cfac3213e8e","modified":1605279811978},{"_id":"public/libs/scrollprogress/scrollProgress.min.js","hash":"777ffe5d07e85a14fbe97d846f45ffc0087251cc","modified":1605279811978},{"_id":"public/libs/tocbot/tocbot.css","hash":"9ab8ef576c9a57115194152e79cca79b0a41dd70","modified":1605279811978},{"_id":"public/libs/tocbot/tocbot.min.js","hash":"5ec27317f0270b8cf6b884c6f12025700b9a565c","modified":1605279811978},{"_id":"public/libs/share/css/share.min.css","hash":"8a778a86f3ce9a042df6be63a9f1039631e351a5","modified":1605279811978},{"_id":"public/libs/awesome/webfonts/fa-solid-900.ttf","hash":"9521ed12274c2cbc910cea77657116fcf6545da3","modified":1605279811978},{"_id":"public/libs/aos/aos.css","hash":"191a3705a8f63e589a50a0ff2f2c5559f1a1b6b2","modified":1605279811978},{"_id":"public/libs/gitalk/gitalk.css","hash":"940ded3ea12c2fe1ab0820d2831ec405f3f1fe9f","modified":1605279811978},{"_id":"public/libs/gitment/gitment-default.css","hash":"2903c59ee06b965bef32e937bd69f5b0b2190717","modified":1605279811978},{"_id":"public/libs/masonry/masonry.pkgd.min.js","hash":"ff940b4ea68368ca0e4d5560cbb79fb147dfc3c5","modified":1605279811978},{"_id":"public/libs/lightGallery/css/lightgallery.min.css","hash":"1b7227237f9785c66062a4811508916518e4132c","modified":1605279811978},{"_id":"public/libs/share/js/jquery.share.min.js","hash":"41367dcb857e02e3c417ebe68a554ce1d4430806","modified":1605279811978},{"_id":"public/libs/share/js/social-share.min.js","hash":"a3090a02786dcd4efc6355c1c1dc978add8d6827","modified":1605279811978},{"_id":"public/medias/banner/4.jpg","hash":"e5ac5033678afa9d69edffe9a61004f836cb5734","modified":1605279811978},{"_id":"public/css/matery.css","hash":"b53f4b6b7b2d992c904a9bf98b504fba247b220e","modified":1605279811978},{"_id":"public/libs/cryptojs/crypto-js.min.js","hash":"5989527a378b55011a59522f41eeb3981518325c","modified":1605279811978},{"_id":"public/libs/dplayer/DPlayer.min.css","hash":"f7d19655f873b813ffba5d1a17145c91f82631b8","modified":1605279811978},{"_id":"public/libs/minivaline/MiniValine.js","hash":"fbb58c37e2c74f127ae0c566afa9b48889aab79f","modified":1605279811978},{"_id":"public/libs/animate/animate.min.css","hash":"97afa151569f046b2e01f27c1871646e9cd87caf","modified":1605279811978},{"_id":"public/libs/aplayer/APlayer.min.js","hash":"22caa28ff6b41a16ff40f15d38f1739e22359478","modified":1605279811978},{"_id":"public/libs/lightGallery/js/lightgallery-all.min.js","hash":"9f5ef4bc8a0a3c746ca4f3c3e6d64493b1a977d8","modified":1605279811978},{"_id":"public/libs/gitment/gitment.js","hash":"28c02c45ce568e084cd1041dc493f83f9c6c88c6","modified":1605279811978},{"_id":"public/libs/valine/Valine.min.js","hash":"6cbdbf91e1f046dd41267a5ff0691a1fccba99df","modified":1605279811978},{"_id":"public/libs/awesome/css/all.css","hash":"ecc41e32ad2696877a1656749841f3b5543bbe3d","modified":1605279811978},{"_id":"public/libs/jquery/jquery.min.js","hash":"2115753ca5fb7032aec498db7bb5dca624dbe6be","modified":1605279811978},{"_id":"public/libs/dplayer/DPlayer.min.js","hash":"c3bad7b265574fab0ae4d45867422ea1cb9d6599","modified":1605279811978},{"_id":"public/libs/awesome/webfonts/fa-brands-400.svg","hash":"5e2d2a159294576bea69cc3360efb5ffe110ab2d","modified":1605279811978},{"_id":"public/libs/materialize/materialize.min.css","hash":"a69d456e3345e7f59cd0d47d1b3e70fd4a496a05","modified":1605279811978},{"_id":"public/libs/gitalk/gitalk.min.js","hash":"8fefe38f28804f90116bdcb74a0875c9de9f3b7d","modified":1605279811978},{"_id":"public/libs/valine/av-min.js","hash":"541efb9edc1ce425cbe3897cfc25803211fe6a05","modified":1605279811978},{"_id":"public/libs/awesome/webfonts/fa-solid-900.svg","hash":"7da88b19e1486f8c968d3cf5ab3f194f01ea17fd","modified":1605279811978},{"_id":"public/libs/materialize/materialize.min.js","hash":"c8b4c65651921d888cf5f27430dfe2ad190d35bf","modified":1605279811978},{"_id":"public/libs/echarts/echarts.min.js","hash":"9496f386a0da4601cad22c479cc5543913a4d67f","modified":1605279811978}],"Category":[{"name":"","_id":"ckhg8rerf0001fw05498h316a"},{"name":"","_id":"ckhg8tf260002mv0536637cq3"},{"name":"PHP","_id":"ckhg8tf2c0006mv05b75c60uq"},{"name":"","parent":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf2n000mmv05a1lh12no"},{"name":"","parent":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf2q000rmv05e90120g4"},{"name":"","_id":"ckhg8tf2t0010mv051m51c017"},{"name":"Redis","_id":"ckhg8tf3f002dmv054bh84h71"},{"name":"","_id":"ckhg8tf3i002mmv05fi0fb0j0"},{"name":"Linux","_id":"ckhg8tf3u003amv0594wf37v1"},{"name":"5G","_id":"ckhg8tf490047mv058j0p8qvo"},{"name":"NAT","_id":"ckhg8tf4d004fmv05g8dqetv9"},{"name":"TCP","_id":"ckhg8tf4g004lmv055o6a3iz7"},{"name":"TLS","_id":"ckhg8tf4j004smv051zvg0gon"},{"name":"Git","_id":"ckhg8tf4m004xmv054xsz0d69"},{"name":"Markdown","_id":"ckhg8tf4x0059mv05dfki4ue0"},{"name":"Phpstorm","_id":"ckhg8tf4z005hmv05gxf43s8t"},{"name":"","_id":"ckhg8tf52005mmv051t2x8v8g"},{"name":"MySQL","_id":"ckhg8tf55005smv05ammt8qr4"},{"name":"","parent":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf5a0067mv054vkvc983"},{"name":"Algorithms","_id":"ckhg8tf6600a5mv059xte870v"},{"name":"Http","_id":"ckhg8tf6g00atmv053028dzfn"},{"name":"","_id":"ckhg8tf6g00avmv058r4d1jiz"}],"Data":[{"_id":"friends","data":[{"avatar":"http://image.luokangyuan.com/1_qq_27922023.jpg","name":"","introduction":"","url":"http://luokangyuan.com/","title":""},{"avatar":"http://image.luokangyuan.com/4027734.jpeg","name":"","introduction":"","url":"https://blinkfox.github.io/","title":""},{"avatar":"http://image.luokangyuan.com/avatar.jpg","name":"ja_rome","introduction":"","url":"https://me.csdn.net/jlh912008548","title":""}]}],"Page":[{"title":"404","date":"2020-11-13T12:53:30.000Z","type":"404","layout":"404","description":"Oops :(","_content":"","source":"404.md","raw":"---\ntitle: 404\ndate: 2020-11-13 20:53:30\ntype: \"404\"\nlayout: \"404\"\ndescription: \"Oops :(\"\n---\n","updated":"2020-11-13T12:58:21.305Z","path":"404.html","comments":1,"_id":"ckhgajfz3000032053v22c1w9","content":"","site":{"data":{"friends":[{"avatar":"http://image.luokangyuan.com/1_qq_27922023.jpg","name":"","introduction":"","url":"http://luokangyuan.com/","title":""},{"avatar":"http://image.luokangyuan.com/4027734.jpeg","name":"","introduction":"","url":"https://blinkfox.github.io/","title":""},{"avatar":"http://image.luokangyuan.com/avatar.jpg","name":"ja_rome","introduction":"","url":"https://me.csdn.net/jlh912008548","title":""}]}},"excerpt":"","more":""},{"title":"about","date":"2020-11-13T12:53:30.000Z","type":"about","layout":"about","_content":"","source":"about/index.md","raw":"---\ntitle: about\ndate: 2020-11-13 20:53:30\ntype: \"about\"\nlayout: \"about\"\n---\n","updated":"2020-11-13T12:53:42.985Z","path":"about/index.html","comments":1,"_id":"ckhgajfz800013205hl35ft0h","content":"","site":{"data":{"friends":[{"avatar":"http://image.luokangyuan.com/1_qq_27922023.jpg","name":"","introduction":"","url":"http://luokangyuan.com/","title":""},{"avatar":"http://image.luokangyuan.com/4027734.jpeg","name":"","introduction":"","url":"https://blinkfox.github.io/","title":""},{"avatar":"http://image.luokangyuan.com/avatar.jpg","name":"ja_rome","introduction":"","url":"https://me.csdn.net/jlh912008548","title":""}]}},"excerpt":"","more":""},{"title":"categories","date":"2020-11-13T12:52:12.000Z","type":"categories","layout":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: categories\ndate: 2020-11-13 20:52:12\ntype: \"categories\"\nlayout: \"categories\"\n---\n","updated":"2020-11-13T12:52:48.935Z","path":"categories/index.html","comments":1,"_id":"ckhgajfz900023205d7bnbr7j","content":"","site":{"data":{"friends":[{"avatar":"http://image.luokangyuan.com/1_qq_27922023.jpg","name":"","introduction":"","url":"http://luokangyuan.com/","title":""},{"avatar":"http://image.luokangyuan.com/4027734.jpeg","name":"","introduction":"","url":"https://blinkfox.github.io/","title":""},{"avatar":"http://image.luokangyuan.com/avatar.jpg","name":"ja_rome","introduction":"","url":"https://me.csdn.net/jlh912008548","title":""}]}},"excerpt":"","more":""},{"title":"contact","date":"2020-11-13T12:53:50.000Z","type":"contact","layout":"contact","_content":"","source":"contact/index.md","raw":"---\ntitle: contact\ndate: 2020-11-13 20:53:50\ntype: \"contact\"\nlayout: \"contact\"\n---\n","updated":"2020-11-13T12:54:05.334Z","path":"contact/index.html","comments":1,"_id":"ckhgajfza00033205dzwtezos","content":"","site":{"data":{"friends":[{"avatar":"http://image.luokangyuan.com/1_qq_27922023.jpg","name":"","introduction":"","url":"http://luokangyuan.com/","title":""},{"avatar":"http://image.luokangyuan.com/4027734.jpeg","name":"","introduction":"","url":"https://blinkfox.github.io/","title":""},{"avatar":"http://image.luokangyuan.com/avatar.jpg","name":"ja_rome","introduction":"","url":"https://me.csdn.net/jlh912008548","title":""}]}},"excerpt":"","more":""},{"title":"friends","date":"2020-11-13T12:56:39.000Z","type":"friends","layout":"friends","_content":"","source":"friends/index.md","raw":"---\ntitle: friends\ndate: 2020-11-13 20:56:39\ntype: \"friends\"\nlayout: \"friends\"\n---\n","updated":"2020-11-13T12:56:55.125Z","path":"friends/index.html","comments":1,"_id":"ckhgajfza00043205fgo1as4w","content":"","site":{"data":{"friends":[{"avatar":"http://image.luokangyuan.com/1_qq_27922023.jpg","name":"","introduction":"","url":"http://luokangyuan.com/","title":""},{"avatar":"http://image.luokangyuan.com/4027734.jpeg","name":"","introduction":"","url":"https://blinkfox.github.io/","title":""},{"avatar":"http://image.luokangyuan.com/avatar.jpg","name":"ja_rome","introduction":"","url":"https://me.csdn.net/jlh912008548","title":""}]}},"excerpt":"","more":""},{"title":"tags","date":"2020-11-13T12:53:05.000Z","type":"tags","layout":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: tags\ndate: 2020-11-13 20:53:05\ntype: \"tags\"\nlayout: \"tags\"\n---\n","updated":"2020-11-13T12:53:20.989Z","path":"tags/index.html","comments":1,"_id":"ckhgajfzb0005320537cn3u78","content":"","site":{"data":{"friends":[{"avatar":"http://image.luokangyuan.com/1_qq_27922023.jpg","name":"","introduction":"","url":"http://luokangyuan.com/","title":""},{"avatar":"http://image.luokangyuan.com/4027734.jpeg","name":"","introduction":"","url":"https://blinkfox.github.io/","title":""},{"avatar":"http://image.luokangyuan.com/avatar.jpg","name":"ja_rome","introduction":"","url":"https://me.csdn.net/jlh912008548","title":""}]}},"excerpt":"","more":""}],"Post":[{"title":"Hello World","_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n","source":"_posts/hello-world.md","raw":"---\ntitle: Hello World\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n","slug":"hello-world","published":1,"date":"2020-11-12T13:30:24.738Z","updated":"2020-11-12T13:30:24.738Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhevhpp80000xk05hpq43n7z","content":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n"},{"url":"/2020/11/01/.html","title":"","keywords":"","description":"","date":"2020-11-01T04:29:21.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"# \n\n\n\n\n\n\n\n\n**Michael Jackson**\n\n~\n\n##  F4\n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n## 2002 \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n## \n\n\n\n## \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n+\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n## lydia \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n\n\n","source":"_posts/.md","raw":"---\nurl: /2020/11/01/.html\ntitle: \"\"\nkeywords: \"\"\ndescription: \"\"\ndate: 2020-11-01T20:29:21+08:00\ndraft: false\ntags: [\"\"]\ntags_weight: 100\ncategories: [\"\"]\ncategoryes_weight: 100\n\n---\n# \n\n\n\n\n\n\n\n\n**Michael Jackson**\n\n~\n\n##  F4\n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n## 2002 \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n## \n\n\n\n## \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n+\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n## lydia \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n\n\n\n\n","slug":"","published":1,"updated":"2020-11-01T14:37:51.000Z","_id":"ckhg8rer40000fw052gw344wn","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p></p>\n<p></p>\n<p></p>\n<p><br><strong>Michael Jackson</strong></p>\n<p>~</p>\n<h2 id=\"-F4\"><a href=\"#-F4\" class=\"headerlink\" title=\" F4\"></a> F4</h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"2002-\"><a href=\"#2002-\" class=\"headerlink\" title=\"2002 \"></a>2002 </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p>+</p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"lydia-\"><a href=\"#lydia-\" class=\"headerlink\" title=\"lydia \"></a>lydia </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<p></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p></p>\n<p></p>\n<p></p>\n<p><br><strong>Michael Jackson</strong></p>\n<p>~</p>\n<h2 id=\"-F4\"><a href=\"#-F4\" class=\"headerlink\" title=\" F4\"></a> F4</h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"2002-\"><a href=\"#2002-\" class=\"headerlink\" title=\"2002 \"></a>2002 </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p>+</p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"lydia-\"><a href=\"#lydia-\" class=\"headerlink\" title=\"lydia \"></a>lydia </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<p></p>\n"},{"url":"/2020/05/11/charset.html","title":"","date":"2020-05-12T02:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"type":"reprinted","_content":"\n [cenalulu http://cenalulu.github.io/linux/character-encoding/](http://cenalulu.github.io/linux/character-encoding/)\n\n## \n\n\nUQQ\n \nDVIVGAHDMIDP\n\n \n\n``\n\n|16|\n---|---|---\nUTF-8|0xE5B18C|1110 0101 1011 0001 1000 1100\nUTF-16|0x5C4C|1011 1000 1001 1000\nGBK|0x8CC5|1000 1100 1100 0101\n\n## \n\n\ncharacter repertoirecoded character setcharacter encoding form\n\n\n`code point`\n`code point``ASCII``A`65`A``0100 0001`65\n \n````\n``\n\n\n`ASCII`\n3UnicodeASCII\nASCII15003Unicode500\n1MANSI1024*1024Unicode1024*1024/2\n1MB/s512KB/sUTF-8`Unicode transfer format -8`88\nUTF-8ASCII23\n\n## \n\n- `ASCII`712810\n\n- 1281256\n\n- 0--127128--2552135\n\n- 10256GB2312265536\n\n- emailUnicodeunicode100\n\n- unicodex86amdUnicodeASCIIUnicode0Unicode\n\n- UTF-8UnicodeUTF-16UTF-32UTF-81~4\n\n## UTF-8Unicode\n\nUTF-8UnicodeUnicodeUTF-8Unicode\nUnicode\n[Unicode on Wikipedia](https://en.wikipedia.org/wiki/Unicode)Unicode`0000``10FFFF`17PlanePlane65536\n\nUTF-8PlaneUTF-8Unicode\n\n## UTF-8\n\nUTF-8UTF-8Unicode \n\nUTF-8`code unit`1-3bit\n\n1. 007bitUnicode\n\n2. 11021105bit106bitUnicode10\n\n3. 111031105bit1012bitUnicode10\n\n4. 10106bitUnicode\n\n`x``x`Unicode\n\nByte 1|Byte 2|Byte 3\n---|---|---\n0xxx xxxx||\n110x xxxx|10xx xxxx|\n1110 xxxx|10xx xxxx|10xx xxxx\n\nUTF-8\n\n|Unicode|Unicode|UTF-8|UTF-8\n---|---|---|---|---\n$|0024|010 0100|0010 0100|24\n|00A2|000 1010 0010|1100 0010 1010 0010|C2 A2\n|20AC|0010 0000 1010 1100|1110 0010 1000 0010 1010 1100|E2 82 AC\n\n\n\n1. 3UTF-8`E`\n\n2. 2UTF-8`C``D`\n\n3. 1UTF-8`8`\n\n## \n\n```mojibake``` \n`bless`bless``\nUTF-8GBK\n\n \nUTF-8``\n\n|UTF-8\n---|---\n|E5BE88\n|E5B18C\n\n`E5BE88E5B18C`GBK\n\n|GBK\n---|---\nE5BE|\n88E5|\nB18C|\n\n``\n\n## \n\nUTF-8GBK\n\n### 1 \n\n``GBKGBK\nSQLMySQL\n\n```mysql\nmysql [localhost] {msandbox} > select hex(convert('' using gbk));\n+-------------------------------------+\n| hex(convert('' using gbk))    |\n+-------------------------------------+\n| E5BE88E5B18C                        |\n+-------------------------------------+\n1 row in set (0.01 sec)\n```\n\n### 2 \n\n`E5BE88E5B18C`\n\nByte1|Byte2|Byte3|Byte4|Byte5|Byte6\n---|---|---|---|---|---\nE5|BE|88|E5|B1|8C\n\nUTF-86UTF-8\nUTF-8\n\n### 3 \n\n`E5BE88E5B18C`UTF-8SQL\n\n```mysql\nmysql [localhost] {msandbox} ((none)) > select convert(0xE5BE88E5B18C using utf8);\n+------------------------------------+\n| convert(0xE5BE88E5B18C using utf8) |\n+------------------------------------+\n|                                |\n+------------------------------------+\n1 row in set (0.00 sec)\n```\n\n## Emoji\n\nEmojiUnicode`\\u1F601-\\u1F64F`UTF-8`\\u0000-\\uFFFF`\nEmojiIOSEmoji: &#128524; &#128526; &#128525; Emoji\n\nMySQL\nMySQLUTF-8utf8mb45.5DBAutf8mb4\n4UTF-8\n`ERROR 1366: Incorrect string value: '\\xF0\\x9D\\x8C\\x86' for column`  \n\nBytesBytes`\\xF0`UTF-8\nMySQLUTF-8 \n\n\n\nMySQL5.6utf8mb4\nEmoji\nEmoji`-*-1F601-*-`4Emojipython[Stackoverflow](https://stackoverflow.com/questions/3220031/how-to-filter-or-replace-unicode-characters-that-would-take-more-than-3-bytes)\n\n","source":"_posts/charset.md","raw":"---\nurl: /2020/05/11/charset.html\ntitle: \"\"\ndate: 2020-05-12T18:31:57+08:00\ndraft: false\ntags: [\"\"]\ntags_weight: 100\ncategories: [\"\"]\ncategoryes_weight: 100\ntype: \"reprinted\"\n---\n\n [cenalulu http://cenalulu.github.io/linux/character-encoding/](http://cenalulu.github.io/linux/character-encoding/)\n\n## \n\n\nUQQ\n \nDVIVGAHDMIDP\n\n \n\n``\n\n|16|\n---|---|---\nUTF-8|0xE5B18C|1110 0101 1011 0001 1000 1100\nUTF-16|0x5C4C|1011 1000 1001 1000\nGBK|0x8CC5|1000 1100 1100 0101\n\n## \n\n\ncharacter repertoirecoded character setcharacter encoding form\n\n\n`code point`\n`code point``ASCII``A`65`A``0100 0001`65\n \n````\n``\n\n\n`ASCII`\n3UnicodeASCII\nASCII15003Unicode500\n1MANSI1024*1024Unicode1024*1024/2\n1MB/s512KB/sUTF-8`Unicode transfer format -8`88\nUTF-8ASCII23\n\n## \n\n- `ASCII`712810\n\n- 1281256\n\n- 0--127128--2552135\n\n- 10256GB2312265536\n\n- emailUnicodeunicode100\n\n- unicodex86amdUnicodeASCIIUnicode0Unicode\n\n- UTF-8UnicodeUTF-16UTF-32UTF-81~4\n\n## UTF-8Unicode\n\nUTF-8UnicodeUnicodeUTF-8Unicode\nUnicode\n[Unicode on Wikipedia](https://en.wikipedia.org/wiki/Unicode)Unicode`0000``10FFFF`17PlanePlane65536\n\nUTF-8PlaneUTF-8Unicode\n\n## UTF-8\n\nUTF-8UTF-8Unicode \n\nUTF-8`code unit`1-3bit\n\n1. 007bitUnicode\n\n2. 11021105bit106bitUnicode10\n\n3. 111031105bit1012bitUnicode10\n\n4. 10106bitUnicode\n\n`x``x`Unicode\n\nByte 1|Byte 2|Byte 3\n---|---|---\n0xxx xxxx||\n110x xxxx|10xx xxxx|\n1110 xxxx|10xx xxxx|10xx xxxx\n\nUTF-8\n\n|Unicode|Unicode|UTF-8|UTF-8\n---|---|---|---|---\n$|0024|010 0100|0010 0100|24\n|00A2|000 1010 0010|1100 0010 1010 0010|C2 A2\n|20AC|0010 0000 1010 1100|1110 0010 1000 0010 1010 1100|E2 82 AC\n\n\n\n1. 3UTF-8`E`\n\n2. 2UTF-8`C``D`\n\n3. 1UTF-8`8`\n\n## \n\n```mojibake``` \n`bless`bless``\nUTF-8GBK\n\n \nUTF-8``\n\n|UTF-8\n---|---\n|E5BE88\n|E5B18C\n\n`E5BE88E5B18C`GBK\n\n|GBK\n---|---\nE5BE|\n88E5|\nB18C|\n\n``\n\n## \n\nUTF-8GBK\n\n### 1 \n\n``GBKGBK\nSQLMySQL\n\n```mysql\nmysql [localhost] {msandbox} > select hex(convert('' using gbk));\n+-------------------------------------+\n| hex(convert('' using gbk))    |\n+-------------------------------------+\n| E5BE88E5B18C                        |\n+-------------------------------------+\n1 row in set (0.01 sec)\n```\n\n### 2 \n\n`E5BE88E5B18C`\n\nByte1|Byte2|Byte3|Byte4|Byte5|Byte6\n---|---|---|---|---|---\nE5|BE|88|E5|B1|8C\n\nUTF-86UTF-8\nUTF-8\n\n### 3 \n\n`E5BE88E5B18C`UTF-8SQL\n\n```mysql\nmysql [localhost] {msandbox} ((none)) > select convert(0xE5BE88E5B18C using utf8);\n+------------------------------------+\n| convert(0xE5BE88E5B18C using utf8) |\n+------------------------------------+\n|                                |\n+------------------------------------+\n1 row in set (0.00 sec)\n```\n\n## Emoji\n\nEmojiUnicode`\\u1F601-\\u1F64F`UTF-8`\\u0000-\\uFFFF`\nEmojiIOSEmoji: &#128524; &#128526; &#128525; Emoji\n\nMySQL\nMySQLUTF-8utf8mb45.5DBAutf8mb4\n4UTF-8\n`ERROR 1366: Incorrect string value: '\\xF0\\x9D\\x8C\\x86' for column`  \n\nBytesBytes`\\xF0`UTF-8\nMySQLUTF-8 \n\n\n\nMySQL5.6utf8mb4\nEmoji\nEmoji`-*-1F601-*-`4Emojipython[Stackoverflow](https://stackoverflow.com/questions/3220031/how-to-filter-or-replace-unicode-characters-that-would-take-more-than-3-bytes)\n\n","slug":"charset","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf1z0000mv05hd6q2i89","content":"<p> <a href=\"http://cenalulu.github.io/linux/character-encoding/\">cenalulu http://cenalulu.github.io/linux/character-encoding/</a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><br>UQQ<br><br>DVIVGAHDMIDP<br><br> </p>\n<p><code></code></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>16</th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>UTF-8</td>\n<td>0xE5B18C</td>\n<td>1110 0101 1011 0001 1000 1100</td>\n</tr>\n<tr>\n<td>UTF-16</td>\n<td>0x5C4C</td>\n<td>1011 1000 1001 1000</td>\n</tr>\n<tr>\n<td>GBK</td>\n<td>0x8CC5</td>\n<td>1000 1100 1100 0101</td>\n</tr>\n</tbody></table>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><br>character repertoirecoded character setcharacter encoding form</p>\n<p><br><code>code point</code><br><code>code point</code><code>ASCII</code><code>A</code>65<code>A</code><code>0100 0001</code>65</p>\n<p><code></code><code></code><br><code></code></p>\n<p><br><code>ASCII</code><br>3UnicodeASCII<br>ASCII15003Unicode500<br>1MANSI1024<em>1024Unicode1024</em>1024/2<br>1MB/s512KB/sUTF-8<code>Unicode transfer format -8</code>88<br>UTF-8ASCII23</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><p><code>ASCII</code>712810</p>\n</li>\n<li><p>1281256</p>\n</li>\n<li><p>01271282552135</p>\n</li>\n<li><p>10256GB2312265536</p>\n</li>\n<li><p>emailUnicodeunicode100</p>\n</li>\n<li><p>unicodex86amdUnicodeASCIIUnicode0Unicode</p>\n</li>\n<li><p>UTF-8UnicodeUTF-16UTF-32UTF-81~4</p>\n</li>\n</ul>\n<h2 id=\"UTF-8Unicode\"><a href=\"#UTF-8Unicode\" class=\"headerlink\" title=\"UTF-8Unicode\"></a>UTF-8Unicode</h2><p>UTF-8UnicodeUnicodeUTF-8Unicode<br>Unicode<br><a href=\"https://en.wikipedia.org/wiki/Unicode\">Unicode on Wikipedia</a>Unicode<code>0000</code><code>10FFFF</code>17PlanePlane65536</p>\n<p>UTF-8PlaneUTF-8Unicode</p>\n<h2 id=\"UTF-8\"><a href=\"#UTF-8\" class=\"headerlink\" title=\"UTF-8\"></a>UTF-8</h2><p>UTF-8UTF-8Unicode </p>\n<p>UTF-8<code>code unit</code>1-3bit</p>\n<ol>\n<li><p>007bitUnicode</p>\n</li>\n<li><p>11021105bit106bitUnicode10</p>\n</li>\n<li><p>111031105bit1012bitUnicode10</p>\n</li>\n<li><p>10106bitUnicode</p>\n</li>\n</ol>\n<p><code>x</code><code>x</code>Unicode</p>\n<table>\n<thead>\n<tr>\n<th>Byte 1</th>\n<th>Byte 2</th>\n<th>Byte 3</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0xxx xxxx</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>110x xxxx</td>\n<td>10xx xxxx</td>\n<td></td>\n</tr>\n<tr>\n<td>1110 xxxx</td>\n<td>10xx xxxx</td>\n<td>10xx xxxx</td>\n</tr>\n</tbody></table>\n<p>UTF-8</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>Unicode</th>\n<th>Unicode</th>\n<th>UTF-8</th>\n<th>UTF-8</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>$</td>\n<td>0024</td>\n<td>010 0100</td>\n<td>0010 0100</td>\n<td>24</td>\n</tr>\n<tr>\n<td></td>\n<td>00A2</td>\n<td>000 1010 0010</td>\n<td>1100 0010 1010 0010</td>\n<td>C2 A2</td>\n</tr>\n<tr>\n<td></td>\n<td>20AC</td>\n<td>0010 0000 1010 1100</td>\n<td>1110 0010 1000 0010 1010 1100</td>\n<td>E2 82 AC</td>\n</tr>\n</tbody></table>\n<p></p>\n<ol>\n<li><p>3UTF-8<code>E</code></p>\n</li>\n<li><p>2UTF-8<code>C</code><code>D</code></p>\n</li>\n<li><p>1UTF-8<code>8</code></p>\n</li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code></code><code>mojibake</code><code></code> <br><code>bless</code>bless<code></code><br>UTF-8GBK<br></p>\n<p>UTF-8<code></code></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>UTF-8</th>\n</tr>\n</thead>\n<tbody><tr>\n<td></td>\n<td>E5BE88</td>\n</tr>\n<tr>\n<td></td>\n<td>E5B18C</td>\n</tr>\n</tbody></table>\n<p><code>E5BE88E5B18C</code>GBK</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>GBK</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>E5BE</td>\n<td></td>\n</tr>\n<tr>\n<td>88E5</td>\n<td></td>\n</tr>\n<tr>\n<td>B18C</td>\n<td></td>\n</tr>\n</tbody></table>\n<p><code></code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>UTF-8GBK</p>\n<h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1 \"></a>1 </h3><p><code></code>GBKGBK<br>SQLMySQL</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql [localhost] &#123;msandbox&#125; &gt; select hex(convert(&#39;&#39; using gbk));</span><br><span class=\"line\">+-------------------------------------+</span><br><span class=\"line\">| hex(convert(&#39;&#39; using gbk))    |</span><br><span class=\"line\">+-------------------------------------+</span><br><span class=\"line\">| E5BE88E5B18C                        |</span><br><span class=\"line\">+-------------------------------------+</span><br><span class=\"line\">1 row in set (0.01 sec)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2 \"></a>2 </h3><p><code>E5BE88E5B18C</code></p>\n<table>\n<thead>\n<tr>\n<th>Byte1</th>\n<th>Byte2</th>\n<th>Byte3</th>\n<th>Byte4</th>\n<th>Byte5</th>\n<th>Byte6</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>E5</td>\n<td>BE</td>\n<td>88</td>\n<td>E5</td>\n<td>B1</td>\n<td>8C</td>\n</tr>\n</tbody></table>\n<p>UTF-86UTF-8<br>UTF-8</p>\n<h3 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3 \"></a>3 </h3><p><code>E5BE88E5B18C</code>UTF-8SQL</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql [localhost] &#123;msandbox&#125; ((none)) &gt; select convert(0xE5BE88E5B18C using utf8);</span><br><span class=\"line\">+------------------------------------+</span><br><span class=\"line\">| convert(0xE5BE88E5B18C using utf8) |</span><br><span class=\"line\">+------------------------------------+</span><br><span class=\"line\">|                                |</span><br><span class=\"line\">+------------------------------------+</span><br><span class=\"line\">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Emoji\"><a href=\"#Emoji\" class=\"headerlink\" title=\"Emoji\"></a>Emoji</h2><p>EmojiUnicode<code>\\u1F601-\\u1F64F</code>UTF-8<code>\\u0000-\\uFFFF</code><br>EmojiIOSEmoji: &#128524; &#128526; &#128525; Emoji</p>\n<p>MySQL<br>MySQLUTF-8utf8mb45.5DBAutf8mb4<br>4UTF-8<br><code>ERROR 1366: Incorrect string value: &#39;\\xF0\\x9D\\x8C\\x86&#39; for column</code>  </p>\n<p>BytesBytes<code>\\xF0</code>UTF-8<br>MySQLUTF-8<br></p>\n<p><br>MySQL5.6utf8mb4<br>Emoji<br>Emoji<code>-*-1F601-*-</code>4Emojipython<a href=\"https://stackoverflow.com/questions/3220031/how-to-filter-or-replace-unicode-characters-that-would-take-more-than-3-bytes\">Stackoverflow</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p> <a href=\"http://cenalulu.github.io/linux/character-encoding/\">cenalulu http://cenalulu.github.io/linux/character-encoding/</a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><br>UQQ<br><br>DVIVGAHDMIDP<br><br> </p>\n<p><code></code></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>16</th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>UTF-8</td>\n<td>0xE5B18C</td>\n<td>1110 0101 1011 0001 1000 1100</td>\n</tr>\n<tr>\n<td>UTF-16</td>\n<td>0x5C4C</td>\n<td>1011 1000 1001 1000</td>\n</tr>\n<tr>\n<td>GBK</td>\n<td>0x8CC5</td>\n<td>1000 1100 1100 0101</td>\n</tr>\n</tbody></table>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><br>character repertoirecoded character setcharacter encoding form</p>\n<p><br><code>code point</code><br><code>code point</code><code>ASCII</code><code>A</code>65<code>A</code><code>0100 0001</code>65</p>\n<p><code></code><code></code><br><code></code></p>\n<p><br><code>ASCII</code><br>3UnicodeASCII<br>ASCII15003Unicode500<br>1MANSI1024<em>1024Unicode1024</em>1024/2<br>1MB/s512KB/sUTF-8<code>Unicode transfer format -8</code>88<br>UTF-8ASCII23</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><p><code>ASCII</code>712810</p>\n</li>\n<li><p>1281256</p>\n</li>\n<li><p>01271282552135</p>\n</li>\n<li><p>10256GB2312265536</p>\n</li>\n<li><p>emailUnicodeunicode100</p>\n</li>\n<li><p>unicodex86amdUnicodeASCIIUnicode0Unicode</p>\n</li>\n<li><p>UTF-8UnicodeUTF-16UTF-32UTF-81~4</p>\n</li>\n</ul>\n<h2 id=\"UTF-8Unicode\"><a href=\"#UTF-8Unicode\" class=\"headerlink\" title=\"UTF-8Unicode\"></a>UTF-8Unicode</h2><p>UTF-8UnicodeUnicodeUTF-8Unicode<br>Unicode<br><a href=\"https://en.wikipedia.org/wiki/Unicode\">Unicode on Wikipedia</a>Unicode<code>0000</code><code>10FFFF</code>17PlanePlane65536</p>\n<p>UTF-8PlaneUTF-8Unicode</p>\n<h2 id=\"UTF-8\"><a href=\"#UTF-8\" class=\"headerlink\" title=\"UTF-8\"></a>UTF-8</h2><p>UTF-8UTF-8Unicode </p>\n<p>UTF-8<code>code unit</code>1-3bit</p>\n<ol>\n<li><p>007bitUnicode</p>\n</li>\n<li><p>11021105bit106bitUnicode10</p>\n</li>\n<li><p>111031105bit1012bitUnicode10</p>\n</li>\n<li><p>10106bitUnicode</p>\n</li>\n</ol>\n<p><code>x</code><code>x</code>Unicode</p>\n<table>\n<thead>\n<tr>\n<th>Byte 1</th>\n<th>Byte 2</th>\n<th>Byte 3</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0xxx xxxx</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>110x xxxx</td>\n<td>10xx xxxx</td>\n<td></td>\n</tr>\n<tr>\n<td>1110 xxxx</td>\n<td>10xx xxxx</td>\n<td>10xx xxxx</td>\n</tr>\n</tbody></table>\n<p>UTF-8</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>Unicode</th>\n<th>Unicode</th>\n<th>UTF-8</th>\n<th>UTF-8</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>$</td>\n<td>0024</td>\n<td>010 0100</td>\n<td>0010 0100</td>\n<td>24</td>\n</tr>\n<tr>\n<td></td>\n<td>00A2</td>\n<td>000 1010 0010</td>\n<td>1100 0010 1010 0010</td>\n<td>C2 A2</td>\n</tr>\n<tr>\n<td></td>\n<td>20AC</td>\n<td>0010 0000 1010 1100</td>\n<td>1110 0010 1000 0010 1010 1100</td>\n<td>E2 82 AC</td>\n</tr>\n</tbody></table>\n<p></p>\n<ol>\n<li><p>3UTF-8<code>E</code></p>\n</li>\n<li><p>2UTF-8<code>C</code><code>D</code></p>\n</li>\n<li><p>1UTF-8<code>8</code></p>\n</li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code></code><code>mojibake</code><code></code> <br><code>bless</code>bless<code></code><br>UTF-8GBK<br></p>\n<p>UTF-8<code></code></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>UTF-8</th>\n</tr>\n</thead>\n<tbody><tr>\n<td></td>\n<td>E5BE88</td>\n</tr>\n<tr>\n<td></td>\n<td>E5B18C</td>\n</tr>\n</tbody></table>\n<p><code>E5BE88E5B18C</code>GBK</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>GBK</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>E5BE</td>\n<td></td>\n</tr>\n<tr>\n<td>88E5</td>\n<td></td>\n</tr>\n<tr>\n<td>B18C</td>\n<td></td>\n</tr>\n</tbody></table>\n<p><code></code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>UTF-8GBK</p>\n<h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1 \"></a>1 </h3><p><code></code>GBKGBK<br>SQLMySQL</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql [localhost] &#123;msandbox&#125; &gt; select hex(convert(&#39;&#39; using gbk));</span><br><span class=\"line\">+-------------------------------------+</span><br><span class=\"line\">| hex(convert(&#39;&#39; using gbk))    |</span><br><span class=\"line\">+-------------------------------------+</span><br><span class=\"line\">| E5BE88E5B18C                        |</span><br><span class=\"line\">+-------------------------------------+</span><br><span class=\"line\">1 row in set (0.01 sec)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2 \"></a>2 </h3><p><code>E5BE88E5B18C</code></p>\n<table>\n<thead>\n<tr>\n<th>Byte1</th>\n<th>Byte2</th>\n<th>Byte3</th>\n<th>Byte4</th>\n<th>Byte5</th>\n<th>Byte6</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>E5</td>\n<td>BE</td>\n<td>88</td>\n<td>E5</td>\n<td>B1</td>\n<td>8C</td>\n</tr>\n</tbody></table>\n<p>UTF-86UTF-8<br>UTF-8</p>\n<h3 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3 \"></a>3 </h3><p><code>E5BE88E5B18C</code>UTF-8SQL</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql [localhost] &#123;msandbox&#125; ((none)) &gt; select convert(0xE5BE88E5B18C using utf8);</span><br><span class=\"line\">+------------------------------------+</span><br><span class=\"line\">| convert(0xE5BE88E5B18C using utf8) |</span><br><span class=\"line\">+------------------------------------+</span><br><span class=\"line\">|                                |</span><br><span class=\"line\">+------------------------------------+</span><br><span class=\"line\">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Emoji\"><a href=\"#Emoji\" class=\"headerlink\" title=\"Emoji\"></a>Emoji</h2><p>EmojiUnicode<code>\\u1F601-\\u1F64F</code>UTF-8<code>\\u0000-\\uFFFF</code><br>EmojiIOSEmoji: &#128524; &#128526; &#128525; Emoji</p>\n<p>MySQL<br>MySQLUTF-8utf8mb45.5DBAutf8mb4<br>4UTF-8<br><code>ERROR 1366: Incorrect string value: &#39;\\xF0\\x9D\\x8C\\x86&#39; for column</code>  </p>\n<p>BytesBytes<code>\\xF0</code>UTF-8<br>MySQLUTF-8<br></p>\n<p><br>MySQL5.6utf8mb4<br>Emoji<br>Emoji<code>-*-1F601-*-</code>4Emojipython<a href=\"https://stackoverflow.com/questions/3220031/how-to-filter-or-replace-unicode-characters-that-would-take-more-than-3-bytes\">Stackoverflow</a></p>\n"},{"url":"/2020/05/11/decimal.html","title":"","date":"2020-05-11T20:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n## PHP\n\n \n\n 100 bug\n\n```php\n<?php\necho 16.33 * 100; // 1633 float\necho intval(16.33 * 100); // 1632 int\necho intval(strval(16.33 * 100)); // 1633\necho (int)(16.33 * 100); // 1632\n```\n\n\n\n## \n\n01\n\n\n\n1. 220`2`\n\n2. `2`22\n0\n`2`\n\n3. \n\n 29.75 \n\n\n\n```\n29/2 = 14...1\n14/2 = 7...0\n7/2 = 3...1\n3/2 = 1...1\n1/2 = 0...1\n```\n\n29(10) = 11101(2)\n\n\n\n```\n0.75*2 = 1.5...1\n0.5*2 = 1...1\n```\n0.75(10) = 0.11(2)\n\n29.75(10) = 11101.11(2)\n\n 16.33\n\n```\n0.33*2 = 0.66...0\n0.66*2 = 1.32...1\n0.32*2 = 0.64...0\n0.64*2 = 1.28...1\n0.28*2 = 0.56...0\n0.56*2 = 1.12...1\n0.12*2 = 0.24...0\n0.24*2 = 0.48...0\n0.48*2 = 0.96...0\n0.96*2 = 1.92...1\n0.92*2 = 1.84...1\n.... \n```\n\n\n\n[IEEE754](https://zh.wikipedia.org/zh-hans/IEEE_754)\n\nIEEE32\n23f8e1s320:2223f23:308e31s\n\n0.3323double52\n\n0.33\n\n## \n\n1. 1010010100\n\n2. \n\n3. \n\n","source":"_posts/decimal.md","raw":"---\nurl: /2020/05/11/decimal.html\ntitle: \"\"\ndate: 2020-05-12T12:31:57+08:00\ndraft: false\ntags: [\"PHP\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n## PHP\n\n \n\n 100 bug\n\n```php\n<?php\necho 16.33 * 100; // 1633 float\necho intval(16.33 * 100); // 1632 int\necho intval(strval(16.33 * 100)); // 1633\necho (int)(16.33 * 100); // 1632\n```\n\n\n\n## \n\n01\n\n\n\n1. 220`2`\n\n2. `2`22\n0\n`2`\n\n3. \n\n 29.75 \n\n\n\n```\n29/2 = 14...1\n14/2 = 7...0\n7/2 = 3...1\n3/2 = 1...1\n1/2 = 0...1\n```\n\n29(10) = 11101(2)\n\n\n\n```\n0.75*2 = 1.5...1\n0.5*2 = 1...1\n```\n0.75(10) = 0.11(2)\n\n29.75(10) = 11101.11(2)\n\n 16.33\n\n```\n0.33*2 = 0.66...0\n0.66*2 = 1.32...1\n0.32*2 = 0.64...0\n0.64*2 = 1.28...1\n0.28*2 = 0.56...0\n0.56*2 = 1.12...1\n0.12*2 = 0.24...0\n0.24*2 = 0.48...0\n0.48*2 = 0.96...0\n0.96*2 = 1.92...1\n0.92*2 = 1.84...1\n.... \n```\n\n\n\n[IEEE754](https://zh.wikipedia.org/zh-hans/IEEE_754)\n\nIEEE32\n23f8e1s320:2223f23:308e31s\n\n0.3323double52\n\n0.33\n\n## \n\n1. 1010010100\n\n2. \n\n3. \n\n","slug":"decimal","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf240001mv054gewgqn8","content":"<h2 id=\"PHP\"><a href=\"#PHP\" class=\"headerlink\" title=\"PHP\"></a>PHP</h2><p> </p>\n<p> 100 bug</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"number\">16.33</span> * <span class=\"number\">100</span>; <span class=\"comment\">// 1633 float</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> intval(<span class=\"number\">16.33</span> * <span class=\"number\">100</span>); <span class=\"comment\">// 1632 int</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> intval(strval(<span class=\"number\">16.33</span> * <span class=\"number\">100</span>)); <span class=\"comment\">// 1633</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> (<span class=\"keyword\">int</span>)(<span class=\"number\">16.33</span> * <span class=\"number\">100</span>); <span class=\"comment\">// 1632</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>01</p>\n<p></p>\n<ol>\n<li><p>220<code>2</code></p>\n</li>\n<li><p><code>2</code>22<br>0<br><code>2</code></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n<p> 29.75 </p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">29&#x2F;2 &#x3D; 14...1</span><br><span class=\"line\">14&#x2F;2 &#x3D; 7...0</span><br><span class=\"line\">7&#x2F;2 &#x3D; 3...1</span><br><span class=\"line\">3&#x2F;2 &#x3D; 1...1</span><br><span class=\"line\">1&#x2F;2 &#x3D; 0...1</span><br></pre></td></tr></table></figure>\n\n<p>29(10) = 11101(2)</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">0.75*2 &#x3D; 1.5...1</span><br><span class=\"line\">0.5*2 &#x3D; 1...1</span><br></pre></td></tr></table></figure>\n<p>0.75(10) = 0.11(2)</p>\n<p>29.75(10) = 11101.11(2)</p>\n<p> 16.33</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">0.33*2 &#x3D; 0.66...0</span><br><span class=\"line\">0.66*2 &#x3D; 1.32...1</span><br><span class=\"line\">0.32*2 &#x3D; 0.64...0</span><br><span class=\"line\">0.64*2 &#x3D; 1.28...1</span><br><span class=\"line\">0.28*2 &#x3D; 0.56...0</span><br><span class=\"line\">0.56*2 &#x3D; 1.12...1</span><br><span class=\"line\">0.12*2 &#x3D; 0.24...0</span><br><span class=\"line\">0.24*2 &#x3D; 0.48...0</span><br><span class=\"line\">0.48*2 &#x3D; 0.96...0</span><br><span class=\"line\">0.96*2 &#x3D; 1.92...1</span><br><span class=\"line\">0.92*2 &#x3D; 1.84...1</span><br><span class=\"line\">.... </span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><a href=\"https://zh.wikipedia.org/zh-hans/IEEE_754\">IEEE754</a></p>\n<p>IEEE32<br>23f8e1s320:2223f23:308e31s</p>\n<p>0.3323double52</p>\n<p>0.33</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li><p>1010010100</p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"PHP\"><a href=\"#PHP\" class=\"headerlink\" title=\"PHP\"></a>PHP</h2><p> </p>\n<p> 100 bug</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"number\">16.33</span> * <span class=\"number\">100</span>; <span class=\"comment\">// 1633 float</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> intval(<span class=\"number\">16.33</span> * <span class=\"number\">100</span>); <span class=\"comment\">// 1632 int</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> intval(strval(<span class=\"number\">16.33</span> * <span class=\"number\">100</span>)); <span class=\"comment\">// 1633</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> (<span class=\"keyword\">int</span>)(<span class=\"number\">16.33</span> * <span class=\"number\">100</span>); <span class=\"comment\">// 1632</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>01</p>\n<p></p>\n<ol>\n<li><p>220<code>2</code></p>\n</li>\n<li><p><code>2</code>22<br>0<br><code>2</code></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n<p> 29.75 </p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">29&#x2F;2 &#x3D; 14...1</span><br><span class=\"line\">14&#x2F;2 &#x3D; 7...0</span><br><span class=\"line\">7&#x2F;2 &#x3D; 3...1</span><br><span class=\"line\">3&#x2F;2 &#x3D; 1...1</span><br><span class=\"line\">1&#x2F;2 &#x3D; 0...1</span><br></pre></td></tr></table></figure>\n\n<p>29(10) = 11101(2)</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">0.75*2 &#x3D; 1.5...1</span><br><span class=\"line\">0.5*2 &#x3D; 1...1</span><br></pre></td></tr></table></figure>\n<p>0.75(10) = 0.11(2)</p>\n<p>29.75(10) = 11101.11(2)</p>\n<p> 16.33</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">0.33*2 &#x3D; 0.66...0</span><br><span class=\"line\">0.66*2 &#x3D; 1.32...1</span><br><span class=\"line\">0.32*2 &#x3D; 0.64...0</span><br><span class=\"line\">0.64*2 &#x3D; 1.28...1</span><br><span class=\"line\">0.28*2 &#x3D; 0.56...0</span><br><span class=\"line\">0.56*2 &#x3D; 1.12...1</span><br><span class=\"line\">0.12*2 &#x3D; 0.24...0</span><br><span class=\"line\">0.24*2 &#x3D; 0.48...0</span><br><span class=\"line\">0.48*2 &#x3D; 0.96...0</span><br><span class=\"line\">0.96*2 &#x3D; 1.92...1</span><br><span class=\"line\">0.92*2 &#x3D; 1.84...1</span><br><span class=\"line\">.... </span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><a href=\"https://zh.wikipedia.org/zh-hans/IEEE_754\">IEEE754</a></p>\n<p>IEEE32<br>23f8e1s320:2223f23:308e31s</p>\n<p>0.3323double52</p>\n<p>0.33</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li><p>1010010100</p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n"},{"url":"/2019/01/01/work-debug.html","title":"+","date":"2019-10-11T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n##  \n\n```\nntpdate cn.pool.ntp.org\n```\n\n\n## phpxdebug \n\n```\n phpxdebug  php 9000 phpxdebug port 9001\n```\n\n## curlhttps\n[](https://stackoverflow.com/questions/28858351/php-ssl-certificate-error-unable-to-get-local-issuer-certificate)\n\n\n## PHPlong2ip\n\n```\nphpstudy PHP32long2ip() 64\nreids 32\n phpstudy  php  64 redis win\n```\n\n\n\n## laravel\n\n```\nlaravel/lumen 5.6.* -> 5.8.* 5.8.*composer.jsongitbug\n github \n```\n[Comparing changes](https://github.com/laravel/lumen/compare/5.6...master)\n\n\n## reidsrdb\n\n-  dir  ./  rdbdir /usr/local/redis/\n\n## 502\n- ip502fpmnginxconnect() to unix:/tmp/php7-cgi.sock failed (11: Resource temporarily unavailable) while connecting to upstream\n\n[backlog](https://www.cnxct.com/something-about-phpfpm-s-backlog/)\n\n## git\n\n- github clone  eol unix expect windows\n\ngit CRLF\n[CRLF ](https://github.com/cssmagic/blog/issues/22)\n\n- locate centos mlocate  updatedb\n\n## ip\n\n- exce() ping socket_create ICMP ping  suid\n\n[ root  ICMP ping](https://blog.lilydjwg.me/2013/10/29/non-privileged-icmp-ping.41390.html)\n\nSOCK_DGRAM \n`sudo sysctl -w net.ipv4.ping_group_range='0 10'` \n[ root](https://www.jianshu.com/p/d77ede976bb3)\n\n exce() pingIP\n\n## PHP yar\n\n- yar msgpack\n\n[MSGPACK](https://github.com/laruence/yar/issues/113)\n\n- winphpstudy phpcgiyar\n\n[WSARecv() failed (10054: An existing connection was forcibly closed by the remote host)](https://blessing.studio/phpstudy-prober-page-502-bad-gateway/)\n\n## laravel http status 419\n\n`laravel 419 Sorry, your session has expired. Please refresh and try again.`\n\n csrf\n\n[419](https://stackoverflow.com/questions/52583886/post-request-in-laravel-5-7-laravel-5-8-error-419-sorry-your-session-has/53781657#53781657)\n\n## redis ()\n\n[reids1](https://blog.csdn.net/jiangshouzhuang/article/details/50864933)\n\n[reids2](https://www.jianshu.com/p/7ca4b74c92be)\n\n## laravel \n\nmysql5.6  utf8_mb4 varchar(255)\n767/4=191  varchar(191)\n```\nSQLSTATE[42000]: Syntax error or access violation: 1071 Specified key was too long; \nmax key length is 767 bytes (SQL: alter table `jobs` add index `jobs_queue_index`(`queue`))\n```\n[error 1071](https://stackoverflow.com/questions/1814532/1071-specified-key-was-too-long-max-key-length-is-767-bytes)\n\n## cookie\n\n-  jquery.cookie removeCookie cookie\n\n[path](https://stackoverflow.com/questions/18486165/remove-cookie-using-jquery-not-working)\n\n## gerrit \n\n `git config --global user.email \"your_email@mail.com\"`\nemailphpstormcommit emailphpstorm\n\nemailcommitpush\n\n## phpunit \n\n- phpunit @expectedExceptionMessage  strpos\n\n## composer suggest\n\n- Psr\\Http\\Message\\ResponseInterface \n\nlaravel composer.json  suggest  --no-suggest: \n\n## laravel-s redis\n\n- laravel-s Redis::connection() redis worker max_request\nworker \n\n## swoole yar \n\n## laravel \n\najax302 redirect /  404\n1.  App\\Exceptions\\Handler::render json\n2. request header ajax302\n\n## laravel PhpRedisConnection hscan bug\n\n```php\n    $it = null;\n    $redis->setOption(\\Redis::OPT_SCAN, \\Redis::SCAN_RETRY);\n    while($device_fds = $redis->client()->hScan(Link::getFdMapKey(), $it, '', 1000)) {\n        foreach($device_fds as $device_unique_mark => $fd) {\n             echo $device_unique_mark . PHP_EOL;\n        }\n    }\n```\nlaravel$redis->client(),phpredis$it PhpRedisConnection  __call bug\n\n##  ksort \n\n##laravel queue redis \n\n --sleep=3  block_for \n --sleep=3  block_for => 3\nblock_for Redis \n\n## php Trait \n\n fatal error \n Trait\n\n## PHP\n```php\n public static function make($items = [])\n {\n     return new static($items);\n }\n```\n## PHP Mockery::mock\n```php\n// \n$request = Mockery::mock(CurlRequest::class);\n//  $request\n$request->shouldReceive('post')\n        ->once()\n        ->andReturn([\n            'status' => 1,\n            'msg'    => ''\n        ]);\n```\n\n## 2019.7.11 \n```php\necho 16.33 * 100; // 1633\necho intval(16.33 * 100); // 1632\necho intval(strval(16.33 * 100)); // 1633\necho (int)(16.33 * 100); // 1632\n```\n\n## laravel config:cache \n\n config:cache  env .env  env  null\n\n### php mb_strlen\n\n```php\necho mb_strlen(''); // 2 UTF-8\nmb_strlen('', 'UTF-8'); // 2\nmb_strlen('', '8bit'); // 6\nstrlen(''); // 6\n// 8bitphp, 8bit, php. , , 1byte=8bit\n```\n\nPHPmbstring.func_overload, substr\nphp runtime  mb_strlen 8bit1byte = 8bit\n\n\n##PHP if\n\n```php\n$array = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];\n\n$start = microtime(true);\nfor ($i = 0; $i < 1000000; $i++) {\n//    if (count($array)) {} // 0.01805305480957\n//    if (is_null($array)) {} // 0.013534784317017\n//    if (empty($array)) {} // 0.014011859893799\n    if (!$array) {} // 0.016890048980713\n}\n$end = microtime(true);\necho \"1: \" . ($end - $start) . \"\\n\";\necho memory_get_usage() . \"\\n\"; // 389032\n```\n\n## laravel phpredis subscribe redis channel \n\n## phppcntl posix eventgrpc kill -15\n\n## php apcu apc.enable_cli apcu_fetch\n\n## php composer --ignore-platform-reqs \n\n win composer.json require win\n\n## http https   CONNECT HOST  \n\n## php apcu ttl cliapc.use_request_time=0\n\n```php\n// cli \n$bar = date('Y-m-d H:i:s');\nvar_dump(apcu_store('foo', $bar, 3));\nsleep(4);\nvar_dump(apcu_fetch('foo'));\n// apc.use_request_time=1 \n// \n```\n\n## reids scan countcount\n\nyield\n\n```php\n$key = 'test_set_111222';\n$items = [];\nfor ($i = 0; $i < 1000; $i++) {\n    $items[] = $i;\n}\n$this->redis->sAdd($key, ...$items);\nforeach ($this->get($key, 20) as $item) {\n    var_dump($item);\n}\nfunction get($key, int $count) : Generator\n{\n    $this->redis->setOption(\\Redis::OPT_SCAN, \\Redis::SCAN_RETRY);\n    $it = null;\n    while ($item = $this->redis->client()->sScan($key, $it, '*', $count)) {\n        yield $item;\n    }\n}\n```\n\n##  header X-Accel-Redirect nginxIO\n\n## Wireshark \n\n[wireshark](https://segmentfault.com/a/1190000019913529)\n\n## socket_set_option \n\nSO_REUSEPORT  bind() \n\n\n## linux TCP(SYN,ACK)\n\n[1](https://blog.csdn.net/ywq935/article/details/91384854)\n\n[net.ipv4.tcp_tw_recycle](https://www.cnblogs.com/cheyunhua/p/9082674.html)\n\n## php socket EVENT \n\n\n\ngo RST\n```go\npackage main\n\nimport (\n\t\"flag\"\n\t\"fmt\"\n\t\"net\"\n\t\"os\"\n)\n\nvar host = flag.String(\"host\", \"172.16.1.49\", \"host\")\nvar port = flag.String(\"port\", \"9999\", \"port\")\n\nfunc main()  {\n\tconn, err := net.Dial(\"tcp\", *host+\":\"+*port)\n\tfmt.Println(*host+\":\"+*port)\n\tif err != nil {\n\t\tfmt.Println(\"err1\")\n\t\tos.Exit(1)\n\t}\n\n\tdefer conn.Close()\n\n\ttcpConn, ok := conn.(*net.TCPConn)\n\tif !ok {\n\t\tfmt.Println(\"err2\")\n\t\tos.Exit(1)\n\t}\n\ttcpConn.SetLinger(0)\n}\n```\n\nstrace \n```\n39070 epoll_wait(6, [{EPOLLIN, {u32=9, u64=9}}], 32, -1) = 1\n39070 accept(9, {sa_family=AF_INET, sin_port=htons(35959), sin_addr=inet_addr(\"127.0.0.1\")}, [16]) = 10\n39070 setsockopt(10, SOL_SOCKET, SO_RCVTIMEO, \"\\36\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\", 16) = 0\n39070 setsockopt(10, SOL_SOCKET, SO_SNDTIMEO, \"\\36\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\", 16) = 0\n39070 fcntl(10, F_GETFL)                = 0x2 (flags O_RDWR)\n39070 fcntl(10, F_SETFL, O_RDWR|O_NONBLOCK) = 0\n39070 getpeername(10, 0x7fff585ad500, 0x7fff585ad4b4) = -1 ENOTCONN (Transport endpoint is not connected)\n39070 epoll_wait(6, [{EPOLLIN, {u32=9, u64=9}}], 32, -1) = 1\n39070 epoll_wait(6, [{EPOLLIN, {u32=9, u64=9}}], 32, -1) = 1\n39070 epoll_wait(6, [{EPOLLIN, {u32=9, u64=9}}], 32, -1) = 1\n...\n```\n\n\n```\n39579 epoll_wait(6, [{EPOLLIN, {u32=9, u64=9}}], 32, -1) = 1\n39579 accept(9, {sa_family=AF_INET, sin_port=htons(26949), sin_addr=inet_addr(\"127.0.0.1\")}, [16]) = 10\n39579 setsockopt(10, SOL_SOCKET, SO_RCVTIMEO, \"\\36\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\", 16) = 0\n39579 setsockopt(10, SOL_SOCKET, SO_SNDTIMEO, \"\\36\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\", 16) = 0\n39579 fcntl(10, F_GETFL)                = 0x2 (flags O_RDWR)\n39579 fcntl(10, F_SETFL, O_RDWR|O_NONBLOCK) = 0\n39579 getpeername(10, {sa_family=AF_INET, sin_port=htons(26949), sin_addr=inet_addr(\"127.0.0.1\")}, [16]) = 0\n39579 epoll_ctl(6, EPOLL_CTL_ADD, 10, {EPOLLIN, {u32=10, u64=10}}) = 0\n39579 epoll_wait(6, [{EPOLLIN, {u32=10, u64=10}}], 32, -1) = 1\n39579 recvfrom(10, \"\", 1, 0, NULL, NULL) = 0\n39579 epoll_ctl(6, EPOLL_CTL_DEL, 10, 0x7fff585ad4a0) = 0\n39579 close(10)                         = 0\n39579 epoll_wait(6, [{EPOLLIN, {u32=9, u64=9}}], 32, -1) = 1\n```\n\nTCPRSTTCP(TCP)socket_getpeername()\n\n## socket_read  EAGAIN\n\nEAGAINResource temporarily unavailableSIGSEGV  ()worker exitRST\n\nread false thrift_protocol_read_binary_after_message_begin() \n\n## redis lua \n\nHMSET key field value [field value ]\n\ntablefield value\n script load load\n```\nredis.call('hmset', KEYS[1], unpack(data))\n```\n","source":"_posts/work-debug.md","raw":"---\nurl: /2019/01/01/work-debug.html\ntitle: \"+\"\ndate: 2019-10-11T22:31:57+08:00\ndraft: false\ntags: [\"PHP\"]\ntags_weight: 100\ncategories: [\"PHP\"]\ncategoryes_weight: 100\n---\n\n##  \n\n```\nntpdate cn.pool.ntp.org\n```\n\n\n## phpxdebug \n\n```\n phpxdebug  php 9000 phpxdebug port 9001\n```\n\n## curlhttps\n[](https://stackoverflow.com/questions/28858351/php-ssl-certificate-error-unable-to-get-local-issuer-certificate)\n\n\n## PHPlong2ip\n\n```\nphpstudy PHP32long2ip() 64\nreids 32\n phpstudy  php  64 redis win\n```\n\n\n\n## laravel\n\n```\nlaravel/lumen 5.6.* -> 5.8.* 5.8.*composer.jsongitbug\n github \n```\n[Comparing changes](https://github.com/laravel/lumen/compare/5.6...master)\n\n\n## reidsrdb\n\n-  dir  ./  rdbdir /usr/local/redis/\n\n## 502\n- ip502fpmnginxconnect() to unix:/tmp/php7-cgi.sock failed (11: Resource temporarily unavailable) while connecting to upstream\n\n[backlog](https://www.cnxct.com/something-about-phpfpm-s-backlog/)\n\n## git\n\n- github clone  eol unix expect windows\n\ngit CRLF\n[CRLF ](https://github.com/cssmagic/blog/issues/22)\n\n- locate centos mlocate  updatedb\n\n## ip\n\n- exce() ping socket_create ICMP ping  suid\n\n[ root  ICMP ping](https://blog.lilydjwg.me/2013/10/29/non-privileged-icmp-ping.41390.html)\n\nSOCK_DGRAM \n`sudo sysctl -w net.ipv4.ping_group_range='0 10'` \n[ root](https://www.jianshu.com/p/d77ede976bb3)\n\n exce() pingIP\n\n## PHP yar\n\n- yar msgpack\n\n[MSGPACK](https://github.com/laruence/yar/issues/113)\n\n- winphpstudy phpcgiyar\n\n[WSARecv() failed (10054: An existing connection was forcibly closed by the remote host)](https://blessing.studio/phpstudy-prober-page-502-bad-gateway/)\n\n## laravel http status 419\n\n`laravel 419 Sorry, your session has expired. Please refresh and try again.`\n\n csrf\n\n[419](https://stackoverflow.com/questions/52583886/post-request-in-laravel-5-7-laravel-5-8-error-419-sorry-your-session-has/53781657#53781657)\n\n## redis ()\n\n[reids1](https://blog.csdn.net/jiangshouzhuang/article/details/50864933)\n\n[reids2](https://www.jianshu.com/p/7ca4b74c92be)\n\n## laravel \n\nmysql5.6  utf8_mb4 varchar(255)\n767/4=191  varchar(191)\n```\nSQLSTATE[42000]: Syntax error or access violation: 1071 Specified key was too long; \nmax key length is 767 bytes (SQL: alter table `jobs` add index `jobs_queue_index`(`queue`))\n```\n[error 1071](https://stackoverflow.com/questions/1814532/1071-specified-key-was-too-long-max-key-length-is-767-bytes)\n\n## cookie\n\n-  jquery.cookie removeCookie cookie\n\n[path](https://stackoverflow.com/questions/18486165/remove-cookie-using-jquery-not-working)\n\n## gerrit \n\n `git config --global user.email \"your_email@mail.com\"`\nemailphpstormcommit emailphpstorm\n\nemailcommitpush\n\n## phpunit \n\n- phpunit @expectedExceptionMessage  strpos\n\n## composer suggest\n\n- Psr\\Http\\Message\\ResponseInterface \n\nlaravel composer.json  suggest  --no-suggest: \n\n## laravel-s redis\n\n- laravel-s Redis::connection() redis worker max_request\nworker \n\n## swoole yar \n\n## laravel \n\najax302 redirect /  404\n1.  App\\Exceptions\\Handler::render json\n2. request header ajax302\n\n## laravel PhpRedisConnection hscan bug\n\n```php\n    $it = null;\n    $redis->setOption(\\Redis::OPT_SCAN, \\Redis::SCAN_RETRY);\n    while($device_fds = $redis->client()->hScan(Link::getFdMapKey(), $it, '', 1000)) {\n        foreach($device_fds as $device_unique_mark => $fd) {\n             echo $device_unique_mark . PHP_EOL;\n        }\n    }\n```\nlaravel$redis->client(),phpredis$it PhpRedisConnection  __call bug\n\n##  ksort \n\n##laravel queue redis \n\n --sleep=3  block_for \n --sleep=3  block_for => 3\nblock_for Redis \n\n## php Trait \n\n fatal error \n Trait\n\n## PHP\n```php\n public static function make($items = [])\n {\n     return new static($items);\n }\n```\n## PHP Mockery::mock\n```php\n// \n$request = Mockery::mock(CurlRequest::class);\n//  $request\n$request->shouldReceive('post')\n        ->once()\n        ->andReturn([\n            'status' => 1,\n            'msg'    => ''\n        ]);\n```\n\n## 2019.7.11 \n```php\necho 16.33 * 100; // 1633\necho intval(16.33 * 100); // 1632\necho intval(strval(16.33 * 100)); // 1633\necho (int)(16.33 * 100); // 1632\n```\n\n## laravel config:cache \n\n config:cache  env .env  env  null\n\n### php mb_strlen\n\n```php\necho mb_strlen(''); // 2 UTF-8\nmb_strlen('', 'UTF-8'); // 2\nmb_strlen('', '8bit'); // 6\nstrlen(''); // 6\n// 8bitphp, 8bit, php. , , 1byte=8bit\n```\n\nPHPmbstring.func_overload, substr\nphp runtime  mb_strlen 8bit1byte = 8bit\n\n\n##PHP if\n\n```php\n$array = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];\n\n$start = microtime(true);\nfor ($i = 0; $i < 1000000; $i++) {\n//    if (count($array)) {} // 0.01805305480957\n//    if (is_null($array)) {} // 0.013534784317017\n//    if (empty($array)) {} // 0.014011859893799\n    if (!$array) {} // 0.016890048980713\n}\n$end = microtime(true);\necho \"1: \" . ($end - $start) . \"\\n\";\necho memory_get_usage() . \"\\n\"; // 389032\n```\n\n## laravel phpredis subscribe redis channel \n\n## phppcntl posix eventgrpc kill -15\n\n## php apcu apc.enable_cli apcu_fetch\n\n## php composer --ignore-platform-reqs \n\n win composer.json require win\n\n## http https   CONNECT HOST  \n\n## php apcu ttl cliapc.use_request_time=0\n\n```php\n// cli \n$bar = date('Y-m-d H:i:s');\nvar_dump(apcu_store('foo', $bar, 3));\nsleep(4);\nvar_dump(apcu_fetch('foo'));\n// apc.use_request_time=1 \n// \n```\n\n## reids scan countcount\n\nyield\n\n```php\n$key = 'test_set_111222';\n$items = [];\nfor ($i = 0; $i < 1000; $i++) {\n    $items[] = $i;\n}\n$this->redis->sAdd($key, ...$items);\nforeach ($this->get($key, 20) as $item) {\n    var_dump($item);\n}\nfunction get($key, int $count) : Generator\n{\n    $this->redis->setOption(\\Redis::OPT_SCAN, \\Redis::SCAN_RETRY);\n    $it = null;\n    while ($item = $this->redis->client()->sScan($key, $it, '*', $count)) {\n        yield $item;\n    }\n}\n```\n\n##  header X-Accel-Redirect nginxIO\n\n## Wireshark \n\n[wireshark](https://segmentfault.com/a/1190000019913529)\n\n## socket_set_option \n\nSO_REUSEPORT  bind() \n\n\n## linux TCP(SYN,ACK)\n\n[1](https://blog.csdn.net/ywq935/article/details/91384854)\n\n[net.ipv4.tcp_tw_recycle](https://www.cnblogs.com/cheyunhua/p/9082674.html)\n\n## php socket EVENT \n\n\n\ngo RST\n```go\npackage main\n\nimport (\n\t\"flag\"\n\t\"fmt\"\n\t\"net\"\n\t\"os\"\n)\n\nvar host = flag.String(\"host\", \"172.16.1.49\", \"host\")\nvar port = flag.String(\"port\", \"9999\", \"port\")\n\nfunc main()  {\n\tconn, err := net.Dial(\"tcp\", *host+\":\"+*port)\n\tfmt.Println(*host+\":\"+*port)\n\tif err != nil {\n\t\tfmt.Println(\"err1\")\n\t\tos.Exit(1)\n\t}\n\n\tdefer conn.Close()\n\n\ttcpConn, ok := conn.(*net.TCPConn)\n\tif !ok {\n\t\tfmt.Println(\"err2\")\n\t\tos.Exit(1)\n\t}\n\ttcpConn.SetLinger(0)\n}\n```\n\nstrace \n```\n39070 epoll_wait(6, [{EPOLLIN, {u32=9, u64=9}}], 32, -1) = 1\n39070 accept(9, {sa_family=AF_INET, sin_port=htons(35959), sin_addr=inet_addr(\"127.0.0.1\")}, [16]) = 10\n39070 setsockopt(10, SOL_SOCKET, SO_RCVTIMEO, \"\\36\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\", 16) = 0\n39070 setsockopt(10, SOL_SOCKET, SO_SNDTIMEO, \"\\36\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\", 16) = 0\n39070 fcntl(10, F_GETFL)                = 0x2 (flags O_RDWR)\n39070 fcntl(10, F_SETFL, O_RDWR|O_NONBLOCK) = 0\n39070 getpeername(10, 0x7fff585ad500, 0x7fff585ad4b4) = -1 ENOTCONN (Transport endpoint is not connected)\n39070 epoll_wait(6, [{EPOLLIN, {u32=9, u64=9}}], 32, -1) = 1\n39070 epoll_wait(6, [{EPOLLIN, {u32=9, u64=9}}], 32, -1) = 1\n39070 epoll_wait(6, [{EPOLLIN, {u32=9, u64=9}}], 32, -1) = 1\n...\n```\n\n\n```\n39579 epoll_wait(6, [{EPOLLIN, {u32=9, u64=9}}], 32, -1) = 1\n39579 accept(9, {sa_family=AF_INET, sin_port=htons(26949), sin_addr=inet_addr(\"127.0.0.1\")}, [16]) = 10\n39579 setsockopt(10, SOL_SOCKET, SO_RCVTIMEO, \"\\36\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\", 16) = 0\n39579 setsockopt(10, SOL_SOCKET, SO_SNDTIMEO, \"\\36\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\", 16) = 0\n39579 fcntl(10, F_GETFL)                = 0x2 (flags O_RDWR)\n39579 fcntl(10, F_SETFL, O_RDWR|O_NONBLOCK) = 0\n39579 getpeername(10, {sa_family=AF_INET, sin_port=htons(26949), sin_addr=inet_addr(\"127.0.0.1\")}, [16]) = 0\n39579 epoll_ctl(6, EPOLL_CTL_ADD, 10, {EPOLLIN, {u32=10, u64=10}}) = 0\n39579 epoll_wait(6, [{EPOLLIN, {u32=10, u64=10}}], 32, -1) = 1\n39579 recvfrom(10, \"\", 1, 0, NULL, NULL) = 0\n39579 epoll_ctl(6, EPOLL_CTL_DEL, 10, 0x7fff585ad4a0) = 0\n39579 close(10)                         = 0\n39579 epoll_wait(6, [{EPOLLIN, {u32=9, u64=9}}], 32, -1) = 1\n```\n\nTCPRSTTCP(TCP)socket_getpeername()\n\n## socket_read  EAGAIN\n\nEAGAINResource temporarily unavailableSIGSEGV  ()worker exitRST\n\nread false thrift_protocol_read_binary_after_message_begin() \n\n## redis lua \n\nHMSET key field value [field value ]\n\ntablefield value\n script load load\n```\nredis.call('hmset', KEYS[1], unpack(data))\n```\n","slug":"work-debug","published":1,"updated":"2020-07-16T12:38:15.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf280004mv0547qu7yb4","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ntpdate cn.pool.ntp.org</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"phpxdebug-\"><a href=\"#phpxdebug-\" class=\"headerlink\" title=\"phpxdebug \"></a>phpxdebug </h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> phpxdebug  php 9000 phpxdebug port 9001</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"curlhttps\"><a href=\"#curlhttps\" class=\"headerlink\" title=\"curlhttps\"></a>curlhttps</h2><p><a href=\"https://stackoverflow.com/questions/28858351/php-ssl-certificate-error-unable-to-get-local-issuer-certificate\"></a></p>\n<h2 id=\"PHPlong2ip\"><a href=\"#PHPlong2ip\" class=\"headerlink\" title=\"PHPlong2ip\"></a>PHPlong2ip</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">phpstudy PHP32long2ip() 64</span><br><span class=\"line\">reids 32</span><br><span class=\"line\"> phpstudy  php  64 redis win</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"laravel\"><a href=\"#laravel\" class=\"headerlink\" title=\"laravel\"></a>laravel</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">laravel&#x2F;lumen 5.6.* -&gt; 5.8.* 5.8.*composer.jsongitbug</span><br><span class=\"line\"> github </span><br></pre></td></tr></table></figure>\n<p><a href=\"https://github.com/laravel/lumen/compare/5.6...master\">Comparing changes</a></p>\n<h2 id=\"reidsrdb\"><a href=\"#reidsrdb\" class=\"headerlink\" title=\"reidsrdb\"></a>reidsrdb</h2><ul>\n<li> dir  ./  rdbdir /usr/local/redis/</li>\n</ul>\n<h2 id=\"502\"><a href=\"#502\" class=\"headerlink\" title=\"502\"></a>502</h2><ul>\n<li>ip502fpmnginxconnect() to unix:/tmp/php7-cgi.sock failed (11: Resource temporarily unavailable) while connecting to upstream</li>\n</ul>\n<p><a href=\"https://www.cnxct.com/something-about-phpfpm-s-backlog/\">backlog</a></p>\n<h2 id=\"git\"><a href=\"#git\" class=\"headerlink\" title=\"git\"></a>git</h2><ul>\n<li>github clone  eol unix expect windows</li>\n</ul>\n<p>git CRLF<br><a href=\"https://github.com/cssmagic/blog/issues/22\">CRLF </a></p>\n<ul>\n<li>locate centos mlocate  updatedb</li>\n</ul>\n<h2 id=\"ip\"><a href=\"#ip\" class=\"headerlink\" title=\"ip\"></a>ip</h2><ul>\n<li>exce() ping socket_create ICMP ping  suid</li>\n</ul>\n<p><a href=\"https://blog.lilydjwg.me/2013/10/29/non-privileged-icmp-ping.41390.html\"> root  ICMP ping</a></p>\n<p>SOCK_DGRAM<br><code>sudo sysctl -w net.ipv4.ping_group_range=&#39;0 10&#39;</code> <br><a href=\"https://www.jianshu.com/p/d77ede976bb3\"> root</a></p>\n<p> exce() pingIP</p>\n<h2 id=\"PHP-yar\"><a href=\"#PHP-yar\" class=\"headerlink\" title=\"PHP yar\"></a>PHP yar</h2><ul>\n<li>yar msgpack</li>\n</ul>\n<p><a href=\"https://github.com/laruence/yar/issues/113\">MSGPACK</a></p>\n<ul>\n<li>winphpstudy phpcgiyar</li>\n</ul>\n<p><a href=\"https://blessing.studio/phpstudy-prober-page-502-bad-gateway/\">WSARecv() failed (10054: An existing connection was forcibly closed by the remote host)</a></p>\n<h2 id=\"laravel-http-status-419\"><a href=\"#laravel-http-status-419\" class=\"headerlink\" title=\"laravel http status 419\"></a>laravel http status 419</h2><p><code>laravel 419 Sorry, your session has expired. Please refresh and try again.</code></p>\n<p> csrf</p>\n<p><a href=\"https://stackoverflow.com/questions/52583886/post-request-in-laravel-5-7-laravel-5-8-error-419-sorry-your-session-has/53781657#53781657\">419</a></p>\n<h2 id=\"redis--\"><a href=\"#redis--\" class=\"headerlink\" title=\"redis ()\"></a>redis ()</h2><p><a href=\"https://blog.csdn.net/jiangshouzhuang/article/details/50864933\">reids1</a></p>\n<p><a href=\"https://www.jianshu.com/p/7ca4b74c92be\">reids2</a></p>\n<h2 id=\"laravel-\"><a href=\"#laravel-\" class=\"headerlink\" title=\"laravel \"></a>laravel </h2><p>mysql5.6  utf8_mb4 varchar(255)<br>767/4=191  varchar(191)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SQLSTATE[42000]: Syntax error or access violation: 1071 Specified key was too long; </span><br><span class=\"line\">max key length is 767 bytes (SQL: alter table &#96;jobs&#96; add index &#96;jobs_queue_index&#96;(&#96;queue&#96;))</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://stackoverflow.com/questions/1814532/1071-specified-key-was-too-long-max-key-length-is-767-bytes\">error 1071</a></p>\n<h2 id=\"cookie\"><a href=\"#cookie\" class=\"headerlink\" title=\"cookie\"></a>cookie</h2><ul>\n<li> jquery.cookie removeCookie cookie</li>\n</ul>\n<p><a href=\"https://stackoverflow.com/questions/18486165/remove-cookie-using-jquery-not-working\">path</a></p>\n<h2 id=\"gerrit-\"><a href=\"#gerrit-\" class=\"headerlink\" title=\"gerrit \"></a>gerrit </h2><p> <code>git config --global user.email &quot;your_email@mail.com&quot;</code><br>emailphpstormcommit emailphpstorm</p>\n<p>emailcommitpush</p>\n<h2 id=\"phpunit-\"><a href=\"#phpunit-\" class=\"headerlink\" title=\"phpunit \"></a>phpunit </h2><ul>\n<li>phpunit @expectedExceptionMessage  strpos</li>\n</ul>\n<h2 id=\"composer-suggest\"><a href=\"#composer-suggest\" class=\"headerlink\" title=\"composer suggest\"></a>composer suggest</h2><ul>\n<li>Psr\\Http\\Message\\ResponseInterface </li>\n</ul>\n<p>laravel composer.json  suggest  no-suggest: </p>\n<h2 id=\"laravel-s-redis\"><a href=\"#laravel-s-redis\" class=\"headerlink\" title=\"laravel-s redis\"></a>laravel-s redis</h2><ul>\n<li>laravel-s Redis::connection() redis worker max_request<br>worker </li>\n</ul>\n<h2 id=\"swoole-yar-\"><a href=\"#swoole-yar-\" class=\"headerlink\" title=\"swoole yar \"></a>swoole yar </h2><h2 id=\"laravel-\"><a href=\"#laravel-\" class=\"headerlink\" title=\"laravel \"></a>laravel </h2><p>ajax302 redirect /  404</p>\n<ol>\n<li> App\\Exceptions\\Handler::render json</li>\n<li>request header ajax302</li>\n</ol>\n<h2 id=\"laravel-PhpRedisConnection-hscan-bug\"><a href=\"#laravel-PhpRedisConnection-hscan-bug\" class=\"headerlink\" title=\"laravel PhpRedisConnection hscan bug\"></a>laravel PhpRedisConnection hscan bug</h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$it = <span class=\"literal\">null</span>;</span><br><span class=\"line\">$redis-&gt;setOption(\\Redis::OPT_SCAN, \\Redis::SCAN_RETRY);</span><br><span class=\"line\"><span class=\"keyword\">while</span>($device_fds = $redis-&gt;client()-&gt;hScan(Link::getFdMapKey(), $it, <span class=\"string\">&#x27;&#x27;</span>, <span class=\"number\">1000</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">foreach</span>($device_fds <span class=\"keyword\">as</span> $device_unique_mark =&gt; $fd) &#123;</span><br><span class=\"line\">         <span class=\"keyword\">echo</span> $device_unique_mark . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>laravel$redis-&gt;client(),phpredis$it PhpRedisConnection  __call bug</p>\n<h2 id=\"-ksort-\"><a href=\"#-ksort-\" class=\"headerlink\" title=\" ksort \"></a> ksort </h2><p>##laravel queue redis </p>\n<p> sleep=3  block_for <br> sleep=3  block_for =&gt; 3<br>block_for Redis </p>\n<h2 id=\"php-Trait\"><a href=\"#php-Trait\" class=\"headerlink\" title=\"php Trait\"></a>php Trait</h2><p> fatal error <br> Trait</p>\n<h2 id=\"PHP\"><a href=\"#PHP\" class=\"headerlink\" title=\"PHP\"></a>PHP</h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">make</span>(<span class=\"params\">$items = []</span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">static</span>($items);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"PHP-Mockery-mock\"><a href=\"#PHP-Mockery-mock\" class=\"headerlink\" title=\"PHP Mockery::mock\"></a>PHP Mockery::mock</h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$request = Mockery::mock(CurlRequest::class);</span><br><span class=\"line\"><span class=\"comment\">//  $request</span></span><br><span class=\"line\">$request-&gt;shouldReceive(<span class=\"string\">&#x27;post&#x27;</span>)</span><br><span class=\"line\">        -&gt;once()</span><br><span class=\"line\">        -&gt;andReturn([</span><br><span class=\"line\">            <span class=\"string\">&#x27;status&#x27;</span> =&gt; <span class=\"number\">1</span>,</span><br><span class=\"line\">            <span class=\"string\">&#x27;msg&#x27;</span>    =&gt; <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">        ]);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2019-7-11-\"><a href=\"#2019-7-11-\" class=\"headerlink\" title=\"2019.7.11 \"></a>2019.7.11 </h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"number\">16.33</span> * <span class=\"number\">100</span>; <span class=\"comment\">// 1633</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> intval(<span class=\"number\">16.33</span> * <span class=\"number\">100</span>); <span class=\"comment\">// 1632</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> intval(strval(<span class=\"number\">16.33</span> * <span class=\"number\">100</span>)); <span class=\"comment\">// 1633</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> (<span class=\"keyword\">int</span>)(<span class=\"number\">16.33</span> * <span class=\"number\">100</span>); <span class=\"comment\">// 1632</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"laravel-config-cache-\"><a href=\"#laravel-config-cache-\" class=\"headerlink\" title=\"laravel config:cache \"></a>laravel config:cache </h2><p> config:cache  env .env  env  null</p>\n<h3 id=\"php-mb-strlen\"><a href=\"#php-mb-strlen\" class=\"headerlink\" title=\"php mb_strlen\"></a>php mb_strlen</h3><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">echo</span> mb_strlen(<span class=\"string\">&#x27;&#x27;</span>); <span class=\"comment\">// 2 UTF-8</span></span><br><span class=\"line\">mb_strlen(<span class=\"string\">&#x27;&#x27;</span>, <span class=\"string\">&#x27;UTF-8&#x27;</span>); <span class=\"comment\">// 2</span></span><br><span class=\"line\">mb_strlen(<span class=\"string\">&#x27;&#x27;</span>, <span class=\"string\">&#x27;8bit&#x27;</span>); <span class=\"comment\">// 6</span></span><br><span class=\"line\">strlen(<span class=\"string\">&#x27;&#x27;</span>); <span class=\"comment\">// 6</span></span><br><span class=\"line\"><span class=\"comment\">// 8bitphp, 8bit, php. , , 1byte=8bit</span></span><br></pre></td></tr></table></figure>\n\n<p>PHPmbstring.func_overload, substr<br>php runtime  mb_strlen 8bit1byte = 8bit</p>\n<p>##PHP if</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$array = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>, <span class=\"number\">7</span>, <span class=\"number\">8</span>, <span class=\"number\">9</span>, <span class=\"number\">10</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">$start = microtime(<span class=\"literal\">true</span>);</span><br><span class=\"line\"><span class=\"keyword\">for</span> ($i = <span class=\"number\">0</span>; $i &lt; <span class=\"number\">1000000</span>; $i++) &#123;</span><br><span class=\"line\"><span class=\"comment\">//    if (count($array)) &#123;&#125; // 0.01805305480957</span></span><br><span class=\"line\"><span class=\"comment\">//    if (is_null($array)) &#123;&#125; // 0.013534784317017</span></span><br><span class=\"line\"><span class=\"comment\">//    if (empty($array)) &#123;&#125; // 0.014011859893799</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!$array) &#123;&#125; <span class=\"comment\">// 0.016890048980713</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">$end = microtime(<span class=\"literal\">true</span>);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">&quot;1: &quot;</span> . ($end - $start) . <span class=\"string\">&quot;\\n&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">echo</span> memory_get_usage() . <span class=\"string\">&quot;\\n&quot;</span>; <span class=\"comment\">// 389032</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"laravel-phpredis-subscribe-redis-channel-\"><a href=\"#laravel-phpredis-subscribe-redis-channel-\" class=\"headerlink\" title=\"laravel phpredis subscribe redis channel \"></a>laravel phpredis subscribe redis channel </h2><h2 id=\"phppcntl-posix-eventgrpc-kill-15\"><a href=\"#phppcntl-posix-eventgrpc-kill-15\" class=\"headerlink\" title=\"phppcntl posix eventgrpc kill -15\"></a>phppcntl posix eventgrpc kill -15</h2><h2 id=\"php-apcu-apc-enable-cli-apcu-fetch\"><a href=\"#php-apcu-apc-enable-cli-apcu-fetch\" class=\"headerlink\" title=\"php apcu apc.enable_cli apcu_fetch\"></a>php apcu apc.enable_cli apcu_fetch</h2><h2 id=\"php-composer-ignore-platform-reqs\"><a href=\"#php-composer-ignore-platform-reqs\" class=\"headerlink\" title=\"php composer ignore-platform-reqs\"></a>php composer ignore-platform-reqs</h2><p> win composer.json require win</p>\n<h2 id=\"http-https---CONNECT-HOST-\"><a href=\"#http-https---CONNECT-HOST-\" class=\"headerlink\" title=\"http https   CONNECT HOST \"></a>http https   CONNECT HOST </h2><h2 id=\"php-apcu-ttl-cliapc-use-request-time-0\"><a href=\"#php-apcu-ttl-cliapc-use-request-time-0\" class=\"headerlink\" title=\"php apcu ttl cliapc.use_request_time=0\"></a>php apcu ttl cliapc.use_request_time=0</h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// cli </span></span><br><span class=\"line\">$bar = date(<span class=\"string\">&#x27;Y-m-d H:i:s&#x27;</span>);</span><br><span class=\"line\">var_dump(apcu_store(<span class=\"string\">&#x27;foo&#x27;</span>, $bar, <span class=\"number\">3</span>));</span><br><span class=\"line\">sleep(<span class=\"number\">4</span>);</span><br><span class=\"line\">var_dump(apcu_fetch(<span class=\"string\">&#x27;foo&#x27;</span>));</span><br><span class=\"line\"><span class=\"comment\">// apc.use_request_time=1 </span></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"reids-scan-countcount\"><a href=\"#reids-scan-countcount\" class=\"headerlink\" title=\"reids scan countcount\"></a>reids scan countcount</h2><p>yield</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$key = <span class=\"string\">&#x27;test_set_111222&#x27;</span>;</span><br><span class=\"line\">$items = [];</span><br><span class=\"line\"><span class=\"keyword\">for</span> ($i = <span class=\"number\">0</span>; $i &lt; <span class=\"number\">1000</span>; $i++) &#123;</span><br><span class=\"line\">    $items[] = $i;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">$this</span>-&gt;redis-&gt;sAdd($key, ...$items);</span><br><span class=\"line\"><span class=\"keyword\">foreach</span> (<span class=\"keyword\">$this</span>-&gt;get($key, <span class=\"number\">20</span>) <span class=\"keyword\">as</span> $item) &#123;</span><br><span class=\"line\">    var_dump($item);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">get</span>(<span class=\"params\">$key, <span class=\"keyword\">int</span> $count</span>) : <span class=\"title\">Generator</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">$this</span>-&gt;redis-&gt;setOption(\\Redis::OPT_SCAN, \\Redis::SCAN_RETRY);</span><br><span class=\"line\">    $it = <span class=\"literal\">null</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> ($item = <span class=\"keyword\">$this</span>-&gt;redis-&gt;client()-&gt;sScan($key, $it, <span class=\"string\">&#x27;*&#x27;</span>, $count)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">yield</span> $item;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"-header-X-Accel-Redirect-nginxIO\"><a href=\"#-header-X-Accel-Redirect-nginxIO\" class=\"headerlink\" title=\" header X-Accel-Redirect nginxIO\"></a> header X-Accel-Redirect nginxIO</h2><h2 id=\"Wireshark-\"><a href=\"#Wireshark-\" class=\"headerlink\" title=\"Wireshark \"></a>Wireshark </h2><p><a href=\"https://segmentfault.com/a/1190000019913529\">wireshark</a></p>\n<h2 id=\"socket-set-option-\"><a href=\"#socket-set-option-\" class=\"headerlink\" title=\"socket_set_option \"></a>socket_set_option </h2><p>SO_REUSEPORT  bind() </p>\n<h2 id=\"linux-TCP-SYN-ACK-\"><a href=\"#linux-TCP-SYN-ACK-\" class=\"headerlink\" title=\"linux TCP(SYN,ACK)\"></a>linux TCP(SYN,ACK)</h2><p><a href=\"https://blog.csdn.net/ywq935/article/details/91384854\">1</a></p>\n<p><a href=\"https://www.cnblogs.com/cheyunhua/p/9082674.html\">net.ipv4.tcp_tw_recycle</a></p>\n<h2 id=\"php-socket-EVENT-\"><a href=\"#php-socket-EVENT-\" class=\"headerlink\" title=\"php socket EVENT \"></a>php socket EVENT </h2><p></p>\n<p>go RST</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">\t<span class=\"string\">&quot;flag&quot;</span></span><br><span class=\"line\">\t<span class=\"string\">&quot;fmt&quot;</span></span><br><span class=\"line\">\t<span class=\"string\">&quot;net&quot;</span></span><br><span class=\"line\">\t<span class=\"string\">&quot;os&quot;</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> host = flag.String(<span class=\"string\">&quot;host&quot;</span>, <span class=\"string\">&quot;172.16.1.49&quot;</span>, <span class=\"string\">&quot;host&quot;</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> port = flag.String(<span class=\"string\">&quot;port&quot;</span>, <span class=\"string\">&quot;9999&quot;</span>, <span class=\"string\">&quot;port&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span>  &#123;</span><br><span class=\"line\">\tconn, err := net.Dial(<span class=\"string\">&quot;tcp&quot;</span>, *host+<span class=\"string\">&quot;:&quot;</span>+*port)</span><br><span class=\"line\">\tfmt.Println(*host+<span class=\"string\">&quot;:&quot;</span>+*port)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tfmt.Println(<span class=\"string\">&quot;err1&quot;</span>)</span><br><span class=\"line\">\t\tos.Exit(<span class=\"number\">1</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">defer</span> conn.Close()</span><br><span class=\"line\"></span><br><span class=\"line\">\ttcpConn, ok := conn.(*net.TCPConn)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> !ok &#123;</span><br><span class=\"line\">\t\tfmt.Println(<span class=\"string\">&quot;err2&quot;</span>)</span><br><span class=\"line\">\t\tos.Exit(<span class=\"number\">1</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\ttcpConn.SetLinger(<span class=\"number\">0</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>strace </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">39070 epoll_wait(6, [&#123;EPOLLIN, &#123;u32&#x3D;9, u64&#x3D;9&#125;&#125;], 32, -1) &#x3D; 1</span><br><span class=\"line\">39070 accept(9, &#123;sa_family&#x3D;AF_INET, sin_port&#x3D;htons(35959), sin_addr&#x3D;inet_addr(&quot;127.0.0.1&quot;)&#125;, [16]) &#x3D; 10</span><br><span class=\"line\">39070 setsockopt(10, SOL_SOCKET, SO_RCVTIMEO, &quot;\\36\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0&quot;, 16) &#x3D; 0</span><br><span class=\"line\">39070 setsockopt(10, SOL_SOCKET, SO_SNDTIMEO, &quot;\\36\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0&quot;, 16) &#x3D; 0</span><br><span class=\"line\">39070 fcntl(10, F_GETFL)                &#x3D; 0x2 (flags O_RDWR)</span><br><span class=\"line\">39070 fcntl(10, F_SETFL, O_RDWR|O_NONBLOCK) &#x3D; 0</span><br><span class=\"line\">39070 getpeername(10, 0x7fff585ad500, 0x7fff585ad4b4) &#x3D; -1 ENOTCONN (Transport endpoint is not connected)</span><br><span class=\"line\">39070 epoll_wait(6, [&#123;EPOLLIN, &#123;u32&#x3D;9, u64&#x3D;9&#125;&#125;], 32, -1) &#x3D; 1</span><br><span class=\"line\">39070 epoll_wait(6, [&#123;EPOLLIN, &#123;u32&#x3D;9, u64&#x3D;9&#125;&#125;], 32, -1) &#x3D; 1</span><br><span class=\"line\">39070 epoll_wait(6, [&#123;EPOLLIN, &#123;u32&#x3D;9, u64&#x3D;9&#125;&#125;], 32, -1) &#x3D; 1</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">39579 epoll_wait(6, [&#123;EPOLLIN, &#123;u32&#x3D;9, u64&#x3D;9&#125;&#125;], 32, -1) &#x3D; 1</span><br><span class=\"line\">39579 accept(9, &#123;sa_family&#x3D;AF_INET, sin_port&#x3D;htons(26949), sin_addr&#x3D;inet_addr(&quot;127.0.0.1&quot;)&#125;, [16]) &#x3D; 10</span><br><span class=\"line\">39579 setsockopt(10, SOL_SOCKET, SO_RCVTIMEO, &quot;\\36\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0&quot;, 16) &#x3D; 0</span><br><span class=\"line\">39579 setsockopt(10, SOL_SOCKET, SO_SNDTIMEO, &quot;\\36\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0&quot;, 16) &#x3D; 0</span><br><span class=\"line\">39579 fcntl(10, F_GETFL)                &#x3D; 0x2 (flags O_RDWR)</span><br><span class=\"line\">39579 fcntl(10, F_SETFL, O_RDWR|O_NONBLOCK) &#x3D; 0</span><br><span class=\"line\">39579 getpeername(10, &#123;sa_family&#x3D;AF_INET, sin_port&#x3D;htons(26949), sin_addr&#x3D;inet_addr(&quot;127.0.0.1&quot;)&#125;, [16]) &#x3D; 0</span><br><span class=\"line\">39579 epoll_ctl(6, EPOLL_CTL_ADD, 10, &#123;EPOLLIN, &#123;u32&#x3D;10, u64&#x3D;10&#125;&#125;) &#x3D; 0</span><br><span class=\"line\">39579 epoll_wait(6, [&#123;EPOLLIN, &#123;u32&#x3D;10, u64&#x3D;10&#125;&#125;], 32, -1) &#x3D; 1</span><br><span class=\"line\">39579 recvfrom(10, &quot;&quot;, 1, 0, NULL, NULL) &#x3D; 0</span><br><span class=\"line\">39579 epoll_ctl(6, EPOLL_CTL_DEL, 10, 0x7fff585ad4a0) &#x3D; 0</span><br><span class=\"line\">39579 close(10)                         &#x3D; 0</span><br><span class=\"line\">39579 epoll_wait(6, [&#123;EPOLLIN, &#123;u32&#x3D;9, u64&#x3D;9&#125;&#125;], 32, -1) &#x3D; 1</span><br></pre></td></tr></table></figure>\n\n<p>TCPRSTTCP(TCP)socket_getpeername()</p>\n<h2 id=\"socket-read--EAGAIN\"><a href=\"#socket-read--EAGAIN\" class=\"headerlink\" title=\"socket_read  EAGAIN\"></a>socket_read  EAGAIN</h2><p>EAGAINResource temporarily unavailableSIGSEGV  ()worker exitRST</p>\n<p>read false thrift_protocol_read_binary_after_message_begin() </p>\n<h2 id=\"redis-lua-\"><a href=\"#redis-lua-\" class=\"headerlink\" title=\"redis lua \"></a>redis lua </h2><p>HMSET key field value [field value ]</p>\n<p>tablefield value<br> script load load</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">redis.call(&#39;hmset&#39;, KEYS[1], unpack(data))</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ntpdate cn.pool.ntp.org</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"phpxdebug-\"><a href=\"#phpxdebug-\" class=\"headerlink\" title=\"phpxdebug \"></a>phpxdebug </h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> phpxdebug  php 9000 phpxdebug port 9001</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"curlhttps\"><a href=\"#curlhttps\" class=\"headerlink\" title=\"curlhttps\"></a>curlhttps</h2><p><a href=\"https://stackoverflow.com/questions/28858351/php-ssl-certificate-error-unable-to-get-local-issuer-certificate\"></a></p>\n<h2 id=\"PHPlong2ip\"><a href=\"#PHPlong2ip\" class=\"headerlink\" title=\"PHPlong2ip\"></a>PHPlong2ip</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">phpstudy PHP32long2ip() 64</span><br><span class=\"line\">reids 32</span><br><span class=\"line\"> phpstudy  php  64 redis win</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"laravel\"><a href=\"#laravel\" class=\"headerlink\" title=\"laravel\"></a>laravel</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">laravel&#x2F;lumen 5.6.* -&gt; 5.8.* 5.8.*composer.jsongitbug</span><br><span class=\"line\"> github </span><br></pre></td></tr></table></figure>\n<p><a href=\"https://github.com/laravel/lumen/compare/5.6...master\">Comparing changes</a></p>\n<h2 id=\"reidsrdb\"><a href=\"#reidsrdb\" class=\"headerlink\" title=\"reidsrdb\"></a>reidsrdb</h2><ul>\n<li> dir  ./  rdbdir /usr/local/redis/</li>\n</ul>\n<h2 id=\"502\"><a href=\"#502\" class=\"headerlink\" title=\"502\"></a>502</h2><ul>\n<li>ip502fpmnginxconnect() to unix:/tmp/php7-cgi.sock failed (11: Resource temporarily unavailable) while connecting to upstream</li>\n</ul>\n<p><a href=\"https://www.cnxct.com/something-about-phpfpm-s-backlog/\">backlog</a></p>\n<h2 id=\"git\"><a href=\"#git\" class=\"headerlink\" title=\"git\"></a>git</h2><ul>\n<li>github clone  eol unix expect windows</li>\n</ul>\n<p>git CRLF<br><a href=\"https://github.com/cssmagic/blog/issues/22\">CRLF </a></p>\n<ul>\n<li>locate centos mlocate  updatedb</li>\n</ul>\n<h2 id=\"ip\"><a href=\"#ip\" class=\"headerlink\" title=\"ip\"></a>ip</h2><ul>\n<li>exce() ping socket_create ICMP ping  suid</li>\n</ul>\n<p><a href=\"https://blog.lilydjwg.me/2013/10/29/non-privileged-icmp-ping.41390.html\"> root  ICMP ping</a></p>\n<p>SOCK_DGRAM<br><code>sudo sysctl -w net.ipv4.ping_group_range=&#39;0 10&#39;</code> <br><a href=\"https://www.jianshu.com/p/d77ede976bb3\"> root</a></p>\n<p> exce() pingIP</p>\n<h2 id=\"PHP-yar\"><a href=\"#PHP-yar\" class=\"headerlink\" title=\"PHP yar\"></a>PHP yar</h2><ul>\n<li>yar msgpack</li>\n</ul>\n<p><a href=\"https://github.com/laruence/yar/issues/113\">MSGPACK</a></p>\n<ul>\n<li>winphpstudy phpcgiyar</li>\n</ul>\n<p><a href=\"https://blessing.studio/phpstudy-prober-page-502-bad-gateway/\">WSARecv() failed (10054: An existing connection was forcibly closed by the remote host)</a></p>\n<h2 id=\"laravel-http-status-419\"><a href=\"#laravel-http-status-419\" class=\"headerlink\" title=\"laravel http status 419\"></a>laravel http status 419</h2><p><code>laravel 419 Sorry, your session has expired. Please refresh and try again.</code></p>\n<p> csrf</p>\n<p><a href=\"https://stackoverflow.com/questions/52583886/post-request-in-laravel-5-7-laravel-5-8-error-419-sorry-your-session-has/53781657#53781657\">419</a></p>\n<h2 id=\"redis--\"><a href=\"#redis--\" class=\"headerlink\" title=\"redis ()\"></a>redis ()</h2><p><a href=\"https://blog.csdn.net/jiangshouzhuang/article/details/50864933\">reids1</a></p>\n<p><a href=\"https://www.jianshu.com/p/7ca4b74c92be\">reids2</a></p>\n<h2 id=\"laravel-\"><a href=\"#laravel-\" class=\"headerlink\" title=\"laravel \"></a>laravel </h2><p>mysql5.6  utf8_mb4 varchar(255)<br>767/4=191  varchar(191)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SQLSTATE[42000]: Syntax error or access violation: 1071 Specified key was too long; </span><br><span class=\"line\">max key length is 767 bytes (SQL: alter table &#96;jobs&#96; add index &#96;jobs_queue_index&#96;(&#96;queue&#96;))</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://stackoverflow.com/questions/1814532/1071-specified-key-was-too-long-max-key-length-is-767-bytes\">error 1071</a></p>\n<h2 id=\"cookie\"><a href=\"#cookie\" class=\"headerlink\" title=\"cookie\"></a>cookie</h2><ul>\n<li> jquery.cookie removeCookie cookie</li>\n</ul>\n<p><a href=\"https://stackoverflow.com/questions/18486165/remove-cookie-using-jquery-not-working\">path</a></p>\n<h2 id=\"gerrit-\"><a href=\"#gerrit-\" class=\"headerlink\" title=\"gerrit \"></a>gerrit </h2><p> <code>git config --global user.email &quot;your_email@mail.com&quot;</code><br>emailphpstormcommit emailphpstorm</p>\n<p>emailcommitpush</p>\n<h2 id=\"phpunit-\"><a href=\"#phpunit-\" class=\"headerlink\" title=\"phpunit \"></a>phpunit </h2><ul>\n<li>phpunit @expectedExceptionMessage  strpos</li>\n</ul>\n<h2 id=\"composer-suggest\"><a href=\"#composer-suggest\" class=\"headerlink\" title=\"composer suggest\"></a>composer suggest</h2><ul>\n<li>Psr\\Http\\Message\\ResponseInterface </li>\n</ul>\n<p>laravel composer.json  suggest  no-suggest: </p>\n<h2 id=\"laravel-s-redis\"><a href=\"#laravel-s-redis\" class=\"headerlink\" title=\"laravel-s redis\"></a>laravel-s redis</h2><ul>\n<li>laravel-s Redis::connection() redis worker max_request<br>worker </li>\n</ul>\n<h2 id=\"swoole-yar-\"><a href=\"#swoole-yar-\" class=\"headerlink\" title=\"swoole yar \"></a>swoole yar </h2><h2 id=\"laravel-\"><a href=\"#laravel-\" class=\"headerlink\" title=\"laravel \"></a>laravel </h2><p>ajax302 redirect /  404</p>\n<ol>\n<li> App\\Exceptions\\Handler::render json</li>\n<li>request header ajax302</li>\n</ol>\n<h2 id=\"laravel-PhpRedisConnection-hscan-bug\"><a href=\"#laravel-PhpRedisConnection-hscan-bug\" class=\"headerlink\" title=\"laravel PhpRedisConnection hscan bug\"></a>laravel PhpRedisConnection hscan bug</h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$it = <span class=\"literal\">null</span>;</span><br><span class=\"line\">$redis-&gt;setOption(\\Redis::OPT_SCAN, \\Redis::SCAN_RETRY);</span><br><span class=\"line\"><span class=\"keyword\">while</span>($device_fds = $redis-&gt;client()-&gt;hScan(Link::getFdMapKey(), $it, <span class=\"string\">&#x27;&#x27;</span>, <span class=\"number\">1000</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">foreach</span>($device_fds <span class=\"keyword\">as</span> $device_unique_mark =&gt; $fd) &#123;</span><br><span class=\"line\">         <span class=\"keyword\">echo</span> $device_unique_mark . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>laravel$redis-&gt;client(),phpredis$it PhpRedisConnection  __call bug</p>\n<h2 id=\"-ksort-\"><a href=\"#-ksort-\" class=\"headerlink\" title=\" ksort \"></a> ksort </h2><p>##laravel queue redis </p>\n<p> sleep=3  block_for <br> sleep=3  block_for =&gt; 3<br>block_for Redis </p>\n<h2 id=\"php-Trait\"><a href=\"#php-Trait\" class=\"headerlink\" title=\"php Trait\"></a>php Trait</h2><p> fatal error <br> Trait</p>\n<h2 id=\"PHP\"><a href=\"#PHP\" class=\"headerlink\" title=\"PHP\"></a>PHP</h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">make</span>(<span class=\"params\">$items = []</span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">static</span>($items);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"PHP-Mockery-mock\"><a href=\"#PHP-Mockery-mock\" class=\"headerlink\" title=\"PHP Mockery::mock\"></a>PHP Mockery::mock</h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$request = Mockery::mock(CurlRequest::class);</span><br><span class=\"line\"><span class=\"comment\">//  $request</span></span><br><span class=\"line\">$request-&gt;shouldReceive(<span class=\"string\">&#x27;post&#x27;</span>)</span><br><span class=\"line\">        -&gt;once()</span><br><span class=\"line\">        -&gt;andReturn([</span><br><span class=\"line\">            <span class=\"string\">&#x27;status&#x27;</span> =&gt; <span class=\"number\">1</span>,</span><br><span class=\"line\">            <span class=\"string\">&#x27;msg&#x27;</span>    =&gt; <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">        ]);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2019-7-11-\"><a href=\"#2019-7-11-\" class=\"headerlink\" title=\"2019.7.11 \"></a>2019.7.11 </h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"number\">16.33</span> * <span class=\"number\">100</span>; <span class=\"comment\">// 1633</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> intval(<span class=\"number\">16.33</span> * <span class=\"number\">100</span>); <span class=\"comment\">// 1632</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> intval(strval(<span class=\"number\">16.33</span> * <span class=\"number\">100</span>)); <span class=\"comment\">// 1633</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> (<span class=\"keyword\">int</span>)(<span class=\"number\">16.33</span> * <span class=\"number\">100</span>); <span class=\"comment\">// 1632</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"laravel-config-cache-\"><a href=\"#laravel-config-cache-\" class=\"headerlink\" title=\"laravel config:cache \"></a>laravel config:cache </h2><p> config:cache  env .env  env  null</p>\n<h3 id=\"php-mb-strlen\"><a href=\"#php-mb-strlen\" class=\"headerlink\" title=\"php mb_strlen\"></a>php mb_strlen</h3><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">echo</span> mb_strlen(<span class=\"string\">&#x27;&#x27;</span>); <span class=\"comment\">// 2 UTF-8</span></span><br><span class=\"line\">mb_strlen(<span class=\"string\">&#x27;&#x27;</span>, <span class=\"string\">&#x27;UTF-8&#x27;</span>); <span class=\"comment\">// 2</span></span><br><span class=\"line\">mb_strlen(<span class=\"string\">&#x27;&#x27;</span>, <span class=\"string\">&#x27;8bit&#x27;</span>); <span class=\"comment\">// 6</span></span><br><span class=\"line\">strlen(<span class=\"string\">&#x27;&#x27;</span>); <span class=\"comment\">// 6</span></span><br><span class=\"line\"><span class=\"comment\">// 8bitphp, 8bit, php. , , 1byte=8bit</span></span><br></pre></td></tr></table></figure>\n\n<p>PHPmbstring.func_overload, substr<br>php runtime  mb_strlen 8bit1byte = 8bit</p>\n<p>##PHP if</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$array = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>, <span class=\"number\">7</span>, <span class=\"number\">8</span>, <span class=\"number\">9</span>, <span class=\"number\">10</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">$start = microtime(<span class=\"literal\">true</span>);</span><br><span class=\"line\"><span class=\"keyword\">for</span> ($i = <span class=\"number\">0</span>; $i &lt; <span class=\"number\">1000000</span>; $i++) &#123;</span><br><span class=\"line\"><span class=\"comment\">//    if (count($array)) &#123;&#125; // 0.01805305480957</span></span><br><span class=\"line\"><span class=\"comment\">//    if (is_null($array)) &#123;&#125; // 0.013534784317017</span></span><br><span class=\"line\"><span class=\"comment\">//    if (empty($array)) &#123;&#125; // 0.014011859893799</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!$array) &#123;&#125; <span class=\"comment\">// 0.016890048980713</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">$end = microtime(<span class=\"literal\">true</span>);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">&quot;1: &quot;</span> . ($end - $start) . <span class=\"string\">&quot;\\n&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">echo</span> memory_get_usage() . <span class=\"string\">&quot;\\n&quot;</span>; <span class=\"comment\">// 389032</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"laravel-phpredis-subscribe-redis-channel-\"><a href=\"#laravel-phpredis-subscribe-redis-channel-\" class=\"headerlink\" title=\"laravel phpredis subscribe redis channel \"></a>laravel phpredis subscribe redis channel </h2><h2 id=\"phppcntl-posix-eventgrpc-kill-15\"><a href=\"#phppcntl-posix-eventgrpc-kill-15\" class=\"headerlink\" title=\"phppcntl posix eventgrpc kill -15\"></a>phppcntl posix eventgrpc kill -15</h2><h2 id=\"php-apcu-apc-enable-cli-apcu-fetch\"><a href=\"#php-apcu-apc-enable-cli-apcu-fetch\" class=\"headerlink\" title=\"php apcu apc.enable_cli apcu_fetch\"></a>php apcu apc.enable_cli apcu_fetch</h2><h2 id=\"php-composer-ignore-platform-reqs\"><a href=\"#php-composer-ignore-platform-reqs\" class=\"headerlink\" title=\"php composer ignore-platform-reqs\"></a>php composer ignore-platform-reqs</h2><p> win composer.json require win</p>\n<h2 id=\"http-https---CONNECT-HOST-\"><a href=\"#http-https---CONNECT-HOST-\" class=\"headerlink\" title=\"http https   CONNECT HOST \"></a>http https   CONNECT HOST </h2><h2 id=\"php-apcu-ttl-cliapc-use-request-time-0\"><a href=\"#php-apcu-ttl-cliapc-use-request-time-0\" class=\"headerlink\" title=\"php apcu ttl cliapc.use_request_time=0\"></a>php apcu ttl cliapc.use_request_time=0</h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// cli </span></span><br><span class=\"line\">$bar = date(<span class=\"string\">&#x27;Y-m-d H:i:s&#x27;</span>);</span><br><span class=\"line\">var_dump(apcu_store(<span class=\"string\">&#x27;foo&#x27;</span>, $bar, <span class=\"number\">3</span>));</span><br><span class=\"line\">sleep(<span class=\"number\">4</span>);</span><br><span class=\"line\">var_dump(apcu_fetch(<span class=\"string\">&#x27;foo&#x27;</span>));</span><br><span class=\"line\"><span class=\"comment\">// apc.use_request_time=1 </span></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"reids-scan-countcount\"><a href=\"#reids-scan-countcount\" class=\"headerlink\" title=\"reids scan countcount\"></a>reids scan countcount</h2><p>yield</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$key = <span class=\"string\">&#x27;test_set_111222&#x27;</span>;</span><br><span class=\"line\">$items = [];</span><br><span class=\"line\"><span class=\"keyword\">for</span> ($i = <span class=\"number\">0</span>; $i &lt; <span class=\"number\">1000</span>; $i++) &#123;</span><br><span class=\"line\">    $items[] = $i;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">$this</span>-&gt;redis-&gt;sAdd($key, ...$items);</span><br><span class=\"line\"><span class=\"keyword\">foreach</span> (<span class=\"keyword\">$this</span>-&gt;get($key, <span class=\"number\">20</span>) <span class=\"keyword\">as</span> $item) &#123;</span><br><span class=\"line\">    var_dump($item);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">get</span>(<span class=\"params\">$key, <span class=\"keyword\">int</span> $count</span>) : <span class=\"title\">Generator</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">$this</span>-&gt;redis-&gt;setOption(\\Redis::OPT_SCAN, \\Redis::SCAN_RETRY);</span><br><span class=\"line\">    $it = <span class=\"literal\">null</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> ($item = <span class=\"keyword\">$this</span>-&gt;redis-&gt;client()-&gt;sScan($key, $it, <span class=\"string\">&#x27;*&#x27;</span>, $count)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">yield</span> $item;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"-header-X-Accel-Redirect-nginxIO\"><a href=\"#-header-X-Accel-Redirect-nginxIO\" class=\"headerlink\" title=\" header X-Accel-Redirect nginxIO\"></a> header X-Accel-Redirect nginxIO</h2><h2 id=\"Wireshark-\"><a href=\"#Wireshark-\" class=\"headerlink\" title=\"Wireshark \"></a>Wireshark </h2><p><a href=\"https://segmentfault.com/a/1190000019913529\">wireshark</a></p>\n<h2 id=\"socket-set-option-\"><a href=\"#socket-set-option-\" class=\"headerlink\" title=\"socket_set_option \"></a>socket_set_option </h2><p>SO_REUSEPORT  bind() </p>\n<h2 id=\"linux-TCP-SYN-ACK-\"><a href=\"#linux-TCP-SYN-ACK-\" class=\"headerlink\" title=\"linux TCP(SYN,ACK)\"></a>linux TCP(SYN,ACK)</h2><p><a href=\"https://blog.csdn.net/ywq935/article/details/91384854\">1</a></p>\n<p><a href=\"https://www.cnblogs.com/cheyunhua/p/9082674.html\">net.ipv4.tcp_tw_recycle</a></p>\n<h2 id=\"php-socket-EVENT-\"><a href=\"#php-socket-EVENT-\" class=\"headerlink\" title=\"php socket EVENT \"></a>php socket EVENT </h2><p></p>\n<p>go RST</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">\t<span class=\"string\">&quot;flag&quot;</span></span><br><span class=\"line\">\t<span class=\"string\">&quot;fmt&quot;</span></span><br><span class=\"line\">\t<span class=\"string\">&quot;net&quot;</span></span><br><span class=\"line\">\t<span class=\"string\">&quot;os&quot;</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> host = flag.String(<span class=\"string\">&quot;host&quot;</span>, <span class=\"string\">&quot;172.16.1.49&quot;</span>, <span class=\"string\">&quot;host&quot;</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> port = flag.String(<span class=\"string\">&quot;port&quot;</span>, <span class=\"string\">&quot;9999&quot;</span>, <span class=\"string\">&quot;port&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span>  &#123;</span><br><span class=\"line\">\tconn, err := net.Dial(<span class=\"string\">&quot;tcp&quot;</span>, *host+<span class=\"string\">&quot;:&quot;</span>+*port)</span><br><span class=\"line\">\tfmt.Println(*host+<span class=\"string\">&quot;:&quot;</span>+*port)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tfmt.Println(<span class=\"string\">&quot;err1&quot;</span>)</span><br><span class=\"line\">\t\tos.Exit(<span class=\"number\">1</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">defer</span> conn.Close()</span><br><span class=\"line\"></span><br><span class=\"line\">\ttcpConn, ok := conn.(*net.TCPConn)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> !ok &#123;</span><br><span class=\"line\">\t\tfmt.Println(<span class=\"string\">&quot;err2&quot;</span>)</span><br><span class=\"line\">\t\tos.Exit(<span class=\"number\">1</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\ttcpConn.SetLinger(<span class=\"number\">0</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>strace </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">39070 epoll_wait(6, [&#123;EPOLLIN, &#123;u32&#x3D;9, u64&#x3D;9&#125;&#125;], 32, -1) &#x3D; 1</span><br><span class=\"line\">39070 accept(9, &#123;sa_family&#x3D;AF_INET, sin_port&#x3D;htons(35959), sin_addr&#x3D;inet_addr(&quot;127.0.0.1&quot;)&#125;, [16]) &#x3D; 10</span><br><span class=\"line\">39070 setsockopt(10, SOL_SOCKET, SO_RCVTIMEO, &quot;\\36\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0&quot;, 16) &#x3D; 0</span><br><span class=\"line\">39070 setsockopt(10, SOL_SOCKET, SO_SNDTIMEO, &quot;\\36\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0&quot;, 16) &#x3D; 0</span><br><span class=\"line\">39070 fcntl(10, F_GETFL)                &#x3D; 0x2 (flags O_RDWR)</span><br><span class=\"line\">39070 fcntl(10, F_SETFL, O_RDWR|O_NONBLOCK) &#x3D; 0</span><br><span class=\"line\">39070 getpeername(10, 0x7fff585ad500, 0x7fff585ad4b4) &#x3D; -1 ENOTCONN (Transport endpoint is not connected)</span><br><span class=\"line\">39070 epoll_wait(6, [&#123;EPOLLIN, &#123;u32&#x3D;9, u64&#x3D;9&#125;&#125;], 32, -1) &#x3D; 1</span><br><span class=\"line\">39070 epoll_wait(6, [&#123;EPOLLIN, &#123;u32&#x3D;9, u64&#x3D;9&#125;&#125;], 32, -1) &#x3D; 1</span><br><span class=\"line\">39070 epoll_wait(6, [&#123;EPOLLIN, &#123;u32&#x3D;9, u64&#x3D;9&#125;&#125;], 32, -1) &#x3D; 1</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">39579 epoll_wait(6, [&#123;EPOLLIN, &#123;u32&#x3D;9, u64&#x3D;9&#125;&#125;], 32, -1) &#x3D; 1</span><br><span class=\"line\">39579 accept(9, &#123;sa_family&#x3D;AF_INET, sin_port&#x3D;htons(26949), sin_addr&#x3D;inet_addr(&quot;127.0.0.1&quot;)&#125;, [16]) &#x3D; 10</span><br><span class=\"line\">39579 setsockopt(10, SOL_SOCKET, SO_RCVTIMEO, &quot;\\36\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0&quot;, 16) &#x3D; 0</span><br><span class=\"line\">39579 setsockopt(10, SOL_SOCKET, SO_SNDTIMEO, &quot;\\36\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0&quot;, 16) &#x3D; 0</span><br><span class=\"line\">39579 fcntl(10, F_GETFL)                &#x3D; 0x2 (flags O_RDWR)</span><br><span class=\"line\">39579 fcntl(10, F_SETFL, O_RDWR|O_NONBLOCK) &#x3D; 0</span><br><span class=\"line\">39579 getpeername(10, &#123;sa_family&#x3D;AF_INET, sin_port&#x3D;htons(26949), sin_addr&#x3D;inet_addr(&quot;127.0.0.1&quot;)&#125;, [16]) &#x3D; 0</span><br><span class=\"line\">39579 epoll_ctl(6, EPOLL_CTL_ADD, 10, &#123;EPOLLIN, &#123;u32&#x3D;10, u64&#x3D;10&#125;&#125;) &#x3D; 0</span><br><span class=\"line\">39579 epoll_wait(6, [&#123;EPOLLIN, &#123;u32&#x3D;10, u64&#x3D;10&#125;&#125;], 32, -1) &#x3D; 1</span><br><span class=\"line\">39579 recvfrom(10, &quot;&quot;, 1, 0, NULL, NULL) &#x3D; 0</span><br><span class=\"line\">39579 epoll_ctl(6, EPOLL_CTL_DEL, 10, 0x7fff585ad4a0) &#x3D; 0</span><br><span class=\"line\">39579 close(10)                         &#x3D; 0</span><br><span class=\"line\">39579 epoll_wait(6, [&#123;EPOLLIN, &#123;u32&#x3D;9, u64&#x3D;9&#125;&#125;], 32, -1) &#x3D; 1</span><br></pre></td></tr></table></figure>\n\n<p>TCPRSTTCP(TCP)socket_getpeername()</p>\n<h2 id=\"socket-read--EAGAIN\"><a href=\"#socket-read--EAGAIN\" class=\"headerlink\" title=\"socket_read  EAGAIN\"></a>socket_read  EAGAIN</h2><p>EAGAINResource temporarily unavailableSIGSEGV  ()worker exitRST</p>\n<p>read false thrift_protocol_read_binary_after_message_begin() </p>\n<h2 id=\"redis-lua-\"><a href=\"#redis-lua-\" class=\"headerlink\" title=\"redis lua \"></a>redis lua </h2><p>HMSET key field value [field value ]</p>\n<p>tablefield value<br> script load load</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">redis.call(&#39;hmset&#39;, KEYS[1], unpack(data))</span><br></pre></td></tr></table></figure>\n"},{"url":"/2019/03/01/algorithms-binary_search.html","title":"-","keywords":",","description":"","date":"2019-03-01T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n## \n\n```\n\n\n\n\n\n\n```\n\n## \n\n```\nn\n\nn/2\nn/2/2 = n/4\n\nmn/(2^m)\n\n\n\nn/(2^m)=1\n\n  2^m=n\n\n log2(n)\n```\n\n## \n\n```php\n<?php\n/**\n * @param array $data\n * @param $search\n * @return int|null \n */\nfunction binary_search(array $data, $search)\n{\n    $low = 0;\n    $high = count($data) - 1;\n\n    while ($low <= $high) {\n        $mid = (int)(($low + $high) / 2);\n\n        $guess = $data[$mid];\n\n        if ($guess == $search) {\n            return $mid;\n        } elseif ($guess > $search) {\n            $high = $mid - 1;\n        } else {\n            $low = $mid + 1;\n        }\n    }\n    return null;\n}\n\n$array = [1, 3, 5, 6, 8, 9, 14, 15];\n\nvar_dump(binary_search($array, 0));\n```\n","source":"_posts/algorithms/binary_search.md","raw":"---\nurl: /2019/03/01/algorithms-binary_search.html\ntitle: \"-\"\nkeywords: \",\"\ndescription: \"\"\ndate: 2019-03-01T22:31:57+08:00\ndraft: false\ntags: [\"PHP\", \"\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n## \n\n```\n\n\n\n\n\n\n```\n\n## \n\n```\nn\n\nn/2\nn/2/2 = n/4\n\nmn/(2^m)\n\n\n\nn/(2^m)=1\n\n  2^m=n\n\n log2(n)\n```\n\n## \n\n```php\n<?php\n/**\n * @param array $data\n * @param $search\n * @return int|null \n */\nfunction binary_search(array $data, $search)\n{\n    $low = 0;\n    $high = count($data) - 1;\n\n    while ($low <= $high) {\n        $mid = (int)(($low + $high) / 2);\n\n        $guess = $data[$mid];\n\n        if ($guess == $search) {\n            return $mid;\n        } elseif ($guess > $search) {\n            $high = $mid - 1;\n        } else {\n            $low = $mid + 1;\n        }\n    }\n    return null;\n}\n\n$array = [1, 3, 5, 6, 8, 9, 14, 15];\n\nvar_dump(binary_search($array, 0));\n```\n","slug":"algorithms/binary_search","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf2b0005mv05fdk26zvr","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">n</span><br><span class=\"line\"></span><br><span class=\"line\">n&#x2F;2</span><br><span class=\"line\">n&#x2F;2&#x2F;2 &#x3D; n&#x2F;4</span><br><span class=\"line\"></span><br><span class=\"line\">mn&#x2F;(2^m)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">n&#x2F;(2^m)&#x3D;1</span><br><span class=\"line\"></span><br><span class=\"line\">  2^m&#x3D;n</span><br><span class=\"line\"></span><br><span class=\"line\"> log2(n)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> array $data</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> $search</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> int|null </span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">binary_search</span>(<span class=\"params\"><span class=\"keyword\">array</span> $data, $search</span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    $low = <span class=\"number\">0</span>;</span><br><span class=\"line\">    $high = count($data) - <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> ($low &lt;= $high) &#123;</span><br><span class=\"line\">        $mid = (<span class=\"keyword\">int</span>)(($low + $high) / <span class=\"number\">2</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        $guess = $data[$mid];</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($guess == $search) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> $mid;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">elseif</span> ($guess &gt; $search) &#123;</span><br><span class=\"line\">            $high = $mid - <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            $low = $mid + <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$array = [<span class=\"number\">1</span>, <span class=\"number\">3</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>, <span class=\"number\">8</span>, <span class=\"number\">9</span>, <span class=\"number\">14</span>, <span class=\"number\">15</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">var_dump(binary_search($array, <span class=\"number\">0</span>));</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">n</span><br><span class=\"line\"></span><br><span class=\"line\">n&#x2F;2</span><br><span class=\"line\">n&#x2F;2&#x2F;2 &#x3D; n&#x2F;4</span><br><span class=\"line\"></span><br><span class=\"line\">mn&#x2F;(2^m)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">n&#x2F;(2^m)&#x3D;1</span><br><span class=\"line\"></span><br><span class=\"line\">  2^m&#x3D;n</span><br><span class=\"line\"></span><br><span class=\"line\"> log2(n)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> array $data</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> $search</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> int|null </span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">binary_search</span>(<span class=\"params\"><span class=\"keyword\">array</span> $data, $search</span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    $low = <span class=\"number\">0</span>;</span><br><span class=\"line\">    $high = count($data) - <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> ($low &lt;= $high) &#123;</span><br><span class=\"line\">        $mid = (<span class=\"keyword\">int</span>)(($low + $high) / <span class=\"number\">2</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        $guess = $data[$mid];</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($guess == $search) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> $mid;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">elseif</span> ($guess &gt; $search) &#123;</span><br><span class=\"line\">            $high = $mid - <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            $low = $mid + <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$array = [<span class=\"number\">1</span>, <span class=\"number\">3</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>, <span class=\"number\">8</span>, <span class=\"number\">9</span>, <span class=\"number\">14</span>, <span class=\"number\">15</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">var_dump(binary_search($array, <span class=\"number\">0</span>));</span><br></pre></td></tr></table></figure>\n"},{"url":"/2019/03/01/algorithms-arrangement-combination.html","title":"-","keywords":",","description":"","date":"2019-03-01T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n## \n\n```\n\n```\n## \n\n```php\n<?php\n/**\n * \n * @param int $n\n * @return int\n */\nfunction factorial(int $n)\n{\n    //array_product \n    //range \n    return array_product(range(1, $n));\n}\n\n/**\n * \n * @param int $n\n * @param int $m\n * @return int\n */\nfunction A(int $n, int $m)\n{\n    return factorial($n) / factorial($n - $m);\n}\n\n/**\n * \n * @param int $n\n * @param int $m\n * @return int\n */\nfunction C($n, $m)\n{\n    return A($n, $m) / factorial($m);\n}\n\n/**\n * \n * @param array $a \n * @param int $m \n * @return array\n */\nfunction arrangement($a, $m)\n{\n    $r = [];\n    $n = count($a);\n    if ($m <= 0 || $m > $n) {\n        return $r;\n    }\n    for ($i = 0; $i < $n; $i++) {\n        $b = $a;\n        $t = array_splice($b, $i, 1);\n        if ($m == 1) {\n            $r[] = $t;\n        } else {\n            $c = arrangement($b, $m - 1);\n            foreach ($c as $v) {\n                $r[] = array_merge($t, $v);\n            }\n        }\n    }\n\n    return $r;\n}\n\n/**\n * \n * @param array $a \n * @param int $m \n * @return array\n */\nfunction combination(array $a, int $m)\n{\n    $r = [];\n    $n = count($a);\n    if ($m <= 0 || $m > $n) {\n        return $r;\n    }\n\n    for ($i = 0; $i < $n; $i++) {\n        $t = [$a[$i]];\n        if ($m == 1) {\n            $r[] = $t;\n        } else {\n            $b = array_slice($a, $i + 1);\n            $c = combination($b, $m - 1);\n            foreach ($c as $v) {\n                $r[] = array_merge($t, $v);\n            }\n        }\n    }\n    return $r;\n}\n\nvar_dump(C(5, 3));\nvar_dump(combination(range(1, 3), 2));\nvar_dump(arrangement(range(1, 3), 2));\n```\n","source":"_posts/algorithms/arrangement_combination.md","raw":"---\nurl: /2019/03/01/algorithms-arrangement-combination.html\ntitle: \"-\"\nkeywords: \",\"\ndescription: \"\"\ndate: 2019-03-01T22:31:57+08:00\ndraft: false\ntags: [\"PHP\", \"\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n## \n\n```\n\n```\n## \n\n```php\n<?php\n/**\n * \n * @param int $n\n * @return int\n */\nfunction factorial(int $n)\n{\n    //array_product \n    //range \n    return array_product(range(1, $n));\n}\n\n/**\n * \n * @param int $n\n * @param int $m\n * @return int\n */\nfunction A(int $n, int $m)\n{\n    return factorial($n) / factorial($n - $m);\n}\n\n/**\n * \n * @param int $n\n * @param int $m\n * @return int\n */\nfunction C($n, $m)\n{\n    return A($n, $m) / factorial($m);\n}\n\n/**\n * \n * @param array $a \n * @param int $m \n * @return array\n */\nfunction arrangement($a, $m)\n{\n    $r = [];\n    $n = count($a);\n    if ($m <= 0 || $m > $n) {\n        return $r;\n    }\n    for ($i = 0; $i < $n; $i++) {\n        $b = $a;\n        $t = array_splice($b, $i, 1);\n        if ($m == 1) {\n            $r[] = $t;\n        } else {\n            $c = arrangement($b, $m - 1);\n            foreach ($c as $v) {\n                $r[] = array_merge($t, $v);\n            }\n        }\n    }\n\n    return $r;\n}\n\n/**\n * \n * @param array $a \n * @param int $m \n * @return array\n */\nfunction combination(array $a, int $m)\n{\n    $r = [];\n    $n = count($a);\n    if ($m <= 0 || $m > $n) {\n        return $r;\n    }\n\n    for ($i = 0; $i < $n; $i++) {\n        $t = [$a[$i]];\n        if ($m == 1) {\n            $r[] = $t;\n        } else {\n            $b = array_slice($a, $i + 1);\n            $c = combination($b, $m - 1);\n            foreach ($c as $v) {\n                $r[] = array_merge($t, $v);\n            }\n        }\n    }\n    return $r;\n}\n\nvar_dump(C(5, 3));\nvar_dump(combination(range(1, 3), 2));\nvar_dump(arrangement(range(1, 3), 2));\n```\n","slug":"algorithms/arrangement_combination","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf2d0009mv054hn17x1x","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> int $n</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> int</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">factorial</span>(<span class=\"params\"><span class=\"keyword\">int</span> $n</span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//array_product </span></span><br><span class=\"line\">    <span class=\"comment\">//range </span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> array_product(range(<span class=\"number\">1</span>, $n));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> int $n</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> int $m</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> int</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">A</span>(<span class=\"params\"><span class=\"keyword\">int</span> $n, <span class=\"keyword\">int</span> $m</span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> factorial($n) / factorial($n - $m);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> int $n</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> int $m</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> int</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">C</span>(<span class=\"params\">$n, $m</span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> A($n, $m) / factorial($m);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> array $a </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> int $m </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> array</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">arrangement</span>(<span class=\"params\">$a, $m</span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    $r = [];</span><br><span class=\"line\">    $n = count($a);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ($m &lt;= <span class=\"number\">0</span> || $m &gt; $n) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> $r;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> ($i = <span class=\"number\">0</span>; $i &lt; $n; $i++) &#123;</span><br><span class=\"line\">        $b = $a;</span><br><span class=\"line\">        $t = array_splice($b, $i, <span class=\"number\">1</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($m == <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">            $r[] = $t;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            $c = arrangement($b, $m - <span class=\"number\">1</span>);</span><br><span class=\"line\">            <span class=\"keyword\">foreach</span> ($c <span class=\"keyword\">as</span> $v) &#123;</span><br><span class=\"line\">                $r[] = array_merge($t, $v);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> $r;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> array $a </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> int $m </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> array</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">combination</span>(<span class=\"params\"><span class=\"keyword\">array</span> $a, <span class=\"keyword\">int</span> $m</span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    $r = [];</span><br><span class=\"line\">    $n = count($a);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ($m &lt;= <span class=\"number\">0</span> || $m &gt; $n) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> $r;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> ($i = <span class=\"number\">0</span>; $i &lt; $n; $i++) &#123;</span><br><span class=\"line\">        $t = [$a[$i]];</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($m == <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">            $r[] = $t;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            $b = array_slice($a, $i + <span class=\"number\">1</span>);</span><br><span class=\"line\">            $c = combination($b, $m - <span class=\"number\">1</span>);</span><br><span class=\"line\">            <span class=\"keyword\">foreach</span> ($c <span class=\"keyword\">as</span> $v) &#123;</span><br><span class=\"line\">                $r[] = array_merge($t, $v);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> $r;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">var_dump(C(<span class=\"number\">5</span>, <span class=\"number\">3</span>));</span><br><span class=\"line\">var_dump(combination(range(<span class=\"number\">1</span>, <span class=\"number\">3</span>), <span class=\"number\">2</span>));</span><br><span class=\"line\">var_dump(arrangement(range(<span class=\"number\">1</span>, <span class=\"number\">3</span>), <span class=\"number\">2</span>));</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> int $n</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> int</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">factorial</span>(<span class=\"params\"><span class=\"keyword\">int</span> $n</span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//array_product </span></span><br><span class=\"line\">    <span class=\"comment\">//range </span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> array_product(range(<span class=\"number\">1</span>, $n));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> int $n</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> int $m</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> int</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">A</span>(<span class=\"params\"><span class=\"keyword\">int</span> $n, <span class=\"keyword\">int</span> $m</span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> factorial($n) / factorial($n - $m);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> int $n</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> int $m</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> int</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">C</span>(<span class=\"params\">$n, $m</span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> A($n, $m) / factorial($m);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> array $a </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> int $m </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> array</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">arrangement</span>(<span class=\"params\">$a, $m</span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    $r = [];</span><br><span class=\"line\">    $n = count($a);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ($m &lt;= <span class=\"number\">0</span> || $m &gt; $n) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> $r;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> ($i = <span class=\"number\">0</span>; $i &lt; $n; $i++) &#123;</span><br><span class=\"line\">        $b = $a;</span><br><span class=\"line\">        $t = array_splice($b, $i, <span class=\"number\">1</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($m == <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">            $r[] = $t;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            $c = arrangement($b, $m - <span class=\"number\">1</span>);</span><br><span class=\"line\">            <span class=\"keyword\">foreach</span> ($c <span class=\"keyword\">as</span> $v) &#123;</span><br><span class=\"line\">                $r[] = array_merge($t, $v);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> $r;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> array $a </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> int $m </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> array</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">combination</span>(<span class=\"params\"><span class=\"keyword\">array</span> $a, <span class=\"keyword\">int</span> $m</span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    $r = [];</span><br><span class=\"line\">    $n = count($a);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ($m &lt;= <span class=\"number\">0</span> || $m &gt; $n) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> $r;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> ($i = <span class=\"number\">0</span>; $i &lt; $n; $i++) &#123;</span><br><span class=\"line\">        $t = [$a[$i]];</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($m == <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">            $r[] = $t;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            $b = array_slice($a, $i + <span class=\"number\">1</span>);</span><br><span class=\"line\">            $c = combination($b, $m - <span class=\"number\">1</span>);</span><br><span class=\"line\">            <span class=\"keyword\">foreach</span> ($c <span class=\"keyword\">as</span> $v) &#123;</span><br><span class=\"line\">                $r[] = array_merge($t, $v);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> $r;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">var_dump(C(<span class=\"number\">5</span>, <span class=\"number\">3</span>));</span><br><span class=\"line\">var_dump(combination(range(<span class=\"number\">1</span>, <span class=\"number\">3</span>), <span class=\"number\">2</span>));</span><br><span class=\"line\">var_dump(arrangement(range(<span class=\"number\">1</span>, <span class=\"number\">3</span>), <span class=\"number\">2</span>));</span><br></pre></td></tr></table></figure>\n"},{"url":"/2020/05/12/bitmap.html","title":"bitmap","date":"2020-05-12T02:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n[ https://www.infoq.cn/article/j3b2Eoz_V7Wzm27odwXX](https://www.infoq.cn/article/j3b2Eoz_V7Wzm27odwXX)\n\n## Bitmap\n\n bit  bit \n\n`[2,3,5,8]` Bitmap `[001101001]` 2  index  2 3  index  3 \n Bitmap\n\n 1 \n\n Bitmap  Integer  32  Bitmap  Integer.MAX_VALUE  Bitmap  32 \n 32  Bitmap  512 M 2^32/8/1024/1024\n\n Bitmap  Bitmap  1  40  512 M \n\n## Roaring Bitmap\n\nRoaring Bitmap  32  Integer  16  16  16  key key  Container\n 16  Container \n 3  Container Array ContainerBitmap Container  Run Container\n\n### Array Container\n\nArray Container Array Container  short array array \n 4 4096 4096  Bitmap Container\n\n Array Container \n 0xFFFF0000  0xFFFF0001  Bitmap ,  16  FFFF key 16  Container  ; \n 16  0  1,  Array Container  0  1 \n Bitmap  512M  2+4=6 key  2 Bytes value  4 Bytes\n\n### Bitmap Container\n\nBitmap Container Bitmap long  1024 Array Container Array Container \n\n 1024 \n Container  16  Bitmap  8192 Bytes2^16/8,  long  8  Bytes 10248192/8 long \n Bitmap container  8 KB1024 * 8 Byte\n\n Array Container  4096  8 k4096*2Bytes Bitmap  8 KB\n 4096 Array Container  Bitmap Container  8 K\n Array Container DEFAULT_MAX_SIZE Bitmap Container\n\n### Run Container\n\nRun Container Container \n 1  100 100  Run  Run Length EncodingRLE\n, \n:  `[11, 12, 13, 14, 15, 21, 22]` `11, 4, 21, 1`\n Container  65536  2  short\n 128 KB \n\nRedis \n","source":"_posts/algorithms/bitmap.md","raw":"---\nurl: /2020/05/12/bitmap.html\ntitle: \"bitmap\"\ndate: 2020-05-12T18:31:57+08:00\ndraft: false\ntags: [\"\"]\ntags_weight: 100\ncategories: [\"\"]\ncategoryes_weight: 100\n---\n\n[ https://www.infoq.cn/article/j3b2Eoz_V7Wzm27odwXX](https://www.infoq.cn/article/j3b2Eoz_V7Wzm27odwXX)\n\n## Bitmap\n\n bit  bit \n\n`[2,3,5,8]` Bitmap `[001101001]` 2  index  2 3  index  3 \n Bitmap\n\n 1 \n\n Bitmap  Integer  32  Bitmap  Integer.MAX_VALUE  Bitmap  32 \n 32  Bitmap  512 M 2^32/8/1024/1024\n\n Bitmap  Bitmap  1  40  512 M \n\n## Roaring Bitmap\n\nRoaring Bitmap  32  Integer  16  16  16  key key  Container\n 16  Container \n 3  Container Array ContainerBitmap Container  Run Container\n\n### Array Container\n\nArray Container Array Container  short array array \n 4 4096 4096  Bitmap Container\n\n Array Container \n 0xFFFF0000  0xFFFF0001  Bitmap ,  16  FFFF key 16  Container  ; \n 16  0  1,  Array Container  0  1 \n Bitmap  512M  2+4=6 key  2 Bytes value  4 Bytes\n\n### Bitmap Container\n\nBitmap Container Bitmap long  1024 Array Container Array Container \n\n 1024 \n Container  16  Bitmap  8192 Bytes2^16/8,  long  8  Bytes 10248192/8 long \n Bitmap container  8 KB1024 * 8 Byte\n\n Array Container  4096  8 k4096*2Bytes Bitmap  8 KB\n 4096 Array Container  Bitmap Container  8 K\n Array Container DEFAULT_MAX_SIZE Bitmap Container\n\n### Run Container\n\nRun Container Container \n 1  100 100  Run  Run Length EncodingRLE\n, \n:  `[11, 12, 13, 14, 15, 21, 22]` `11, 4, 21, 1`\n Container  65536  2  short\n 128 KB \n\nRedis \n","slug":"algorithms/bitmap","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf2f000amv05epcm1qeu","content":"<p><a href=\"https://www.infoq.cn/article/j3b2Eoz_V7Wzm27odwXX\"> https://www.infoq.cn/article/j3b2Eoz_V7Wzm27odwXX</a></p>\n<h2 id=\"Bitmap\"><a href=\"#Bitmap\" class=\"headerlink\" title=\"Bitmap\"></a>Bitmap</h2><p> bit  bit </p>\n<p><code>[2,3,5,8]</code> Bitmap <code>[001101001]</code> 2  index  2 3  index  3 <br> Bitmap</p>\n<p> 1 </p>\n<p> Bitmap  Integer  32  Bitmap  Integer.MAX_VALUE  Bitmap  32 <br> 32  Bitmap  512 M 2^32/8/1024/1024</p>\n<p> Bitmap  Bitmap  1  40  512 M </p>\n<h2 id=\"Roaring-Bitmap\"><a href=\"#Roaring-Bitmap\" class=\"headerlink\" title=\"Roaring Bitmap\"></a>Roaring Bitmap</h2><p>Roaring Bitmap  32  Integer  16  16  16  key key  Container<br> 16  Container <br> 3  Container Array ContainerBitmap Container  Run Container</p>\n<h3 id=\"Array-Container\"><a href=\"#Array-Container\" class=\"headerlink\" title=\"Array Container\"></a>Array Container</h3><p>Array Container Array Container  short array array <br> 4 4096 4096  Bitmap Container</p>\n<p> Array Container <br> 0xFFFF0000  0xFFFF0001  Bitmap ,  16  FFFF key 16  Container  ;<br> 16  0  1,  Array Container  0  1 <br> Bitmap  512M  2+4=6 key  2 Bytes value  4 Bytes</p>\n<h3 id=\"Bitmap-Container\"><a href=\"#Bitmap-Container\" class=\"headerlink\" title=\"Bitmap Container\"></a>Bitmap Container</h3><p>Bitmap Container Bitmap long  1024 Array Container Array Container </p>\n<p> 1024 <br> Container  16  Bitmap  8192 Bytes2^16/8,  long  8  Bytes 10248192/8 long <br> Bitmap container  8 KB1024 * 8 Byte</p>\n<p> Array Container  4096  8 k4096*2Bytes Bitmap  8 KB<br> 4096 Array Container  Bitmap Container  8 K<br> Array Container DEFAULT_MAX_SIZE Bitmap Container</p>\n<h3 id=\"Run-Container\"><a href=\"#Run-Container\" class=\"headerlink\" title=\"Run Container\"></a>Run Container</h3><p>Run Container Container <br> 1  100 100  Run  Run Length EncodingRLE<br>, <br>:  <code>[11, 12, 13, 14, 15, 21, 22]</code> <code>11, 4, 21, 1</code><br> Container  65536  2  short<br> 128 KB </p>\n<p>Redis </p>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://www.infoq.cn/article/j3b2Eoz_V7Wzm27odwXX\"> https://www.infoq.cn/article/j3b2Eoz_V7Wzm27odwXX</a></p>\n<h2 id=\"Bitmap\"><a href=\"#Bitmap\" class=\"headerlink\" title=\"Bitmap\"></a>Bitmap</h2><p> bit  bit </p>\n<p><code>[2,3,5,8]</code> Bitmap <code>[001101001]</code> 2  index  2 3  index  3 <br> Bitmap</p>\n<p> 1 </p>\n<p> Bitmap  Integer  32  Bitmap  Integer.MAX_VALUE  Bitmap  32 <br> 32  Bitmap  512 M 2^32/8/1024/1024</p>\n<p> Bitmap  Bitmap  1  40  512 M </p>\n<h2 id=\"Roaring-Bitmap\"><a href=\"#Roaring-Bitmap\" class=\"headerlink\" title=\"Roaring Bitmap\"></a>Roaring Bitmap</h2><p>Roaring Bitmap  32  Integer  16  16  16  key key  Container<br> 16  Container <br> 3  Container Array ContainerBitmap Container  Run Container</p>\n<h3 id=\"Array-Container\"><a href=\"#Array-Container\" class=\"headerlink\" title=\"Array Container\"></a>Array Container</h3><p>Array Container Array Container  short array array <br> 4 4096 4096  Bitmap Container</p>\n<p> Array Container <br> 0xFFFF0000  0xFFFF0001  Bitmap ,  16  FFFF key 16  Container  ;<br> 16  0  1,  Array Container  0  1 <br> Bitmap  512M  2+4=6 key  2 Bytes value  4 Bytes</p>\n<h3 id=\"Bitmap-Container\"><a href=\"#Bitmap-Container\" class=\"headerlink\" title=\"Bitmap Container\"></a>Bitmap Container</h3><p>Bitmap Container Bitmap long  1024 Array Container Array Container </p>\n<p> 1024 <br> Container  16  Bitmap  8192 Bytes2^16/8,  long  8  Bytes 10248192/8 long <br> Bitmap container  8 KB1024 * 8 Byte</p>\n<p> Array Container  4096  8 k4096*2Bytes Bitmap  8 KB<br> 4096 Array Container  Bitmap Container  8 K<br> Array Container DEFAULT_MAX_SIZE Bitmap Container</p>\n<h3 id=\"Run-Container\"><a href=\"#Run-Container\" class=\"headerlink\" title=\"Run Container\"></a>Run Container</h3><p>Run Container Container <br> 1  100 100  Run  Run Length EncodingRLE<br>, <br>:  <code>[11, 12, 13, 14, 15, 21, 22]</code> <code>11, 4, 21, 1</code><br> Container  65536  2  short<br> 128 KB </p>\n<p>Redis </p>\n"},{"url":"/2019/04/01/algorithms-circuit-breaker.html","title":"-","keywords":",","description":"","date":"2019-04-01T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n## \n\n```\n\n\n\n\n\n\n\n\n```\n\n## PHP\n\n```php\n<?php\n/**\n * Class HealthStats\n * \n */\nclass HealthStats\n{\n    /**\n     * 10bucketbucket 1\n     */\n    private const BUCKET_NUM = 10;\n\n    /**\n     * \n     */\n    private const HEALTHY_RATE = 0.9;\n\n    private $service = '';\n    private $buckets = [];\n    private $current_time = 0;\n\n    public function __construct(string $service)\n    {\n        $this->service = $service;\n    }\n\n    public function success()\n    {\n        $this->shiftBuckets();\n\n        $this->buckets[count($this->buckets) - 1]['success']++;\n    }\n\n    public function fail()\n    {\n        $this->shiftBuckets();\n\n        $this->buckets[count($this->buckets) - 1]['fail']++;\n    }\n\n    public function isHealthy()\n    {\n        $this->shiftBuckets();\n\n        $success = 0;\n        $fail = 0;\n        foreach ($this->buckets as $bucket) {\n            $success += $bucket['success'];\n            $fail += $bucket['fail'];\n        }\n\n        $total = $success + $fail;\n\n        // 10\n        if ($total < 10) {\n            return true;\n        }\n\n        return ($success * 1.0 / $total) >= self::HEALTHY_RATE;\n    }\n\n    protected function shiftBuckets()\n    {\n        $now = time();\n\n        $time_diff = $now - $this->current_time;\n        // return\n        if (!$time_diff) {\n            return;\n        }\n\n        //  buckets\n        if ($time_diff >= self::BUCKET_NUM) {\n            $this->buckets = array_fill(0, self::BUCKET_NUM, ['success' => 0, 'fail' => 0]);\n        } else {\n            $this->buckets = array_merge(\n                array_slice($this->buckets, $time_diff, self::BUCKET_NUM - $time_diff),\n                array_fill(0, $time_diff, ['success' => 0, 'fail' => 0])\n            );\n        }\n        $this->current_time = $now;\n    }\n}\n\n/**\n * Class CircuitBreaker\n * \n */\nclass CircuitBreaker\n{\n    /**\n     * 5\n     */\n    private const BREAK_PERIOD = 1;\n\n    /**\n     * 3\n     */\n    private const RECOVER_PERIOD = 2;\n\n    private $health_stats;\n    /**\n     * 1  \n     * 2  \n     * 3  \n     * @var int\n     */\n    private $status = 1;\n\n    /**\n     * \n     * @var int\n     */\n    private $break_time = 0;\n\n    public function __construct(HealthStats $health_stats)\n    {\n        $this->health_stats = $health_stats;\n    }\n\n    public function isBreak()\n    {\n        $now = time();\n        $is_healthy = $this->health_stats->isHealthy();\n        $break_last_time = $now - $this->break_time;\n\n        $is_break = false;\n\n        switch ($this->status) {\n            case 1:\n                if (!$is_healthy) {\n                    $this->status = 2;\n                    $this->break_time = time();\n                    $is_break = true;\n                    echo '' . PHP_EOL;\n                    sleep(3);\n                }\n                break;\n            case 2:\n                if ($break_last_time < self::BREAK_PERIOD || !$is_healthy) {\n                    $is_break = true;\n                } else {\n                    $this->status = 3;\n                    echo '' . PHP_EOL;\n                }\n                break;\n            case 3:\n                if (!$is_healthy) {\n                    $this->status = 2;\n                    $this->break_time = time();\n                    $is_break = true;\n                    echo '' . PHP_EOL;\n                    sleep(3);\n                } else {\n                    if ($break_last_time >= self::BREAK_PERIOD + self::RECOVER_PERIOD) {\n                        $this->status = 1;\n                        echo '' . PHP_EOL;\n                    } else {\n                        $pass_rate = $break_last_time * 1.0 / (self::BREAK_PERIOD + self::RECOVER_PERIOD);\n                        if (mt_rand() / mt_getrandmax() > $pass_rate) {\n                            $is_break = true;\n                        }\n                    }\n                }\n                break;\n        }\n        return $is_break;\n    }\n}\n\n$healthStats = new HealthStats('test_1');\n$circuitBreaker = new CircuitBreaker($healthStats);\n\nfor ($i = 0; $i < 40; $i++) {\n    if (in_array($i, [9 , 10, 20])) {\n        $healthStats->fail();\n    } else {\n        $healthStats->success();\n    }\n    $circuitBreaker->isBreak();\n    echo $i;\n}\n```\n\n[](https://yuerblog.cc/2017/12/08/microservice-circuit-breaker/)\n","source":"_posts/algorithms/circuit_breaker.md","raw":"---\nurl: /2019/04/01/algorithms-circuit-breaker.html\ntitle: \"-\"\nkeywords: \",\"\ndescription: \"\"\ndate: 2019-04-01T22:31:57+08:00\ndraft: false\ntags: [\"PHP\", \"\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n## \n\n```\n\n\n\n\n\n\n\n\n```\n\n## PHP\n\n```php\n<?php\n/**\n * Class HealthStats\n * \n */\nclass HealthStats\n{\n    /**\n     * 10bucketbucket 1\n     */\n    private const BUCKET_NUM = 10;\n\n    /**\n     * \n     */\n    private const HEALTHY_RATE = 0.9;\n\n    private $service = '';\n    private $buckets = [];\n    private $current_time = 0;\n\n    public function __construct(string $service)\n    {\n        $this->service = $service;\n    }\n\n    public function success()\n    {\n        $this->shiftBuckets();\n\n        $this->buckets[count($this->buckets) - 1]['success']++;\n    }\n\n    public function fail()\n    {\n        $this->shiftBuckets();\n\n        $this->buckets[count($this->buckets) - 1]['fail']++;\n    }\n\n    public function isHealthy()\n    {\n        $this->shiftBuckets();\n\n        $success = 0;\n        $fail = 0;\n        foreach ($this->buckets as $bucket) {\n            $success += $bucket['success'];\n            $fail += $bucket['fail'];\n        }\n\n        $total = $success + $fail;\n\n        // 10\n        if ($total < 10) {\n            return true;\n        }\n\n        return ($success * 1.0 / $total) >= self::HEALTHY_RATE;\n    }\n\n    protected function shiftBuckets()\n    {\n        $now = time();\n\n        $time_diff = $now - $this->current_time;\n        // return\n        if (!$time_diff) {\n            return;\n        }\n\n        //  buckets\n        if ($time_diff >= self::BUCKET_NUM) {\n            $this->buckets = array_fill(0, self::BUCKET_NUM, ['success' => 0, 'fail' => 0]);\n        } else {\n            $this->buckets = array_merge(\n                array_slice($this->buckets, $time_diff, self::BUCKET_NUM - $time_diff),\n                array_fill(0, $time_diff, ['success' => 0, 'fail' => 0])\n            );\n        }\n        $this->current_time = $now;\n    }\n}\n\n/**\n * Class CircuitBreaker\n * \n */\nclass CircuitBreaker\n{\n    /**\n     * 5\n     */\n    private const BREAK_PERIOD = 1;\n\n    /**\n     * 3\n     */\n    private const RECOVER_PERIOD = 2;\n\n    private $health_stats;\n    /**\n     * 1  \n     * 2  \n     * 3  \n     * @var int\n     */\n    private $status = 1;\n\n    /**\n     * \n     * @var int\n     */\n    private $break_time = 0;\n\n    public function __construct(HealthStats $health_stats)\n    {\n        $this->health_stats = $health_stats;\n    }\n\n    public function isBreak()\n    {\n        $now = time();\n        $is_healthy = $this->health_stats->isHealthy();\n        $break_last_time = $now - $this->break_time;\n\n        $is_break = false;\n\n        switch ($this->status) {\n            case 1:\n                if (!$is_healthy) {\n                    $this->status = 2;\n                    $this->break_time = time();\n                    $is_break = true;\n                    echo '' . PHP_EOL;\n                    sleep(3);\n                }\n                break;\n            case 2:\n                if ($break_last_time < self::BREAK_PERIOD || !$is_healthy) {\n                    $is_break = true;\n                } else {\n                    $this->status = 3;\n                    echo '' . PHP_EOL;\n                }\n                break;\n            case 3:\n                if (!$is_healthy) {\n                    $this->status = 2;\n                    $this->break_time = time();\n                    $is_break = true;\n                    echo '' . PHP_EOL;\n                    sleep(3);\n                } else {\n                    if ($break_last_time >= self::BREAK_PERIOD + self::RECOVER_PERIOD) {\n                        $this->status = 1;\n                        echo '' . PHP_EOL;\n                    } else {\n                        $pass_rate = $break_last_time * 1.0 / (self::BREAK_PERIOD + self::RECOVER_PERIOD);\n                        if (mt_rand() / mt_getrandmax() > $pass_rate) {\n                            $is_break = true;\n                        }\n                    }\n                }\n                break;\n        }\n        return $is_break;\n    }\n}\n\n$healthStats = new HealthStats('test_1');\n$circuitBreaker = new CircuitBreaker($healthStats);\n\nfor ($i = 0; $i < 40; $i++) {\n    if (in_array($i, [9 , 10, 20])) {\n        $healthStats->fail();\n    } else {\n        $healthStats->success();\n    }\n    $circuitBreaker->isBreak();\n    echo $i;\n}\n```\n\n[](https://yuerblog.cc/2017/12/08/microservice-circuit-breaker/)\n","slug":"algorithms/circuit_breaker","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf2i000emv059xnbde3d","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"PHP\"><a href=\"#PHP\" class=\"headerlink\" title=\"PHP\"></a>PHP</h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Class HealthStats</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HealthStats</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 10bucketbucket 1</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">const</span> BUCKET_NUM = <span class=\"number\">10</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">const</span> HEALTHY_RATE = <span class=\"number\">0.9</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $service = <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $buckets = [];</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $current_time = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"><span class=\"keyword\">string</span> $service</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;service = $service;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">success</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;shiftBuckets();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;buckets[count(<span class=\"keyword\">$this</span>-&gt;buckets) - <span class=\"number\">1</span>][<span class=\"string\">&#x27;success&#x27;</span>]++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fail</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;shiftBuckets();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;buckets[count(<span class=\"keyword\">$this</span>-&gt;buckets) - <span class=\"number\">1</span>][<span class=\"string\">&#x27;fail&#x27;</span>]++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">isHealthy</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;shiftBuckets();</span><br><span class=\"line\"></span><br><span class=\"line\">        $success = <span class=\"number\">0</span>;</span><br><span class=\"line\">        $fail = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"keyword\">$this</span>-&gt;buckets <span class=\"keyword\">as</span> $bucket) &#123;</span><br><span class=\"line\">            $success += $bucket[<span class=\"string\">&#x27;success&#x27;</span>];</span><br><span class=\"line\">            $fail += $bucket[<span class=\"string\">&#x27;fail&#x27;</span>];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        $total = $success + $fail;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 10</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($total &lt; <span class=\"number\">10</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> ($success * <span class=\"number\">1.0</span> / $total) &gt;= <span class=\"built_in\">self</span>::HEALTHY_RATE;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">shiftBuckets</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        $now = time();</span><br><span class=\"line\"></span><br><span class=\"line\">        $time_diff = $now - <span class=\"keyword\">$this</span>-&gt;current_time;</span><br><span class=\"line\">        <span class=\"comment\">// return</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!$time_diff) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//  buckets</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($time_diff &gt;= <span class=\"built_in\">self</span>::BUCKET_NUM) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;buckets = array_fill(<span class=\"number\">0</span>, <span class=\"built_in\">self</span>::BUCKET_NUM, [<span class=\"string\">&#x27;success&#x27;</span> =&gt; <span class=\"number\">0</span>, <span class=\"string\">&#x27;fail&#x27;</span> =&gt; <span class=\"number\">0</span>]);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;buckets = array_merge(</span><br><span class=\"line\">                array_slice(<span class=\"keyword\">$this</span>-&gt;buckets, $time_diff, <span class=\"built_in\">self</span>::BUCKET_NUM - $time_diff),</span><br><span class=\"line\">                array_fill(<span class=\"number\">0</span>, $time_diff, [<span class=\"string\">&#x27;success&#x27;</span> =&gt; <span class=\"number\">0</span>, <span class=\"string\">&#x27;fail&#x27;</span> =&gt; <span class=\"number\">0</span>])</span><br><span class=\"line\">            );</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;current_time = $now;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Class CircuitBreaker</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CircuitBreaker</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 5</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">const</span> BREAK_PERIOD = <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 3</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">const</span> RECOVER_PERIOD = <span class=\"number\">2</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $health_stats;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 1  </span></span><br><span class=\"line\"><span class=\"comment\">     * 2  </span></span><br><span class=\"line\"><span class=\"comment\">     * 3  </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> int</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $status = <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> int</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $break_time = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">HealthStats $health_stats</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;health_stats = $health_stats;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">isBreak</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        $now = time();</span><br><span class=\"line\">        $is_healthy = <span class=\"keyword\">$this</span>-&gt;health_stats-&gt;isHealthy();</span><br><span class=\"line\">        $break_last_time = $now - <span class=\"keyword\">$this</span>-&gt;break_time;</span><br><span class=\"line\"></span><br><span class=\"line\">        $is_break = <span class=\"literal\">false</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">switch</span> (<span class=\"keyword\">$this</span>-&gt;status) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"number\">1</span>:</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (!$is_healthy) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">$this</span>-&gt;status = <span class=\"number\">2</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">$this</span>-&gt;break_time = time();</span><br><span class=\"line\">                    $is_break = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">                    sleep(<span class=\"number\">3</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"number\">2</span>:</span><br><span class=\"line\">                <span class=\"keyword\">if</span> ($break_last_time &lt; <span class=\"built_in\">self</span>::BREAK_PERIOD || !$is_healthy) &#123;</span><br><span class=\"line\">                    $is_break = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">$this</span>-&gt;status = <span class=\"number\">3</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"number\">3</span>:</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (!$is_healthy) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">$this</span>-&gt;status = <span class=\"number\">2</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">$this</span>-&gt;break_time = time();</span><br><span class=\"line\">                    $is_break = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">                    sleep(<span class=\"number\">3</span>);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> ($break_last_time &gt;= <span class=\"built_in\">self</span>::BREAK_PERIOD + <span class=\"built_in\">self</span>::RECOVER_PERIOD) &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">$this</span>-&gt;status = <span class=\"number\">1</span>;</span><br><span class=\"line\">                        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">                    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                        $pass_rate = $break_last_time * <span class=\"number\">1.0</span> / (<span class=\"built_in\">self</span>::BREAK_PERIOD + <span class=\"built_in\">self</span>::RECOVER_PERIOD);</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (mt_rand() / mt_getrandmax() &gt; $pass_rate) &#123;</span><br><span class=\"line\">                            $is_break = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> $is_break;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$healthStats = <span class=\"keyword\">new</span> HealthStats(<span class=\"string\">&#x27;test_1&#x27;</span>);</span><br><span class=\"line\">$circuitBreaker = <span class=\"keyword\">new</span> CircuitBreaker($healthStats);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> ($i = <span class=\"number\">0</span>; $i &lt; <span class=\"number\">40</span>; $i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (in_array($i, [<span class=\"number\">9</span> , <span class=\"number\">10</span>, <span class=\"number\">20</span>])) &#123;</span><br><span class=\"line\">        $healthStats-&gt;fail();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        $healthStats-&gt;success();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    $circuitBreaker-&gt;isBreak();</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $i;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><a href=\"https://yuerblog.cc/2017/12/08/microservice-circuit-breaker/\"></a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"PHP\"><a href=\"#PHP\" class=\"headerlink\" title=\"PHP\"></a>PHP</h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Class HealthStats</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HealthStats</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 10bucketbucket 1</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">const</span> BUCKET_NUM = <span class=\"number\">10</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">const</span> HEALTHY_RATE = <span class=\"number\">0.9</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $service = <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $buckets = [];</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $current_time = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"><span class=\"keyword\">string</span> $service</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;service = $service;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">success</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;shiftBuckets();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;buckets[count(<span class=\"keyword\">$this</span>-&gt;buckets) - <span class=\"number\">1</span>][<span class=\"string\">&#x27;success&#x27;</span>]++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fail</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;shiftBuckets();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;buckets[count(<span class=\"keyword\">$this</span>-&gt;buckets) - <span class=\"number\">1</span>][<span class=\"string\">&#x27;fail&#x27;</span>]++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">isHealthy</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;shiftBuckets();</span><br><span class=\"line\"></span><br><span class=\"line\">        $success = <span class=\"number\">0</span>;</span><br><span class=\"line\">        $fail = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"keyword\">$this</span>-&gt;buckets <span class=\"keyword\">as</span> $bucket) &#123;</span><br><span class=\"line\">            $success += $bucket[<span class=\"string\">&#x27;success&#x27;</span>];</span><br><span class=\"line\">            $fail += $bucket[<span class=\"string\">&#x27;fail&#x27;</span>];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        $total = $success + $fail;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 10</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($total &lt; <span class=\"number\">10</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> ($success * <span class=\"number\">1.0</span> / $total) &gt;= <span class=\"built_in\">self</span>::HEALTHY_RATE;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">shiftBuckets</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        $now = time();</span><br><span class=\"line\"></span><br><span class=\"line\">        $time_diff = $now - <span class=\"keyword\">$this</span>-&gt;current_time;</span><br><span class=\"line\">        <span class=\"comment\">// return</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!$time_diff) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//  buckets</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($time_diff &gt;= <span class=\"built_in\">self</span>::BUCKET_NUM) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;buckets = array_fill(<span class=\"number\">0</span>, <span class=\"built_in\">self</span>::BUCKET_NUM, [<span class=\"string\">&#x27;success&#x27;</span> =&gt; <span class=\"number\">0</span>, <span class=\"string\">&#x27;fail&#x27;</span> =&gt; <span class=\"number\">0</span>]);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;buckets = array_merge(</span><br><span class=\"line\">                array_slice(<span class=\"keyword\">$this</span>-&gt;buckets, $time_diff, <span class=\"built_in\">self</span>::BUCKET_NUM - $time_diff),</span><br><span class=\"line\">                array_fill(<span class=\"number\">0</span>, $time_diff, [<span class=\"string\">&#x27;success&#x27;</span> =&gt; <span class=\"number\">0</span>, <span class=\"string\">&#x27;fail&#x27;</span> =&gt; <span class=\"number\">0</span>])</span><br><span class=\"line\">            );</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;current_time = $now;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Class CircuitBreaker</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CircuitBreaker</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 5</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">const</span> BREAK_PERIOD = <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 3</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">const</span> RECOVER_PERIOD = <span class=\"number\">2</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $health_stats;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 1  </span></span><br><span class=\"line\"><span class=\"comment\">     * 2  </span></span><br><span class=\"line\"><span class=\"comment\">     * 3  </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> int</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $status = <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> int</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $break_time = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">HealthStats $health_stats</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;health_stats = $health_stats;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">isBreak</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        $now = time();</span><br><span class=\"line\">        $is_healthy = <span class=\"keyword\">$this</span>-&gt;health_stats-&gt;isHealthy();</span><br><span class=\"line\">        $break_last_time = $now - <span class=\"keyword\">$this</span>-&gt;break_time;</span><br><span class=\"line\"></span><br><span class=\"line\">        $is_break = <span class=\"literal\">false</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">switch</span> (<span class=\"keyword\">$this</span>-&gt;status) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"number\">1</span>:</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (!$is_healthy) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">$this</span>-&gt;status = <span class=\"number\">2</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">$this</span>-&gt;break_time = time();</span><br><span class=\"line\">                    $is_break = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">                    sleep(<span class=\"number\">3</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"number\">2</span>:</span><br><span class=\"line\">                <span class=\"keyword\">if</span> ($break_last_time &lt; <span class=\"built_in\">self</span>::BREAK_PERIOD || !$is_healthy) &#123;</span><br><span class=\"line\">                    $is_break = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">$this</span>-&gt;status = <span class=\"number\">3</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"number\">3</span>:</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (!$is_healthy) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">$this</span>-&gt;status = <span class=\"number\">2</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">$this</span>-&gt;break_time = time();</span><br><span class=\"line\">                    $is_break = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">                    sleep(<span class=\"number\">3</span>);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> ($break_last_time &gt;= <span class=\"built_in\">self</span>::BREAK_PERIOD + <span class=\"built_in\">self</span>::RECOVER_PERIOD) &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">$this</span>-&gt;status = <span class=\"number\">1</span>;</span><br><span class=\"line\">                        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">                    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                        $pass_rate = $break_last_time * <span class=\"number\">1.0</span> / (<span class=\"built_in\">self</span>::BREAK_PERIOD + <span class=\"built_in\">self</span>::RECOVER_PERIOD);</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (mt_rand() / mt_getrandmax() &gt; $pass_rate) &#123;</span><br><span class=\"line\">                            $is_break = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> $is_break;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$healthStats = <span class=\"keyword\">new</span> HealthStats(<span class=\"string\">&#x27;test_1&#x27;</span>);</span><br><span class=\"line\">$circuitBreaker = <span class=\"keyword\">new</span> CircuitBreaker($healthStats);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> ($i = <span class=\"number\">0</span>; $i &lt; <span class=\"number\">40</span>; $i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (in_array($i, [<span class=\"number\">9</span> , <span class=\"number\">10</span>, <span class=\"number\">20</span>])) &#123;</span><br><span class=\"line\">        $healthStats-&gt;fail();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        $healthStats-&gt;success();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    $circuitBreaker-&gt;isBreak();</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $i;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><a href=\"https://yuerblog.cc/2017/12/08/microservice-circuit-breaker/\"></a></p>\n"},{"url":"/2019/03/01/algorithms-bubble-sort.html","title":"-","keywords":",","description":"","date":"2019-03-01T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n## \n\n```\nBubble Sort\n\n\n\n```\n\n## \n\n```\nO(n^2)O(n)O(1)\n```\n\n## \n\n```php\n<?php\n/**\n * @param array $arr\n * @return array\n */\nfunction bubbleSort(array $arr)\n{\n    $len = count($arr);\n    // \n    // \n    for ($i = 1; $i < $len; $i++) {\n        //  \n        for ($k = 0; $k < $len - $i; $k++) {\n            if ($arr[$k] > $arr[$k + 1]) {\n                $tmp = $arr[$k + 1];\n                $arr[$k + 1] = $arr[$k];\n                $arr[$k] = $tmp;\n            }\n        }\n    }\n    return $arr;\n}\n\n$arr = [4, 3, 2, 1];\nvar_dump(bubbleSort($arr));\n```\n","source":"_posts/algorithms/bubble_sort.md","raw":"---\nurl: /2019/03/01/algorithms-bubble-sort.html\ntitle: \"-\"\nkeywords: \",\"\ndescription: \"\"\ndate: 2019-03-01T22:31:57+08:00\ndraft: false\ntags: [\"PHP\", \"\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n## \n\n```\nBubble Sort\n\n\n\n```\n\n## \n\n```\nO(n^2)O(n)O(1)\n```\n\n## \n\n```php\n<?php\n/**\n * @param array $arr\n * @return array\n */\nfunction bubbleSort(array $arr)\n{\n    $len = count($arr);\n    // \n    // \n    for ($i = 1; $i < $len; $i++) {\n        //  \n        for ($k = 0; $k < $len - $i; $k++) {\n            if ($arr[$k] > $arr[$k + 1]) {\n                $tmp = $arr[$k + 1];\n                $arr[$k + 1] = $arr[$k];\n                $arr[$k] = $tmp;\n            }\n        }\n    }\n    return $arr;\n}\n\n$arr = [4, 3, 2, 1];\nvar_dump(bubbleSort($arr));\n```\n","slug":"algorithms/bubble_sort","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf2k000gmv05gca9birg","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Bubble Sort</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">O(n^2)O(n)O(1)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> array $arr</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> array</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bubbleSort</span>(<span class=\"params\"><span class=\"keyword\">array</span> $arr</span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    $len = count($arr);</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> ($i = <span class=\"number\">1</span>; $i &lt; $len; $i++) &#123;</span><br><span class=\"line\">        <span class=\"comment\">//  </span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> ($k = <span class=\"number\">0</span>; $k &lt; $len - $i; $k++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> ($arr[$k] &gt; $arr[$k + <span class=\"number\">1</span>]) &#123;</span><br><span class=\"line\">                $tmp = $arr[$k + <span class=\"number\">1</span>];</span><br><span class=\"line\">                $arr[$k + <span class=\"number\">1</span>] = $arr[$k];</span><br><span class=\"line\">                $arr[$k] = $tmp;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> $arr;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$arr = [<span class=\"number\">4</span>, <span class=\"number\">3</span>, <span class=\"number\">2</span>, <span class=\"number\">1</span>];</span><br><span class=\"line\">var_dump(bubbleSort($arr));</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Bubble Sort</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">O(n^2)O(n)O(1)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> array $arr</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> array</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bubbleSort</span>(<span class=\"params\"><span class=\"keyword\">array</span> $arr</span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    $len = count($arr);</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> ($i = <span class=\"number\">1</span>; $i &lt; $len; $i++) &#123;</span><br><span class=\"line\">        <span class=\"comment\">//  </span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> ($k = <span class=\"number\">0</span>; $k &lt; $len - $i; $k++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> ($arr[$k] &gt; $arr[$k + <span class=\"number\">1</span>]) &#123;</span><br><span class=\"line\">                $tmp = $arr[$k + <span class=\"number\">1</span>];</span><br><span class=\"line\">                $arr[$k + <span class=\"number\">1</span>] = $arr[$k];</span><br><span class=\"line\">                $arr[$k] = $tmp;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> $arr;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$arr = [<span class=\"number\">4</span>, <span class=\"number\">3</span>, <span class=\"number\">2</span>, <span class=\"number\">1</span>];</span><br><span class=\"line\">var_dump(bubbleSort($arr));</span><br></pre></td></tr></table></figure>\n"},{"url":"/2019/04/01/algorithms-consistent-hash.html","title":"-Hash","keywords":",Hash","description":"Hash","date":"2019-04-01T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n## \n\n\nConsistent Hashing\n[Consistent Hashing and Random Trees: Distributed Caching Protocols for Relieving Hot Spots on the World Wide Web](https://dl.acm.org/doi/10.1145/258533.258660)\nH0-2^32-132\n\n\n## PHP\n\n```php\nclass ConsistentHash\n{\n    /**\n     *  hash => node\n     * @var array\n     */\n    protected $ring = [];\n\n    /**\n     *  node => hash\n     * @var array\n     */\n    protected $nodes = [];\n\n    /**\n     * \n     * @var int\n     */\n    protected $virtual = 40;\n\n    /**\n     * \n     * @var bool\n     */\n    protected $ring_sorted = false;\n\n    public function __construct(array $nodes = [])\n    {\n        foreach ($nodes as $node) {\n            $this->addNode($node);\n        }\n    }\n\n    /**\n     * \n     * @param string $node\n     * @return bool\n     */\n    public function addNode(string $node): bool\n    {\n        if (key_exists($node, $this->nodes)) {\n            return true;\n        }\n        $this->ring_sorted = false;\n\n        for ($i = 1; $i <= $this->virtual; $i++) {\n            $key = $this->time33($node . '-' . $i);\n            $this->ring[$key] = $node;\n            $this->nodes[$node][] = $key;\n        }\n\n        return true;\n    }\n\n    /**\n     * HASH\n     * @param string $key\n     * @return string $node\n     */\n    public function getNode(string $key): string\n    {\n        if (!$this->ring_sorted) {\n            ksort($this->ring, SORT_NUMERIC);\n            $this->ring_sorted = true;\n        }\n\n        $node = current($this->ring);\n        $hash = $this->time33($key);\n        foreach ($this->ring as $k => $v) {\n            if ($hash <= $k) {\n                $node = $v;\n                break;\n            }\n        }\n        return $node;\n    }\n\n\n    /**\n     * hash(i) = hash(i-1) * 33 + str[i]\n     * @param string $str\n     * @return int\n     */\n    protected function time33(string $str): int\n    {\n        $str = md5($str);\n        $hash = 5381;\n//        $hash = 0;\n        $seed = 5;\n        $len = 32; // 32\n        for ($i = 0; $i < $len; $i++) {\n            // (hash << 5) + hash  hash * 33\n            //$hash = sprintf(\"%u\", $hash * 33) + ord($s{$i});\n            //$hash = ($hash * 33 + ord($s{$i})) & 0x7FFFFFFF;\n            $hash = ($hash << $seed) + $hash + ord($str{$i});\n        }\n        return $hash & 0x7FFFFFFF;\n    }\n}\n\n$ch_obj = new ConsistentHash();\n$ch_obj->addNode(random());\n$ch_obj->addNode(random());\n$ch_obj->addNode(random());\n$ch_obj->addNode(random());\n\n$rings = [];\nfor ($i = 1; $i <= 10000; $i++) {\n    $key = md5(random());\n    $node = $ch_obj->getNode($key);\n    $rings[$node] = isset($rings[$node]) ? ++$rings[$node] : 1;\n}\n\n//sort($rings);\nvar_dump($rings);\n\nfunction random($length = 16)\n{\n    $string = '';\n\n    while (($len = strlen($string)) < $length) {\n        $size = $length - $len;\n\n        $bytes = random_bytes($size);\n\n        $string .= substr(str_replace(['/', '+', '='], '', base64_encode($bytes)), 0, $size);\n    }\n\n    return $string;\n}\n```\n\n[](https://juejin.im/post/5ae1476ef265da0b8d419ef2)\n","source":"_posts/algorithms/consistent_hash.md","raw":"---\nurl: /2019/04/01/algorithms-consistent-hash.html\ntitle: \"-Hash\"\nkeywords: \",Hash\"\ndescription: \"Hash\"\ndate: 2019-04-01T22:31:57+08:00\ndraft: false\ntags: [\"PHP\", \"\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n## \n\n\nConsistent Hashing\n[Consistent Hashing and Random Trees: Distributed Caching Protocols for Relieving Hot Spots on the World Wide Web](https://dl.acm.org/doi/10.1145/258533.258660)\nH0-2^32-132\n\n\n## PHP\n\n```php\nclass ConsistentHash\n{\n    /**\n     *  hash => node\n     * @var array\n     */\n    protected $ring = [];\n\n    /**\n     *  node => hash\n     * @var array\n     */\n    protected $nodes = [];\n\n    /**\n     * \n     * @var int\n     */\n    protected $virtual = 40;\n\n    /**\n     * \n     * @var bool\n     */\n    protected $ring_sorted = false;\n\n    public function __construct(array $nodes = [])\n    {\n        foreach ($nodes as $node) {\n            $this->addNode($node);\n        }\n    }\n\n    /**\n     * \n     * @param string $node\n     * @return bool\n     */\n    public function addNode(string $node): bool\n    {\n        if (key_exists($node, $this->nodes)) {\n            return true;\n        }\n        $this->ring_sorted = false;\n\n        for ($i = 1; $i <= $this->virtual; $i++) {\n            $key = $this->time33($node . '-' . $i);\n            $this->ring[$key] = $node;\n            $this->nodes[$node][] = $key;\n        }\n\n        return true;\n    }\n\n    /**\n     * HASH\n     * @param string $key\n     * @return string $node\n     */\n    public function getNode(string $key): string\n    {\n        if (!$this->ring_sorted) {\n            ksort($this->ring, SORT_NUMERIC);\n            $this->ring_sorted = true;\n        }\n\n        $node = current($this->ring);\n        $hash = $this->time33($key);\n        foreach ($this->ring as $k => $v) {\n            if ($hash <= $k) {\n                $node = $v;\n                break;\n            }\n        }\n        return $node;\n    }\n\n\n    /**\n     * hash(i) = hash(i-1) * 33 + str[i]\n     * @param string $str\n     * @return int\n     */\n    protected function time33(string $str): int\n    {\n        $str = md5($str);\n        $hash = 5381;\n//        $hash = 0;\n        $seed = 5;\n        $len = 32; // 32\n        for ($i = 0; $i < $len; $i++) {\n            // (hash << 5) + hash  hash * 33\n            //$hash = sprintf(\"%u\", $hash * 33) + ord($s{$i});\n            //$hash = ($hash * 33 + ord($s{$i})) & 0x7FFFFFFF;\n            $hash = ($hash << $seed) + $hash + ord($str{$i});\n        }\n        return $hash & 0x7FFFFFFF;\n    }\n}\n\n$ch_obj = new ConsistentHash();\n$ch_obj->addNode(random());\n$ch_obj->addNode(random());\n$ch_obj->addNode(random());\n$ch_obj->addNode(random());\n\n$rings = [];\nfor ($i = 1; $i <= 10000; $i++) {\n    $key = md5(random());\n    $node = $ch_obj->getNode($key);\n    $rings[$node] = isset($rings[$node]) ? ++$rings[$node] : 1;\n}\n\n//sort($rings);\nvar_dump($rings);\n\nfunction random($length = 16)\n{\n    $string = '';\n\n    while (($len = strlen($string)) < $length) {\n        $size = $length - $len;\n\n        $bytes = random_bytes($size);\n\n        $string .= substr(str_replace(['/', '+', '='], '', base64_encode($bytes)), 0, $size);\n    }\n\n    return $string;\n}\n```\n\n[](https://juejin.im/post/5ae1476ef265da0b8d419ef2)\n","slug":"algorithms/consistent_hash","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf2m000jmv05hu3748lf","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Consistent Hashing<br><a href=\"https://dl.acm.org/doi/10.1145/258533.258660\">Consistent Hashing and Random Trees: Distributed Caching Protocols for Relieving Hot Spots on the World Wide Web</a><br>H0-2^32-132</p>\n<h2 id=\"PHP\"><a href=\"#PHP\" class=\"headerlink\" title=\"PHP\"></a>PHP</h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConsistentHash</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     *  hash =&gt; node</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> array</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> $ring = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     *  node =&gt; hash</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> array</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> $nodes = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> int</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> $virtual = <span class=\"number\">40</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> bool</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> $ring_sorted = <span class=\"literal\">false</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"><span class=\"keyword\">array</span> $nodes = []</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> ($nodes <span class=\"keyword\">as</span> $node) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;addNode($node);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> string $node</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> bool</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addNode</span>(<span class=\"params\"><span class=\"keyword\">string</span> $node</span>): <span class=\"title\">bool</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (key_exists($node, <span class=\"keyword\">$this</span>-&gt;nodes)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;ring_sorted = <span class=\"literal\">false</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> ($i = <span class=\"number\">1</span>; $i &lt;= <span class=\"keyword\">$this</span>-&gt;virtual; $i++) &#123;</span><br><span class=\"line\">            $key = <span class=\"keyword\">$this</span>-&gt;time33($node . <span class=\"string\">&#x27;-&#x27;</span> . $i);</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;ring[$key] = $node;</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;nodes[$node][] = $key;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * HASH</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> string $key</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> string $node</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getNode</span>(<span class=\"params\"><span class=\"keyword\">string</span> $key</span>): <span class=\"title\">string</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!<span class=\"keyword\">$this</span>-&gt;ring_sorted) &#123;</span><br><span class=\"line\">            ksort(<span class=\"keyword\">$this</span>-&gt;ring, SORT_NUMERIC);</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;ring_sorted = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        $node = current(<span class=\"keyword\">$this</span>-&gt;ring);</span><br><span class=\"line\">        $hash = <span class=\"keyword\">$this</span>-&gt;time33($key);</span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"keyword\">$this</span>-&gt;ring <span class=\"keyword\">as</span> $k =&gt; $v) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> ($hash &lt;= $k) &#123;</span><br><span class=\"line\">                $node = $v;</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> $node;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * hash(i) = hash(i-1) * 33 + str[i]</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> string $str</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> int</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">time33</span>(<span class=\"params\"><span class=\"keyword\">string</span> $str</span>): <span class=\"title\">int</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        $str = md5($str);</span><br><span class=\"line\">        $hash = <span class=\"number\">5381</span>;</span><br><span class=\"line\"><span class=\"comment\">//        $hash = 0;</span></span><br><span class=\"line\">        $seed = <span class=\"number\">5</span>;</span><br><span class=\"line\">        $len = <span class=\"number\">32</span>; <span class=\"comment\">// 32</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> ($i = <span class=\"number\">0</span>; $i &lt; $len; $i++) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// (hash &lt;&lt; 5) + hash  hash * 33</span></span><br><span class=\"line\">            <span class=\"comment\">//$hash = sprintf(&quot;%u&quot;, $hash * 33) + ord($s&#123;$i&#125;);</span></span><br><span class=\"line\">            <span class=\"comment\">//$hash = ($hash * 33 + ord($s&#123;$i&#125;)) &amp; 0x7FFFFFFF;</span></span><br><span class=\"line\">            $hash = ($hash &lt;&lt; $seed) + $hash + ord($str&#123;$i&#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> $hash &amp; <span class=\"number\">0x7FFFFFFF</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$ch_obj = <span class=\"keyword\">new</span> ConsistentHash();</span><br><span class=\"line\">$ch_obj-&gt;addNode(random());</span><br><span class=\"line\">$ch_obj-&gt;addNode(random());</span><br><span class=\"line\">$ch_obj-&gt;addNode(random());</span><br><span class=\"line\">$ch_obj-&gt;addNode(random());</span><br><span class=\"line\"></span><br><span class=\"line\">$rings = [];</span><br><span class=\"line\"><span class=\"keyword\">for</span> ($i = <span class=\"number\">1</span>; $i &lt;= <span class=\"number\">10000</span>; $i++) &#123;</span><br><span class=\"line\">    $key = md5(random());</span><br><span class=\"line\">    $node = $ch_obj-&gt;getNode($key);</span><br><span class=\"line\">    $rings[$node] = <span class=\"keyword\">isset</span>($rings[$node]) ? ++$rings[$node] : <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//sort($rings);</span></span><br><span class=\"line\">var_dump($rings);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">random</span>(<span class=\"params\">$length = <span class=\"number\">16</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    $string = <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (($len = strlen($string)) &lt; $length) &#123;</span><br><span class=\"line\">        $size = $length - $len;</span><br><span class=\"line\"></span><br><span class=\"line\">        $bytes = random_bytes($size);</span><br><span class=\"line\"></span><br><span class=\"line\">        $string .= substr(str_replace([<span class=\"string\">&#x27;/&#x27;</span>, <span class=\"string\">&#x27;+&#x27;</span>, <span class=\"string\">&#x27;=&#x27;</span>], <span class=\"string\">&#x27;&#x27;</span>, base64_encode($bytes)), <span class=\"number\">0</span>, $size);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> $string;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><a href=\"https://juejin.im/post/5ae1476ef265da0b8d419ef2\"></a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Consistent Hashing<br><a href=\"https://dl.acm.org/doi/10.1145/258533.258660\">Consistent Hashing and Random Trees: Distributed Caching Protocols for Relieving Hot Spots on the World Wide Web</a><br>H0-2^32-132</p>\n<h2 id=\"PHP\"><a href=\"#PHP\" class=\"headerlink\" title=\"PHP\"></a>PHP</h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConsistentHash</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     *  hash =&gt; node</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> array</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> $ring = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     *  node =&gt; hash</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> array</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> $nodes = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> int</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> $virtual = <span class=\"number\">40</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> bool</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> $ring_sorted = <span class=\"literal\">false</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"><span class=\"keyword\">array</span> $nodes = []</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> ($nodes <span class=\"keyword\">as</span> $node) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;addNode($node);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> string $node</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> bool</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addNode</span>(<span class=\"params\"><span class=\"keyword\">string</span> $node</span>): <span class=\"title\">bool</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (key_exists($node, <span class=\"keyword\">$this</span>-&gt;nodes)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;ring_sorted = <span class=\"literal\">false</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> ($i = <span class=\"number\">1</span>; $i &lt;= <span class=\"keyword\">$this</span>-&gt;virtual; $i++) &#123;</span><br><span class=\"line\">            $key = <span class=\"keyword\">$this</span>-&gt;time33($node . <span class=\"string\">&#x27;-&#x27;</span> . $i);</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;ring[$key] = $node;</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;nodes[$node][] = $key;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * HASH</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> string $key</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> string $node</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getNode</span>(<span class=\"params\"><span class=\"keyword\">string</span> $key</span>): <span class=\"title\">string</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!<span class=\"keyword\">$this</span>-&gt;ring_sorted) &#123;</span><br><span class=\"line\">            ksort(<span class=\"keyword\">$this</span>-&gt;ring, SORT_NUMERIC);</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;ring_sorted = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        $node = current(<span class=\"keyword\">$this</span>-&gt;ring);</span><br><span class=\"line\">        $hash = <span class=\"keyword\">$this</span>-&gt;time33($key);</span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"keyword\">$this</span>-&gt;ring <span class=\"keyword\">as</span> $k =&gt; $v) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> ($hash &lt;= $k) &#123;</span><br><span class=\"line\">                $node = $v;</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> $node;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * hash(i) = hash(i-1) * 33 + str[i]</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> string $str</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> int</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">time33</span>(<span class=\"params\"><span class=\"keyword\">string</span> $str</span>): <span class=\"title\">int</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        $str = md5($str);</span><br><span class=\"line\">        $hash = <span class=\"number\">5381</span>;</span><br><span class=\"line\"><span class=\"comment\">//        $hash = 0;</span></span><br><span class=\"line\">        $seed = <span class=\"number\">5</span>;</span><br><span class=\"line\">        $len = <span class=\"number\">32</span>; <span class=\"comment\">// 32</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> ($i = <span class=\"number\">0</span>; $i &lt; $len; $i++) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// (hash &lt;&lt; 5) + hash  hash * 33</span></span><br><span class=\"line\">            <span class=\"comment\">//$hash = sprintf(&quot;%u&quot;, $hash * 33) + ord($s&#123;$i&#125;);</span></span><br><span class=\"line\">            <span class=\"comment\">//$hash = ($hash * 33 + ord($s&#123;$i&#125;)) &amp; 0x7FFFFFFF;</span></span><br><span class=\"line\">            $hash = ($hash &lt;&lt; $seed) + $hash + ord($str&#123;$i&#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> $hash &amp; <span class=\"number\">0x7FFFFFFF</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$ch_obj = <span class=\"keyword\">new</span> ConsistentHash();</span><br><span class=\"line\">$ch_obj-&gt;addNode(random());</span><br><span class=\"line\">$ch_obj-&gt;addNode(random());</span><br><span class=\"line\">$ch_obj-&gt;addNode(random());</span><br><span class=\"line\">$ch_obj-&gt;addNode(random());</span><br><span class=\"line\"></span><br><span class=\"line\">$rings = [];</span><br><span class=\"line\"><span class=\"keyword\">for</span> ($i = <span class=\"number\">1</span>; $i &lt;= <span class=\"number\">10000</span>; $i++) &#123;</span><br><span class=\"line\">    $key = md5(random());</span><br><span class=\"line\">    $node = $ch_obj-&gt;getNode($key);</span><br><span class=\"line\">    $rings[$node] = <span class=\"keyword\">isset</span>($rings[$node]) ? ++$rings[$node] : <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//sort($rings);</span></span><br><span class=\"line\">var_dump($rings);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">random</span>(<span class=\"params\">$length = <span class=\"number\">16</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    $string = <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (($len = strlen($string)) &lt; $length) &#123;</span><br><span class=\"line\">        $size = $length - $len;</span><br><span class=\"line\"></span><br><span class=\"line\">        $bytes = random_bytes($size);</span><br><span class=\"line\"></span><br><span class=\"line\">        $string .= substr(str_replace([<span class=\"string\">&#x27;/&#x27;</span>, <span class=\"string\">&#x27;+&#x27;</span>, <span class=\"string\">&#x27;=&#x27;</span>], <span class=\"string\">&#x27;&#x27;</span>, base64_encode($bytes)), <span class=\"number\">0</span>, $size);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> $string;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><a href=\"https://juejin.im/post/5ae1476ef265da0b8d419ef2\"></a></p>\n"},{"url":"/2020/05/12/hyper-log-log.html","title":"HyperLogLog","date":"2020-05-12T02:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n\n\n[ https://www.infoq.cn/article/j3b2Eoz_V7Wzm27odwXX](https://www.infoq.cn/article/j3b2Eoz_V7Wzm27odwXX)\n\n[rainybowe HyperLogLog](http://www.rainybowe.com/blog/2017/07/13/%E7%A5%9E%E5%A5%87%E7%9A%84HyperLogLog%E7%AE%97%E6%B3%95/index.html)\n\n## \n\n\n\nHLL \n\n\n\n HLL \n\n\n\n\n|(10^6)|\n---|---|---\nBitmap|120KB|0%\nHLL(10)|1KB|9.75%\nHLL(12)|4KB|4.88%\nHLL(14)|16KB|2.44%\nHLL(16)|64KB|1.22%\n\nBitmapO(N)HLLO(log2log2N)\n\nHLL \nHLL  HLL \n\n## \n\n HLL \n1/2K\nnnK1,K2,K3...KnKmax\n\n- nKmax\n- nKmax\n\n![](/images/hyper_log_log.jpg)\n\nnKnKmaxn\nn = 2^Kmax\n\n 3  20 \n\n 20 \n 10  HLL \n\n## \n\n1. \n\nlong2^64 0 ~ 2^64 -1 \n\n2. p\n\n3. (64 - p)1\n\n4. \n\n\n\n5. mE\n\nHLL  hash  hash  hash  hash  hash  1 \n\n `[010, 100, 001]`,  1  2, 1, 3 3 1  3\n 1  1/2 8 \n\n\n\nHLL \n\n HLL  HLL(10) 10  Hash  10 \n hash  1 \n\n`0000010010111010111100 0000001001`\n hash  10  hash  `0000001001` 10  9 9  hash  1  6  9  9  6\nHLL HLL(10)  1024(2^10) HLL(16)  65536(2^16) \n\n\nHLL : O(m log2log2N),  , m \n 264  (Long. MAX_VALUE) 64  log2,  1  64 \n64  6  bit (26=64)  log2 10 1024 \n\n\n\nRedisHyperLogLog\n","source":"_posts/algorithms/hyper_log_log.md","raw":"---\nurl: /2020/05/12/hyper-log-log.html\ntitle: \"HyperLogLog\"\ndate: 2020-05-12T18:31:57+08:00\ndraft: false\ntags: [\"\"]\ntags_weight: 100\ncategories: [\"\"]\ncategoryes_weight: 100\n---\n\n\n\n[ https://www.infoq.cn/article/j3b2Eoz_V7Wzm27odwXX](https://www.infoq.cn/article/j3b2Eoz_V7Wzm27odwXX)\n\n[rainybowe HyperLogLog](http://www.rainybowe.com/blog/2017/07/13/%E7%A5%9E%E5%A5%87%E7%9A%84HyperLogLog%E7%AE%97%E6%B3%95/index.html)\n\n## \n\n\n\nHLL \n\n\n\n HLL \n\n\n\n\n|(10^6)|\n---|---|---\nBitmap|120KB|0%\nHLL(10)|1KB|9.75%\nHLL(12)|4KB|4.88%\nHLL(14)|16KB|2.44%\nHLL(16)|64KB|1.22%\n\nBitmapO(N)HLLO(log2log2N)\n\nHLL \nHLL  HLL \n\n## \n\n HLL \n1/2K\nnnK1,K2,K3...KnKmax\n\n- nKmax\n- nKmax\n\n![](/images/hyper_log_log.jpg)\n\nnKnKmaxn\nn = 2^Kmax\n\n 3  20 \n\n 20 \n 10  HLL \n\n## \n\n1. \n\nlong2^64 0 ~ 2^64 -1 \n\n2. p\n\n3. (64 - p)1\n\n4. \n\n\n\n5. mE\n\nHLL  hash  hash  hash  hash  hash  1 \n\n `[010, 100, 001]`,  1  2, 1, 3 3 1  3\n 1  1/2 8 \n\n\n\nHLL \n\n HLL  HLL(10) 10  Hash  10 \n hash  1 \n\n`0000010010111010111100 0000001001`\n hash  10  hash  `0000001001` 10  9 9  hash  1  6  9  9  6\nHLL HLL(10)  1024(2^10) HLL(16)  65536(2^16) \n\n\nHLL : O(m log2log2N),  , m \n 264  (Long. MAX_VALUE) 64  log2,  1  64 \n64  6  bit (26=64)  log2 10 1024 \n\n\n\nRedisHyperLogLog\n","slug":"algorithms/hyper_log_log","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf2n000lmv05fg9f7ynv","content":"<p></p>\n<p><a href=\"https://www.infoq.cn/article/j3b2Eoz_V7Wzm27odwXX\"> https://www.infoq.cn/article/j3b2Eoz_V7Wzm27odwXX</a></p>\n<p><a href=\"http://www.rainybowe.com/blog/2017/07/13/%E7%A5%9E%E5%A5%87%E7%9A%84HyperLogLog%E7%AE%97%E6%B3%95/index.html\">rainybowe HyperLogLog</a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>HLL </p>\n<p></p>\n<p> HLL </p>\n<p></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>(10^6)</th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Bitmap</td>\n<td>120KB</td>\n<td>0%</td>\n</tr>\n<tr>\n<td>HLL(10)</td>\n<td>1KB</td>\n<td>9.75%</td>\n</tr>\n<tr>\n<td>HLL(12)</td>\n<td>4KB</td>\n<td>4.88%</td>\n</tr>\n<tr>\n<td>HLL(14)</td>\n<td>16KB</td>\n<td>2.44%</td>\n</tr>\n<tr>\n<td>HLL(16)</td>\n<td>64KB</td>\n<td>1.22%</td>\n</tr>\n</tbody></table>\n<p>BitmapO(N)HLLO(log2log2N)</p>\n<p>HLL <br>HLL  HLL </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> HLL <br>1/2K<br>nnK1,K2,K3KnKmax<br></p>\n<ul>\n<li>nKmax</li>\n<li>nKmax</li>\n</ul>\n<p><img src=\"/images/hyper_log_log.jpg\" alt=\"\"></p>\n<p>nKnKmaxn<br>n = 2^Kmax</p>\n<p> 3  20 </p>\n<p> 20 <br> 10  HLL </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li></li>\n</ol>\n<p>long2^64 0 ~ 2^64 -1 </p>\n<ol start=\"2\">\n<li><p>p</p>\n</li>\n<li><p>(64 - p)1</p>\n</li>\n<li><p></p>\n</li>\n</ol>\n<p></p>\n<ol start=\"5\">\n<li>mE</li>\n</ol>\n<p>HLL  hash  hash  hash  hash  hash  1 </p>\n<p> <code>[010, 100, 001]</code>,  1  2, 1, 3 3 1  3<br> 1  1/2 8 </p>\n<p></p>\n<p>HLL </p>\n<p> HLL  HLL(10) 10  Hash  10 <br> hash  1 </p>\n<p><code>0000010010111010111100 0000001001</code><br> hash  10  hash  <code>0000001001</code> 10  9 9  hash  1  6  9  9  6<br>HLL HLL(10)  1024(2^10) HLL(16)  65536(2^16) <br></p>\n<p>HLL : O(m log2log2N),  , m <br> 264  (Long. MAX_VALUE) 64  log2,  1  64 <br>64  6  bit (26=64)  log2 10 1024 <br></p>\n<p>RedisHyperLogLog</p>\n","site":{"data":{}},"excerpt":"","more":"<p></p>\n<p><a href=\"https://www.infoq.cn/article/j3b2Eoz_V7Wzm27odwXX\"> https://www.infoq.cn/article/j3b2Eoz_V7Wzm27odwXX</a></p>\n<p><a href=\"http://www.rainybowe.com/blog/2017/07/13/%E7%A5%9E%E5%A5%87%E7%9A%84HyperLogLog%E7%AE%97%E6%B3%95/index.html\">rainybowe HyperLogLog</a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>HLL </p>\n<p></p>\n<p> HLL </p>\n<p></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>(10^6)</th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Bitmap</td>\n<td>120KB</td>\n<td>0%</td>\n</tr>\n<tr>\n<td>HLL(10)</td>\n<td>1KB</td>\n<td>9.75%</td>\n</tr>\n<tr>\n<td>HLL(12)</td>\n<td>4KB</td>\n<td>4.88%</td>\n</tr>\n<tr>\n<td>HLL(14)</td>\n<td>16KB</td>\n<td>2.44%</td>\n</tr>\n<tr>\n<td>HLL(16)</td>\n<td>64KB</td>\n<td>1.22%</td>\n</tr>\n</tbody></table>\n<p>BitmapO(N)HLLO(log2log2N)</p>\n<p>HLL <br>HLL  HLL </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> HLL <br>1/2K<br>nnK1,K2,K3KnKmax<br></p>\n<ul>\n<li>nKmax</li>\n<li>nKmax</li>\n</ul>\n<p><img src=\"/images/hyper_log_log.jpg\" alt=\"\"></p>\n<p>nKnKmaxn<br>n = 2^Kmax</p>\n<p> 3  20 </p>\n<p> 20 <br> 10  HLL </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li></li>\n</ol>\n<p>long2^64 0 ~ 2^64 -1 </p>\n<ol start=\"2\">\n<li><p>p</p>\n</li>\n<li><p>(64 - p)1</p>\n</li>\n<li><p></p>\n</li>\n</ol>\n<p></p>\n<ol start=\"5\">\n<li>mE</li>\n</ol>\n<p>HLL  hash  hash  hash  hash  hash  1 </p>\n<p> <code>[010, 100, 001]</code>,  1  2, 1, 3 3 1  3<br> 1  1/2 8 </p>\n<p></p>\n<p>HLL </p>\n<p> HLL  HLL(10) 10  Hash  10 <br> hash  1 </p>\n<p><code>0000010010111010111100 0000001001</code><br> hash  10  hash  <code>0000001001</code> 10  9 9  hash  1  6  9  9  6<br>HLL HLL(10)  1024(2^10) HLL(16)  65536(2^16) <br></p>\n<p>HLL : O(m log2log2N),  , m <br> 264  (Long. MAX_VALUE) 64  log2,  1  64 <br>64  6  bit (26=64)  log2 10 1024 <br></p>\n<p>RedisHyperLogLog</p>\n"},{"url":"/2019/03/01/algorithms-insertion_sort.html","title":"-","keywords":",","description":"","date":"2019-03-01T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n## \n\n```\nInsertion sort\n\n,O(n^2)\n\n\n\n\n\n```\n\n## \n\n```php\n<?php\n/**\n * @param array $arr\n * @param string $sort\n * @return array\n */\nfunction insertionSort(array $arr, $sort = 'ASC')\n{\n    $length = count($arr);\n    for ($j = 1; $j < $length; $j++) {\n        $key = $arr[$j];\n        // \n        $i = $j - 1;\n        //  $key \n        //  $key  $key \n        //  $key \n        //  $key \n        while ($i >= 0 && (($sort === 'ASC' && $arr[$i] > $key) || ($sort === 'DESC' && $arr[$i] < $key))) {\n            $arr[$i + 1] = $arr[$i];\n            $i--;\n        }\n        //  $key \n        $arr[$i + 1] = $key;\n    }\n    return $arr;\n}\n\n$arr = [4, 3, 2, 1];\n//var_dump(insertionSort($arr, 'DESC'));\nvar_dump(insertionSort($arr, 'ASC'));\n```\n","source":"_posts/algorithms/insertion_sort.md","raw":"---\nurl: /2019/03/01/algorithms-insertion_sort.html\ntitle: \"-\"\nkeywords: \",\"\ndescription: \"\"\ndate: 2019-03-01T22:31:57+08:00\ndraft: false\ntags: [\"PHP\", \"\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n## \n\n```\nInsertion sort\n\n,O(n^2)\n\n\n\n\n\n```\n\n## \n\n```php\n<?php\n/**\n * @param array $arr\n * @param string $sort\n * @return array\n */\nfunction insertionSort(array $arr, $sort = 'ASC')\n{\n    $length = count($arr);\n    for ($j = 1; $j < $length; $j++) {\n        $key = $arr[$j];\n        // \n        $i = $j - 1;\n        //  $key \n        //  $key  $key \n        //  $key \n        //  $key \n        while ($i >= 0 && (($sort === 'ASC' && $arr[$i] > $key) || ($sort === 'DESC' && $arr[$i] < $key))) {\n            $arr[$i + 1] = $arr[$i];\n            $i--;\n        }\n        //  $key \n        $arr[$i + 1] = $key;\n    }\n    return $arr;\n}\n\n$arr = [4, 3, 2, 1];\n//var_dump(insertionSort($arr, 'DESC'));\nvar_dump(insertionSort($arr, 'ASC'));\n```\n","slug":"algorithms/insertion_sort","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf2o000pmv05dpxdevvx","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Insertion sort</span><br><span class=\"line\"></span><br><span class=\"line\">,O(n^2)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> array $arr</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> string $sort</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> array</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">insertionSort</span>(<span class=\"params\"><span class=\"keyword\">array</span> $arr, $sort = <span class=\"string\">&#x27;ASC&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    $length = count($arr);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> ($j = <span class=\"number\">1</span>; $j &lt; $length; $j++) &#123;</span><br><span class=\"line\">        $key = $arr[$j];</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        $i = $j - <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"comment\">//  $key </span></span><br><span class=\"line\">        <span class=\"comment\">//  $key  $key </span></span><br><span class=\"line\">        <span class=\"comment\">//  $key </span></span><br><span class=\"line\">        <span class=\"comment\">//  $key </span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> ($i &gt;= <span class=\"number\">0</span> &amp;&amp; (($sort === <span class=\"string\">&#x27;ASC&#x27;</span> &amp;&amp; $arr[$i] &gt; $key) || ($sort === <span class=\"string\">&#x27;DESC&#x27;</span> &amp;&amp; $arr[$i] &lt; $key))) &#123;</span><br><span class=\"line\">            $arr[$i + <span class=\"number\">1</span>] = $arr[$i];</span><br><span class=\"line\">            $i--;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//  $key </span></span><br><span class=\"line\">        $arr[$i + <span class=\"number\">1</span>] = $key;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> $arr;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$arr = [<span class=\"number\">4</span>, <span class=\"number\">3</span>, <span class=\"number\">2</span>, <span class=\"number\">1</span>];</span><br><span class=\"line\"><span class=\"comment\">//var_dump(insertionSort($arr, &#x27;DESC&#x27;));</span></span><br><span class=\"line\">var_dump(insertionSort($arr, <span class=\"string\">&#x27;ASC&#x27;</span>));</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Insertion sort</span><br><span class=\"line\"></span><br><span class=\"line\">,O(n^2)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> array $arr</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> string $sort</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> array</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">insertionSort</span>(<span class=\"params\"><span class=\"keyword\">array</span> $arr, $sort = <span class=\"string\">&#x27;ASC&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    $length = count($arr);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> ($j = <span class=\"number\">1</span>; $j &lt; $length; $j++) &#123;</span><br><span class=\"line\">        $key = $arr[$j];</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        $i = $j - <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"comment\">//  $key </span></span><br><span class=\"line\">        <span class=\"comment\">//  $key  $key </span></span><br><span class=\"line\">        <span class=\"comment\">//  $key </span></span><br><span class=\"line\">        <span class=\"comment\">//  $key </span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> ($i &gt;= <span class=\"number\">0</span> &amp;&amp; (($sort === <span class=\"string\">&#x27;ASC&#x27;</span> &amp;&amp; $arr[$i] &gt; $key) || ($sort === <span class=\"string\">&#x27;DESC&#x27;</span> &amp;&amp; $arr[$i] &lt; $key))) &#123;</span><br><span class=\"line\">            $arr[$i + <span class=\"number\">1</span>] = $arr[$i];</span><br><span class=\"line\">            $i--;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//  $key </span></span><br><span class=\"line\">        $arr[$i + <span class=\"number\">1</span>] = $key;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> $arr;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$arr = [<span class=\"number\">4</span>, <span class=\"number\">3</span>, <span class=\"number\">2</span>, <span class=\"number\">1</span>];</span><br><span class=\"line\"><span class=\"comment\">//var_dump(insertionSort($arr, &#x27;DESC&#x27;));</span></span><br><span class=\"line\">var_dump(insertionSort($arr, <span class=\"string\">&#x27;ASC&#x27;</span>));</span><br></pre></td></tr></table></figure>\n"},{"url":"/2019/03/01/algorithms-merge-sort.html","title":"-","keywords":",","description":"","date":"2019-03-01T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n## ()\n\n```\n\no(nlogn)\n```\n\n## \n\n```php\n<?php\n/**\n * @param $arr\n * @param $p\n * @param $q\n * @param $r\n */\nfunction merge(&$arr, $p, $q, $r)\n{\n    $temp = [];\n    // \n    $i = $p;\n    $j = $q + 1;\n    // \n    while ($i <= $q && $j <= $r) {\n        if ($arr[$i] < $arr[$j]) {\n            $temp[] = $arr[$i++];\n        } else {\n            $temp[] = $arr[$j++];\n        }\n    }\n\n    //  $p - $q \n    while ($i <= $q) {\n        $temp[] = $arr[$i++];\n    }\n\n    //  $q + 1 - $r \n    while ($j <= $r) {\n        $temp[] = $arr[$j++];\n    }\n\n    // \n    for ($k = 0, $len = count($temp); $k < $len; $k++) {\n        $arr[$p + $k] = $temp[$k];\n    }\n}\n\n/**\n * @param $arr\n * @param $p\n * @param $r\n */\nfunction mergeSort(&$arr, $p, $r)\n{\n    //1\n    if ($p < $r) {\n        $q = floor(($p + $r) / 2); // $arr $arr[$p - $q] $arr[$q+1 - $r]\n        mergeSort($arr, $p, $q); // $arr[$p - $q]\n        mergeSort($arr, $q + 1, $r); // $arr[$q+1 - $r]\n        echo 'p->'.$p.' q->'.$q.' r->'.$r.PHP_EOL;\n        merge($arr, $p, $q, $r);\n    }\n}\n\n$arr = [4, 3, 2, 1];\nmergeSort($arr, 0, count($arr) - 1);\nvar_dump($arr);\n```\n","source":"_posts/algorithms/merge_sort.md","raw":"---\nurl: /2019/03/01/algorithms-merge-sort.html\ntitle: \"-\"\nkeywords: \",\"\ndescription: \"\"\ndate: 2019-03-01T22:31:57+08:00\ndraft: false\ntags: [\"PHP\", \"\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n## ()\n\n```\n\no(nlogn)\n```\n\n## \n\n```php\n<?php\n/**\n * @param $arr\n * @param $p\n * @param $q\n * @param $r\n */\nfunction merge(&$arr, $p, $q, $r)\n{\n    $temp = [];\n    // \n    $i = $p;\n    $j = $q + 1;\n    // \n    while ($i <= $q && $j <= $r) {\n        if ($arr[$i] < $arr[$j]) {\n            $temp[] = $arr[$i++];\n        } else {\n            $temp[] = $arr[$j++];\n        }\n    }\n\n    //  $p - $q \n    while ($i <= $q) {\n        $temp[] = $arr[$i++];\n    }\n\n    //  $q + 1 - $r \n    while ($j <= $r) {\n        $temp[] = $arr[$j++];\n    }\n\n    // \n    for ($k = 0, $len = count($temp); $k < $len; $k++) {\n        $arr[$p + $k] = $temp[$k];\n    }\n}\n\n/**\n * @param $arr\n * @param $p\n * @param $r\n */\nfunction mergeSort(&$arr, $p, $r)\n{\n    //1\n    if ($p < $r) {\n        $q = floor(($p + $r) / 2); // $arr $arr[$p - $q] $arr[$q+1 - $r]\n        mergeSort($arr, $p, $q); // $arr[$p - $q]\n        mergeSort($arr, $q + 1, $r); // $arr[$q+1 - $r]\n        echo 'p->'.$p.' q->'.$q.' r->'.$r.PHP_EOL;\n        merge($arr, $p, $q, $r);\n    }\n}\n\n$arr = [4, 3, 2, 1];\nmergeSort($arr, 0, count($arr) - 1);\nvar_dump($arr);\n```\n","slug":"algorithms/merge_sort","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf2p000qmv05e2qw09x3","content":"<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"()\"></a>()</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">o(nlogn)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> $arr</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> $p</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> $q</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> $r</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">merge</span>(<span class=\"params\">&amp;$arr, $p, $q, $r</span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    $temp = [];</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    $i = $p;</span><br><span class=\"line\">    $j = $q + <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> ($i &lt;= $q &amp;&amp; $j &lt;= $r) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($arr[$i] &lt; $arr[$j]) &#123;</span><br><span class=\"line\">            $temp[] = $arr[$i++];</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            $temp[] = $arr[$j++];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  $p - $q </span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> ($i &lt;= $q) &#123;</span><br><span class=\"line\">        $temp[] = $arr[$i++];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  $q + 1 - $r </span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> ($j &lt;= $r) &#123;</span><br><span class=\"line\">        $temp[] = $arr[$j++];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> ($k = <span class=\"number\">0</span>, $len = count($temp); $k &lt; $len; $k++) &#123;</span><br><span class=\"line\">        $arr[$p + $k] = $temp[$k];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> $arr</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> $p</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> $r</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">mergeSort</span>(<span class=\"params\">&amp;$arr, $p, $r</span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//1</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> ($p &lt; $r) &#123;</span><br><span class=\"line\">        $q = floor(($p + $r) / <span class=\"number\">2</span>); <span class=\"comment\">// $arr $arr[$p - $q] $arr[$q+1 - $r]</span></span><br><span class=\"line\">        mergeSort($arr, $p, $q); <span class=\"comment\">// $arr[$p - $q]</span></span><br><span class=\"line\">        mergeSort($arr, $q + <span class=\"number\">1</span>, $r); <span class=\"comment\">// $arr[$q+1 - $r]</span></span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;p-&gt;&#x27;</span>.$p.<span class=\"string\">&#x27; q-&gt;&#x27;</span>.$q.<span class=\"string\">&#x27; r-&gt;&#x27;</span>.$r.PHP_EOL;</span><br><span class=\"line\">        merge($arr, $p, $q, $r);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$arr = [<span class=\"number\">4</span>, <span class=\"number\">3</span>, <span class=\"number\">2</span>, <span class=\"number\">1</span>];</span><br><span class=\"line\">mergeSort($arr, <span class=\"number\">0</span>, count($arr) - <span class=\"number\">1</span>);</span><br><span class=\"line\">var_dump($arr);</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"()\"></a>()</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">o(nlogn)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> $arr</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> $p</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> $q</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> $r</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">merge</span>(<span class=\"params\">&amp;$arr, $p, $q, $r</span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    $temp = [];</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    $i = $p;</span><br><span class=\"line\">    $j = $q + <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> ($i &lt;= $q &amp;&amp; $j &lt;= $r) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($arr[$i] &lt; $arr[$j]) &#123;</span><br><span class=\"line\">            $temp[] = $arr[$i++];</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            $temp[] = $arr[$j++];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  $p - $q </span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> ($i &lt;= $q) &#123;</span><br><span class=\"line\">        $temp[] = $arr[$i++];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  $q + 1 - $r </span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> ($j &lt;= $r) &#123;</span><br><span class=\"line\">        $temp[] = $arr[$j++];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> ($k = <span class=\"number\">0</span>, $len = count($temp); $k &lt; $len; $k++) &#123;</span><br><span class=\"line\">        $arr[$p + $k] = $temp[$k];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> $arr</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> $p</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> $r</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">mergeSort</span>(<span class=\"params\">&amp;$arr, $p, $r</span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//1</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> ($p &lt; $r) &#123;</span><br><span class=\"line\">        $q = floor(($p + $r) / <span class=\"number\">2</span>); <span class=\"comment\">// $arr $arr[$p - $q] $arr[$q+1 - $r]</span></span><br><span class=\"line\">        mergeSort($arr, $p, $q); <span class=\"comment\">// $arr[$p - $q]</span></span><br><span class=\"line\">        mergeSort($arr, $q + <span class=\"number\">1</span>, $r); <span class=\"comment\">// $arr[$q+1 - $r]</span></span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;p-&gt;&#x27;</span>.$p.<span class=\"string\">&#x27; q-&gt;&#x27;</span>.$q.<span class=\"string\">&#x27; r-&gt;&#x27;</span>.$r.PHP_EOL;</span><br><span class=\"line\">        merge($arr, $p, $q, $r);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$arr = [<span class=\"number\">4</span>, <span class=\"number\">3</span>, <span class=\"number\">2</span>, <span class=\"number\">1</span>];</span><br><span class=\"line\">mergeSort($arr, <span class=\"number\">0</span>, count($arr) - <span class=\"number\">1</span>);</span><br><span class=\"line\">var_dump($arr);</span><br></pre></td></tr></table></figure>\n"},{"url":"/2019/04/01/algorithms-probability.html","title":"-","keywords":",","description":"","date":"2019-04-01T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n## \n\n```\narray(100,200,300,400)\n1,1000 \nk\n1001900\n \n\n\n\n\n```\n## \n\n```php\n<?php\nclass Prize\n{\n    private $server_info;\n\n    private $weight_arr;\n\n    public function __construct(array $server_info)\n    {\n        $this->server_info = $server_info;\n    }\n\n    private function getWeightArr()\n    {\n        if (is_null($this->weight_arr)) {\n            $this->weight_arr = array_column($this->server_info, 'weight', 'server_mark');\n        }\n        return $this->weight_arr;\n    }\n\n    public function getServerMark() {\n        $result = '';\n        // \n        $weight_sum = array_sum($this->getWeightArr());\n        // \n        foreach ($this->getWeightArr() as $server_mark => $weight) {\n            $rand_num = mt_rand(1, $weight_sum);\n            if ($rand_num <= $weight) {\n                $result = $server_mark;\n                break;\n            } else {\n                $weight_sum -= $weight;\n            }\n        }\n        return $result;\n    }\n}\n\n$server_info = [\n    'link-rs1' => [\n        'server_mark' => 'link-rs1',\n        'weight' => 1,\n    ],\n    'link-rs2' => [\n        'server_mark' => 'link-rs2',\n        'weight' => 2,\n    ],\n    'link-rs3' => [\n        'server_mark' => 'link-rs3',\n        'weight' => 3,\n    ],\n    'link-rs4' => [\n        'server_mark' => 'link-rs4',\n        'weight' => 4,\n    ]\n];\n\n$prize = new Prize($server_info);\n\n$rings = [];\nfor ($i = 1; $i <= 30000; $i++) {\n    $node = $prize->getServerMark();\n    $rings[$node] = isset($rings[$node]) ? ++$rings[$node] : 1;\n}\n\n//sort($rings);\nvar_dump($rings);\nvar_dump(array_sum($rings));\n```\n","source":"_posts/algorithms/probability.md","raw":"---\nurl: /2019/04/01/algorithms-probability.html\ntitle: \"-\"\nkeywords: \",\"\ndescription: \"\"\ndate: 2019-04-01T22:31:57+08:00\ndraft: false\ntags: [\"PHP\", \"\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n## \n\n```\narray(100,200,300,400)\n1,1000 \nk\n1001900\n \n\n\n\n\n```\n## \n\n```php\n<?php\nclass Prize\n{\n    private $server_info;\n\n    private $weight_arr;\n\n    public function __construct(array $server_info)\n    {\n        $this->server_info = $server_info;\n    }\n\n    private function getWeightArr()\n    {\n        if (is_null($this->weight_arr)) {\n            $this->weight_arr = array_column($this->server_info, 'weight', 'server_mark');\n        }\n        return $this->weight_arr;\n    }\n\n    public function getServerMark() {\n        $result = '';\n        // \n        $weight_sum = array_sum($this->getWeightArr());\n        // \n        foreach ($this->getWeightArr() as $server_mark => $weight) {\n            $rand_num = mt_rand(1, $weight_sum);\n            if ($rand_num <= $weight) {\n                $result = $server_mark;\n                break;\n            } else {\n                $weight_sum -= $weight;\n            }\n        }\n        return $result;\n    }\n}\n\n$server_info = [\n    'link-rs1' => [\n        'server_mark' => 'link-rs1',\n        'weight' => 1,\n    ],\n    'link-rs2' => [\n        'server_mark' => 'link-rs2',\n        'weight' => 2,\n    ],\n    'link-rs3' => [\n        'server_mark' => 'link-rs3',\n        'weight' => 3,\n    ],\n    'link-rs4' => [\n        'server_mark' => 'link-rs4',\n        'weight' => 4,\n    ]\n];\n\n$prize = new Prize($server_info);\n\n$rings = [];\nfor ($i = 1; $i <= 30000; $i++) {\n    $node = $prize->getServerMark();\n    $rings[$node] = isset($rings[$node]) ? ++$rings[$node] : 1;\n}\n\n//sort($rings);\nvar_dump($rings);\nvar_dump(array_sum($rings));\n```\n","slug":"algorithms/probability","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf2r000umv058aqth0cb","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">array(100,200,300,400)</span><br><span class=\"line\">1,1000 </span><br><span class=\"line\">k</span><br><span class=\"line\">1001900</span><br><span class=\"line\"> </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Prize</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $server_info;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $weight_arr;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"><span class=\"keyword\">array</span> $server_info</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;server_info = $server_info;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getWeightArr</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (is_null(<span class=\"keyword\">$this</span>-&gt;weight_arr)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;weight_arr = array_column(<span class=\"keyword\">$this</span>-&gt;server_info, <span class=\"string\">&#x27;weight&#x27;</span>, <span class=\"string\">&#x27;server_mark&#x27;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;weight_arr;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getServerMark</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        $result = <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        $weight_sum = array_sum(<span class=\"keyword\">$this</span>-&gt;getWeightArr());</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"keyword\">$this</span>-&gt;getWeightArr() <span class=\"keyword\">as</span> $server_mark =&gt; $weight) &#123;</span><br><span class=\"line\">            $rand_num = mt_rand(<span class=\"number\">1</span>, $weight_sum);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> ($rand_num &lt;= $weight) &#123;</span><br><span class=\"line\">                $result = $server_mark;</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                $weight_sum -= $weight;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> $result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$server_info = [</span><br><span class=\"line\">    <span class=\"string\">&#x27;link-rs1&#x27;</span> =&gt; [</span><br><span class=\"line\">        <span class=\"string\">&#x27;server_mark&#x27;</span> =&gt; <span class=\"string\">&#x27;link-rs1&#x27;</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;weight&#x27;</span> =&gt; <span class=\"number\">1</span>,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"string\">&#x27;link-rs2&#x27;</span> =&gt; [</span><br><span class=\"line\">        <span class=\"string\">&#x27;server_mark&#x27;</span> =&gt; <span class=\"string\">&#x27;link-rs2&#x27;</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;weight&#x27;</span> =&gt; <span class=\"number\">2</span>,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"string\">&#x27;link-rs3&#x27;</span> =&gt; [</span><br><span class=\"line\">        <span class=\"string\">&#x27;server_mark&#x27;</span> =&gt; <span class=\"string\">&#x27;link-rs3&#x27;</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;weight&#x27;</span> =&gt; <span class=\"number\">3</span>,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"string\">&#x27;link-rs4&#x27;</span> =&gt; [</span><br><span class=\"line\">        <span class=\"string\">&#x27;server_mark&#x27;</span> =&gt; <span class=\"string\">&#x27;link-rs4&#x27;</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;weight&#x27;</span> =&gt; <span class=\"number\">4</span>,</span><br><span class=\"line\">    ]</span><br><span class=\"line\">];</span><br><span class=\"line\"></span><br><span class=\"line\">$prize = <span class=\"keyword\">new</span> Prize($server_info);</span><br><span class=\"line\"></span><br><span class=\"line\">$rings = [];</span><br><span class=\"line\"><span class=\"keyword\">for</span> ($i = <span class=\"number\">1</span>; $i &lt;= <span class=\"number\">30000</span>; $i++) &#123;</span><br><span class=\"line\">    $node = $prize-&gt;getServerMark();</span><br><span class=\"line\">    $rings[$node] = <span class=\"keyword\">isset</span>($rings[$node]) ? ++$rings[$node] : <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//sort($rings);</span></span><br><span class=\"line\">var_dump($rings);</span><br><span class=\"line\">var_dump(array_sum($rings));</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">array(100,200,300,400)</span><br><span class=\"line\">1,1000 </span><br><span class=\"line\">k</span><br><span class=\"line\">1001900</span><br><span class=\"line\"> </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Prize</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $server_info;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $weight_arr;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"><span class=\"keyword\">array</span> $server_info</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;server_info = $server_info;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getWeightArr</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (is_null(<span class=\"keyword\">$this</span>-&gt;weight_arr)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;weight_arr = array_column(<span class=\"keyword\">$this</span>-&gt;server_info, <span class=\"string\">&#x27;weight&#x27;</span>, <span class=\"string\">&#x27;server_mark&#x27;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;weight_arr;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getServerMark</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        $result = <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        $weight_sum = array_sum(<span class=\"keyword\">$this</span>-&gt;getWeightArr());</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"keyword\">$this</span>-&gt;getWeightArr() <span class=\"keyword\">as</span> $server_mark =&gt; $weight) &#123;</span><br><span class=\"line\">            $rand_num = mt_rand(<span class=\"number\">1</span>, $weight_sum);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> ($rand_num &lt;= $weight) &#123;</span><br><span class=\"line\">                $result = $server_mark;</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                $weight_sum -= $weight;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> $result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$server_info = [</span><br><span class=\"line\">    <span class=\"string\">&#x27;link-rs1&#x27;</span> =&gt; [</span><br><span class=\"line\">        <span class=\"string\">&#x27;server_mark&#x27;</span> =&gt; <span class=\"string\">&#x27;link-rs1&#x27;</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;weight&#x27;</span> =&gt; <span class=\"number\">1</span>,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"string\">&#x27;link-rs2&#x27;</span> =&gt; [</span><br><span class=\"line\">        <span class=\"string\">&#x27;server_mark&#x27;</span> =&gt; <span class=\"string\">&#x27;link-rs2&#x27;</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;weight&#x27;</span> =&gt; <span class=\"number\">2</span>,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"string\">&#x27;link-rs3&#x27;</span> =&gt; [</span><br><span class=\"line\">        <span class=\"string\">&#x27;server_mark&#x27;</span> =&gt; <span class=\"string\">&#x27;link-rs3&#x27;</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;weight&#x27;</span> =&gt; <span class=\"number\">3</span>,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"string\">&#x27;link-rs4&#x27;</span> =&gt; [</span><br><span class=\"line\">        <span class=\"string\">&#x27;server_mark&#x27;</span> =&gt; <span class=\"string\">&#x27;link-rs4&#x27;</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;weight&#x27;</span> =&gt; <span class=\"number\">4</span>,</span><br><span class=\"line\">    ]</span><br><span class=\"line\">];</span><br><span class=\"line\"></span><br><span class=\"line\">$prize = <span class=\"keyword\">new</span> Prize($server_info);</span><br><span class=\"line\"></span><br><span class=\"line\">$rings = [];</span><br><span class=\"line\"><span class=\"keyword\">for</span> ($i = <span class=\"number\">1</span>; $i &lt;= <span class=\"number\">30000</span>; $i++) &#123;</span><br><span class=\"line\">    $node = $prize-&gt;getServerMark();</span><br><span class=\"line\">    $rings[$node] = <span class=\"keyword\">isset</span>($rings[$node]) ? ++$rings[$node] : <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//sort($rings);</span></span><br><span class=\"line\">var_dump($rings);</span><br><span class=\"line\">var_dump(array_sum($rings));</span><br></pre></td></tr></table></figure>\n"},{"url":"/2019/03/01/algorithms-select-sort.html","title":"-","keywords":",","description":"","date":"2019-03-01T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n## \n\n```\n\n \n```\n\n## \n\n```php\n<?php\n/**\n * @param array $arr\n * @return array\n */\nfunction selectSort(array $arr)\n{\n    // $i  \n    $len = count($arr);\n    for ($i = 0; $i < $len - 1; $i++) {\n        //\n        $p = $i;\n        //$j $i \n        for ($j = $i + 1; $j < $len; $j++) {\n            //$arr[$p]  \n            if ($arr[$p] > $arr[$j]) {\n                //,\n                // \n                $p = $j;\n            }\n        }\n        // $p\n        //  $i\n        if ($p != $i) {\n            $tmp = $arr[$p];\n            $arr[$p] = $arr[$i];\n            $arr[$i] = $tmp;\n        }\n    }\n    //\n    return $arr;\n}\n\n$arr = [4, 3, 2, 1];\nvar_dump(selectSort($arr));\n```\n","source":"_posts/algorithms/select_sort.md","raw":"---\nurl: /2019/03/01/algorithms-select-sort.html\ntitle: \"-\"\nkeywords: \",\"\ndescription: \"\"\ndate: 2019-03-01T22:31:57+08:00\ndraft: false\ntags: [\"PHP\", \"\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n## \n\n```\n\n \n```\n\n## \n\n```php\n<?php\n/**\n * @param array $arr\n * @return array\n */\nfunction selectSort(array $arr)\n{\n    // $i  \n    $len = count($arr);\n    for ($i = 0; $i < $len - 1; $i++) {\n        //\n        $p = $i;\n        //$j $i \n        for ($j = $i + 1; $j < $len; $j++) {\n            //$arr[$p]  \n            if ($arr[$p] > $arr[$j]) {\n                //,\n                // \n                $p = $j;\n            }\n        }\n        // $p\n        //  $i\n        if ($p != $i) {\n            $tmp = $arr[$p];\n            $arr[$p] = $arr[$i];\n            $arr[$i] = $tmp;\n        }\n    }\n    //\n    return $arr;\n}\n\n$arr = [4, 3, 2, 1];\nvar_dump(selectSort($arr));\n```\n","slug":"algorithms/select_sort","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf2s000wmv05fw0ehr6z","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"> </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> array $arr</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> array</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">selectSort</span>(<span class=\"params\"><span class=\"keyword\">array</span> $arr</span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// $i  </span></span><br><span class=\"line\">    $len = count($arr);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> ($i = <span class=\"number\">0</span>; $i &lt; $len - <span class=\"number\">1</span>; $i++) &#123;</span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        $p = $i;</span><br><span class=\"line\">        <span class=\"comment\">//$j $i </span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> ($j = $i + <span class=\"number\">1</span>; $j &lt; $len; $j++) &#123;</span><br><span class=\"line\">            <span class=\"comment\">//$arr[$p]  </span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> ($arr[$p] &gt; $arr[$j]) &#123;</span><br><span class=\"line\">                <span class=\"comment\">//,</span></span><br><span class=\"line\">                <span class=\"comment\">// </span></span><br><span class=\"line\">                $p = $j;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// $p</span></span><br><span class=\"line\">        <span class=\"comment\">//  $i</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($p != $i) &#123;</span><br><span class=\"line\">            $tmp = $arr[$p];</span><br><span class=\"line\">            $arr[$p] = $arr[$i];</span><br><span class=\"line\">            $arr[$i] = $tmp;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> $arr;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$arr = [<span class=\"number\">4</span>, <span class=\"number\">3</span>, <span class=\"number\">2</span>, <span class=\"number\">1</span>];</span><br><span class=\"line\">var_dump(selectSort($arr));</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"> </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> array $arr</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> array</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">selectSort</span>(<span class=\"params\"><span class=\"keyword\">array</span> $arr</span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// $i  </span></span><br><span class=\"line\">    $len = count($arr);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> ($i = <span class=\"number\">0</span>; $i &lt; $len - <span class=\"number\">1</span>; $i++) &#123;</span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        $p = $i;</span><br><span class=\"line\">        <span class=\"comment\">//$j $i </span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> ($j = $i + <span class=\"number\">1</span>; $j &lt; $len; $j++) &#123;</span><br><span class=\"line\">            <span class=\"comment\">//$arr[$p]  </span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> ($arr[$p] &gt; $arr[$j]) &#123;</span><br><span class=\"line\">                <span class=\"comment\">//,</span></span><br><span class=\"line\">                <span class=\"comment\">// </span></span><br><span class=\"line\">                $p = $j;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// $p</span></span><br><span class=\"line\">        <span class=\"comment\">//  $i</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($p != $i) &#123;</span><br><span class=\"line\">            $tmp = $arr[$p];</span><br><span class=\"line\">            $arr[$p] = $arr[$i];</span><br><span class=\"line\">            $arr[$i] = $tmp;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> $arr;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$arr = [<span class=\"number\">4</span>, <span class=\"number\">3</span>, <span class=\"number\">2</span>, <span class=\"number\">1</span>];</span><br><span class=\"line\">var_dump(selectSort($arr));</span><br></pre></td></tr></table></figure>\n"},{"url":"/2020/06/04/redis-read-error-on-connection.html","title":"Redis read error on connection ","keywords":"Redis Linux","description":"Redis read error on connection ","date":"2020-06-04T06:53:12.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n## \n\nSOA`read error on connection to 127.0.0.1:6379`\n\nSOA\n\nPHP 7.2.25\n\n PCNTL POSIX \n\n[ext-phpredis 5.2.1](https://pecl.php.net/get/redis-5.2.1.tgz)\n\n[ext-event 2.5.4](https://pecl.php.net/get/event-2.5.4.tgz)\n\nlaravel 6.18.14\n\nSOAevent  laravel command\n\nmaster  fork work\n\n`ps -ef|grep Soa`\n\n```\nroot      31614      1  0 Jun04 ?        00:00:00 Soa master server\nwww       31615  31614  0 Jun04 ?        00:00:01 Soa worker server\nwww       31616  31614  0 Jun04 ?        00:00:01 Soa worker server\n```\n\n## \n\n\n\n[ Redis read error on connection ](https://www.jianshu.com/p/6d6a09db55e8)\n\n\n\n`phpredis` read_timeout -1SOA\n\nredis persistent  pconnect\n\nredis\n```\nredis.pconnect.pooling_enabled => 1 => 1\nredis.pconnect.connection_limit => 0 => 0\n```\n\n\n\n[phpredis](https://github.com/phpredis/phpredis) \n\n## \n\n  `strace -p $pid` tcpdump gdb \n\n```\n13414 epoll_wait(8, [{EPOLLIN, {u32=11, u64=11}}], 32, -1) = 1\n13414 accept(11, {sa_family=AF_INET, sin_port=htons(9342), sin_addr=inet_addr(\"127.0.0.1\")}, [16]) = 12\n13414 setsockopt(12, SOL_SOCKET, SO_RCVTIMEO, \"2\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\", 16) = 0\n13414 setsockopt(12, SOL_SOCKET, SO_SNDTIMEO, \"2\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\", 16) = 0\n13414 fcntl(12, F_GETFL)                = 0x2 (flags O_RDWR)\n13414 fcntl(12, F_SETFL, O_RDWR|O_NONBLOCK) = 0\n13414 epoll_ctl(8, EPOLL_CTL_ADD, 12, {EPOLLIN, {u32=12, u64=12}}) = 0\n13414 epoll_wait(8, [{EPOLLIN, {u32=12, u64=12}}], 32, -1) = 1\n13414 recvfrom(12, \"\\200\", 1, 0, NULL, NULL) = 1\n13414 recvfrom(12, \"\\1\\0\\1\", 3, 0, NULL, NULL) = 3\n13414 recvfrom(12, \"\\0\\0\\0\\16\", 4, 0, NULL, NULL) = 4\n13414 recvfrom(12, \"Device:offLine\", 14, 0, NULL, NULL) = 14\n13414 recvfrom(12, \"\\0\\0\\0\\0\", 4, 0, NULL, NULL) = 4\n13414 recvfrom(12, \"\\v\\0\\1\\0\\0\\0 d6e820eebbac8b527d721621a\"..., 4096, 0, NULL, NULL) = 40\n13414 poll([{fd=7, events=POLLIN|POLLPRI|POLLERR|POLLHUP}], 1, 0) = 0 (Timeout)\n13414 sendto(7, \"*3\\r\\n$4\\r\\nHGET\\r\\n$33\\r\\nproxy_server_\"..., 93, MSG_DONTWAIT, NULL, 0) = 93\n13414 poll([{fd=7, events=POLLIN|POLLPRI|POLLERR|POLLHUP}], 1, 0) = 0 (Timeout)\n13414 poll([{fd=7, events=POLLIN|POLLERR|POLLHUP}], 1, 60000) = 1 ([{fd=7, revents=POLLIN}])\n13414 recvfrom(7, 0x32e7d40, 8192, MSG_DONTWAIT, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)\n13414 close(7)                          = 0\n13414 write(13, \"[2020-06-03 17:36:55] local.ERRO\"..., 6179) = 6179\n13414 epoll_wait(8, [{EPOLLIN, {u32=11, u64=11}}], 32, -1) = 1\n13414 accept(11, {sa_family=AF_INET, sin_port=htons(9348), sin_addr=inet_addr(\"127.0.0.1\")}, [16]) = 7\n13414 setsockopt(7, SOL_SOCKET, SO_RCVTIMEO, \"2\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\", 16) = 0\n13414 setsockopt(7, SOL_SOCKET, SO_SNDTIMEO, \"2\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\", 16) = 0\n13414 fcntl(7, F_GETFL)                 = 0x2 (flags O_RDWR)\n13414 fcntl(7, F_SETFL, O_RDWR|O_NONBLOCK) = 0\n13414 epoll_ctl(8, EPOLL_CTL_ADD, 7, {EPOLLIN, {u32=7, u64=7}}) = 0\n13414 epoll_wait(8, [{EPOLLIN, {u32=7, u64=7}}], 32, -1) = 1\n13414 recvfrom(7, \"\\200\", 1, 0, NULL, NULL) = 1\n13414 recvfrom(7, \"\\1\\0\\1\", 3, 0, NULL, NULL) = 3\n13414 recvfrom(7, \"\\0\\0\\0\\16\", 4, 0, NULL, NULL) = 4\n13414 recvfrom(7, \"Device:offLine\", 14, 0, NULL, NULL) = 14\n13414 recvfrom(7, \"\\0\\0\\0\\0\", 4, 0, NULL, NULL) = 4\n13414 recvfrom(7, \"\\v\\0\\1\\0\\0\\0 1e5d42e6117278050b3818af8\"..., 4096, 0, NULL, NULL) = 40\n13414 socket(AF_INET, SOCK_STREAM, IPPROTO_IP) = 15\n13414 fcntl(15, F_GETFL)                = 0x2 (flags O_RDWR)\n13414 fcntl(15, F_SETFL, O_RDWR|O_NONBLOCK) = 0\n13414 connect(15, {sa_family=AF_INET, sin_port=htons(6379), sin_addr=inet_addr(\"127.0.0.1\")}, 16) = -1 EINPROGRESS (Operation now in progress)\n13414 poll([{fd=15, events=POLLIN|POLLOUT|POLLERR|POLLHUP}], 1, 60000) = 1 ([{fd=15, revents=POLLOUT}])\n13414 getsockopt(15, SOL_SOCKET, SO_ERROR, [0], [4]) = 0\n13414 fcntl(15, F_SETFL, O_RDWR)        = 0\n13414 setsockopt(15, SOL_TCP, TCP_NODELAY, [1], 4) = 0\n13414 setsockopt(15, SOL_SOCKET, SO_KEEPALIVE, [0], 4) = 0\n13414 poll([{fd=15, events=POLLIN|POLLPRI|POLLERR|POLLHUP}], 1, 0) = 0 (Timeout)\n13414 sendto(15, \"*3\\r\\n$4\\r\\nHGET\\r\\n$33\\r\\nproxy_server_\"..., 93, MSG_DONTWAIT, NULL, 0) = 93\n13414 poll([{fd=15, events=POLLIN|POLLPRI|POLLERR|POLLHUP}], 1, 0) = 0 (Timeout)\n13414 poll([{fd=15, events=POLLIN|POLLERR|POLLHUP}], 1, 60000) = 1 ([{fd=15, revents=POLLIN}])\n13414 recvfrom(15, \"-NOAUTH Authentication required.\"..., 8192, MSG_DONTWAIT, NULL, NULL) = 34\n13414 write(13, \"[2020-06-03 17:36:55] local.ERRO\"..., 6166) = 6166\n13414 epoll_wait(8, [{EPOLLIN, {u32=11, u64=11}}], 32, -1) = 1\n13414 accept(11, {sa_family=AF_INET, sin_port=htons(9344), sin_addr=inet_addr(\"127.0.0.1\")}, [16]) = 16\n13414 setsockopt(16, SOL_SOCKET, SO_RCVTIMEO, \"2\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\", 16) = 0\n13414 setsockopt(16, SOL_SOCKET, SO_SNDTIMEO, \"2\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\", 16) = 0\n13414 fcntl(16, F_GETFL)                = 0x2 (flags O_RDWR)\n13414 fcntl(16, F_SETFL, O_RDWR|O_NONBLOCK) = 0\n13414 epoll_ctl(8, EPOLL_CTL_ADD, 16, {EPOLLIN, {u32=16, u64=16}}) = 0\n13414 epoll_wait(8, [{EPOLLIN, {u32=16, u64=16}}], 32, -1) = 1\n13414 recvfrom(16, \"\\200\", 1, 0, NULL, NULL) = 1\n13414 recvfrom(16, \"\\1\\0\\1\", 3, 0, NULL, NULL) = 3\n13414 recvfrom(16, \"\\0\\0\\0\\16\", 4, 0, NULL, NULL) = 4\n13414 recvfrom(16, \"Device:offLine\", 14, 0, NULL, NULL) = 14\n13414 recvfrom(16, \"\\0\\0\\0\\0\", 4, 0, NULL, NULL) = 4\n13414 recvfrom(16, \"\\v\\0\\1\\0\\0\\0 9eadf923b6dceadd66727a163\"..., 4096, 0, NULL, NULL) = 40\n13414 poll([{fd=15, events=POLLIN|POLLPRI|POLLERR|POLLHUP}], 1, 0) = 0 (Timeout)\n13414 sendto(15, \"*3\\r\\n$4\\r\\nHGET\\r\\n$33\\r\\nproxy_server_\"..., 93, MSG_DONTWAIT, NULL, 0) = 93\n13414 poll([{fd=15, events=POLLIN|POLLPRI|POLLERR|POLLHUP}], 1, 0) = 0 (Timeout)\n13414 poll([{fd=15, events=POLLIN|POLLERR|POLLHUP}], 1, 60000) = 1 ([{fd=15, revents=POLLIN}])\n13414 recvfrom(15, \"-NOAUTH Authentication required.\"..., 8192, MSG_DONTWAIT, NULL, NULL) = 34\n13414 write(13, \"[2020-06-03 17:36:55] local.ERRO\"..., 6166) = 6166\n13414 epoll_wait(8, [{EPOLLIN, {u32=16, u64=16}}], 32, -1) = 1\n13414 recvfrom(16, \"\", 1, 0, NULL, NULL) = 0\n13414 epoll_ctl(8, EPOLL_CTL_DEL, 16, 0x7ffe0c36b200) = 0\n13414 shutdown(16, SHUT_RDWR)           = 0\n13414 close(16)                         = 0\n13414 epoll_wait(8, [{EPOLLIN, {u32=12, u64=12}}], 32, -1) = 1\n13414 recvfrom(12, \"\", 1, 0, NULL, NULL) = 0\n13414 epoll_ctl(8, EPOLL_CTL_DEL, 12, 0x7ffe0c36b200) = 0\n13414 shutdown(12, SHUT_RDWR)           = 0\n13414 close(12)                         = 0\n13414 epoll_wait(8, [{EPOLLIN, {u32=7, u64=7}}], 32, -1) = 1\n13414 recvfrom(7, \"\", 1, 0, NULL, NULL) = 0\n13414 epoll_ctl(8, EPOLL_CTL_DEL, 7, 0x7ffe0c36b200) = 0\n13414 shutdown(7, SHUT_RDWR)            = 0\n13414 close(7)                          = 0\n13414 epoll_wait(8,  <detached ...>\n```\n\n  `EAGAIN (Resource temporarily unavailable)` \n\nredisauth\n\n`phpredis` 5.2.2 5.2.2  \n\nredis `lsof -i:6379`\n```\nphp     17778 root    6u  IPv4 5742941      0t0  TCP 127.0.0.1:7915->127.0.0.1:6379 (ESTABLISHED)\nphp     17778 root    7u  IPv4 5742440      0t0  TCP 127.0.0.1:7917->127.0.0.1:6379 (ESTABLISHED)\nphp     17779  www    6u  IPv4 5742941      0t0  TCP 127.0.0.1:7915->127.0.0.1:6379 (ESTABLISHED)\nphp     17779  www    7u  IPv4 5742440      0t0  TCP 127.0.0.1:7917->127.0.0.1:6379 (ESTABLISHED)\nphp     17780  www    6u  IPv4 5742941      0t0  TCP 127.0.0.1:7915->127.0.0.1:6379 (ESTABLISHED)\nphp     17780  www    7u  IPv4 5742440      0t0  TCP 127.0.0.1:7917->127.0.0.1:6379 (ESTABLISHED)\n```\n\nredismasterredis\n\nphp-fpmredis\n\n```\nphp     57305  www    6u  IPv4 5487078      0t0  TCP 127.0.0.1:31788->127.0.0.1:6379 (ESTABLISHED)\nphp     57305  www    7u  IPv4 5488024      0t0  TCP 127.0.0.1:31790->127.0.0.1:6379 (ESTABLISHED)\nphp     57305  www    8u  IPv4 5486093      0t0  TCP 127.0.0.1:31792->127.0.0.1:6379 (ESTABLISHED)\nphp     57305  www    9u  IPv4 5486094      0t0  TCP 127.0.0.1:31794->127.0.0.1:6379 (ESTABLISHED)\nphp     57313  www    6u  IPv4 5488037      0t0  TCP 127.0.0.1:31798->127.0.0.1:6379 (ESTABLISHED)\nphp     57313  www    7u  IPv4 5488038      0t0  TCP 127.0.0.1:31800->127.0.0.1:6379 (ESTABLISHED)\nphp     57313  www    8u  IPv4 5488043      0t0  TCP 127.0.0.1:31802->127.0.0.1:6379 (ESTABLISHED)\nphp     57313  www    9u  IPv4 5486102      0t0  TCP 127.0.0.1:31804->127.0.0.1:6379 (ESTABLISHED)\n```\n\nSOA redisworkmasterworkredis\n\n redis\n\nlaravelredis\n\n masterredisworkredisredis\n\n\n\nhistory \n\n restart queue  restart soa\n\nqueuequeuelaravel command\n\n\n\n \n\nredisSOAredisredis\n\n master Redis:connect\n\n laravel  PhpRedisConnector Exception  Redis::connect\n\n app/Console/Commands/ProxyUserUsedMigrate \n\n_ _construct  redis:connect\n\nCommands laravelSOAmasterredis\n\n\n\n`EAGAIN (Resource temporarily unavailable)` \n\n`read error on connection to 127.0.0.1:6379`\n\nlaravelredis\n\n soa\n\n## \n\nbugSOA\n\nlaravel Commands __construct redis  soa master\n\n\n\nphpredis\n\n\n\nredis\n\nfork\n\nsocket\n\n \n","source":"_posts/bug/redis-read_error_on_connection.md","raw":"---\nurl: /2020/06/04/redis-read-error-on-connection.html\ntitle: \"Redis read error on connection \"\nkeywords: \"Redis Linux\"\ndescription: \"Redis read error on connection \"\ndate: 2020-06-04T22:53:12+08:00\ndraft: false\ntags: [\"Redis\", \"Linux\"]\ntags_weight: 100\ncategories: [\"Redis\"]\ncategoryes_weight: 100\n---\n\n## \n\nSOA`read error on connection to 127.0.0.1:6379`\n\nSOA\n\nPHP 7.2.25\n\n PCNTL POSIX \n\n[ext-phpredis 5.2.1](https://pecl.php.net/get/redis-5.2.1.tgz)\n\n[ext-event 2.5.4](https://pecl.php.net/get/event-2.5.4.tgz)\n\nlaravel 6.18.14\n\nSOAevent  laravel command\n\nmaster  fork work\n\n`ps -ef|grep Soa`\n\n```\nroot      31614      1  0 Jun04 ?        00:00:00 Soa master server\nwww       31615  31614  0 Jun04 ?        00:00:01 Soa worker server\nwww       31616  31614  0 Jun04 ?        00:00:01 Soa worker server\n```\n\n## \n\n\n\n[ Redis read error on connection ](https://www.jianshu.com/p/6d6a09db55e8)\n\n\n\n`phpredis` read_timeout -1SOA\n\nredis persistent  pconnect\n\nredis\n```\nredis.pconnect.pooling_enabled => 1 => 1\nredis.pconnect.connection_limit => 0 => 0\n```\n\n\n\n[phpredis](https://github.com/phpredis/phpredis) \n\n## \n\n  `strace -p $pid` tcpdump gdb \n\n```\n13414 epoll_wait(8, [{EPOLLIN, {u32=11, u64=11}}], 32, -1) = 1\n13414 accept(11, {sa_family=AF_INET, sin_port=htons(9342), sin_addr=inet_addr(\"127.0.0.1\")}, [16]) = 12\n13414 setsockopt(12, SOL_SOCKET, SO_RCVTIMEO, \"2\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\", 16) = 0\n13414 setsockopt(12, SOL_SOCKET, SO_SNDTIMEO, \"2\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\", 16) = 0\n13414 fcntl(12, F_GETFL)                = 0x2 (flags O_RDWR)\n13414 fcntl(12, F_SETFL, O_RDWR|O_NONBLOCK) = 0\n13414 epoll_ctl(8, EPOLL_CTL_ADD, 12, {EPOLLIN, {u32=12, u64=12}}) = 0\n13414 epoll_wait(8, [{EPOLLIN, {u32=12, u64=12}}], 32, -1) = 1\n13414 recvfrom(12, \"\\200\", 1, 0, NULL, NULL) = 1\n13414 recvfrom(12, \"\\1\\0\\1\", 3, 0, NULL, NULL) = 3\n13414 recvfrom(12, \"\\0\\0\\0\\16\", 4, 0, NULL, NULL) = 4\n13414 recvfrom(12, \"Device:offLine\", 14, 0, NULL, NULL) = 14\n13414 recvfrom(12, \"\\0\\0\\0\\0\", 4, 0, NULL, NULL) = 4\n13414 recvfrom(12, \"\\v\\0\\1\\0\\0\\0 d6e820eebbac8b527d721621a\"..., 4096, 0, NULL, NULL) = 40\n13414 poll([{fd=7, events=POLLIN|POLLPRI|POLLERR|POLLHUP}], 1, 0) = 0 (Timeout)\n13414 sendto(7, \"*3\\r\\n$4\\r\\nHGET\\r\\n$33\\r\\nproxy_server_\"..., 93, MSG_DONTWAIT, NULL, 0) = 93\n13414 poll([{fd=7, events=POLLIN|POLLPRI|POLLERR|POLLHUP}], 1, 0) = 0 (Timeout)\n13414 poll([{fd=7, events=POLLIN|POLLERR|POLLHUP}], 1, 60000) = 1 ([{fd=7, revents=POLLIN}])\n13414 recvfrom(7, 0x32e7d40, 8192, MSG_DONTWAIT, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)\n13414 close(7)                          = 0\n13414 write(13, \"[2020-06-03 17:36:55] local.ERRO\"..., 6179) = 6179\n13414 epoll_wait(8, [{EPOLLIN, {u32=11, u64=11}}], 32, -1) = 1\n13414 accept(11, {sa_family=AF_INET, sin_port=htons(9348), sin_addr=inet_addr(\"127.0.0.1\")}, [16]) = 7\n13414 setsockopt(7, SOL_SOCKET, SO_RCVTIMEO, \"2\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\", 16) = 0\n13414 setsockopt(7, SOL_SOCKET, SO_SNDTIMEO, \"2\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\", 16) = 0\n13414 fcntl(7, F_GETFL)                 = 0x2 (flags O_RDWR)\n13414 fcntl(7, F_SETFL, O_RDWR|O_NONBLOCK) = 0\n13414 epoll_ctl(8, EPOLL_CTL_ADD, 7, {EPOLLIN, {u32=7, u64=7}}) = 0\n13414 epoll_wait(8, [{EPOLLIN, {u32=7, u64=7}}], 32, -1) = 1\n13414 recvfrom(7, \"\\200\", 1, 0, NULL, NULL) = 1\n13414 recvfrom(7, \"\\1\\0\\1\", 3, 0, NULL, NULL) = 3\n13414 recvfrom(7, \"\\0\\0\\0\\16\", 4, 0, NULL, NULL) = 4\n13414 recvfrom(7, \"Device:offLine\", 14, 0, NULL, NULL) = 14\n13414 recvfrom(7, \"\\0\\0\\0\\0\", 4, 0, NULL, NULL) = 4\n13414 recvfrom(7, \"\\v\\0\\1\\0\\0\\0 1e5d42e6117278050b3818af8\"..., 4096, 0, NULL, NULL) = 40\n13414 socket(AF_INET, SOCK_STREAM, IPPROTO_IP) = 15\n13414 fcntl(15, F_GETFL)                = 0x2 (flags O_RDWR)\n13414 fcntl(15, F_SETFL, O_RDWR|O_NONBLOCK) = 0\n13414 connect(15, {sa_family=AF_INET, sin_port=htons(6379), sin_addr=inet_addr(\"127.0.0.1\")}, 16) = -1 EINPROGRESS (Operation now in progress)\n13414 poll([{fd=15, events=POLLIN|POLLOUT|POLLERR|POLLHUP}], 1, 60000) = 1 ([{fd=15, revents=POLLOUT}])\n13414 getsockopt(15, SOL_SOCKET, SO_ERROR, [0], [4]) = 0\n13414 fcntl(15, F_SETFL, O_RDWR)        = 0\n13414 setsockopt(15, SOL_TCP, TCP_NODELAY, [1], 4) = 0\n13414 setsockopt(15, SOL_SOCKET, SO_KEEPALIVE, [0], 4) = 0\n13414 poll([{fd=15, events=POLLIN|POLLPRI|POLLERR|POLLHUP}], 1, 0) = 0 (Timeout)\n13414 sendto(15, \"*3\\r\\n$4\\r\\nHGET\\r\\n$33\\r\\nproxy_server_\"..., 93, MSG_DONTWAIT, NULL, 0) = 93\n13414 poll([{fd=15, events=POLLIN|POLLPRI|POLLERR|POLLHUP}], 1, 0) = 0 (Timeout)\n13414 poll([{fd=15, events=POLLIN|POLLERR|POLLHUP}], 1, 60000) = 1 ([{fd=15, revents=POLLIN}])\n13414 recvfrom(15, \"-NOAUTH Authentication required.\"..., 8192, MSG_DONTWAIT, NULL, NULL) = 34\n13414 write(13, \"[2020-06-03 17:36:55] local.ERRO\"..., 6166) = 6166\n13414 epoll_wait(8, [{EPOLLIN, {u32=11, u64=11}}], 32, -1) = 1\n13414 accept(11, {sa_family=AF_INET, sin_port=htons(9344), sin_addr=inet_addr(\"127.0.0.1\")}, [16]) = 16\n13414 setsockopt(16, SOL_SOCKET, SO_RCVTIMEO, \"2\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\", 16) = 0\n13414 setsockopt(16, SOL_SOCKET, SO_SNDTIMEO, \"2\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\", 16) = 0\n13414 fcntl(16, F_GETFL)                = 0x2 (flags O_RDWR)\n13414 fcntl(16, F_SETFL, O_RDWR|O_NONBLOCK) = 0\n13414 epoll_ctl(8, EPOLL_CTL_ADD, 16, {EPOLLIN, {u32=16, u64=16}}) = 0\n13414 epoll_wait(8, [{EPOLLIN, {u32=16, u64=16}}], 32, -1) = 1\n13414 recvfrom(16, \"\\200\", 1, 0, NULL, NULL) = 1\n13414 recvfrom(16, \"\\1\\0\\1\", 3, 0, NULL, NULL) = 3\n13414 recvfrom(16, \"\\0\\0\\0\\16\", 4, 0, NULL, NULL) = 4\n13414 recvfrom(16, \"Device:offLine\", 14, 0, NULL, NULL) = 14\n13414 recvfrom(16, \"\\0\\0\\0\\0\", 4, 0, NULL, NULL) = 4\n13414 recvfrom(16, \"\\v\\0\\1\\0\\0\\0 9eadf923b6dceadd66727a163\"..., 4096, 0, NULL, NULL) = 40\n13414 poll([{fd=15, events=POLLIN|POLLPRI|POLLERR|POLLHUP}], 1, 0) = 0 (Timeout)\n13414 sendto(15, \"*3\\r\\n$4\\r\\nHGET\\r\\n$33\\r\\nproxy_server_\"..., 93, MSG_DONTWAIT, NULL, 0) = 93\n13414 poll([{fd=15, events=POLLIN|POLLPRI|POLLERR|POLLHUP}], 1, 0) = 0 (Timeout)\n13414 poll([{fd=15, events=POLLIN|POLLERR|POLLHUP}], 1, 60000) = 1 ([{fd=15, revents=POLLIN}])\n13414 recvfrom(15, \"-NOAUTH Authentication required.\"..., 8192, MSG_DONTWAIT, NULL, NULL) = 34\n13414 write(13, \"[2020-06-03 17:36:55] local.ERRO\"..., 6166) = 6166\n13414 epoll_wait(8, [{EPOLLIN, {u32=16, u64=16}}], 32, -1) = 1\n13414 recvfrom(16, \"\", 1, 0, NULL, NULL) = 0\n13414 epoll_ctl(8, EPOLL_CTL_DEL, 16, 0x7ffe0c36b200) = 0\n13414 shutdown(16, SHUT_RDWR)           = 0\n13414 close(16)                         = 0\n13414 epoll_wait(8, [{EPOLLIN, {u32=12, u64=12}}], 32, -1) = 1\n13414 recvfrom(12, \"\", 1, 0, NULL, NULL) = 0\n13414 epoll_ctl(8, EPOLL_CTL_DEL, 12, 0x7ffe0c36b200) = 0\n13414 shutdown(12, SHUT_RDWR)           = 0\n13414 close(12)                         = 0\n13414 epoll_wait(8, [{EPOLLIN, {u32=7, u64=7}}], 32, -1) = 1\n13414 recvfrom(7, \"\", 1, 0, NULL, NULL) = 0\n13414 epoll_ctl(8, EPOLL_CTL_DEL, 7, 0x7ffe0c36b200) = 0\n13414 shutdown(7, SHUT_RDWR)            = 0\n13414 close(7)                          = 0\n13414 epoll_wait(8,  <detached ...>\n```\n\n  `EAGAIN (Resource temporarily unavailable)` \n\nredisauth\n\n`phpredis` 5.2.2 5.2.2  \n\nredis `lsof -i:6379`\n```\nphp     17778 root    6u  IPv4 5742941      0t0  TCP 127.0.0.1:7915->127.0.0.1:6379 (ESTABLISHED)\nphp     17778 root    7u  IPv4 5742440      0t0  TCP 127.0.0.1:7917->127.0.0.1:6379 (ESTABLISHED)\nphp     17779  www    6u  IPv4 5742941      0t0  TCP 127.0.0.1:7915->127.0.0.1:6379 (ESTABLISHED)\nphp     17779  www    7u  IPv4 5742440      0t0  TCP 127.0.0.1:7917->127.0.0.1:6379 (ESTABLISHED)\nphp     17780  www    6u  IPv4 5742941      0t0  TCP 127.0.0.1:7915->127.0.0.1:6379 (ESTABLISHED)\nphp     17780  www    7u  IPv4 5742440      0t0  TCP 127.0.0.1:7917->127.0.0.1:6379 (ESTABLISHED)\n```\n\nredismasterredis\n\nphp-fpmredis\n\n```\nphp     57305  www    6u  IPv4 5487078      0t0  TCP 127.0.0.1:31788->127.0.0.1:6379 (ESTABLISHED)\nphp     57305  www    7u  IPv4 5488024      0t0  TCP 127.0.0.1:31790->127.0.0.1:6379 (ESTABLISHED)\nphp     57305  www    8u  IPv4 5486093      0t0  TCP 127.0.0.1:31792->127.0.0.1:6379 (ESTABLISHED)\nphp     57305  www    9u  IPv4 5486094      0t0  TCP 127.0.0.1:31794->127.0.0.1:6379 (ESTABLISHED)\nphp     57313  www    6u  IPv4 5488037      0t0  TCP 127.0.0.1:31798->127.0.0.1:6379 (ESTABLISHED)\nphp     57313  www    7u  IPv4 5488038      0t0  TCP 127.0.0.1:31800->127.0.0.1:6379 (ESTABLISHED)\nphp     57313  www    8u  IPv4 5488043      0t0  TCP 127.0.0.1:31802->127.0.0.1:6379 (ESTABLISHED)\nphp     57313  www    9u  IPv4 5486102      0t0  TCP 127.0.0.1:31804->127.0.0.1:6379 (ESTABLISHED)\n```\n\nSOA redisworkmasterworkredis\n\n redis\n\nlaravelredis\n\n masterredisworkredisredis\n\n\n\nhistory \n\n restart queue  restart soa\n\nqueuequeuelaravel command\n\n\n\n \n\nredisSOAredisredis\n\n master Redis:connect\n\n laravel  PhpRedisConnector Exception  Redis::connect\n\n app/Console/Commands/ProxyUserUsedMigrate \n\n_ _construct  redis:connect\n\nCommands laravelSOAmasterredis\n\n\n\n`EAGAIN (Resource temporarily unavailable)` \n\n`read error on connection to 127.0.0.1:6379`\n\nlaravelredis\n\n soa\n\n## \n\nbugSOA\n\nlaravel Commands __construct redis  soa master\n\n\n\nphpredis\n\n\n\nredis\n\nfork\n\nsocket\n\n \n","slug":"bug/redis-read_error_on_connection","published":1,"updated":"2020-07-16T12:38:15.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf2u0011mv05cmsyfszu","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>SOA<code>read error on connection to 127.0.0.1:6379</code></p>\n<p>SOA</p>\n<p>PHP 7.2.25</p>\n<p> PCNTL POSIX </p>\n<p><a href=\"https://pecl.php.net/get/redis-5.2.1.tgz\">ext-phpredis 5.2.1</a></p>\n<p><a href=\"https://pecl.php.net/get/event-2.5.4.tgz\">ext-event 2.5.4</a></p>\n<p>laravel 6.18.14</p>\n<p>SOAevent  laravel command</p>\n<p>master  fork work</p>\n<p><code>ps -ef|grep Soa</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root      31614      1  0 Jun04 ?        00:00:00 Soa master server</span><br><span class=\"line\">www       31615  31614  0 Jun04 ?        00:00:01 Soa worker server</span><br><span class=\"line\">www       31616  31614  0 Jun04 ?        00:00:01 Soa worker server</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p><a href=\"https://www.jianshu.com/p/6d6a09db55e8\"> Redis read error on connection </a></p>\n<p></p>\n<p><code>phpredis</code> read_timeout -1SOA</p>\n<p>redis persistent  pconnect</p>\n<p>redis</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">redis.pconnect.pooling_enabled &#x3D;&gt; 1 &#x3D;&gt; 1</span><br><span class=\"line\">redis.pconnect.connection_limit &#x3D;&gt; 0 &#x3D;&gt; 0</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><a href=\"https://github.com/phpredis/phpredis\">phpredis</a> </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>  <code>strace -p $pid</code> tcpdump gdb </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">13414 epoll_wait(8, [&#123;EPOLLIN, &#123;u32&#x3D;11, u64&#x3D;11&#125;&#125;], 32, -1) &#x3D; 1</span><br><span class=\"line\">13414 accept(11, &#123;sa_family&#x3D;AF_INET, sin_port&#x3D;htons(9342), sin_addr&#x3D;inet_addr(&quot;127.0.0.1&quot;)&#125;, [16]) &#x3D; 12</span><br><span class=\"line\">13414 setsockopt(12, SOL_SOCKET, SO_RCVTIMEO, &quot;2\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0&quot;, 16) &#x3D; 0</span><br><span class=\"line\">13414 setsockopt(12, SOL_SOCKET, SO_SNDTIMEO, &quot;2\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0&quot;, 16) &#x3D; 0</span><br><span class=\"line\">13414 fcntl(12, F_GETFL)                &#x3D; 0x2 (flags O_RDWR)</span><br><span class=\"line\">13414 fcntl(12, F_SETFL, O_RDWR|O_NONBLOCK) &#x3D; 0</span><br><span class=\"line\">13414 epoll_ctl(8, EPOLL_CTL_ADD, 12, &#123;EPOLLIN, &#123;u32&#x3D;12, u64&#x3D;12&#125;&#125;) &#x3D; 0</span><br><span class=\"line\">13414 epoll_wait(8, [&#123;EPOLLIN, &#123;u32&#x3D;12, u64&#x3D;12&#125;&#125;], 32, -1) &#x3D; 1</span><br><span class=\"line\">13414 recvfrom(12, &quot;\\200&quot;, 1, 0, NULL, NULL) &#x3D; 1</span><br><span class=\"line\">13414 recvfrom(12, &quot;\\1\\0\\1&quot;, 3, 0, NULL, NULL) &#x3D; 3</span><br><span class=\"line\">13414 recvfrom(12, &quot;\\0\\0\\0\\16&quot;, 4, 0, NULL, NULL) &#x3D; 4</span><br><span class=\"line\">13414 recvfrom(12, &quot;Device:offLine&quot;, 14, 0, NULL, NULL) &#x3D; 14</span><br><span class=\"line\">13414 recvfrom(12, &quot;\\0\\0\\0\\0&quot;, 4, 0, NULL, NULL) &#x3D; 4</span><br><span class=\"line\">13414 recvfrom(12, &quot;\\v\\0\\1\\0\\0\\0 d6e820eebbac8b527d721621a&quot;..., 4096, 0, NULL, NULL) &#x3D; 40</span><br><span class=\"line\">13414 poll([&#123;fd&#x3D;7, events&#x3D;POLLIN|POLLPRI|POLLERR|POLLHUP&#125;], 1, 0) &#x3D; 0 (Timeout)</span><br><span class=\"line\">13414 sendto(7, &quot;*3\\r\\n$4\\r\\nHGET\\r\\n$33\\r\\nproxy_server_&quot;..., 93, MSG_DONTWAIT, NULL, 0) &#x3D; 93</span><br><span class=\"line\">13414 poll([&#123;fd&#x3D;7, events&#x3D;POLLIN|POLLPRI|POLLERR|POLLHUP&#125;], 1, 0) &#x3D; 0 (Timeout)</span><br><span class=\"line\">13414 poll([&#123;fd&#x3D;7, events&#x3D;POLLIN|POLLERR|POLLHUP&#125;], 1, 60000) &#x3D; 1 ([&#123;fd&#x3D;7, revents&#x3D;POLLIN&#125;])</span><br><span class=\"line\">13414 recvfrom(7, 0x32e7d40, 8192, MSG_DONTWAIT, NULL, NULL) &#x3D; -1 EAGAIN (Resource temporarily unavailable)</span><br><span class=\"line\">13414 close(7)                          &#x3D; 0</span><br><span class=\"line\">13414 write(13, &quot;[2020-06-03 17:36:55] local.ERRO&quot;..., 6179) &#x3D; 6179</span><br><span class=\"line\">13414 epoll_wait(8, [&#123;EPOLLIN, &#123;u32&#x3D;11, u64&#x3D;11&#125;&#125;], 32, -1) &#x3D; 1</span><br><span class=\"line\">13414 accept(11, &#123;sa_family&#x3D;AF_INET, sin_port&#x3D;htons(9348), sin_addr&#x3D;inet_addr(&quot;127.0.0.1&quot;)&#125;, [16]) &#x3D; 7</span><br><span class=\"line\">13414 setsockopt(7, SOL_SOCKET, SO_RCVTIMEO, &quot;2\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0&quot;, 16) &#x3D; 0</span><br><span class=\"line\">13414 setsockopt(7, SOL_SOCKET, SO_SNDTIMEO, &quot;2\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0&quot;, 16) &#x3D; 0</span><br><span class=\"line\">13414 fcntl(7, F_GETFL)                 &#x3D; 0x2 (flags O_RDWR)</span><br><span class=\"line\">13414 fcntl(7, F_SETFL, O_RDWR|O_NONBLOCK) &#x3D; 0</span><br><span class=\"line\">13414 epoll_ctl(8, EPOLL_CTL_ADD, 7, &#123;EPOLLIN, &#123;u32&#x3D;7, u64&#x3D;7&#125;&#125;) &#x3D; 0</span><br><span class=\"line\">13414 epoll_wait(8, [&#123;EPOLLIN, &#123;u32&#x3D;7, u64&#x3D;7&#125;&#125;], 32, -1) &#x3D; 1</span><br><span class=\"line\">13414 recvfrom(7, &quot;\\200&quot;, 1, 0, NULL, NULL) &#x3D; 1</span><br><span class=\"line\">13414 recvfrom(7, &quot;\\1\\0\\1&quot;, 3, 0, NULL, NULL) &#x3D; 3</span><br><span class=\"line\">13414 recvfrom(7, &quot;\\0\\0\\0\\16&quot;, 4, 0, NULL, NULL) &#x3D; 4</span><br><span class=\"line\">13414 recvfrom(7, &quot;Device:offLine&quot;, 14, 0, NULL, NULL) &#x3D; 14</span><br><span class=\"line\">13414 recvfrom(7, &quot;\\0\\0\\0\\0&quot;, 4, 0, NULL, NULL) &#x3D; 4</span><br><span class=\"line\">13414 recvfrom(7, &quot;\\v\\0\\1\\0\\0\\0 1e5d42e6117278050b3818af8&quot;..., 4096, 0, NULL, NULL) &#x3D; 40</span><br><span class=\"line\">13414 socket(AF_INET, SOCK_STREAM, IPPROTO_IP) &#x3D; 15</span><br><span class=\"line\">13414 fcntl(15, F_GETFL)                &#x3D; 0x2 (flags O_RDWR)</span><br><span class=\"line\">13414 fcntl(15, F_SETFL, O_RDWR|O_NONBLOCK) &#x3D; 0</span><br><span class=\"line\">13414 connect(15, &#123;sa_family&#x3D;AF_INET, sin_port&#x3D;htons(6379), sin_addr&#x3D;inet_addr(&quot;127.0.0.1&quot;)&#125;, 16) &#x3D; -1 EINPROGRESS (Operation now in progress)</span><br><span class=\"line\">13414 poll([&#123;fd&#x3D;15, events&#x3D;POLLIN|POLLOUT|POLLERR|POLLHUP&#125;], 1, 60000) &#x3D; 1 ([&#123;fd&#x3D;15, revents&#x3D;POLLOUT&#125;])</span><br><span class=\"line\">13414 getsockopt(15, SOL_SOCKET, SO_ERROR, [0], [4]) &#x3D; 0</span><br><span class=\"line\">13414 fcntl(15, F_SETFL, O_RDWR)        &#x3D; 0</span><br><span class=\"line\">13414 setsockopt(15, SOL_TCP, TCP_NODELAY, [1], 4) &#x3D; 0</span><br><span class=\"line\">13414 setsockopt(15, SOL_SOCKET, SO_KEEPALIVE, [0], 4) &#x3D; 0</span><br><span class=\"line\">13414 poll([&#123;fd&#x3D;15, events&#x3D;POLLIN|POLLPRI|POLLERR|POLLHUP&#125;], 1, 0) &#x3D; 0 (Timeout)</span><br><span class=\"line\">13414 sendto(15, &quot;*3\\r\\n$4\\r\\nHGET\\r\\n$33\\r\\nproxy_server_&quot;..., 93, MSG_DONTWAIT, NULL, 0) &#x3D; 93</span><br><span class=\"line\">13414 poll([&#123;fd&#x3D;15, events&#x3D;POLLIN|POLLPRI|POLLERR|POLLHUP&#125;], 1, 0) &#x3D; 0 (Timeout)</span><br><span class=\"line\">13414 poll([&#123;fd&#x3D;15, events&#x3D;POLLIN|POLLERR|POLLHUP&#125;], 1, 60000) &#x3D; 1 ([&#123;fd&#x3D;15, revents&#x3D;POLLIN&#125;])</span><br><span class=\"line\">13414 recvfrom(15, &quot;-NOAUTH Authentication required.&quot;..., 8192, MSG_DONTWAIT, NULL, NULL) &#x3D; 34</span><br><span class=\"line\">13414 write(13, &quot;[2020-06-03 17:36:55] local.ERRO&quot;..., 6166) &#x3D; 6166</span><br><span class=\"line\">13414 epoll_wait(8, [&#123;EPOLLIN, &#123;u32&#x3D;11, u64&#x3D;11&#125;&#125;], 32, -1) &#x3D; 1</span><br><span class=\"line\">13414 accept(11, &#123;sa_family&#x3D;AF_INET, sin_port&#x3D;htons(9344), sin_addr&#x3D;inet_addr(&quot;127.0.0.1&quot;)&#125;, [16]) &#x3D; 16</span><br><span class=\"line\">13414 setsockopt(16, SOL_SOCKET, SO_RCVTIMEO, &quot;2\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0&quot;, 16) &#x3D; 0</span><br><span class=\"line\">13414 setsockopt(16, SOL_SOCKET, SO_SNDTIMEO, &quot;2\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0&quot;, 16) &#x3D; 0</span><br><span class=\"line\">13414 fcntl(16, F_GETFL)                &#x3D; 0x2 (flags O_RDWR)</span><br><span class=\"line\">13414 fcntl(16, F_SETFL, O_RDWR|O_NONBLOCK) &#x3D; 0</span><br><span class=\"line\">13414 epoll_ctl(8, EPOLL_CTL_ADD, 16, &#123;EPOLLIN, &#123;u32&#x3D;16, u64&#x3D;16&#125;&#125;) &#x3D; 0</span><br><span class=\"line\">13414 epoll_wait(8, [&#123;EPOLLIN, &#123;u32&#x3D;16, u64&#x3D;16&#125;&#125;], 32, -1) &#x3D; 1</span><br><span class=\"line\">13414 recvfrom(16, &quot;\\200&quot;, 1, 0, NULL, NULL) &#x3D; 1</span><br><span class=\"line\">13414 recvfrom(16, &quot;\\1\\0\\1&quot;, 3, 0, NULL, NULL) &#x3D; 3</span><br><span class=\"line\">13414 recvfrom(16, &quot;\\0\\0\\0\\16&quot;, 4, 0, NULL, NULL) &#x3D; 4</span><br><span class=\"line\">13414 recvfrom(16, &quot;Device:offLine&quot;, 14, 0, NULL, NULL) &#x3D; 14</span><br><span class=\"line\">13414 recvfrom(16, &quot;\\0\\0\\0\\0&quot;, 4, 0, NULL, NULL) &#x3D; 4</span><br><span class=\"line\">13414 recvfrom(16, &quot;\\v\\0\\1\\0\\0\\0 9eadf923b6dceadd66727a163&quot;..., 4096, 0, NULL, NULL) &#x3D; 40</span><br><span class=\"line\">13414 poll([&#123;fd&#x3D;15, events&#x3D;POLLIN|POLLPRI|POLLERR|POLLHUP&#125;], 1, 0) &#x3D; 0 (Timeout)</span><br><span class=\"line\">13414 sendto(15, &quot;*3\\r\\n$4\\r\\nHGET\\r\\n$33\\r\\nproxy_server_&quot;..., 93, MSG_DONTWAIT, NULL, 0) &#x3D; 93</span><br><span class=\"line\">13414 poll([&#123;fd&#x3D;15, events&#x3D;POLLIN|POLLPRI|POLLERR|POLLHUP&#125;], 1, 0) &#x3D; 0 (Timeout)</span><br><span class=\"line\">13414 poll([&#123;fd&#x3D;15, events&#x3D;POLLIN|POLLERR|POLLHUP&#125;], 1, 60000) &#x3D; 1 ([&#123;fd&#x3D;15, revents&#x3D;POLLIN&#125;])</span><br><span class=\"line\">13414 recvfrom(15, &quot;-NOAUTH Authentication required.&quot;..., 8192, MSG_DONTWAIT, NULL, NULL) &#x3D; 34</span><br><span class=\"line\">13414 write(13, &quot;[2020-06-03 17:36:55] local.ERRO&quot;..., 6166) &#x3D; 6166</span><br><span class=\"line\">13414 epoll_wait(8, [&#123;EPOLLIN, &#123;u32&#x3D;16, u64&#x3D;16&#125;&#125;], 32, -1) &#x3D; 1</span><br><span class=\"line\">13414 recvfrom(16, &quot;&quot;, 1, 0, NULL, NULL) &#x3D; 0</span><br><span class=\"line\">13414 epoll_ctl(8, EPOLL_CTL_DEL, 16, 0x7ffe0c36b200) &#x3D; 0</span><br><span class=\"line\">13414 shutdown(16, SHUT_RDWR)           &#x3D; 0</span><br><span class=\"line\">13414 close(16)                         &#x3D; 0</span><br><span class=\"line\">13414 epoll_wait(8, [&#123;EPOLLIN, &#123;u32&#x3D;12, u64&#x3D;12&#125;&#125;], 32, -1) &#x3D; 1</span><br><span class=\"line\">13414 recvfrom(12, &quot;&quot;, 1, 0, NULL, NULL) &#x3D; 0</span><br><span class=\"line\">13414 epoll_ctl(8, EPOLL_CTL_DEL, 12, 0x7ffe0c36b200) &#x3D; 0</span><br><span class=\"line\">13414 shutdown(12, SHUT_RDWR)           &#x3D; 0</span><br><span class=\"line\">13414 close(12)                         &#x3D; 0</span><br><span class=\"line\">13414 epoll_wait(8, [&#123;EPOLLIN, &#123;u32&#x3D;7, u64&#x3D;7&#125;&#125;], 32, -1) &#x3D; 1</span><br><span class=\"line\">13414 recvfrom(7, &quot;&quot;, 1, 0, NULL, NULL) &#x3D; 0</span><br><span class=\"line\">13414 epoll_ctl(8, EPOLL_CTL_DEL, 7, 0x7ffe0c36b200) &#x3D; 0</span><br><span class=\"line\">13414 shutdown(7, SHUT_RDWR)            &#x3D; 0</span><br><span class=\"line\">13414 close(7)                          &#x3D; 0</span><br><span class=\"line\">13414 epoll_wait(8,  &lt;detached ...&gt;</span><br></pre></td></tr></table></figure>\n\n<p>  <code>EAGAIN (Resource temporarily unavailable)</code> </p>\n<p>redisauth</p>\n<p><code>phpredis</code> 5.2.2 5.2.2  </p>\n<p>redis <code>lsof -i:6379</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">php     17778 root    6u  IPv4 5742941      0t0  TCP 127.0.0.1:7915-&gt;127.0.0.1:6379 (ESTABLISHED)</span><br><span class=\"line\">php     17778 root    7u  IPv4 5742440      0t0  TCP 127.0.0.1:7917-&gt;127.0.0.1:6379 (ESTABLISHED)</span><br><span class=\"line\">php     17779  www    6u  IPv4 5742941      0t0  TCP 127.0.0.1:7915-&gt;127.0.0.1:6379 (ESTABLISHED)</span><br><span class=\"line\">php     17779  www    7u  IPv4 5742440      0t0  TCP 127.0.0.1:7917-&gt;127.0.0.1:6379 (ESTABLISHED)</span><br><span class=\"line\">php     17780  www    6u  IPv4 5742941      0t0  TCP 127.0.0.1:7915-&gt;127.0.0.1:6379 (ESTABLISHED)</span><br><span class=\"line\">php     17780  www    7u  IPv4 5742440      0t0  TCP 127.0.0.1:7917-&gt;127.0.0.1:6379 (ESTABLISHED)</span><br></pre></td></tr></table></figure>\n\n<p>redismasterredis</p>\n<p>php-fpmredis</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">php     57305  www    6u  IPv4 5487078      0t0  TCP 127.0.0.1:31788-&gt;127.0.0.1:6379 (ESTABLISHED)</span><br><span class=\"line\">php     57305  www    7u  IPv4 5488024      0t0  TCP 127.0.0.1:31790-&gt;127.0.0.1:6379 (ESTABLISHED)</span><br><span class=\"line\">php     57305  www    8u  IPv4 5486093      0t0  TCP 127.0.0.1:31792-&gt;127.0.0.1:6379 (ESTABLISHED)</span><br><span class=\"line\">php     57305  www    9u  IPv4 5486094      0t0  TCP 127.0.0.1:31794-&gt;127.0.0.1:6379 (ESTABLISHED)</span><br><span class=\"line\">php     57313  www    6u  IPv4 5488037      0t0  TCP 127.0.0.1:31798-&gt;127.0.0.1:6379 (ESTABLISHED)</span><br><span class=\"line\">php     57313  www    7u  IPv4 5488038      0t0  TCP 127.0.0.1:31800-&gt;127.0.0.1:6379 (ESTABLISHED)</span><br><span class=\"line\">php     57313  www    8u  IPv4 5488043      0t0  TCP 127.0.0.1:31802-&gt;127.0.0.1:6379 (ESTABLISHED)</span><br><span class=\"line\">php     57313  www    9u  IPv4 5486102      0t0  TCP 127.0.0.1:31804-&gt;127.0.0.1:6379 (ESTABLISHED)</span><br></pre></td></tr></table></figure>\n\n<p>SOA redisworkmasterworkredis</p>\n<p> redis</p>\n<p>laravelredis</p>\n<p> masterredisworkredisredis</p>\n<p></p>\n<p>history </p>\n<p> restart queue  restart soa</p>\n<p>queuequeuelaravel command</p>\n<p></p>\n<p> </p>\n<p>redisSOAredisredis</p>\n<p> master Redis:connect</p>\n<p> laravel  PhpRedisConnector Exception  Redis::connect</p>\n<p> app/Console/Commands/ProxyUserUsedMigrate </p>\n<p>_ _construct  redis:connect</p>\n<p>Commands laravelSOAmasterredis</p>\n<p></p>\n<p><code>EAGAIN (Resource temporarily unavailable)</code> </p>\n<p><code>read error on connection to 127.0.0.1:6379</code></p>\n<p>laravelredis</p>\n<p> soa</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>bugSOA</p>\n<p>laravel Commands __construct redis  soa master</p>\n<p></p>\n<p>phpredis</p>\n<p></p>\n<p>redis</p>\n<p>fork</p>\n<p>socket</p>\n<p> </p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>SOA<code>read error on connection to 127.0.0.1:6379</code></p>\n<p>SOA</p>\n<p>PHP 7.2.25</p>\n<p> PCNTL POSIX </p>\n<p><a href=\"https://pecl.php.net/get/redis-5.2.1.tgz\">ext-phpredis 5.2.1</a></p>\n<p><a href=\"https://pecl.php.net/get/event-2.5.4.tgz\">ext-event 2.5.4</a></p>\n<p>laravel 6.18.14</p>\n<p>SOAevent  laravel command</p>\n<p>master  fork work</p>\n<p><code>ps -ef|grep Soa</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root      31614      1  0 Jun04 ?        00:00:00 Soa master server</span><br><span class=\"line\">www       31615  31614  0 Jun04 ?        00:00:01 Soa worker server</span><br><span class=\"line\">www       31616  31614  0 Jun04 ?        00:00:01 Soa worker server</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p><a href=\"https://www.jianshu.com/p/6d6a09db55e8\"> Redis read error on connection </a></p>\n<p></p>\n<p><code>phpredis</code> read_timeout -1SOA</p>\n<p>redis persistent  pconnect</p>\n<p>redis</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">redis.pconnect.pooling_enabled &#x3D;&gt; 1 &#x3D;&gt; 1</span><br><span class=\"line\">redis.pconnect.connection_limit &#x3D;&gt; 0 &#x3D;&gt; 0</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><a href=\"https://github.com/phpredis/phpredis\">phpredis</a> </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>  <code>strace -p $pid</code> tcpdump gdb </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">13414 epoll_wait(8, [&#123;EPOLLIN, &#123;u32&#x3D;11, u64&#x3D;11&#125;&#125;], 32, -1) &#x3D; 1</span><br><span class=\"line\">13414 accept(11, &#123;sa_family&#x3D;AF_INET, sin_port&#x3D;htons(9342), sin_addr&#x3D;inet_addr(&quot;127.0.0.1&quot;)&#125;, [16]) &#x3D; 12</span><br><span class=\"line\">13414 setsockopt(12, SOL_SOCKET, SO_RCVTIMEO, &quot;2\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0&quot;, 16) &#x3D; 0</span><br><span class=\"line\">13414 setsockopt(12, SOL_SOCKET, SO_SNDTIMEO, &quot;2\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0&quot;, 16) &#x3D; 0</span><br><span class=\"line\">13414 fcntl(12, F_GETFL)                &#x3D; 0x2 (flags O_RDWR)</span><br><span class=\"line\">13414 fcntl(12, F_SETFL, O_RDWR|O_NONBLOCK) &#x3D; 0</span><br><span class=\"line\">13414 epoll_ctl(8, EPOLL_CTL_ADD, 12, &#123;EPOLLIN, &#123;u32&#x3D;12, u64&#x3D;12&#125;&#125;) &#x3D; 0</span><br><span class=\"line\">13414 epoll_wait(8, [&#123;EPOLLIN, &#123;u32&#x3D;12, u64&#x3D;12&#125;&#125;], 32, -1) &#x3D; 1</span><br><span class=\"line\">13414 recvfrom(12, &quot;\\200&quot;, 1, 0, NULL, NULL) &#x3D; 1</span><br><span class=\"line\">13414 recvfrom(12, &quot;\\1\\0\\1&quot;, 3, 0, NULL, NULL) &#x3D; 3</span><br><span class=\"line\">13414 recvfrom(12, &quot;\\0\\0\\0\\16&quot;, 4, 0, NULL, NULL) &#x3D; 4</span><br><span class=\"line\">13414 recvfrom(12, &quot;Device:offLine&quot;, 14, 0, NULL, NULL) &#x3D; 14</span><br><span class=\"line\">13414 recvfrom(12, &quot;\\0\\0\\0\\0&quot;, 4, 0, NULL, NULL) &#x3D; 4</span><br><span class=\"line\">13414 recvfrom(12, &quot;\\v\\0\\1\\0\\0\\0 d6e820eebbac8b527d721621a&quot;..., 4096, 0, NULL, NULL) &#x3D; 40</span><br><span class=\"line\">13414 poll([&#123;fd&#x3D;7, events&#x3D;POLLIN|POLLPRI|POLLERR|POLLHUP&#125;], 1, 0) &#x3D; 0 (Timeout)</span><br><span class=\"line\">13414 sendto(7, &quot;*3\\r\\n$4\\r\\nHGET\\r\\n$33\\r\\nproxy_server_&quot;..., 93, MSG_DONTWAIT, NULL, 0) &#x3D; 93</span><br><span class=\"line\">13414 poll([&#123;fd&#x3D;7, events&#x3D;POLLIN|POLLPRI|POLLERR|POLLHUP&#125;], 1, 0) &#x3D; 0 (Timeout)</span><br><span class=\"line\">13414 poll([&#123;fd&#x3D;7, events&#x3D;POLLIN|POLLERR|POLLHUP&#125;], 1, 60000) &#x3D; 1 ([&#123;fd&#x3D;7, revents&#x3D;POLLIN&#125;])</span><br><span class=\"line\">13414 recvfrom(7, 0x32e7d40, 8192, MSG_DONTWAIT, NULL, NULL) &#x3D; -1 EAGAIN (Resource temporarily unavailable)</span><br><span class=\"line\">13414 close(7)                          &#x3D; 0</span><br><span class=\"line\">13414 write(13, &quot;[2020-06-03 17:36:55] local.ERRO&quot;..., 6179) &#x3D; 6179</span><br><span class=\"line\">13414 epoll_wait(8, [&#123;EPOLLIN, &#123;u32&#x3D;11, u64&#x3D;11&#125;&#125;], 32, -1) &#x3D; 1</span><br><span class=\"line\">13414 accept(11, &#123;sa_family&#x3D;AF_INET, sin_port&#x3D;htons(9348), sin_addr&#x3D;inet_addr(&quot;127.0.0.1&quot;)&#125;, [16]) &#x3D; 7</span><br><span class=\"line\">13414 setsockopt(7, SOL_SOCKET, SO_RCVTIMEO, &quot;2\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0&quot;, 16) &#x3D; 0</span><br><span class=\"line\">13414 setsockopt(7, SOL_SOCKET, SO_SNDTIMEO, &quot;2\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0&quot;, 16) &#x3D; 0</span><br><span class=\"line\">13414 fcntl(7, F_GETFL)                 &#x3D; 0x2 (flags O_RDWR)</span><br><span class=\"line\">13414 fcntl(7, F_SETFL, O_RDWR|O_NONBLOCK) &#x3D; 0</span><br><span class=\"line\">13414 epoll_ctl(8, EPOLL_CTL_ADD, 7, &#123;EPOLLIN, &#123;u32&#x3D;7, u64&#x3D;7&#125;&#125;) &#x3D; 0</span><br><span class=\"line\">13414 epoll_wait(8, [&#123;EPOLLIN, &#123;u32&#x3D;7, u64&#x3D;7&#125;&#125;], 32, -1) &#x3D; 1</span><br><span class=\"line\">13414 recvfrom(7, &quot;\\200&quot;, 1, 0, NULL, NULL) &#x3D; 1</span><br><span class=\"line\">13414 recvfrom(7, &quot;\\1\\0\\1&quot;, 3, 0, NULL, NULL) &#x3D; 3</span><br><span class=\"line\">13414 recvfrom(7, &quot;\\0\\0\\0\\16&quot;, 4, 0, NULL, NULL) &#x3D; 4</span><br><span class=\"line\">13414 recvfrom(7, &quot;Device:offLine&quot;, 14, 0, NULL, NULL) &#x3D; 14</span><br><span class=\"line\">13414 recvfrom(7, &quot;\\0\\0\\0\\0&quot;, 4, 0, NULL, NULL) &#x3D; 4</span><br><span class=\"line\">13414 recvfrom(7, &quot;\\v\\0\\1\\0\\0\\0 1e5d42e6117278050b3818af8&quot;..., 4096, 0, NULL, NULL) &#x3D; 40</span><br><span class=\"line\">13414 socket(AF_INET, SOCK_STREAM, IPPROTO_IP) &#x3D; 15</span><br><span class=\"line\">13414 fcntl(15, F_GETFL)                &#x3D; 0x2 (flags O_RDWR)</span><br><span class=\"line\">13414 fcntl(15, F_SETFL, O_RDWR|O_NONBLOCK) &#x3D; 0</span><br><span class=\"line\">13414 connect(15, &#123;sa_family&#x3D;AF_INET, sin_port&#x3D;htons(6379), sin_addr&#x3D;inet_addr(&quot;127.0.0.1&quot;)&#125;, 16) &#x3D; -1 EINPROGRESS (Operation now in progress)</span><br><span class=\"line\">13414 poll([&#123;fd&#x3D;15, events&#x3D;POLLIN|POLLOUT|POLLERR|POLLHUP&#125;], 1, 60000) &#x3D; 1 ([&#123;fd&#x3D;15, revents&#x3D;POLLOUT&#125;])</span><br><span class=\"line\">13414 getsockopt(15, SOL_SOCKET, SO_ERROR, [0], [4]) &#x3D; 0</span><br><span class=\"line\">13414 fcntl(15, F_SETFL, O_RDWR)        &#x3D; 0</span><br><span class=\"line\">13414 setsockopt(15, SOL_TCP, TCP_NODELAY, [1], 4) &#x3D; 0</span><br><span class=\"line\">13414 setsockopt(15, SOL_SOCKET, SO_KEEPALIVE, [0], 4) &#x3D; 0</span><br><span class=\"line\">13414 poll([&#123;fd&#x3D;15, events&#x3D;POLLIN|POLLPRI|POLLERR|POLLHUP&#125;], 1, 0) &#x3D; 0 (Timeout)</span><br><span class=\"line\">13414 sendto(15, &quot;*3\\r\\n$4\\r\\nHGET\\r\\n$33\\r\\nproxy_server_&quot;..., 93, MSG_DONTWAIT, NULL, 0) &#x3D; 93</span><br><span class=\"line\">13414 poll([&#123;fd&#x3D;15, events&#x3D;POLLIN|POLLPRI|POLLERR|POLLHUP&#125;], 1, 0) &#x3D; 0 (Timeout)</span><br><span class=\"line\">13414 poll([&#123;fd&#x3D;15, events&#x3D;POLLIN|POLLERR|POLLHUP&#125;], 1, 60000) &#x3D; 1 ([&#123;fd&#x3D;15, revents&#x3D;POLLIN&#125;])</span><br><span class=\"line\">13414 recvfrom(15, &quot;-NOAUTH Authentication required.&quot;..., 8192, MSG_DONTWAIT, NULL, NULL) &#x3D; 34</span><br><span class=\"line\">13414 write(13, &quot;[2020-06-03 17:36:55] local.ERRO&quot;..., 6166) &#x3D; 6166</span><br><span class=\"line\">13414 epoll_wait(8, [&#123;EPOLLIN, &#123;u32&#x3D;11, u64&#x3D;11&#125;&#125;], 32, -1) &#x3D; 1</span><br><span class=\"line\">13414 accept(11, &#123;sa_family&#x3D;AF_INET, sin_port&#x3D;htons(9344), sin_addr&#x3D;inet_addr(&quot;127.0.0.1&quot;)&#125;, [16]) &#x3D; 16</span><br><span class=\"line\">13414 setsockopt(16, SOL_SOCKET, SO_RCVTIMEO, &quot;2\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0&quot;, 16) &#x3D; 0</span><br><span class=\"line\">13414 setsockopt(16, SOL_SOCKET, SO_SNDTIMEO, &quot;2\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0&quot;, 16) &#x3D; 0</span><br><span class=\"line\">13414 fcntl(16, F_GETFL)                &#x3D; 0x2 (flags O_RDWR)</span><br><span class=\"line\">13414 fcntl(16, F_SETFL, O_RDWR|O_NONBLOCK) &#x3D; 0</span><br><span class=\"line\">13414 epoll_ctl(8, EPOLL_CTL_ADD, 16, &#123;EPOLLIN, &#123;u32&#x3D;16, u64&#x3D;16&#125;&#125;) &#x3D; 0</span><br><span class=\"line\">13414 epoll_wait(8, [&#123;EPOLLIN, &#123;u32&#x3D;16, u64&#x3D;16&#125;&#125;], 32, -1) &#x3D; 1</span><br><span class=\"line\">13414 recvfrom(16, &quot;\\200&quot;, 1, 0, NULL, NULL) &#x3D; 1</span><br><span class=\"line\">13414 recvfrom(16, &quot;\\1\\0\\1&quot;, 3, 0, NULL, NULL) &#x3D; 3</span><br><span class=\"line\">13414 recvfrom(16, &quot;\\0\\0\\0\\16&quot;, 4, 0, NULL, NULL) &#x3D; 4</span><br><span class=\"line\">13414 recvfrom(16, &quot;Device:offLine&quot;, 14, 0, NULL, NULL) &#x3D; 14</span><br><span class=\"line\">13414 recvfrom(16, &quot;\\0\\0\\0\\0&quot;, 4, 0, NULL, NULL) &#x3D; 4</span><br><span class=\"line\">13414 recvfrom(16, &quot;\\v\\0\\1\\0\\0\\0 9eadf923b6dceadd66727a163&quot;..., 4096, 0, NULL, NULL) &#x3D; 40</span><br><span class=\"line\">13414 poll([&#123;fd&#x3D;15, events&#x3D;POLLIN|POLLPRI|POLLERR|POLLHUP&#125;], 1, 0) &#x3D; 0 (Timeout)</span><br><span class=\"line\">13414 sendto(15, &quot;*3\\r\\n$4\\r\\nHGET\\r\\n$33\\r\\nproxy_server_&quot;..., 93, MSG_DONTWAIT, NULL, 0) &#x3D; 93</span><br><span class=\"line\">13414 poll([&#123;fd&#x3D;15, events&#x3D;POLLIN|POLLPRI|POLLERR|POLLHUP&#125;], 1, 0) &#x3D; 0 (Timeout)</span><br><span class=\"line\">13414 poll([&#123;fd&#x3D;15, events&#x3D;POLLIN|POLLERR|POLLHUP&#125;], 1, 60000) &#x3D; 1 ([&#123;fd&#x3D;15, revents&#x3D;POLLIN&#125;])</span><br><span class=\"line\">13414 recvfrom(15, &quot;-NOAUTH Authentication required.&quot;..., 8192, MSG_DONTWAIT, NULL, NULL) &#x3D; 34</span><br><span class=\"line\">13414 write(13, &quot;[2020-06-03 17:36:55] local.ERRO&quot;..., 6166) &#x3D; 6166</span><br><span class=\"line\">13414 epoll_wait(8, [&#123;EPOLLIN, &#123;u32&#x3D;16, u64&#x3D;16&#125;&#125;], 32, -1) &#x3D; 1</span><br><span class=\"line\">13414 recvfrom(16, &quot;&quot;, 1, 0, NULL, NULL) &#x3D; 0</span><br><span class=\"line\">13414 epoll_ctl(8, EPOLL_CTL_DEL, 16, 0x7ffe0c36b200) &#x3D; 0</span><br><span class=\"line\">13414 shutdown(16, SHUT_RDWR)           &#x3D; 0</span><br><span class=\"line\">13414 close(16)                         &#x3D; 0</span><br><span class=\"line\">13414 epoll_wait(8, [&#123;EPOLLIN, &#123;u32&#x3D;12, u64&#x3D;12&#125;&#125;], 32, -1) &#x3D; 1</span><br><span class=\"line\">13414 recvfrom(12, &quot;&quot;, 1, 0, NULL, NULL) &#x3D; 0</span><br><span class=\"line\">13414 epoll_ctl(8, EPOLL_CTL_DEL, 12, 0x7ffe0c36b200) &#x3D; 0</span><br><span class=\"line\">13414 shutdown(12, SHUT_RDWR)           &#x3D; 0</span><br><span class=\"line\">13414 close(12)                         &#x3D; 0</span><br><span class=\"line\">13414 epoll_wait(8, [&#123;EPOLLIN, &#123;u32&#x3D;7, u64&#x3D;7&#125;&#125;], 32, -1) &#x3D; 1</span><br><span class=\"line\">13414 recvfrom(7, &quot;&quot;, 1, 0, NULL, NULL) &#x3D; 0</span><br><span class=\"line\">13414 epoll_ctl(8, EPOLL_CTL_DEL, 7, 0x7ffe0c36b200) &#x3D; 0</span><br><span class=\"line\">13414 shutdown(7, SHUT_RDWR)            &#x3D; 0</span><br><span class=\"line\">13414 close(7)                          &#x3D; 0</span><br><span class=\"line\">13414 epoll_wait(8,  &lt;detached ...&gt;</span><br></pre></td></tr></table></figure>\n\n<p>  <code>EAGAIN (Resource temporarily unavailable)</code> </p>\n<p>redisauth</p>\n<p><code>phpredis</code> 5.2.2 5.2.2  </p>\n<p>redis <code>lsof -i:6379</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">php     17778 root    6u  IPv4 5742941      0t0  TCP 127.0.0.1:7915-&gt;127.0.0.1:6379 (ESTABLISHED)</span><br><span class=\"line\">php     17778 root    7u  IPv4 5742440      0t0  TCP 127.0.0.1:7917-&gt;127.0.0.1:6379 (ESTABLISHED)</span><br><span class=\"line\">php     17779  www    6u  IPv4 5742941      0t0  TCP 127.0.0.1:7915-&gt;127.0.0.1:6379 (ESTABLISHED)</span><br><span class=\"line\">php     17779  www    7u  IPv4 5742440      0t0  TCP 127.0.0.1:7917-&gt;127.0.0.1:6379 (ESTABLISHED)</span><br><span class=\"line\">php     17780  www    6u  IPv4 5742941      0t0  TCP 127.0.0.1:7915-&gt;127.0.0.1:6379 (ESTABLISHED)</span><br><span class=\"line\">php     17780  www    7u  IPv4 5742440      0t0  TCP 127.0.0.1:7917-&gt;127.0.0.1:6379 (ESTABLISHED)</span><br></pre></td></tr></table></figure>\n\n<p>redismasterredis</p>\n<p>php-fpmredis</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">php     57305  www    6u  IPv4 5487078      0t0  TCP 127.0.0.1:31788-&gt;127.0.0.1:6379 (ESTABLISHED)</span><br><span class=\"line\">php     57305  www    7u  IPv4 5488024      0t0  TCP 127.0.0.1:31790-&gt;127.0.0.1:6379 (ESTABLISHED)</span><br><span class=\"line\">php     57305  www    8u  IPv4 5486093      0t0  TCP 127.0.0.1:31792-&gt;127.0.0.1:6379 (ESTABLISHED)</span><br><span class=\"line\">php     57305  www    9u  IPv4 5486094      0t0  TCP 127.0.0.1:31794-&gt;127.0.0.1:6379 (ESTABLISHED)</span><br><span class=\"line\">php     57313  www    6u  IPv4 5488037      0t0  TCP 127.0.0.1:31798-&gt;127.0.0.1:6379 (ESTABLISHED)</span><br><span class=\"line\">php     57313  www    7u  IPv4 5488038      0t0  TCP 127.0.0.1:31800-&gt;127.0.0.1:6379 (ESTABLISHED)</span><br><span class=\"line\">php     57313  www    8u  IPv4 5488043      0t0  TCP 127.0.0.1:31802-&gt;127.0.0.1:6379 (ESTABLISHED)</span><br><span class=\"line\">php     57313  www    9u  IPv4 5486102      0t0  TCP 127.0.0.1:31804-&gt;127.0.0.1:6379 (ESTABLISHED)</span><br></pre></td></tr></table></figure>\n\n<p>SOA redisworkmasterworkredis</p>\n<p> redis</p>\n<p>laravelredis</p>\n<p> masterredisworkredisredis</p>\n<p></p>\n<p>history </p>\n<p> restart queue  restart soa</p>\n<p>queuequeuelaravel command</p>\n<p></p>\n<p> </p>\n<p>redisSOAredisredis</p>\n<p> master Redis:connect</p>\n<p> laravel  PhpRedisConnector Exception  Redis::connect</p>\n<p> app/Console/Commands/ProxyUserUsedMigrate </p>\n<p>_ _construct  redis:connect</p>\n<p>Commands laravelSOAmasterredis</p>\n<p></p>\n<p><code>EAGAIN (Resource temporarily unavailable)</code> </p>\n<p><code>read error on connection to 127.0.0.1:6379</code></p>\n<p>laravelredis</p>\n<p> soa</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>bugSOA</p>\n<p>laravel Commands __construct redis  soa master</p>\n<p></p>\n<p>phpredis</p>\n<p></p>\n<p>redis</p>\n<p>fork</p>\n<p>socket</p>\n<p> </p>\n"},{"url":"/2020/03/29/linux-file-permission.html","title":"Linux","keywords":"Linux,","description":"Linux","date":"2020-03-29T03:29:11.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\nLinux\n\n## \n\n `ls -al /etc/passwd`  passwd\n\n||||||\n---|---|---|---|---|---|---\n-rw-r--r--|1|root|wheel|6393|Jul 31  2016|/etc/passwd\n\n(`d`)(`-`)(`l`)\n\n9`rwx`//\n\n```\nr4w2x7\n\npasswd 6444+2+0 4+0+0 4+0+0\n\n```\n\n``\n\n### \n\n`r`(read)\n\n`w`(write)****\n\n`x`(execute)\n\n### \n\n`r`(read contents in directory)`ls`\n\n`w`(modify contents in directory)\n\n- `touch``mkdir`\n- `rm`\n- `mv`\n- \n\n`x`(access directory)(work directory)`cd`\n\n## umask\n\n`umask` `umask -S`0022\n`-rw-rw-rw-`\n`drwxrwxrwx`\numaskrwx421\n\numask\n(666 - 022) = 644 = -rw-r--r--\n(777 - 022) = 755 = drwxr-xr-x\n\n## \n\n()`chown``chmod`\n\n\n\nLinux\n\n\n\n","source":"_posts/linux/file_permission.md","raw":"---\nurl: /2020/03/29/linux-file-permission.html\ntitle: \"Linux\"\nkeywords: \"Linux,\"\ndescription: \"Linux\"\ndate: 2020-03-29T19:29:11+08:00\ndraft: false\ntags: [\"Linux\"]\ntags_weight: 100\ncategories: [\"Linux\"]\ncategoryes_weight: 100\n---\n\nLinux\n\n## \n\n `ls -al /etc/passwd`  passwd\n\n||||||\n---|---|---|---|---|---|---\n-rw-r--r--|1|root|wheel|6393|Jul 31  2016|/etc/passwd\n\n(`d`)(`-`)(`l`)\n\n9`rwx`//\n\n```\nr4w2x7\n\npasswd 6444+2+0 4+0+0 4+0+0\n\n```\n\n``\n\n### \n\n`r`(read)\n\n`w`(write)****\n\n`x`(execute)\n\n### \n\n`r`(read contents in directory)`ls`\n\n`w`(modify contents in directory)\n\n- `touch``mkdir`\n- `rm`\n- `mv`\n- \n\n`x`(access directory)(work directory)`cd`\n\n## umask\n\n`umask` `umask -S`0022\n`-rw-rw-rw-`\n`drwxrwxrwx`\numaskrwx421\n\numask\n(666 - 022) = 644 = -rw-r--r--\n(777 - 022) = 755 = drwxr-xr-x\n\n## \n\n()`chown``chmod`\n\n\n\nLinux\n\n\n\n","slug":"linux/file_permission","published":1,"updated":"2020-04-02T13:04:45.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf30001gmv05ejgx0zrk","content":"<p>Linux</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> <code>ls -al /etc/passwd</code>  passwd</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>-rw-rr</td>\n<td>1</td>\n<td>root</td>\n<td>wheel</td>\n<td>6393</td>\n<td>Jul 31  2016</td>\n<td>/etc/passwd</td>\n</tr>\n</tbody></table>\n<p>(<code>d</code>)(<code>-</code>)(<code>l</code>)</p>\n<p>9<code>rwx</code>//</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">r4w2x7</span><br><span class=\"line\"></span><br><span class=\"line\">passwd 6444+2+0 4+0+0 4+0+0</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><code></code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>r</code>(read)</p>\n<p><code>w</code>(write)<strong></strong></p>\n<p><code>x</code>(execute)</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>r</code>(read contents in directory)<code>ls</code></p>\n<p><code>w</code>(modify contents in directory)</p>\n<ul>\n<li><code>touch</code><code>mkdir</code></li>\n<li><code>rm</code></li>\n<li><code>mv</code></li>\n<li></li>\n</ul>\n<p><code>x</code>(access directory)(work directory)<code>cd</code></p>\n<h2 id=\"umask\"><a href=\"#umask\" class=\"headerlink\" title=\"umask\"></a>umask</h2><p><code>umask</code> <code>umask -S</code>0022<br><code>-rw-rw-rw-</code><br><code>drwxrwxrwx</code><br>umaskrwx421</p>\n<p>umask<br>(666 - 022) = 644 = -rw-rr<br>(777 - 022) = 755 = drwxr-xr-x</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>()<code>chown</code><code>chmod</code></p>\n<p></p>\n<p>Linux</p>\n","site":{"data":{}},"excerpt":"","more":"<p>Linux</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> <code>ls -al /etc/passwd</code>  passwd</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>-rw-rr</td>\n<td>1</td>\n<td>root</td>\n<td>wheel</td>\n<td>6393</td>\n<td>Jul 31  2016</td>\n<td>/etc/passwd</td>\n</tr>\n</tbody></table>\n<p>(<code>d</code>)(<code>-</code>)(<code>l</code>)</p>\n<p>9<code>rwx</code>//</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">r4w2x7</span><br><span class=\"line\"></span><br><span class=\"line\">passwd 6444+2+0 4+0+0 4+0+0</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><code></code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>r</code>(read)</p>\n<p><code>w</code>(write)<strong></strong></p>\n<p><code>x</code>(execute)</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>r</code>(read contents in directory)<code>ls</code></p>\n<p><code>w</code>(modify contents in directory)</p>\n<ul>\n<li><code>touch</code><code>mkdir</code></li>\n<li><code>rm</code></li>\n<li><code>mv</code></li>\n<li></li>\n</ul>\n<p><code>x</code>(access directory)(work directory)<code>cd</code></p>\n<h2 id=\"umask\"><a href=\"#umask\" class=\"headerlink\" title=\"umask\"></a>umask</h2><p><code>umask</code> <code>umask -S</code>0022<br><code>-rw-rw-rw-</code><br><code>drwxrwxrwx</code><br>umaskrwx421</p>\n<p>umask<br>(666 - 022) = 644 = -rw-rr<br>(777 - 022) = 755 = drwxr-xr-x</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>()<code>chown</code><code>chmod</code></p>\n<p></p>\n<p>Linux</p>\n"},{"url":"/2020/07/16/linux-lock.html","title":"Linux Lock","keywords":"Linux,Lock","description":"Linux Lock","date":"2020-07-16T04:29:21.000Z","draft":true,"tags_weight":100,"categoryes_weight":100,"_content":"\n-\n\n## \n\n\n\n\n\n\n\n\n\n- \n\n- \n\n- \n\n### \n\n\n\n\n\n\n```\nif (noFeed) {\n    feed fish\n}\n```\n\n```\nif (noFeed) {\n    feed fish\n}\n```\n\n\n\n\n\n\n\n\n:\n\n||\n---|---|---\n1|look at fish(no feed)|\n2| |look at fish(no feed)\n3| |feed fish\n4|feed fish|\n\n\n(race)\n(critical section)\n\n### \n\n\n\n\n(mutual exclusion)\n\n4\n\n- \n\n- CPU\n\n- \n\n- \n\n\n\n\n\n```\nif (noNote) {\n    leave note\n    if (noFeed) {\n        feed fish\n    }\n    remove note\n}\n```\n\n\n```\nif (noNote) {\n    leave note\n    if (noFeed) {\n        feed fish\n    }\n    remove note\n}\n```\n","source":"_posts/linux/lock.md","raw":"---\nurl: /2020/07/16/linux-lock.html\ntitle: \"Linux Lock\"\nkeywords: \"Linux,Lock\"\ndescription: \"Linux Lock\"\ndate: 2020-07-16T20:29:21+08:00\ndraft: true\ntags: [\"Linux\"]\ntags_weight: 100\ncategories: [\"Linux\"]\ncategoryes_weight: 100\n---\n\n-\n\n## \n\n\n\n\n\n\n\n\n\n- \n\n- \n\n- \n\n### \n\n\n\n\n\n\n```\nif (noFeed) {\n    feed fish\n}\n```\n\n```\nif (noFeed) {\n    feed fish\n}\n```\n\n\n\n\n\n\n\n\n:\n\n||\n---|---|---\n1|look at fish(no feed)|\n2| |look at fish(no feed)\n3| |feed fish\n4|feed fish|\n\n\n(race)\n(critical section)\n\n### \n\n\n\n\n(mutual exclusion)\n\n4\n\n- \n\n- CPU\n\n- \n\n- \n\n\n\n\n\n```\nif (noNote) {\n    leave note\n    if (noFeed) {\n        feed fish\n    }\n    remove note\n}\n```\n\n\n```\nif (noNote) {\n    leave note\n    if (noFeed) {\n        feed fish\n    }\n    remove note\n}\n```\n","slug":"linux/lock","published":1,"updated":"2020-07-16T14:03:58.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf31001kmv056cvj4ul2","content":"<p>-</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><br></p>\n<p><br><br></p>\n<p></p>\n<ul>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p></p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">if (noFeed) &#123;</span><br><span class=\"line\">    feed fish</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">if (noFeed) &#123;</span><br><span class=\"line\">    feed fish</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><br></p>\n<p><br><br></p>\n<p>:</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>1</td>\n<td>look at fish(no feed)</td>\n<td></td>\n</tr>\n<tr>\n<td>2</td>\n<td></td>\n<td>look at fish(no feed)</td>\n</tr>\n<tr>\n<td>3</td>\n<td></td>\n<td>feed fish</td>\n</tr>\n<tr>\n<td>4</td>\n<td>feed fish</td>\n<td></td>\n</tr>\n</tbody></table>\n<p>(race)<br>(critical section)</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br></p>\n<p>(mutual exclusion)</p>\n<p>4</p>\n<ul>\n<li><p></p>\n</li>\n<li><p>CPU</p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ul>\n<p></p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">if (noNote) &#123;</span><br><span class=\"line\">    leave note</span><br><span class=\"line\">    if (noFeed) &#123;</span><br><span class=\"line\">        feed fish</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    remove note</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">if (noNote) &#123;</span><br><span class=\"line\">    leave note</span><br><span class=\"line\">    if (noFeed) &#123;</span><br><span class=\"line\">        feed fish</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    remove note</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>-</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><br></p>\n<p><br><br></p>\n<p></p>\n<ul>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p></p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">if (noFeed) &#123;</span><br><span class=\"line\">    feed fish</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">if (noFeed) &#123;</span><br><span class=\"line\">    feed fish</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><br></p>\n<p><br><br></p>\n<p>:</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>1</td>\n<td>look at fish(no feed)</td>\n<td></td>\n</tr>\n<tr>\n<td>2</td>\n<td></td>\n<td>look at fish(no feed)</td>\n</tr>\n<tr>\n<td>3</td>\n<td></td>\n<td>feed fish</td>\n</tr>\n<tr>\n<td>4</td>\n<td>feed fish</td>\n<td></td>\n</tr>\n</tbody></table>\n<p>(race)<br>(critical section)</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br></p>\n<p>(mutual exclusion)</p>\n<p>4</p>\n<ul>\n<li><p></p>\n</li>\n<li><p>CPU</p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ul>\n<p></p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">if (noNote) &#123;</span><br><span class=\"line\">    leave note</span><br><span class=\"line\">    if (noFeed) &#123;</span><br><span class=\"line\">        feed fish</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    remove note</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">if (noNote) &#123;</span><br><span class=\"line\">    leave note</span><br><span class=\"line\">    if (noFeed) &#123;</span><br><span class=\"line\">        feed fish</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    remove note</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n"},{"url":"/2019/10/11/linux-lock-principle.html","title":"Linux Lock","keywords":"Linux,Lock","description":"Linux Lock","date":"2019-10-11T06:29:21.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n-\n\n## 4\n\n1.  \n\n2. \n\n3. \n\n4. \n\n## \n\n-  \n\n```\n\n```\n\n\n```\n1. \n2. \n3. \n4. \n```\n\n\n## \n\n\n\n\n\n- \n```\n\n```\n\n- ()\n```\n\nrollback\n```\n\n- \n```\n\n```\n\n3\n\n||\n---|---|---\nA|3|9\nB|2|4\nC|2|7\n\n \n\nB 2 5\nC5 7\nA6\n\n2\n\n||\n---|---|---\nA|4|9\nB|2|4\nC|2|7\n\n\n\n\n\n\n\n\n    \n    \n    \n## \n\n1. \n\n2. \n\n\n\n\n3. CPU\n\n4. \n\n\n\n1. 123456\n2. \n3. \n\n## \n\n()\n\n1. (interrupt disable/enable)\n2. (load/store)\n3. (test&set)\n\n\n```\n(yield)CPU\nCPU\n```\n\n\n```c\nlock() {\n    // \n    disable interrupts;\n    //  valueFREE\n    //  FREE\n    while (value != FREE) {\n        //  value  FREE\n        enable interrupts;\n        // \n        disable interrupts;\n    }\n    //  BUSY \n    value = BUSY;\n    enable interrupts;\n}\n```\n\n\n```c\nunlock() {\n    // value  FREE \n    disable interrupts;\n    value = FREE;\n    enable interrupts;\n}\n```\nCPU\n\n\n```\n;\ntest&set \n```\n\n```c\ntest_and_set(X) {\n    tmp = X;\n    X = 1;\n    return tmp;\n}\n\nlock() {\n    while(test_and_set(value) == 1) {\n    \n    }\n}\n\n// unlock\nunlock() {\n    value = 0;\n}\n```\n\n\n```\n\n```\n\n1. \n2. CPU\n3. \n\n:\n```c\nlock (){\n    // \n    disable interrupts;\n    if (value == FREE) {\n        value = BUSY;\n    } else {\n        // \n        add thread to queue of threads waiting for this lock;\n        // \n        switch to next runable thread;\n    }\n    enable interrupts;\n}\n```\n\n\n\n- \n\n- \n\n\n\n\n```\nCPU\n```\n\n```c\nlock() {\n    while(test_and_set(guard)) {\n        \n    }\n    \n    if (value == FREE) {\n        value = BUSY;\n        guard = 0;\n    } else {\n        // \n        add thread to queue of threads waiting for this lock;\n        guard = 0;\n        // \n        switch to next runable thread;\n    }\n}\n\nunlock() {\n    while(test_and_set(guard)) {\n            \n    }\n    \n    value = FREE;\n    \n    if (any thread is waiting for this lock) {\n        move waiting thread from waiting queue to ready queue;\n        value = BUSY;\n    }\n    guard = 0;\n}\n```\n\n","source":"_posts/linux/lock-principle.md","raw":"---\nurl: /2019/10/11/linux-lock-principle.html\ntitle: \"Linux Lock\"\nkeywords: \"Linux,Lock\"\ndescription: \"Linux Lock\"\ndate: 2019-10-11T22:29:21+08:00\ndraft: false\ntags: [\"Linux\"]\ntags_weight: 100\ncategories: [\"Linux\"]\ncategoryes_weight: 100\n---\n\n-\n\n## 4\n\n1.  \n\n2. \n\n3. \n\n4. \n\n## \n\n-  \n\n```\n\n```\n\n\n```\n1. \n2. \n3. \n4. \n```\n\n\n## \n\n\n\n\n\n- \n```\n\n```\n\n- ()\n```\n\nrollback\n```\n\n- \n```\n\n```\n\n3\n\n||\n---|---|---\nA|3|9\nB|2|4\nC|2|7\n\n \n\nB 2 5\nC5 7\nA6\n\n2\n\n||\n---|---|---\nA|4|9\nB|2|4\nC|2|7\n\n\n\n\n\n\n\n\n    \n    \n    \n## \n\n1. \n\n2. \n\n\n\n\n3. CPU\n\n4. \n\n\n\n1. 123456\n2. \n3. \n\n## \n\n()\n\n1. (interrupt disable/enable)\n2. (load/store)\n3. (test&set)\n\n\n```\n(yield)CPU\nCPU\n```\n\n\n```c\nlock() {\n    // \n    disable interrupts;\n    //  valueFREE\n    //  FREE\n    while (value != FREE) {\n        //  value  FREE\n        enable interrupts;\n        // \n        disable interrupts;\n    }\n    //  BUSY \n    value = BUSY;\n    enable interrupts;\n}\n```\n\n\n```c\nunlock() {\n    // value  FREE \n    disable interrupts;\n    value = FREE;\n    enable interrupts;\n}\n```\nCPU\n\n\n```\n;\ntest&set \n```\n\n```c\ntest_and_set(X) {\n    tmp = X;\n    X = 1;\n    return tmp;\n}\n\nlock() {\n    while(test_and_set(value) == 1) {\n    \n    }\n}\n\n// unlock\nunlock() {\n    value = 0;\n}\n```\n\n\n```\n\n```\n\n1. \n2. CPU\n3. \n\n:\n```c\nlock (){\n    // \n    disable interrupts;\n    if (value == FREE) {\n        value = BUSY;\n    } else {\n        // \n        add thread to queue of threads waiting for this lock;\n        // \n        switch to next runable thread;\n    }\n    enable interrupts;\n}\n```\n\n\n\n- \n\n- \n\n\n\n\n```\nCPU\n```\n\n```c\nlock() {\n    while(test_and_set(guard)) {\n        \n    }\n    \n    if (value == FREE) {\n        value = BUSY;\n        guard = 0;\n    } else {\n        // \n        add thread to queue of threads waiting for this lock;\n        guard = 0;\n        // \n        switch to next runable thread;\n    }\n}\n\nunlock() {\n    while(test_and_set(guard)) {\n            \n    }\n    \n    value = FREE;\n    \n    if (any thread is waiting for this lock) {\n        move waiting thread from waiting queue to ready queue;\n        value = BUSY;\n    }\n    guard = 0;\n}\n```\n\n","slug":"linux/lock-principle","published":1,"updated":"2020-07-16T13:21:46.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf33001omv05df3dd9h6","content":"<p>-</p>\n<h2 id=\"4\"><a href=\"#4\" class=\"headerlink\" title=\"4\"></a>4</h2><ol>\n<li><p> </p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li> </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. </span><br><span class=\"line\">2. </span><br><span class=\"line\">3. </span><br><span class=\"line\">4. </span><br></pre></td></tr></table></figure>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<ul>\n<li><p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>()</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">rollback</span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<p>3</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>A</td>\n<td>3</td>\n<td>9</td>\n</tr>\n<tr>\n<td>B</td>\n<td>2</td>\n<td>4</td>\n</tr>\n<tr>\n<td>C</td>\n<td>2</td>\n<td>7</td>\n</tr>\n</tbody></table>\n<p> </p>\n<p>B 2 5<br>C5 7<br>A6</p>\n<p>2</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>A</td>\n<td>4</td>\n<td>9</td>\n</tr>\n<tr>\n<td>B</td>\n<td>2</td>\n<td>4</td>\n</tr>\n<tr>\n<td>C</td>\n<td>2</td>\n<td>7</td>\n</tr>\n</tbody></table>\n<p></p>\n<p><br><br></p>\n<p><br>    <br>    </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n<p><br></p>\n<ol start=\"3\">\n<li><p>CPU</p>\n</li>\n<li><p></p>\n</li>\n</ol>\n<p></p>\n<ol>\n<li>123456</li>\n<li></li>\n<li></li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>()</p>\n<ol>\n<li>(interrupt disable/enable)</li>\n<li>(load/store)</li>\n<li>(test&amp;set)</li>\n</ol>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(yield)CPU</span><br><span class=\"line\">CPU</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lock() &#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    disable interrupts;</span><br><span class=\"line\">    <span class=\"comment\">//  valueFREE</span></span><br><span class=\"line\">    <span class=\"comment\">//  FREE</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (value != FREE) &#123;</span><br><span class=\"line\">        <span class=\"comment\">//  value  FREE</span></span><br><span class=\"line\">        enable interrupts;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        disable interrupts;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//  BUSY </span></span><br><span class=\"line\">    value = BUSY;</span><br><span class=\"line\">    enable interrupts;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">unlock() &#123;</span><br><span class=\"line\">    <span class=\"comment\">// value  FREE </span></span><br><span class=\"line\">    disable interrupts;</span><br><span class=\"line\">    value = FREE;</span><br><span class=\"line\">    enable interrupts;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>CPU</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">;</span><br><span class=\"line\">test&amp;set </span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test_and_set(X) &#123;</span><br><span class=\"line\">    tmp = X;</span><br><span class=\"line\">    X = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tmp;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">lock() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(test_and_set(value) == <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// unlock</span></span><br><span class=\"line\">unlock() &#123;</span><br><span class=\"line\">    value = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<ol>\n<li></li>\n<li>CPU</li>\n<li></li>\n</ol>\n<p>:</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lock ()&#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    disable interrupts;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (value == FREE) &#123;</span><br><span class=\"line\">        value = BUSY;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        add thread to <span class=\"built_in\">queue</span> of threads waiting <span class=\"keyword\">for</span> <span class=\"keyword\">this</span> lock;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">switch</span> to next runable thread;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    enable interrupts;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<ul>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ul>\n<p></p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CPU</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lock() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(test_and_set(guard)) &#123;</span><br><span class=\"line\">        </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">if</span> (value == FREE) &#123;</span><br><span class=\"line\">        value = BUSY;</span><br><span class=\"line\">        guard = <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        add thread to <span class=\"built_in\">queue</span> of threads waiting <span class=\"keyword\">for</span> <span class=\"keyword\">this</span> lock;</span><br><span class=\"line\">        guard = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">switch</span> to next runable thread;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">unlock() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(test_and_set(guard)) &#123;</span><br><span class=\"line\">            </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    value = FREE;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">if</span> (any thread is waiting <span class=\"keyword\">for</span> <span class=\"keyword\">this</span> lock) &#123;</span><br><span class=\"line\">        move waiting thread from waiting <span class=\"built_in\">queue</span> to ready <span class=\"built_in\">queue</span>;</span><br><span class=\"line\">        value = BUSY;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    guard = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<p>-</p>\n<h2 id=\"4\"><a href=\"#4\" class=\"headerlink\" title=\"4\"></a>4</h2><ol>\n<li><p> </p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li> </li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. </span><br><span class=\"line\">2. </span><br><span class=\"line\">3. </span><br><span class=\"line\">4. </span><br></pre></td></tr></table></figure>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<ul>\n<li><p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>()</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">rollback</span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<p>3</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>A</td>\n<td>3</td>\n<td>9</td>\n</tr>\n<tr>\n<td>B</td>\n<td>2</td>\n<td>4</td>\n</tr>\n<tr>\n<td>C</td>\n<td>2</td>\n<td>7</td>\n</tr>\n</tbody></table>\n<p> </p>\n<p>B 2 5<br>C5 7<br>A6</p>\n<p>2</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>A</td>\n<td>4</td>\n<td>9</td>\n</tr>\n<tr>\n<td>B</td>\n<td>2</td>\n<td>4</td>\n</tr>\n<tr>\n<td>C</td>\n<td>2</td>\n<td>7</td>\n</tr>\n</tbody></table>\n<p></p>\n<p><br><br></p>\n<p><br>    <br>    </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n<p><br></p>\n<ol start=\"3\">\n<li><p>CPU</p>\n</li>\n<li><p></p>\n</li>\n</ol>\n<p></p>\n<ol>\n<li>123456</li>\n<li></li>\n<li></li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>()</p>\n<ol>\n<li>(interrupt disable/enable)</li>\n<li>(load/store)</li>\n<li>(test&amp;set)</li>\n</ol>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(yield)CPU</span><br><span class=\"line\">CPU</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lock() &#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    disable interrupts;</span><br><span class=\"line\">    <span class=\"comment\">//  valueFREE</span></span><br><span class=\"line\">    <span class=\"comment\">//  FREE</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (value != FREE) &#123;</span><br><span class=\"line\">        <span class=\"comment\">//  value  FREE</span></span><br><span class=\"line\">        enable interrupts;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        disable interrupts;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//  BUSY </span></span><br><span class=\"line\">    value = BUSY;</span><br><span class=\"line\">    enable interrupts;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">unlock() &#123;</span><br><span class=\"line\">    <span class=\"comment\">// value  FREE </span></span><br><span class=\"line\">    disable interrupts;</span><br><span class=\"line\">    value = FREE;</span><br><span class=\"line\">    enable interrupts;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>CPU</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">;</span><br><span class=\"line\">test&amp;set </span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test_and_set(X) &#123;</span><br><span class=\"line\">    tmp = X;</span><br><span class=\"line\">    X = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tmp;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">lock() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(test_and_set(value) == <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// unlock</span></span><br><span class=\"line\">unlock() &#123;</span><br><span class=\"line\">    value = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<ol>\n<li></li>\n<li>CPU</li>\n<li></li>\n</ol>\n<p>:</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lock ()&#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    disable interrupts;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (value == FREE) &#123;</span><br><span class=\"line\">        value = BUSY;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        add thread to <span class=\"built_in\">queue</span> of threads waiting <span class=\"keyword\">for</span> <span class=\"keyword\">this</span> lock;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">switch</span> to next runable thread;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    enable interrupts;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<ul>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ul>\n<p></p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CPU</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lock() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(test_and_set(guard)) &#123;</span><br><span class=\"line\">        </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">if</span> (value == FREE) &#123;</span><br><span class=\"line\">        value = BUSY;</span><br><span class=\"line\">        guard = <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        add thread to <span class=\"built_in\">queue</span> of threads waiting <span class=\"keyword\">for</span> <span class=\"keyword\">this</span> lock;</span><br><span class=\"line\">        guard = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">switch</span> to next runable thread;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">unlock() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(test_and_set(guard)) &#123;</span><br><span class=\"line\">            </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    value = FREE;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">if</span> (any thread is waiting <span class=\"keyword\">for</span> <span class=\"keyword\">this</span> lock) &#123;</span><br><span class=\"line\">        move waiting thread from waiting <span class=\"built_in\">queue</span> to ready <span class=\"built_in\">queue</span>;</span><br><span class=\"line\">        value = BUSY;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    guard = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n"},{"url":"/2020/06/07/linux-stdin.html","title":"Linux ","keywords":"Linux,","description":"Linux","date":"2020-06-07T03:29:11.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\nLinux \n\n## \n\nLinux`STDIN``STDOUT``STDERR`012\n\n`STDIN`\n\n`STDOUT`\n\n`STDERR`\n\n\n\n`STDIN`  /dev/stdin \n\n`STDOUT`  /dev/stdout \n\n`STDERR`  /dev/stderr \n\n 0,1,2\n\n## \n\n`>`fd\n\n\n\n```\n>/dev/null 2>&1 // /dev/null\n\n// fd1/dev/null\n// fd2fd1/dev/null\n\n```\n\n\n```\ntouch exists.log\nll exists.log not_exists.log\n// \n// ls: cannot access not_exists.log: No such file or directory\n// -rw-rw-r-- 1 www www 0 Jun  8 15:01 exists.log\n\nll exists.log not_exists.log >/dev/null 2>&1\n```\n\n\n`/dev/null`UnixEOF\n\n```\n2>&1 >/dev/null // /dev/null\n\n// fd2fd1STDOUT\n// fd1/dev/null\n\n```\n\n\n```\ntouch exists.log\nll exists.log not_exists.log 2>&1 >/dev/null\n// \n// ls: cannot access not_exists.log: No such file or directory\n```\n","source":"_posts/linux/stdin.md","raw":"---\nurl: /2020/06/07/linux-stdin.html\ntitle: \"Linux \"\nkeywords: \"Linux,\"\ndescription: \"Linux\"\ndate: 2020-06-07T19:29:11+08:00\ndraft: false\ntags: [\"Linux\"]\ntags_weight: 100\ncategories: [\"Linux\"]\ncategoryes_weight: 100\n---\n\nLinux \n\n## \n\nLinux`STDIN``STDOUT``STDERR`012\n\n`STDIN`\n\n`STDOUT`\n\n`STDERR`\n\n\n\n`STDIN`  /dev/stdin \n\n`STDOUT`  /dev/stdout \n\n`STDERR`  /dev/stderr \n\n 0,1,2\n\n## \n\n`>`fd\n\n\n\n```\n>/dev/null 2>&1 // /dev/null\n\n// fd1/dev/null\n// fd2fd1/dev/null\n\n```\n\n\n```\ntouch exists.log\nll exists.log not_exists.log\n// \n// ls: cannot access not_exists.log: No such file or directory\n// -rw-rw-r-- 1 www www 0 Jun  8 15:01 exists.log\n\nll exists.log not_exists.log >/dev/null 2>&1\n```\n\n\n`/dev/null`UnixEOF\n\n```\n2>&1 >/dev/null // /dev/null\n\n// fd2fd1STDOUT\n// fd1/dev/null\n\n```\n\n\n```\ntouch exists.log\nll exists.log not_exists.log 2>&1 >/dev/null\n// \n// ls: cannot access not_exists.log: No such file or directory\n```\n","slug":"linux/stdin","published":1,"updated":"2020-07-16T12:38:15.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf34001smv059v3wg3as","content":"<p>Linux </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Linux<code>STDIN</code><code>STDOUT</code><code>STDERR</code>012</p>\n<p><code>STDIN</code></p>\n<p><code>STDOUT</code></p>\n<p><code>STDERR</code></p>\n<p></p>\n<p><code>STDIN</code>  /dev/stdin </p>\n<p><code>STDOUT</code>  /dev/stdout </p>\n<p><code>STDERR</code>  /dev/stderr </p>\n<p> 0,1,2</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code>&gt;</code>fd</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt;&#x2F;dev&#x2F;null 2&gt;&amp;1 &#x2F;&#x2F; &#x2F;dev&#x2F;null</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; fd1&#x2F;dev&#x2F;null</span><br><span class=\"line\">&#x2F;&#x2F; fd2fd1&#x2F;dev&#x2F;null</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">touch exists.log</span><br><span class=\"line\">ll exists.log not_exists.log</span><br><span class=\"line\">&#x2F;&#x2F; </span><br><span class=\"line\">&#x2F;&#x2F; ls: cannot access not_exists.log: No such file or directory</span><br><span class=\"line\">&#x2F;&#x2F; -rw-rw-r-- 1 www www 0 Jun  8 15:01 exists.log</span><br><span class=\"line\"></span><br><span class=\"line\">ll exists.log not_exists.log &gt;&#x2F;dev&#x2F;null 2&gt;&amp;1</span><br></pre></td></tr></table></figure>\n<p></p>\n<p><code>/dev/null</code>UnixEOF</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">2&gt;&amp;1 &gt;&#x2F;dev&#x2F;null &#x2F;&#x2F; &#x2F;dev&#x2F;null</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; fd2fd1STDOUT</span><br><span class=\"line\">&#x2F;&#x2F; fd1&#x2F;dev&#x2F;null</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">touch exists.log</span><br><span class=\"line\">ll exists.log not_exists.log 2&gt;&amp;1 &gt;&#x2F;dev&#x2F;null</span><br><span class=\"line\">&#x2F;&#x2F; </span><br><span class=\"line\">&#x2F;&#x2F; ls: cannot access not_exists.log: No such file or directory</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>Linux </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Linux<code>STDIN</code><code>STDOUT</code><code>STDERR</code>012</p>\n<p><code>STDIN</code></p>\n<p><code>STDOUT</code></p>\n<p><code>STDERR</code></p>\n<p></p>\n<p><code>STDIN</code>  /dev/stdin </p>\n<p><code>STDOUT</code>  /dev/stdout </p>\n<p><code>STDERR</code>  /dev/stderr </p>\n<p> 0,1,2</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code>&gt;</code>fd</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt;&#x2F;dev&#x2F;null 2&gt;&amp;1 &#x2F;&#x2F; &#x2F;dev&#x2F;null</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; fd1&#x2F;dev&#x2F;null</span><br><span class=\"line\">&#x2F;&#x2F; fd2fd1&#x2F;dev&#x2F;null</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">touch exists.log</span><br><span class=\"line\">ll exists.log not_exists.log</span><br><span class=\"line\">&#x2F;&#x2F; </span><br><span class=\"line\">&#x2F;&#x2F; ls: cannot access not_exists.log: No such file or directory</span><br><span class=\"line\">&#x2F;&#x2F; -rw-rw-r-- 1 www www 0 Jun  8 15:01 exists.log</span><br><span class=\"line\"></span><br><span class=\"line\">ll exists.log not_exists.log &gt;&#x2F;dev&#x2F;null 2&gt;&amp;1</span><br></pre></td></tr></table></figure>\n<p></p>\n<p><code>/dev/null</code>UnixEOF</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">2&gt;&amp;1 &gt;&#x2F;dev&#x2F;null &#x2F;&#x2F; &#x2F;dev&#x2F;null</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; fd2fd1STDOUT</span><br><span class=\"line\">&#x2F;&#x2F; fd1&#x2F;dev&#x2F;null</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">touch exists.log</span><br><span class=\"line\">ll exists.log not_exists.log 2&gt;&amp;1 &gt;&#x2F;dev&#x2F;null</span><br><span class=\"line\">&#x2F;&#x2F; </span><br><span class=\"line\">&#x2F;&#x2F; ls: cannot access not_exists.log: No such file or directory</span><br></pre></td></tr></table></figure>\n"},{"url":"/2020/05/24/5g.html","title":"5G","keywords":"5G","description":"5G","date":"2020-05-24T06:53:12.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"type":"reprinted","_content":"\n [ 5G4G](https://www.ednchina.com/news/201707265G.html)\n\n## \n\n5th generation mobile networks5th generation wireless systems5th-Generation5G5G\n4GLTE-AWiMax3GUMTSLTE2GGSM\n\n\n\n` =  * `\n\n30\n\n2G3G4G5G\n\n## \n\n1. \n\n26Tbps\n\n2. \n\n\n\n## \n\n\n\nLiFiLightFidelity\n\n\n\n|||||\n---|---|---|---|---|---\n|VLF|3-30KHz||1000Km-100Km|\n|LF|30-300KHz||10Km-1Km|\n|MF|0.3-3MHz||1Km-100m|``\n|HF|3-30MHz||100m-10m|``\n|VHF|30-300MHz||10m-1m|``\n|UHF|0.3-3GHz||1m-0.1m|``\n|SHF|3-30GHz||10cm-1cm|\n|EHF|30-300GHz||10mm-1mm|\n\n~\nGSM900CDMA800900MHz800MHz4G LTE\n\n![LTE](/images/lte.jpg)\n\n\n\n\n\n5G3.3-3.6GHz4.8-5GHz\n24.75-27.5GHz37-42.5GHz\n28GHz5G\n28GHz` =  / ` 10.7mm\n\n## \n\n\n\n\n\n635nm\nGPS1cm\n\n\n5G4G\n\n\n\n\n### \n\n\n\n\n\n\n\n\n\n\n\n\n### \n\n\n\n\n\n1/10~1/4\n\n\n\n5GMassive MIMO Multiple-Input Multiple-OutputLTEMIMO5GMassive\n\n\n5G\n\n\n\n\n### \n\n\n\n\n\n\n### \n\n\n\n\n### \n\n\n5G\n5GD2DDevice to Device\n\n5G\n\n\n\n","source":"_posts/network/5g.md","raw":"---\nurl: /2020/05/24/5g.html\ntitle: \"5G\"\nkeywords: \"5G\"\ndescription: \"5G\"\ndate: 2020-05-24T22:53:12+08:00\ndraft: false\ntags: [\"5G\", \"Network\"]\ntags_weight: 100\ncategories: [\"5G\"]\ncategoryes_weight: 100\ntype: \"reprinted\"\n---\n\n [ 5G4G](https://www.ednchina.com/news/201707265G.html)\n\n## \n\n5th generation mobile networks5th generation wireless systems5th-Generation5G5G\n4GLTE-AWiMax3GUMTSLTE2GGSM\n\n\n\n` =  * `\n\n30\n\n2G3G4G5G\n\n## \n\n1. \n\n26Tbps\n\n2. \n\n\n\n## \n\n\n\nLiFiLightFidelity\n\n\n\n|||||\n---|---|---|---|---|---\n|VLF|3-30KHz||1000Km-100Km|\n|LF|30-300KHz||10Km-1Km|\n|MF|0.3-3MHz||1Km-100m|``\n|HF|3-30MHz||100m-10m|``\n|VHF|30-300MHz||10m-1m|``\n|UHF|0.3-3GHz||1m-0.1m|``\n|SHF|3-30GHz||10cm-1cm|\n|EHF|30-300GHz||10mm-1mm|\n\n~\nGSM900CDMA800900MHz800MHz4G LTE\n\n![LTE](/images/lte.jpg)\n\n\n\n\n\n5G3.3-3.6GHz4.8-5GHz\n24.75-27.5GHz37-42.5GHz\n28GHz5G\n28GHz` =  / ` 10.7mm\n\n## \n\n\n\n\n\n635nm\nGPS1cm\n\n\n5G4G\n\n\n\n\n### \n\n\n\n\n\n\n\n\n\n\n\n\n### \n\n\n\n\n\n1/10~1/4\n\n\n\n5GMassive MIMO Multiple-Input Multiple-OutputLTEMIMO5GMassive\n\n\n5G\n\n\n\n\n### \n\n\n\n\n\n\n### \n\n\n\n\n### \n\n\n5G\n5GD2DDevice to Device\n\n5G\n\n\n\n","slug":"network/5g","published":1,"updated":"2020-07-16T12:38:15.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf38001wmv052p1ff0c5","content":"<p> <a href=\"https://www.ednchina.com/news/201707265G.html\"> 5G4G</a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>5th generation mobile networks5th generation wireless systems5th-Generation5G5G<br>4GLTE-AWiMax3GUMTSLTE2GGSM</p>\n<p></p>\n<p><code> =  * </code></p>\n<p>30</p>\n<p>2G3G4G5G</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li></li>\n</ol>\n<p>26Tbps</p>\n<ol start=\"2\">\n<li></li>\n</ol>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>LiFiLightFidelity</p>\n<p></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td></td>\n<td>VLF</td>\n<td>3-30KHz</td>\n<td></td>\n<td>1000Km-100Km</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>LF</td>\n<td>30-300KHz</td>\n<td></td>\n<td>10Km-1Km</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>MF</td>\n<td>0.3-3MHz</td>\n<td></td>\n<td>1Km-100m</td>\n<td><code></code></td>\n</tr>\n<tr>\n<td></td>\n<td>HF</td>\n<td>3-30MHz</td>\n<td></td>\n<td>100m-10m</td>\n<td><code></code></td>\n</tr>\n<tr>\n<td></td>\n<td>VHF</td>\n<td>30-300MHz</td>\n<td></td>\n<td>10m-1m</td>\n<td><code></code></td>\n</tr>\n<tr>\n<td></td>\n<td>UHF</td>\n<td>0.3-3GHz</td>\n<td></td>\n<td>1m-0.1m</td>\n<td><code></code></td>\n</tr>\n<tr>\n<td></td>\n<td>SHF</td>\n<td>3-30GHz</td>\n<td></td>\n<td>10cm-1cm</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>EHF</td>\n<td>30-300GHz</td>\n<td></td>\n<td>10mm-1mm</td>\n<td></td>\n</tr>\n</tbody></table>\n<p>~<br>GSM900CDMA800900MHz800MHz4G LTE<br><br><img src=\"/images/lte.jpg\" alt=\"LTE\"></p>\n<p></p>\n<p></p>\n<p>5G3.3-3.6GHz4.8-5GHz<br>24.75-27.5GHz37-42.5GHz<br>28GHz5G<br>28GHz<code> =  / </code> 10.7mm</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><br><br></p>\n<p>635nm<br>GPS1cm<br></p>\n<p>5G4G</p>\n<p><br></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p><br><br>1/10~1/4</p>\n<p></p>\n<p>5GMassive MIMO Multiple-Input Multiple-OutputLTEMIMO5GMassive</p>\n<p><br>5G</p>\n<p><br></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br></p>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br>5G<br>5GD2DDevice to Device</p>\n<p>5G</p>\n<p><br></p>\n","site":{"data":{}},"excerpt":"","more":"<p> <a href=\"https://www.ednchina.com/news/201707265G.html\"> 5G4G</a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>5th generation mobile networks5th generation wireless systems5th-Generation5G5G<br>4GLTE-AWiMax3GUMTSLTE2GGSM</p>\n<p></p>\n<p><code> =  * </code></p>\n<p>30</p>\n<p>2G3G4G5G</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li></li>\n</ol>\n<p>26Tbps</p>\n<ol start=\"2\">\n<li></li>\n</ol>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>LiFiLightFidelity</p>\n<p></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td></td>\n<td>VLF</td>\n<td>3-30KHz</td>\n<td></td>\n<td>1000Km-100Km</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>LF</td>\n<td>30-300KHz</td>\n<td></td>\n<td>10Km-1Km</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>MF</td>\n<td>0.3-3MHz</td>\n<td></td>\n<td>1Km-100m</td>\n<td><code></code></td>\n</tr>\n<tr>\n<td></td>\n<td>HF</td>\n<td>3-30MHz</td>\n<td></td>\n<td>100m-10m</td>\n<td><code></code></td>\n</tr>\n<tr>\n<td></td>\n<td>VHF</td>\n<td>30-300MHz</td>\n<td></td>\n<td>10m-1m</td>\n<td><code></code></td>\n</tr>\n<tr>\n<td></td>\n<td>UHF</td>\n<td>0.3-3GHz</td>\n<td></td>\n<td>1m-0.1m</td>\n<td><code></code></td>\n</tr>\n<tr>\n<td></td>\n<td>SHF</td>\n<td>3-30GHz</td>\n<td></td>\n<td>10cm-1cm</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>EHF</td>\n<td>30-300GHz</td>\n<td></td>\n<td>10mm-1mm</td>\n<td></td>\n</tr>\n</tbody></table>\n<p>~<br>GSM900CDMA800900MHz800MHz4G LTE<br><br><img src=\"/images/lte.jpg\" alt=\"LTE\"></p>\n<p></p>\n<p></p>\n<p>5G3.3-3.6GHz4.8-5GHz<br>24.75-27.5GHz37-42.5GHz<br>28GHz5G<br>28GHz<code> =  / </code> 10.7mm</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><br><br></p>\n<p>635nm<br>GPS1cm<br></p>\n<p>5G4G</p>\n<p><br></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p><br><br>1/10~1/4</p>\n<p></p>\n<p>5GMassive MIMO Multiple-Input Multiple-OutputLTEMIMO5GMassive</p>\n<p><br>5G</p>\n<p><br></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br></p>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br>5G<br>5GD2DDevice to Device</p>\n<p>5G</p>\n<p><br></p>\n"},{"url":"/2020/04/25/nat.html","title":"NAT","keywords":"NAT","description":"NAT","date":"2020-04-25T06:53:12.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n## \n\nNATNetwork Address Translation\nIPInternet ProtocolInternetIPIP\nNATIPV6\n\n## \n\n- NAT(Static NAT)\n\n- NAT(Pooled NAT)\n\n- NAPT(Port-Level NAT)\n\nNetwork Address Port TranslationIPIP\nNAPT NATIPNAT\nNAPTHomeGWSNATDNAT\n\nSource NATSNATSNAT\n\nDestination NATDNATDNATSNATDNAT\n\n## \n\n- \n\nNATIPNATIPIPIPIPNATIP\n\nNAT2IP IP202.20.65.5\nIP192.168.1.1192.168.1.2202.20.65.41IP(Dst=202.20.65.4,Src=192.168.1.2)\n\n![NAT1](/images/nat_1.jpg)\n\nIPNATNAT GatewayIPIPNAT GatewayIPIPDst=202.20.65.4Src=202.20.65.5IP\nIPIPNAT GatewayIPWeb ServerIPDst= 202.20.65.5,Src=202.20.65.4NAT Gateway\n\nNAT GatewayIPIPIPIPDes=192.168.1.2Src=202.20.65.4\n\n\n![](/images/nat_2.jpg)\n\n- \n\nNAT GatewayNAT\nconnection track\n\n![](/images/nat_3.jpg)\n\nNAT GatewayNAT GatewayTrack Table\n\n- \n\nNAT GatewayIPIP\nClient AClient BWeb ServerNAT Gateway\n\n![1](/images/nat_4.jpg)\n\nNAT GatewayConnection Track\nTrack TableSNATDNAT\n\n![2](/images/nat_5.jpg)\n\n## \n\n: \n\n: IP\n\n: NAT\n\n: NATNAT\n\n: NATHTTPHTTP\n\n\n\n[ https://blog.csdn.net/hzhsan/article/details/45038265](https://blog.csdn.net/hzhsan/article/details/45038265)\n\n[ http://www.stars625.com/nat.html](http://www.stars625.com/nat.html)\n","source":"_posts/network/nat.md","raw":"---\nurl: /2020/04/25/nat.html\ntitle: \"NAT\"\nkeywords: \"NAT\"\ndescription: \"NAT\"\ndate: 2020-04-25T22:53:12+08:00\ndraft: false\ntags: [\"NAT\", \"Network\"]\ntags_weight: 100\ncategories: [\"NAT\"]\ncategoryes_weight: 100\n---\n\n## \n\nNATNetwork Address Translation\nIPInternet ProtocolInternetIPIP\nNATIPV6\n\n## \n\n- NAT(Static NAT)\n\n- NAT(Pooled NAT)\n\n- NAPT(Port-Level NAT)\n\nNetwork Address Port TranslationIPIP\nNAPT NATIPNAT\nNAPTHomeGWSNATDNAT\n\nSource NATSNATSNAT\n\nDestination NATDNATDNATSNATDNAT\n\n## \n\n- \n\nNATIPNATIPIPIPIPNATIP\n\nNAT2IP IP202.20.65.5\nIP192.168.1.1192.168.1.2202.20.65.41IP(Dst=202.20.65.4,Src=192.168.1.2)\n\n![NAT1](/images/nat_1.jpg)\n\nIPNATNAT GatewayIPIPNAT GatewayIPIPDst=202.20.65.4Src=202.20.65.5IP\nIPIPNAT GatewayIPWeb ServerIPDst= 202.20.65.5,Src=202.20.65.4NAT Gateway\n\nNAT GatewayIPIPIPIPDes=192.168.1.2Src=202.20.65.4\n\n\n![](/images/nat_2.jpg)\n\n- \n\nNAT GatewayNAT\nconnection track\n\n![](/images/nat_3.jpg)\n\nNAT GatewayNAT GatewayTrack Table\n\n- \n\nNAT GatewayIPIP\nClient AClient BWeb ServerNAT Gateway\n\n![1](/images/nat_4.jpg)\n\nNAT GatewayConnection Track\nTrack TableSNATDNAT\n\n![2](/images/nat_5.jpg)\n\n## \n\n: \n\n: IP\n\n: NAT\n\n: NATNAT\n\n: NATHTTPHTTP\n\n\n\n[ https://blog.csdn.net/hzhsan/article/details/45038265](https://blog.csdn.net/hzhsan/article/details/45038265)\n\n[ http://www.stars625.com/nat.html](http://www.stars625.com/nat.html)\n","slug":"network/nat","published":1,"updated":"2020-05-16T14:58:19.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf3a0020mv0557988imy","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>NATNetwork Address Translation<br>IPInternet ProtocolInternetIPIP<br>NATIPV6</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><p>NAT(Static NAT)</p>\n</li>\n<li><p>NAT(Pooled NAT)</p>\n</li>\n<li><p>NAPT(Port-Level NAT)</p>\n</li>\n</ul>\n<p>Network Address Port TranslationIPIP<br>NAPT NATIPNAT<br>NAPTHomeGWSNATDNAT</p>\n<p>Source NATSNATSNAT</p>\n<p>Destination NATDNATDNATSNATDNAT</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li></li>\n</ul>\n<p>NATIPNATIPIPIPIPNATIP</p>\n<p>NAT2IP IP202.20.65.5<br>IP192.168.1.1192.168.1.2202.20.65.41IP(Dst=202.20.65.4,Src=192.168.1.2)</p>\n<p><img src=\"/images/nat_1.jpg\" alt=\"NAT1\"></p>\n<p>IPNATNAT GatewayIPIPNAT GatewayIPIPDst=202.20.65.4Src=202.20.65.5IP<br>IPIPNAT GatewayIPWeb ServerIPDst= 202.20.65.5,Src=202.20.65.4NAT Gateway</p>\n<p>NAT GatewayIPIPIPIPDes=192.168.1.2Src=202.20.65.4<br></p>\n<p><img src=\"/images/nat_2.jpg\" alt=\"\"></p>\n<ul>\n<li></li>\n</ul>\n<p>NAT GatewayNAT<br>connection track</p>\n<p><img src=\"/images/nat_3.jpg\" alt=\"\"></p>\n<p>NAT GatewayNAT GatewayTrack Table</p>\n<ul>\n<li></li>\n</ul>\n<p>NAT GatewayIPIP<br>Client AClient BWeb ServerNAT Gateway</p>\n<p><img src=\"/images/nat_4.jpg\" alt=\"1\"></p>\n<p>NAT GatewayConnection Track<br>Track TableSNATDNAT</p>\n<p><img src=\"/images/nat_5.jpg\" alt=\"2\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>: </p>\n<p>: IP</p>\n<p>: NAT</p>\n<p>: NATNAT</p>\n<p>: NATHTTPHTTP</p>\n<p></p>\n<p><a href=\"https://blog.csdn.net/hzhsan/article/details/45038265\"> https://blog.csdn.net/hzhsan/article/details/45038265</a></p>\n<p><a href=\"http://www.stars625.com/nat.html\"> http://www.stars625.com/nat.html</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>NATNetwork Address Translation<br>IPInternet ProtocolInternetIPIP<br>NATIPV6</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><p>NAT(Static NAT)</p>\n</li>\n<li><p>NAT(Pooled NAT)</p>\n</li>\n<li><p>NAPT(Port-Level NAT)</p>\n</li>\n</ul>\n<p>Network Address Port TranslationIPIP<br>NAPT NATIPNAT<br>NAPTHomeGWSNATDNAT</p>\n<p>Source NATSNATSNAT</p>\n<p>Destination NATDNATDNATSNATDNAT</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li></li>\n</ul>\n<p>NATIPNATIPIPIPIPNATIP</p>\n<p>NAT2IP IP202.20.65.5<br>IP192.168.1.1192.168.1.2202.20.65.41IP(Dst=202.20.65.4,Src=192.168.1.2)</p>\n<p><img src=\"/images/nat_1.jpg\" alt=\"NAT1\"></p>\n<p>IPNATNAT GatewayIPIPNAT GatewayIPIPDst=202.20.65.4Src=202.20.65.5IP<br>IPIPNAT GatewayIPWeb ServerIPDst= 202.20.65.5,Src=202.20.65.4NAT Gateway</p>\n<p>NAT GatewayIPIPIPIPDes=192.168.1.2Src=202.20.65.4<br></p>\n<p><img src=\"/images/nat_2.jpg\" alt=\"\"></p>\n<ul>\n<li></li>\n</ul>\n<p>NAT GatewayNAT<br>connection track</p>\n<p><img src=\"/images/nat_3.jpg\" alt=\"\"></p>\n<p>NAT GatewayNAT GatewayTrack Table</p>\n<ul>\n<li></li>\n</ul>\n<p>NAT GatewayIPIP<br>Client AClient BWeb ServerNAT Gateway</p>\n<p><img src=\"/images/nat_4.jpg\" alt=\"1\"></p>\n<p>NAT GatewayConnection Track<br>Track TableSNATDNAT</p>\n<p><img src=\"/images/nat_5.jpg\" alt=\"2\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>: </p>\n<p>: IP</p>\n<p>: NAT</p>\n<p>: NATNAT</p>\n<p>: NATHTTPHTTP</p>\n<p></p>\n<p><a href=\"https://blog.csdn.net/hzhsan/article/details/45038265\"> https://blog.csdn.net/hzhsan/article/details/45038265</a></p>\n<p><a href=\"http://www.stars625.com/nat.html\"> http://www.stars625.com/nat.html</a></p>\n"},{"url":"/2020/04/02/tcp-connect-close.html","title":"TCP  ","keywords":"TCP,,","description":"TCP  ","date":"2020-04-02T04:53:12.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n## TCP\n\nATCPBTCPTCP`CLOSED`\nTCPAB\n\n![TCP](/images/tcp_connect.jpeg)\n\nBTCP TCB\n`LISTEN`\n\nATCPTCBB\nSYN = 1seq = x\nTCPSYNSYN = 1\nTCP`SYN-SENT`\n\nBA\nSYNACK1ack = x + 1seq = y\nTCP`SYN-RCVD`\n\nTCPBBACK1ack = y + 1seq = x + 1\nTCPACKseq = x + 1\nTCPA`ESTABLISHED`\n\nBA`ESTABLISHED`\n\n(three-way handshake)\n\nAB\n\nA\nA\nAB\n\nAB\nBA\nAB\n\nABB\nBAB\n\nABBA\n\n## TCP\n\nAB`ESTABLISHED`\n\n![TCP](/images/tcp_close.jpg)\n\nATCPTCP\nAFIN1seq = u1\nA`FIN-WAIT-1`1B\n\nTCPFIN\n\nBack = u + 1vB1\nB`CLOSE-WAIT`TCPAB\nTCP(`half-close`)ABA\nBA\n\nAB`FIN-WAIT-2`2B\n\nBATCPBFIN = 1\nBwBBack = u + 1\nB`LAST-ACK`A\n\nAB\nACK1ack = w + 1seq = u + 1TCPFIN\n`TIME-WAIT`TCP\n(TIME-WAIT timer)2MSLA`CLOSED`\n\nMSL(Maximum Segment Lifetime)RFC 7932\nMSL = 2\nTCPMSL\nA`TIME-WAIT`4`CLOSED`\nATCBTCP\n\nA`TIME-WAIT`2MSL\n\nAACKBACKLAST-ACKBFIN + ACK\nBFIN + ACKA2MSLFIN + ACK\nA2MSLAB`CLOSED`\nA`TIME-WAIT`ACKBFIN + ACK\nB`CLOSED`\n\n\nAACK2MSL\n\n\nBA`CLOSED`BTCBTCPBTCPA\nTCP\nTCP(keepalive timer)\n\nTCP\n\n\n75\n10\n\nBAFINBACKFINFIN\n\n\n","source":"_posts/network/tcp_connect_close.md","raw":"---\nurl: /2020/04/02/tcp-connect-close.html\ntitle: \"TCP  \"\nkeywords: \"TCP,,\"\ndescription: \"TCP  \"\ndate: 2020-04-02T20:53:12+08:00\ndraft: false\ntags: [\"TCP\", \"Network\"]\ntags_weight: 100\ncategories: [\"TCP\"]\ncategoryes_weight: 100\n---\n\n## TCP\n\nATCPBTCPTCP`CLOSED`\nTCPAB\n\n![TCP](/images/tcp_connect.jpeg)\n\nBTCP TCB\n`LISTEN`\n\nATCPTCBB\nSYN = 1seq = x\nTCPSYNSYN = 1\nTCP`SYN-SENT`\n\nBA\nSYNACK1ack = x + 1seq = y\nTCP`SYN-RCVD`\n\nTCPBBACK1ack = y + 1seq = x + 1\nTCPACKseq = x + 1\nTCPA`ESTABLISHED`\n\nBA`ESTABLISHED`\n\n(three-way handshake)\n\nAB\n\nA\nA\nAB\n\nAB\nBA\nAB\n\nABB\nBAB\n\nABBA\n\n## TCP\n\nAB`ESTABLISHED`\n\n![TCP](/images/tcp_close.jpg)\n\nATCPTCP\nAFIN1seq = u1\nA`FIN-WAIT-1`1B\n\nTCPFIN\n\nBack = u + 1vB1\nB`CLOSE-WAIT`TCPAB\nTCP(`half-close`)ABA\nBA\n\nAB`FIN-WAIT-2`2B\n\nBATCPBFIN = 1\nBwBBack = u + 1\nB`LAST-ACK`A\n\nAB\nACK1ack = w + 1seq = u + 1TCPFIN\n`TIME-WAIT`TCP\n(TIME-WAIT timer)2MSLA`CLOSED`\n\nMSL(Maximum Segment Lifetime)RFC 7932\nMSL = 2\nTCPMSL\nA`TIME-WAIT`4`CLOSED`\nATCBTCP\n\nA`TIME-WAIT`2MSL\n\nAACKBACKLAST-ACKBFIN + ACK\nBFIN + ACKA2MSLFIN + ACK\nA2MSLAB`CLOSED`\nA`TIME-WAIT`ACKBFIN + ACK\nB`CLOSED`\n\n\nAACK2MSL\n\n\nBA`CLOSED`BTCBTCPBTCPA\nTCP\nTCP(keepalive timer)\n\nTCP\n\n\n75\n10\n\nBAFINBACKFINFIN\n\n\n","slug":"network/tcp_connect_close","published":1,"updated":"2020-05-16T14:58:19.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf3b0024mv05f58475o4","content":"<h2 id=\"TCP\"><a href=\"#TCP\" class=\"headerlink\" title=\"TCP\"></a>TCP</h2><p>ATCPBTCPTCP<code>CLOSED</code><br>TCPAB</p>\n<p><img src=\"/images/tcp_connect.jpeg\" alt=\"TCP\"></p>\n<p>BTCP TCB<br><code>LISTEN</code></p>\n<p>ATCPTCBB<br>SYN = 1seq = x<br>TCPSYNSYN = 1<br>TCP<code>SYN-SENT</code></p>\n<p>BA<br>SYNACK1ack = x + 1seq = y<br>TCP<code>SYN-RCVD</code></p>\n<p>TCPBBACK1ack = y + 1seq = x + 1<br>TCPACKseq = x + 1<br>TCPA<code>ESTABLISHED</code></p>\n<p>BA<code>ESTABLISHED</code></p>\n<p>(three-way handshake)</p>\n<p>AB</p>\n<p>A<br>A<br>AB</p>\n<p>AB<br>BA<br>AB</p>\n<p>ABB<br>BAB</p>\n<p>ABBA</p>\n<h2 id=\"TCP\"><a href=\"#TCP\" class=\"headerlink\" title=\"TCP\"></a>TCP</h2><p>AB<code>ESTABLISHED</code></p>\n<p><img src=\"/images/tcp_close.jpg\" alt=\"TCP\"></p>\n<p>ATCPTCP<br>AFIN1seq = u1<br>A<code>FIN-WAIT-1</code>1B</p>\n<p>TCPFIN</p>\n<p>Back = u + 1vB1<br>B<code>CLOSE-WAIT</code>TCPAB<br>TCP(<code>half-close</code>)ABA<br>BA</p>\n<p>AB<code>FIN-WAIT-2</code>2B</p>\n<p>BATCPBFIN = 1<br>BwBBack = u + 1<br>B<code>LAST-ACK</code>A</p>\n<p>AB<br>ACK1ack = w + 1seq = u + 1TCPFIN<br><code>TIME-WAIT</code>TCP<br>(TIME-WAIT timer)2MSLA<code>CLOSED</code></p>\n<p>MSL(Maximum Segment Lifetime)RFC 7932<br>MSL = 2<br>TCPMSL<br>A<code>TIME-WAIT</code>4<code>CLOSED</code><br>ATCBTCP</p>\n<p>A<code>TIME-WAIT</code>2MSL</p>\n<p>AACKBACKLAST-ACKBFIN + ACK<br>BFIN + ACKA2MSLFIN + ACK<br>A2MSLAB<code>CLOSED</code><br>A<code>TIME-WAIT</code>ACKBFIN + ACK<br>B<code>CLOSED</code></p>\n<p><br>AACK2MSL<br></p>\n<p>BA<code>CLOSED</code>BTCBTCPBTCPA<br>TCP<br>TCP(keepalive timer)</p>\n<p>TCP<br><br><br>75<br>10</p>\n<p>BAFINBACKFINFIN</p>\n<p></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"TCP\"><a href=\"#TCP\" class=\"headerlink\" title=\"TCP\"></a>TCP</h2><p>ATCPBTCPTCP<code>CLOSED</code><br>TCPAB</p>\n<p><img src=\"/images/tcp_connect.jpeg\" alt=\"TCP\"></p>\n<p>BTCP TCB<br><code>LISTEN</code></p>\n<p>ATCPTCBB<br>SYN = 1seq = x<br>TCPSYNSYN = 1<br>TCP<code>SYN-SENT</code></p>\n<p>BA<br>SYNACK1ack = x + 1seq = y<br>TCP<code>SYN-RCVD</code></p>\n<p>TCPBBACK1ack = y + 1seq = x + 1<br>TCPACKseq = x + 1<br>TCPA<code>ESTABLISHED</code></p>\n<p>BA<code>ESTABLISHED</code></p>\n<p>(three-way handshake)</p>\n<p>AB</p>\n<p>A<br>A<br>AB</p>\n<p>AB<br>BA<br>AB</p>\n<p>ABB<br>BAB</p>\n<p>ABBA</p>\n<h2 id=\"TCP\"><a href=\"#TCP\" class=\"headerlink\" title=\"TCP\"></a>TCP</h2><p>AB<code>ESTABLISHED</code></p>\n<p><img src=\"/images/tcp_close.jpg\" alt=\"TCP\"></p>\n<p>ATCPTCP<br>AFIN1seq = u1<br>A<code>FIN-WAIT-1</code>1B</p>\n<p>TCPFIN</p>\n<p>Back = u + 1vB1<br>B<code>CLOSE-WAIT</code>TCPAB<br>TCP(<code>half-close</code>)ABA<br>BA</p>\n<p>AB<code>FIN-WAIT-2</code>2B</p>\n<p>BATCPBFIN = 1<br>BwBBack = u + 1<br>B<code>LAST-ACK</code>A</p>\n<p>AB<br>ACK1ack = w + 1seq = u + 1TCPFIN<br><code>TIME-WAIT</code>TCP<br>(TIME-WAIT timer)2MSLA<code>CLOSED</code></p>\n<p>MSL(Maximum Segment Lifetime)RFC 7932<br>MSL = 2<br>TCPMSL<br>A<code>TIME-WAIT</code>4<code>CLOSED</code><br>ATCBTCP</p>\n<p>A<code>TIME-WAIT</code>2MSL</p>\n<p>AACKBACKLAST-ACKBFIN + ACK<br>BFIN + ACKA2MSLFIN + ACK<br>A2MSLAB<code>CLOSED</code><br>A<code>TIME-WAIT</code>ACKBFIN + ACK<br>B<code>CLOSED</code></p>\n<p><br>AACK2MSL<br></p>\n<p>BA<code>CLOSED</code>BTCBTCPBTCPA<br>TCP<br>TCP(keepalive timer)</p>\n<p>TCP<br><br><br>75<br>10</p>\n<p>BAFINBACKFINFIN</p>\n<p></p>\n"},{"url":"/2020/04/14/tls.html","title":"TLS","keywords":"TLS","description":"TLS","date":"2020-04-14T06:53:12.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n## RSA\n\n[ RSA](http://www.ruanyifeng.com/blog/2013/06/rsa_algorithm_part_one.html)\n\n[ RSA](http://www.ruanyifeng.com/blog/2013/07/rsa_algorithm_part_two.html)\n\n### \n\n- \n\n11\n\n[ ](https://baike.baidu.com/item/%E8%B4%A8%E6%95%B0)\n\n- \n\n1coprime\n\n\n```\n1. 1361\n\n2. 310\n\n3. 9757\n\n4. 1199\n\n5. p1pp-15756\n\n6. p1pp-21715\n```\n\n- \n\nnnn\n\n(n)\n\n\n\n```\n1. n=1 (1) = 1 1\n\n2. n (n)=n-1 51234\n\n3. n n = p^k (pk1) (p^k) = p^k - p^(k-1) = p^k(1-1/p)\n(8) = (2^3) = 2^3 - 2^2 = 8 - 4 = 4\n\n4. nn = p1 * p2 (n) = (p1p2) = (p1)(p2)\n\n5. 1(n) = n(1-1/p1)(1-1/p2)...(1-1/pr)\n```\n\n- \n\nann (n) `a^(n)  1(mod n)`\n\na(n)n1\n\n\napp(p)p-1`a^(p-1)  1(mod p)`\n\n- \n\nanb ab-1 nabn1\n\n`ab  1(mod n)` ba\n\n### RSA\n\nAB\n\n1. Apq\n\n p=61 q=53\n\n2. pqn\n\nn = p*q = 61*53 = 3233\n\nn32331100101000011212\nRSA10242048\n\n3. n(n)\n\n(n) = (p-1)(q-1) = 60*52 = 3120\n\n4. e1< e < (n)e(n) \n\n 1765537\n\n5. e(n)d\n\n`ed  1 (mod (n))`  `ed - 1 = k(n)`\n\n17d - 3120k = 1 (d,k)=(2753,15) d=2753\n\n6. nend\n\nn=3233e=17d=2753 (3233,17)3233, 2753\n\nnedndd\n\nned\n\n`ed1 (mod (n))`e(n)d\n\n`(n)=(p-1)(q-1)`pq(n)\n\nn=pqnpq\n\nnd\n\nRSARSA\n\nRSARSA2008RSA\n\nRSA\n\n- \n\nABmmasciiunicodemn\n\nm = 65\n\n`m^e  c (mod n)`\n\nB(n,e) (3233, 17)\n\n65^17  2790 (mod 3233)\n\nc2790A2790B\n\n(n,d) (3233, 2753) \n\nB2790\n\n`cd  m (mod n)`\n\n2790^2753  65 (mod 3233)\n\n65\n\n## TLS1.2\n\n1.  ClientHello,  ClientHello.random\n\n2.  ServerHello ServerHello.random certificateP\n\n3.  ServerHello.random  pre_master_secret  master_secret\n\n  pre_master_secret 4846\n  `Struct {byte Version[2]; bute random[46];}`\n  \n  master_secret \n  `master_secret = PRF(pre_master_secret, \"master secret\", ClientHello.random+ServerHello.random)`\n  \n  PRF:\n  `PRF(secret, label, seed) = P_MD5(S1, label + seed) XOR P_SHA-1(S2, label + seed)`\n  \n    master_secret 6\n   (CBC) pre_master_secret  secret \n   master_key  label 48\n\n4. P pre_master_secret \n\n5.  pre_master_secret ClientHello.random  master_secret\n\n6.  master_secret \n","source":"_posts/network/tls.md","raw":"---\nurl: /2020/04/14/tls.html\ntitle: \"TLS\"\nkeywords: \"TLS\"\ndescription: \"TLS\"\ndate: 2020-04-14T22:53:12+08:00\ndraft: false\ntags: [\"TLS\", \"RSA\", \"Network\"]\ntags_weight: 100\ncategories: [\"TLS\"]\ncategoryes_weight: 100\n---\n\n## RSA\n\n[ RSA](http://www.ruanyifeng.com/blog/2013/06/rsa_algorithm_part_one.html)\n\n[ RSA](http://www.ruanyifeng.com/blog/2013/07/rsa_algorithm_part_two.html)\n\n### \n\n- \n\n11\n\n[ ](https://baike.baidu.com/item/%E8%B4%A8%E6%95%B0)\n\n- \n\n1coprime\n\n\n```\n1. 1361\n\n2. 310\n\n3. 9757\n\n4. 1199\n\n5. p1pp-15756\n\n6. p1pp-21715\n```\n\n- \n\nnnn\n\n(n)\n\n\n\n```\n1. n=1 (1) = 1 1\n\n2. n (n)=n-1 51234\n\n3. n n = p^k (pk1) (p^k) = p^k - p^(k-1) = p^k(1-1/p)\n(8) = (2^3) = 2^3 - 2^2 = 8 - 4 = 4\n\n4. nn = p1 * p2 (n) = (p1p2) = (p1)(p2)\n\n5. 1(n) = n(1-1/p1)(1-1/p2)...(1-1/pr)\n```\n\n- \n\nann (n) `a^(n)  1(mod n)`\n\na(n)n1\n\n\napp(p)p-1`a^(p-1)  1(mod p)`\n\n- \n\nanb ab-1 nabn1\n\n`ab  1(mod n)` ba\n\n### RSA\n\nAB\n\n1. Apq\n\n p=61 q=53\n\n2. pqn\n\nn = p*q = 61*53 = 3233\n\nn32331100101000011212\nRSA10242048\n\n3. n(n)\n\n(n) = (p-1)(q-1) = 60*52 = 3120\n\n4. e1< e < (n)e(n) \n\n 1765537\n\n5. e(n)d\n\n`ed  1 (mod (n))`  `ed - 1 = k(n)`\n\n17d - 3120k = 1 (d,k)=(2753,15) d=2753\n\n6. nend\n\nn=3233e=17d=2753 (3233,17)3233, 2753\n\nnedndd\n\nned\n\n`ed1 (mod (n))`e(n)d\n\n`(n)=(p-1)(q-1)`pq(n)\n\nn=pqnpq\n\nnd\n\nRSARSA\n\nRSARSA2008RSA\n\nRSA\n\n- \n\nABmmasciiunicodemn\n\nm = 65\n\n`m^e  c (mod n)`\n\nB(n,e) (3233, 17)\n\n65^17  2790 (mod 3233)\n\nc2790A2790B\n\n(n,d) (3233, 2753) \n\nB2790\n\n`cd  m (mod n)`\n\n2790^2753  65 (mod 3233)\n\n65\n\n## TLS1.2\n\n1.  ClientHello,  ClientHello.random\n\n2.  ServerHello ServerHello.random certificateP\n\n3.  ServerHello.random  pre_master_secret  master_secret\n\n  pre_master_secret 4846\n  `Struct {byte Version[2]; bute random[46];}`\n  \n  master_secret \n  `master_secret = PRF(pre_master_secret, \"master secret\", ClientHello.random+ServerHello.random)`\n  \n  PRF:\n  `PRF(secret, label, seed) = P_MD5(S1, label + seed) XOR P_SHA-1(S2, label + seed)`\n  \n    master_secret 6\n   (CBC) pre_master_secret  secret \n   master_key  label 48\n\n4. P pre_master_secret \n\n5.  pre_master_secret ClientHello.random  master_secret\n\n6.  master_secret \n","slug":"network/tls","published":1,"updated":"2020-05-16T14:58:19.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf3d0028mv057j6bd7a3","content":"<h2 id=\"RSA\"><a href=\"#RSA\" class=\"headerlink\" title=\"RSA\"></a>RSA</h2><p><a href=\"http://www.ruanyifeng.com/blog/2013/06/rsa_algorithm_part_one.html\"> RSA</a></p>\n<p><a href=\"http://www.ruanyifeng.com/blog/2013/07/rsa_algorithm_part_two.html\"> RSA</a></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li></li>\n</ul>\n<p>11</p>\n<p><a href=\"https://baike.baidu.com/item/%E8%B4%A8%E6%95%B0\"> </a></p>\n<ul>\n<li></li>\n</ul>\n<p>1coprime</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. 1361</span><br><span class=\"line\"></span><br><span class=\"line\">2. 310</span><br><span class=\"line\"></span><br><span class=\"line\">3. 9757</span><br><span class=\"line\"></span><br><span class=\"line\">4. 1199</span><br><span class=\"line\"></span><br><span class=\"line\">5. p1pp-15756</span><br><span class=\"line\"></span><br><span class=\"line\">6. p1pp-21715</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li></li>\n</ul>\n<p>nnn</p>\n<p>(n)</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. n&#x3D;1 (1) &#x3D; 1 1</span><br><span class=\"line\"></span><br><span class=\"line\">2. n (n)&#x3D;n-1 51234</span><br><span class=\"line\"></span><br><span class=\"line\">3. n n &#x3D; p^k (pk1) (p^k) &#x3D; p^k - p^(k-1) &#x3D; p^k(1-1&#x2F;p)</span><br><span class=\"line\">(8) &#x3D; (2^3) &#x3D; 2^3 - 2^2 &#x3D; 8 - 4 &#x3D; 4</span><br><span class=\"line\"></span><br><span class=\"line\">4. nn &#x3D; p1 * p2 (n) &#x3D; (p1p2) &#x3D; (p1)(p2)</span><br><span class=\"line\"></span><br><span class=\"line\">5. 1(n) &#x3D; n(1-1&#x2F;p1)(1-1&#x2F;p2)...(1-1&#x2F;pr)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li></li>\n</ul>\n<p>ann (n) <code>a^(n)  1(mod n)</code></p>\n<p>a(n)n1</p>\n<p><br>app(p)p-1<code>a^(p-1)  1(mod p)</code></p>\n<ul>\n<li></li>\n</ul>\n<p>anb ab-1 nabn1</p>\n<p><code>ab  1(mod n)</code> ba</p>\n<h3 id=\"RSA\"><a href=\"#RSA\" class=\"headerlink\" title=\"RSA\"></a>RSA</h3><p>AB</p>\n<ol>\n<li>Apq</li>\n</ol>\n<p> p=61 q=53</p>\n<ol start=\"2\">\n<li>pqn</li>\n</ol>\n<p>n = p<em>q = 61</em>53 = 3233</p>\n<p>n32331100101000011212<br>RSA10242048</p>\n<ol start=\"3\">\n<li>n(n)</li>\n</ol>\n<p>(n) = (p-1)(q-1) = 60*52 = 3120</p>\n<ol start=\"4\">\n<li>e1&lt; e &lt; (n)e(n) </li>\n</ol>\n<p> 1765537</p>\n<ol start=\"5\">\n<li>e(n)d</li>\n</ol>\n<p><code>ed  1 (mod (n))</code>  <code>ed - 1 = k(n)</code></p>\n<p>17d - 3120k = 1 (d,k)=(2753,15) d=2753</p>\n<ol start=\"6\">\n<li>nend</li>\n</ol>\n<p>n=3233e=17d=2753 (3233,17)3233, 2753</p>\n<p>nedndd</p>\n<p>ned</p>\n<p><code>ed1 (mod (n))</code>e(n)d</p>\n<p><code>(n)=(p-1)(q-1)</code>pq(n)</p>\n<p>n=pqnpq</p>\n<p>nd</p>\n<p>RSARSA</p>\n<p>RSARSA2008RSA</p>\n<p>RSA</p>\n<ul>\n<li></li>\n</ul>\n<p>ABmmasciiunicodemn</p>\n<p>m = 65</p>\n<p><code>m^e  c (mod n)</code></p>\n<p>B(n,e) (3233, 17)</p>\n<p>65^17  2790 (mod 3233)</p>\n<p>c2790A2790B</p>\n<p>(n,d) (3233, 2753) </p>\n<p>B2790</p>\n<p><code>cd  m (mod n)</code></p>\n<p>2790^2753  65 (mod 3233)</p>\n<p>65</p>\n<h2 id=\"TLS1-2\"><a href=\"#TLS1-2\" class=\"headerlink\" title=\"TLS1.2\"></a>TLS1.2</h2><ol>\n<li><p> ClientHello,  ClientHello.random</p>\n</li>\n<li><p> ServerHello ServerHello.random certificateP</p>\n</li>\n<li><p> ServerHello.random  pre_master_secret  master_secret</p>\n<p>pre_master_secret 4846<br><code>Struct &#123;byte Version[2]; bute random[46];&#125;</code></p>\n<p>master_secret <br><code>master_secret = PRF(pre_master_secret, &quot;master secret&quot;, ClientHello.random+ServerHello.random)</code></p>\n<p>PRF:<br><code>PRF(secret, label, seed) = P_MD5(S1, label + seed) XOR P_SHA-1(S2, label + seed)</code></p>\n<p> master_secret 6<br>(CBC) pre_master_secret  secret<br>master_key  label 48</p>\n</li>\n<li><p>P pre_master_secret </p>\n</li>\n<li><p> pre_master_secret ClientHello.random  master_secret</p>\n</li>\n<li><p> master_secret </p>\n</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"RSA\"><a href=\"#RSA\" class=\"headerlink\" title=\"RSA\"></a>RSA</h2><p><a href=\"http://www.ruanyifeng.com/blog/2013/06/rsa_algorithm_part_one.html\"> RSA</a></p>\n<p><a href=\"http://www.ruanyifeng.com/blog/2013/07/rsa_algorithm_part_two.html\"> RSA</a></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li></li>\n</ul>\n<p>11</p>\n<p><a href=\"https://baike.baidu.com/item/%E8%B4%A8%E6%95%B0\"> </a></p>\n<ul>\n<li></li>\n</ul>\n<p>1coprime</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. 1361</span><br><span class=\"line\"></span><br><span class=\"line\">2. 310</span><br><span class=\"line\"></span><br><span class=\"line\">3. 9757</span><br><span class=\"line\"></span><br><span class=\"line\">4. 1199</span><br><span class=\"line\"></span><br><span class=\"line\">5. p1pp-15756</span><br><span class=\"line\"></span><br><span class=\"line\">6. p1pp-21715</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li></li>\n</ul>\n<p>nnn</p>\n<p>(n)</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. n&#x3D;1 (1) &#x3D; 1 1</span><br><span class=\"line\"></span><br><span class=\"line\">2. n (n)&#x3D;n-1 51234</span><br><span class=\"line\"></span><br><span class=\"line\">3. n n &#x3D; p^k (pk1) (p^k) &#x3D; p^k - p^(k-1) &#x3D; p^k(1-1&#x2F;p)</span><br><span class=\"line\">(8) &#x3D; (2^3) &#x3D; 2^3 - 2^2 &#x3D; 8 - 4 &#x3D; 4</span><br><span class=\"line\"></span><br><span class=\"line\">4. nn &#x3D; p1 * p2 (n) &#x3D; (p1p2) &#x3D; (p1)(p2)</span><br><span class=\"line\"></span><br><span class=\"line\">5. 1(n) &#x3D; n(1-1&#x2F;p1)(1-1&#x2F;p2)...(1-1&#x2F;pr)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li></li>\n</ul>\n<p>ann (n) <code>a^(n)  1(mod n)</code></p>\n<p>a(n)n1</p>\n<p><br>app(p)p-1<code>a^(p-1)  1(mod p)</code></p>\n<ul>\n<li></li>\n</ul>\n<p>anb ab-1 nabn1</p>\n<p><code>ab  1(mod n)</code> ba</p>\n<h3 id=\"RSA\"><a href=\"#RSA\" class=\"headerlink\" title=\"RSA\"></a>RSA</h3><p>AB</p>\n<ol>\n<li>Apq</li>\n</ol>\n<p> p=61 q=53</p>\n<ol start=\"2\">\n<li>pqn</li>\n</ol>\n<p>n = p<em>q = 61</em>53 = 3233</p>\n<p>n32331100101000011212<br>RSA10242048</p>\n<ol start=\"3\">\n<li>n(n)</li>\n</ol>\n<p>(n) = (p-1)(q-1) = 60*52 = 3120</p>\n<ol start=\"4\">\n<li>e1&lt; e &lt; (n)e(n) </li>\n</ol>\n<p> 1765537</p>\n<ol start=\"5\">\n<li>e(n)d</li>\n</ol>\n<p><code>ed  1 (mod (n))</code>  <code>ed - 1 = k(n)</code></p>\n<p>17d - 3120k = 1 (d,k)=(2753,15) d=2753</p>\n<ol start=\"6\">\n<li>nend</li>\n</ol>\n<p>n=3233e=17d=2753 (3233,17)3233, 2753</p>\n<p>nedndd</p>\n<p>ned</p>\n<p><code>ed1 (mod (n))</code>e(n)d</p>\n<p><code>(n)=(p-1)(q-1)</code>pq(n)</p>\n<p>n=pqnpq</p>\n<p>nd</p>\n<p>RSARSA</p>\n<p>RSARSA2008RSA</p>\n<p>RSA</p>\n<ul>\n<li></li>\n</ul>\n<p>ABmmasciiunicodemn</p>\n<p>m = 65</p>\n<p><code>m^e  c (mod n)</code></p>\n<p>B(n,e) (3233, 17)</p>\n<p>65^17  2790 (mod 3233)</p>\n<p>c2790A2790B</p>\n<p>(n,d) (3233, 2753) </p>\n<p>B2790</p>\n<p><code>cd  m (mod n)</code></p>\n<p>2790^2753  65 (mod 3233)</p>\n<p>65</p>\n<h2 id=\"TLS1-2\"><a href=\"#TLS1-2\" class=\"headerlink\" title=\"TLS1.2\"></a>TLS1.2</h2><ol>\n<li><p> ClientHello,  ClientHello.random</p>\n</li>\n<li><p> ServerHello ServerHello.random certificateP</p>\n</li>\n<li><p> ServerHello.random  pre_master_secret  master_secret</p>\n<p>pre_master_secret 4846<br><code>Struct &#123;byte Version[2]; bute random[46];&#125;</code></p>\n<p>master_secret <br><code>master_secret = PRF(pre_master_secret, &quot;master secret&quot;, ClientHello.random+ServerHello.random)</code></p>\n<p>PRF:<br><code>PRF(secret, label, seed) = P_MD5(S1, label + seed) XOR P_SHA-1(S2, label + seed)</code></p>\n<p> master_secret 6<br>(CBC) pre_master_secret  secret<br>master_key  label 48</p>\n</li>\n<li><p>P pre_master_secret </p>\n</li>\n<li><p> pre_master_secret ClientHello.random  master_secret</p>\n</li>\n<li><p> master_secret </p>\n</li>\n</ol>\n"},{"url":"/2019/10/11/php7-array.html","title":"PHP7","keywords":"PHP7","description":"PHP7","date":"2019-10-11T06:29:21.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n## PHP\n\n1. PHP-key-value\n\n2. PHP\n\n1PHP HashTable  key-value  HashTable 1\n\n- phph HashTable\n\n`key/value -> hash1 -> h -> hash2 -> slotN -> bucket()`\n\n\n\n![](/images/hash_table_h.jpeg)\n\n1. bucket h \n\n2. hash hash1  hash2 hash1  key  hhash2  h  slot \n\n3. bucket  key key\n```\nHashTable key hkeyhkey1key2\nhkey1key2h HashTable\n\n```\n## \n\n```c\ntypedef struct _zend_array zend_array;\ntypedef struct _zend_array HashTable;\n\n//Bucket\ntypedef struct _Bucket {\n    zval              val; //valuezval\n    zend_ulong        h;   //keytimes 33\n    zend_string      *key; //key\n} Bucket;\n\n//HashTable\ntypedef struct _zend_array HashTable;\nstruct _zend_array {\n    zend_refcounted_h gc;   // \n    union {\n        struct {\n            ZEND_ENDIAN_LOHI_4(\n                    zend_uchar    flags,    // \n                    zend_uchar    nApplyCount,  // \n                    zend_uchar    nIteratorsCount,  // \n                    zend_uchar    reserve)\n        } v;\n        uint32_t flags;\n    } u;\n    uint32_t          nTableMask; //nTableSize(nTableMask = -nTableSize)\n    Bucket           *arData;     //Bucket\n    uint32_t          nNumUsed;   //Bucket\n    uint32_t          nNumOfElements; //\n    uint32_t          nTableSize;     //2n\n    uint32_t          nInternalPointer; //   reset/key/current/next/prev\n    zend_long         nNextFreeElement; //,:arr[] = 1;arr[\"a\"] = 2;arr[] = 3;  nNextFreeElement = 2;\n    dtor_func_t       pDestructor;  // \n};\n\n```\n\n- bucket\n\n1. val  HashTable  value  zvalzval IS_PTR zval.value.ptr\n\n2. h  HashTable  h key  h\n\n3. key  HashTable  key\n\n- bucket\n\n1.  \n\n2.  bucket\n\n3.  bucket\n\n\n\n![](https://github.com/pangudashu/php7-internal/raw/master/img/zend_hash_1.png)\n\n##  nTableMask \n```\nphp7bucketbucket\nslotslotbucketbucketslotbucket\n -1 \n\n HashTable.arData bucket\n arData[0...n-1]bucket((uint32_t*)(arData))[-1...-n]slot\n```\n- [-1...-n]hash2nIndex  slot \n\n```c\nnIndex = h | ht->nTableMask;\n```\n\n nTableSize=8  nTableMask=-8 \n\n11111111 11111111 11111111 11111000   -8\n\n8 [-n, -1]\n\n```c\n11111111 11111111 11111111 11111000   -8\n11111111 11111111 11111111 11111001   -7\n11111111 11111111 11111111 11111010   -6\n11111111 11111111 11111111 11111011   -5\n11111111 11111111 11111111 11111100   -4\n11111111 11111111 11111111 11111101   -3\n11111111 11111111 11111111 11111110   -2\n11111111 11111111 11111111 11111111   -1\n```\n\n## packed array  hash array \n\n```php\n$a = [1, 2, 3]; // packed array\n$b = ['a' => 'a', 'b' => 'b']; // hash array\n```\n\n1. \n\n1\n\n```php\n<?php\n$memory_start = memory_get_usage();\n$test = [];\nfor ($i = 0; $i <= 20000; $i++) {\n    $test[$i] = 1;\n}\n\necho memory_get_usage() - $memory_start, \"bytes\\n\"; // 1052728bytes\n```\n\n2\n```php\n<?php\n$memory_start = memory_get_usage();\n$test = [];\nfor ($i = 20000; $i >= 0; $i--) {\n    $test[$i] = 1;\n}\n\necho memory_get_usage() - $memory_start, \"bytes\\n\"; // 1179704bytes\n```\n\n2. packed array\n\n- key\n\n- key\n\n- key-value bucketkey\n\n-  key=NULL\n\nbucketkey\n (nTableSize-2) * sizeof(uint32_t) bucket\n\n## hash \n\n(php) slotbucket\n\nhash array  idx  bucket  zval.u2.next \nvalue(idx)valuenextvalue\n\n 123buckethash\n\n1. 1bucket nIndex=-3  nIndex=-3 1\n\n2. 2bucket nIndex=-31 nIndex=-3 22bucket\nzval  u2.next=11bucketkey nIndex2bucket key\n u2.next  11bucketkey\n\n3. 3bucket1 2   nIndex=-3 3 3bucketzval  u2.next=2\n\n##  rehash \n\nkey\n\n1. hash array  2^n  2^3 - 0x80000000\n\n2. \n\n3. (nNumUsed >= nTableSize)HashTable\n2bucket\n\n4. \n\n## zval \n\n```c\n//zend_types.h\ntypedef struct _zval_struct     zval;\n\ntypedef union _zend_value {\n    zend_long         lval;    //int\n    double            dval;    //\n    zend_refcounted  *counted;\n    zend_string      *str;     //string\n    zend_array       *arr;     //array\n    zend_object      *obj;     //object\n    zend_resource    *res;     //resource\n    zend_reference   *ref;     //&$var_name\n    zend_ast_ref     *ast;     //value\n    zval             *zv;       // zval \n    void             *ptr;      // \n    zend_class_entry *ce;       // class \n    zend_function    *func;     // function \n    struct {\n        uint32_t w1;\n        uint32_t w2;\n    } ww;\n} zend_value;\n\nstruct _zval_struct {\n    zend_value        value; //value\n    union {\n        struct {\n            ZEND_ENDIAN_LOHI_4( //4\n                zend_uchar    type,         //\n                zend_uchar    type_flags,  //\n                zend_uchar    const_flags,  // \n                zend_uchar    reserved)     //call infozend\n        } v;\n        uint32_t type_info; //4type_info4\n    } u1;\n    union {\n        uint32_t     next;                 //\n        uint32_t     cache_slot;           /*  */\n        uint32_t     lineno;               /* zend_ast_zvalAST */\n        uint32_t     num_args;             /* EX(This)  */\n        uint32_t     fe_pos;               /* foreach   +1  foreach */\n        uint32_t     fe_iter_idx;          /* foreach   */\n        uint32_t     access_flags;          /*  public protected private */\n        uint32_t     property_guard;          /*   */\n    } u2;\n};\n\n```\n\n## String \n\n```c\nstruct _zend_string {\n\tzend_refcounted_h gc;\n\tzend_ulong        h;                /* hash */\n\tsize_t            len;  //  '\\0'\n\tchar              val[1];       // \n};\n```\n","source":"_posts/php/php7-array.md","raw":"---\nurl: /2019/10/11/php7-array.html\ntitle: \"PHP7\"\nkeywords: \"PHP7\"\ndescription: \"PHP7\"\ndate: 2019-10-11T22:29:21+08:00\ndraft: false\ntags: [\"PHP\"]\ntags_weight: 100\ncategories: [\"PHP\"]\ncategoryes_weight: 100\n---\n\n## PHP\n\n1. PHP-key-value\n\n2. PHP\n\n1PHP HashTable  key-value  HashTable 1\n\n- phph HashTable\n\n`key/value -> hash1 -> h -> hash2 -> slotN -> bucket()`\n\n\n\n![](/images/hash_table_h.jpeg)\n\n1. bucket h \n\n2. hash hash1  hash2 hash1  key  hhash2  h  slot \n\n3. bucket  key key\n```\nHashTable key hkeyhkey1key2\nhkey1key2h HashTable\n\n```\n## \n\n```c\ntypedef struct _zend_array zend_array;\ntypedef struct _zend_array HashTable;\n\n//Bucket\ntypedef struct _Bucket {\n    zval              val; //valuezval\n    zend_ulong        h;   //keytimes 33\n    zend_string      *key; //key\n} Bucket;\n\n//HashTable\ntypedef struct _zend_array HashTable;\nstruct _zend_array {\n    zend_refcounted_h gc;   // \n    union {\n        struct {\n            ZEND_ENDIAN_LOHI_4(\n                    zend_uchar    flags,    // \n                    zend_uchar    nApplyCount,  // \n                    zend_uchar    nIteratorsCount,  // \n                    zend_uchar    reserve)\n        } v;\n        uint32_t flags;\n    } u;\n    uint32_t          nTableMask; //nTableSize(nTableMask = -nTableSize)\n    Bucket           *arData;     //Bucket\n    uint32_t          nNumUsed;   //Bucket\n    uint32_t          nNumOfElements; //\n    uint32_t          nTableSize;     //2n\n    uint32_t          nInternalPointer; //   reset/key/current/next/prev\n    zend_long         nNextFreeElement; //,:arr[] = 1;arr[\"a\"] = 2;arr[] = 3;  nNextFreeElement = 2;\n    dtor_func_t       pDestructor;  // \n};\n\n```\n\n- bucket\n\n1. val  HashTable  value  zvalzval IS_PTR zval.value.ptr\n\n2. h  HashTable  h key  h\n\n3. key  HashTable  key\n\n- bucket\n\n1.  \n\n2.  bucket\n\n3.  bucket\n\n\n\n![](https://github.com/pangudashu/php7-internal/raw/master/img/zend_hash_1.png)\n\n##  nTableMask \n```\nphp7bucketbucket\nslotslotbucketbucketslotbucket\n -1 \n\n HashTable.arData bucket\n arData[0...n-1]bucket((uint32_t*)(arData))[-1...-n]slot\n```\n- [-1...-n]hash2nIndex  slot \n\n```c\nnIndex = h | ht->nTableMask;\n```\n\n nTableSize=8  nTableMask=-8 \n\n11111111 11111111 11111111 11111000   -8\n\n8 [-n, -1]\n\n```c\n11111111 11111111 11111111 11111000   -8\n11111111 11111111 11111111 11111001   -7\n11111111 11111111 11111111 11111010   -6\n11111111 11111111 11111111 11111011   -5\n11111111 11111111 11111111 11111100   -4\n11111111 11111111 11111111 11111101   -3\n11111111 11111111 11111111 11111110   -2\n11111111 11111111 11111111 11111111   -1\n```\n\n## packed array  hash array \n\n```php\n$a = [1, 2, 3]; // packed array\n$b = ['a' => 'a', 'b' => 'b']; // hash array\n```\n\n1. \n\n1\n\n```php\n<?php\n$memory_start = memory_get_usage();\n$test = [];\nfor ($i = 0; $i <= 20000; $i++) {\n    $test[$i] = 1;\n}\n\necho memory_get_usage() - $memory_start, \"bytes\\n\"; // 1052728bytes\n```\n\n2\n```php\n<?php\n$memory_start = memory_get_usage();\n$test = [];\nfor ($i = 20000; $i >= 0; $i--) {\n    $test[$i] = 1;\n}\n\necho memory_get_usage() - $memory_start, \"bytes\\n\"; // 1179704bytes\n```\n\n2. packed array\n\n- key\n\n- key\n\n- key-value bucketkey\n\n-  key=NULL\n\nbucketkey\n (nTableSize-2) * sizeof(uint32_t) bucket\n\n## hash \n\n(php) slotbucket\n\nhash array  idx  bucket  zval.u2.next \nvalue(idx)valuenextvalue\n\n 123buckethash\n\n1. 1bucket nIndex=-3  nIndex=-3 1\n\n2. 2bucket nIndex=-31 nIndex=-3 22bucket\nzval  u2.next=11bucketkey nIndex2bucket key\n u2.next  11bucketkey\n\n3. 3bucket1 2   nIndex=-3 3 3bucketzval  u2.next=2\n\n##  rehash \n\nkey\n\n1. hash array  2^n  2^3 - 0x80000000\n\n2. \n\n3. (nNumUsed >= nTableSize)HashTable\n2bucket\n\n4. \n\n## zval \n\n```c\n//zend_types.h\ntypedef struct _zval_struct     zval;\n\ntypedef union _zend_value {\n    zend_long         lval;    //int\n    double            dval;    //\n    zend_refcounted  *counted;\n    zend_string      *str;     //string\n    zend_array       *arr;     //array\n    zend_object      *obj;     //object\n    zend_resource    *res;     //resource\n    zend_reference   *ref;     //&$var_name\n    zend_ast_ref     *ast;     //value\n    zval             *zv;       // zval \n    void             *ptr;      // \n    zend_class_entry *ce;       // class \n    zend_function    *func;     // function \n    struct {\n        uint32_t w1;\n        uint32_t w2;\n    } ww;\n} zend_value;\n\nstruct _zval_struct {\n    zend_value        value; //value\n    union {\n        struct {\n            ZEND_ENDIAN_LOHI_4( //4\n                zend_uchar    type,         //\n                zend_uchar    type_flags,  //\n                zend_uchar    const_flags,  // \n                zend_uchar    reserved)     //call infozend\n        } v;\n        uint32_t type_info; //4type_info4\n    } u1;\n    union {\n        uint32_t     next;                 //\n        uint32_t     cache_slot;           /*  */\n        uint32_t     lineno;               /* zend_ast_zvalAST */\n        uint32_t     num_args;             /* EX(This)  */\n        uint32_t     fe_pos;               /* foreach   +1  foreach */\n        uint32_t     fe_iter_idx;          /* foreach   */\n        uint32_t     access_flags;          /*  public protected private */\n        uint32_t     property_guard;          /*   */\n    } u2;\n};\n\n```\n\n## String \n\n```c\nstruct _zend_string {\n\tzend_refcounted_h gc;\n\tzend_ulong        h;                /* hash */\n\tsize_t            len;  //  '\\0'\n\tchar              val[1];       // \n};\n```\n","slug":"php/php7-array","published":1,"updated":"2020-04-02T13:04:45.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf3e002cmv05exzlfdnw","content":"<h2 id=\"PHP\"><a href=\"#PHP\" class=\"headerlink\" title=\"PHP\"></a>PHP</h2><ol>\n<li><p>PHP-key-value</p>\n</li>\n<li><p>PHP</p>\n</li>\n</ol>\n<p>1PHP HashTable  key-value  HashTable 1</p>\n<ul>\n<li>phph HashTable</li>\n</ul>\n<p><code>key/value -&gt; hash1 -&gt; h -&gt; hash2 -&gt; slotN -&gt; bucket()</code></p>\n<p></p>\n<p><img src=\"/images/hash_table_h.jpeg\" alt=\"\"></p>\n<ol>\n<li><p>bucket h </p>\n</li>\n<li><p>hash hash1  hash2 hash1  key  hhash2  h  slot </p>\n</li>\n<li><p>bucket  key key</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">HashTable key hkeyhkey1key2</span><br><span class=\"line\">hkey1key2h HashTable</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2></li>\n</ol>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span> _<span class=\"title\">zend_array</span> <span class=\"title\">zend_array</span>;</span></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span> _<span class=\"title\">zend_array</span> <span class=\"title\">HashTable</span>;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//Bucket</span></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span> _<span class=\"title\">Bucket</span> &#123;</span></span><br><span class=\"line\">    zval              val; <span class=\"comment\">//valuezval</span></span><br><span class=\"line\">    zend_ulong        h;   <span class=\"comment\">//keytimes 33</span></span><br><span class=\"line\">    zend_string      *key; <span class=\"comment\">//key</span></span><br><span class=\"line\">&#125; Bucket;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//HashTable</span></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span> _<span class=\"title\">zend_array</span> <span class=\"title\">HashTable</span>;</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> _<span class=\"title\">zend_array</span> &#123;</span></span><br><span class=\"line\">    zend_refcounted_h gc;   <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">union</span> &#123;</span></span><br><span class=\"line\">        <span class=\"class\"><span class=\"keyword\">struct</span> &#123;</span></span><br><span class=\"line\">            ZEND_ENDIAN_LOHI_4(</span><br><span class=\"line\">                    zend_uchar    flags,    <span class=\"comment\">// </span></span><br><span class=\"line\">                    zend_uchar    nApplyCount,  <span class=\"comment\">// </span></span><br><span class=\"line\">                    zend_uchar    nIteratorsCount,  <span class=\"comment\">// </span></span><br><span class=\"line\">                    zend_uchar    reserve)</span><br><span class=\"line\">        &#125; v;</span><br><span class=\"line\">        <span class=\"keyword\">uint32_t</span> flags;</span><br><span class=\"line\">    &#125; u;</span><br><span class=\"line\">    <span class=\"keyword\">uint32_t</span>          nTableMask; <span class=\"comment\">//nTableSize(nTableMask = -nTableSize)</span></span><br><span class=\"line\">    Bucket           *arData;     <span class=\"comment\">//Bucket</span></span><br><span class=\"line\">    <span class=\"keyword\">uint32_t</span>          nNumUsed;   <span class=\"comment\">//Bucket</span></span><br><span class=\"line\">    <span class=\"keyword\">uint32_t</span>          nNumOfElements; <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"keyword\">uint32_t</span>          nTableSize;     <span class=\"comment\">//2n</span></span><br><span class=\"line\">    <span class=\"keyword\">uint32_t</span>          nInternalPointer; <span class=\"comment\">//   reset/key/current/next/prev</span></span><br><span class=\"line\">    zend_long         nNextFreeElement; <span class=\"comment\">//,:arr[] = 1;arr[&quot;a&quot;] = 2;arr[] = 3;  nNextFreeElement = 2;</span></span><br><span class=\"line\">    <span class=\"keyword\">dtor_func_t</span>       pDestructor;  <span class=\"comment\">// </span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>bucket</li>\n</ul>\n<ol>\n<li><p>val  HashTable  value  zvalzval IS_PTR zval.value.ptr</p>\n</li>\n<li><p>h  HashTable  h key  h</p>\n</li>\n<li><p>key  HashTable  key</p>\n</li>\n</ol>\n<ul>\n<li>bucket</li>\n</ul>\n<ol>\n<li><p> </p>\n</li>\n<li><p> bucket</p>\n</li>\n<li><p> bucket</p>\n</li>\n</ol>\n<p></p>\n<p><img src=\"https://github.com/pangudashu/php7-internal/raw/master/img/zend_hash_1.png\" alt=\"\"></p>\n<h2 id=\"-nTableMask-\"><a href=\"#-nTableMask-\" class=\"headerlink\" title=\" nTableMask \"></a> nTableMask </h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">php7bucketbucket</span><br><span class=\"line\">slotslotbucketbucketslotbucket</span><br><span class=\"line\"> -1 </span><br><span class=\"line\"></span><br><span class=\"line\"> HashTable.arData bucket</span><br><span class=\"line\"> arData[0...n-1]bucket((uint32_t*)(arData))[-1...-n]slot</span><br></pre></td></tr></table></figure>\n<ul>\n<li>[-1-n]hash2nIndex  slot </li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nIndex = h | ht-&gt;nTableMask;</span><br></pre></td></tr></table></figure>\n\n<p> nTableSize=8  nTableMask=-8 </p>\n<p>11111111 11111111 11111111 11111000   -8</p>\n<p>8 [-n, -1]</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">11111111</span> <span class=\"number\">11111111</span> <span class=\"number\">11111111</span> <span class=\"number\">11111000</span>   <span class=\"number\">-8</span></span><br><span class=\"line\"><span class=\"number\">11111111</span> <span class=\"number\">11111111</span> <span class=\"number\">11111111</span> <span class=\"number\">11111001</span>   <span class=\"number\">-7</span></span><br><span class=\"line\"><span class=\"number\">11111111</span> <span class=\"number\">11111111</span> <span class=\"number\">11111111</span> <span class=\"number\">11111010</span>   <span class=\"number\">-6</span></span><br><span class=\"line\"><span class=\"number\">11111111</span> <span class=\"number\">11111111</span> <span class=\"number\">11111111</span> <span class=\"number\">11111011</span>   <span class=\"number\">-5</span></span><br><span class=\"line\"><span class=\"number\">11111111</span> <span class=\"number\">11111111</span> <span class=\"number\">11111111</span> <span class=\"number\">11111100</span>   <span class=\"number\">-4</span></span><br><span class=\"line\"><span class=\"number\">11111111</span> <span class=\"number\">11111111</span> <span class=\"number\">11111111</span> <span class=\"number\">11111101</span>   <span class=\"number\">-3</span></span><br><span class=\"line\"><span class=\"number\">11111111</span> <span class=\"number\">11111111</span> <span class=\"number\">11111111</span> <span class=\"number\">11111110</span>   <span class=\"number\">-2</span></span><br><span class=\"line\"><span class=\"number\">11111111</span> <span class=\"number\">11111111</span> <span class=\"number\">11111111</span> <span class=\"number\">11111111</span>   <span class=\"number\">-1</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"packed-array--hash-array-\"><a href=\"#packed-array--hash-array-\" class=\"headerlink\" title=\"packed array  hash array \"></a>packed array  hash array </h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$a = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]; <span class=\"comment\">// packed array</span></span><br><span class=\"line\">$b = [<span class=\"string\">&#x27;a&#x27;</span> =&gt; <span class=\"string\">&#x27;a&#x27;</span>, <span class=\"string\">&#x27;b&#x27;</span> =&gt; <span class=\"string\">&#x27;b&#x27;</span>]; <span class=\"comment\">// hash array</span></span><br></pre></td></tr></table></figure>\n\n<ol>\n<li></li>\n</ol>\n<p>1</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">$memory_start = memory_get_usage();</span><br><span class=\"line\">$test = [];</span><br><span class=\"line\"><span class=\"keyword\">for</span> ($i = <span class=\"number\">0</span>; $i &lt;= <span class=\"number\">20000</span>; $i++) &#123;</span><br><span class=\"line\">    $test[$i] = <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> memory_get_usage() - $memory_start, <span class=\"string\">&quot;bytes\\n&quot;</span>; <span class=\"comment\">// 1052728bytes</span></span><br></pre></td></tr></table></figure>\n\n<p>2</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">$memory_start = memory_get_usage();</span><br><span class=\"line\">$test = [];</span><br><span class=\"line\"><span class=\"keyword\">for</span> ($i = <span class=\"number\">20000</span>; $i &gt;= <span class=\"number\">0</span>; $i--) &#123;</span><br><span class=\"line\">    $test[$i] = <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> memory_get_usage() - $memory_start, <span class=\"string\">&quot;bytes\\n&quot;</span>; <span class=\"comment\">// 1179704bytes</span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>packed array</li>\n</ol>\n<ul>\n<li><p>key</p>\n</li>\n<li><p>key</p>\n</li>\n<li><p>key-value bucketkey</p>\n</li>\n<li><p> key=NULL</p>\n</li>\n</ul>\n<p>bucketkey<br> (nTableSize-2) * sizeof(uint32_t) bucket</p>\n<h2 id=\"hash\"><a href=\"#hash\" class=\"headerlink\" title=\"hash\"></a>hash</h2><p>(php) slotbucket</p>\n<p>hash array  idx  bucket  zval.u2.next <br>value(idx)valuenextvalue</p>\n<p> 123buckethash</p>\n<ol>\n<li><p>1bucket nIndex=-3  nIndex=-3 1</p>\n</li>\n<li><p>2bucket nIndex=-31 nIndex=-3 22bucket<br>zval  u2.next=11bucketkey nIndex2bucket key<br> u2.next  11bucketkey</p>\n</li>\n<li><p>3bucket1 2   nIndex=-3 3 3bucketzval  u2.next=2</p>\n</li>\n</ol>\n<h2 id=\"-rehash-\"><a href=\"#-rehash-\" class=\"headerlink\" title=\" rehash \"></a> rehash </h2><p>key</p>\n<ol>\n<li><p>hash array  2^n  2^3 - 0x80000000</p>\n</li>\n<li><p></p>\n</li>\n<li><p>(nNumUsed &gt;= nTableSize)HashTable<br>2bucket</p>\n</li>\n<li><p></p>\n</li>\n</ol>\n<h2 id=\"zval-\"><a href=\"#zval-\" class=\"headerlink\" title=\"zval \"></a>zval </h2><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//zend_types.h</span></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span> _<span class=\"title\">zval_struct</span>     <span class=\"title\">zval</span>;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">union</span> _<span class=\"title\">zend_value</span> &#123;</span></span><br><span class=\"line\">    zend_long         lval;    <span class=\"comment\">//int</span></span><br><span class=\"line\">    <span class=\"keyword\">double</span>            dval;    <span class=\"comment\">//</span></span><br><span class=\"line\">    zend_refcounted  *counted;</span><br><span class=\"line\">    zend_string      *str;     <span class=\"comment\">//string</span></span><br><span class=\"line\">    zend_array       *arr;     <span class=\"comment\">//array</span></span><br><span class=\"line\">    zend_object      *obj;     <span class=\"comment\">//object</span></span><br><span class=\"line\">    zend_resource    *res;     <span class=\"comment\">//resource</span></span><br><span class=\"line\">    zend_reference   *ref;     <span class=\"comment\">//&amp;$var_name</span></span><br><span class=\"line\">    zend_ast_ref     *ast;     <span class=\"comment\">//value</span></span><br><span class=\"line\">    zval             *zv;       <span class=\"comment\">// zval </span></span><br><span class=\"line\">    <span class=\"keyword\">void</span>             *ptr;      <span class=\"comment\">// </span></span><br><span class=\"line\">    zend_class_entry *ce;       <span class=\"comment\">// class </span></span><br><span class=\"line\">    zend_function    *func;     <span class=\"comment\">// function </span></span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> &#123;</span></span><br><span class=\"line\">        <span class=\"keyword\">uint32_t</span> w1;</span><br><span class=\"line\">        <span class=\"keyword\">uint32_t</span> w2;</span><br><span class=\"line\">    &#125; ww;</span><br><span class=\"line\">&#125; zend_value;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> _<span class=\"title\">zval_struct</span> &#123;</span></span><br><span class=\"line\">    zend_value        value; <span class=\"comment\">//value</span></span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">union</span> &#123;</span></span><br><span class=\"line\">        <span class=\"class\"><span class=\"keyword\">struct</span> &#123;</span></span><br><span class=\"line\">            ZEND_ENDIAN_LOHI_4( <span class=\"comment\">//4</span></span><br><span class=\"line\">                zend_uchar    type,         <span class=\"comment\">//</span></span><br><span class=\"line\">                zend_uchar    type_flags,  <span class=\"comment\">//</span></span><br><span class=\"line\">                zend_uchar    const_flags,  <span class=\"comment\">// </span></span><br><span class=\"line\">                zend_uchar    reserved)     <span class=\"comment\">//call infozend</span></span><br><span class=\"line\">        &#125; v;</span><br><span class=\"line\">        <span class=\"keyword\">uint32_t</span> type_info; <span class=\"comment\">//4type_info4</span></span><br><span class=\"line\">    &#125; u1;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">union</span> &#123;</span></span><br><span class=\"line\">        <span class=\"keyword\">uint32_t</span>     next;                 <span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"keyword\">uint32_t</span>     cache_slot;           <span class=\"comment\">/*  */</span></span><br><span class=\"line\">        <span class=\"keyword\">uint32_t</span>     lineno;               <span class=\"comment\">/* zend_ast_zvalAST */</span></span><br><span class=\"line\">        <span class=\"keyword\">uint32_t</span>     num_args;             <span class=\"comment\">/* EX(This)  */</span></span><br><span class=\"line\">        <span class=\"keyword\">uint32_t</span>     fe_pos;               <span class=\"comment\">/* foreach   +1  foreach */</span></span><br><span class=\"line\">        <span class=\"keyword\">uint32_t</span>     fe_iter_idx;          <span class=\"comment\">/* foreach   */</span></span><br><span class=\"line\">        <span class=\"keyword\">uint32_t</span>     access_flags;          <span class=\"comment\">/*  public protected private */</span></span><br><span class=\"line\">        <span class=\"keyword\">uint32_t</span>     property_guard;          <span class=\"comment\">/*   */</span></span><br><span class=\"line\">    &#125; u2;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"String-\"><a href=\"#String-\" class=\"headerlink\" title=\"String \"></a>String </h2><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> _<span class=\"title\">zend_string</span> &#123;</span></span><br><span class=\"line\">\tzend_refcounted_h gc;</span><br><span class=\"line\">\tzend_ulong        h;                <span class=\"comment\">/* hash */</span></span><br><span class=\"line\">\t<span class=\"keyword\">size_t</span>            len;  <span class=\"comment\">//  &#x27;\\0&#x27;</span></span><br><span class=\"line\">\t<span class=\"keyword\">char</span>              val[<span class=\"number\">1</span>];       <span class=\"comment\">// </span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"PHP\"><a href=\"#PHP\" class=\"headerlink\" title=\"PHP\"></a>PHP</h2><ol>\n<li><p>PHP-key-value</p>\n</li>\n<li><p>PHP</p>\n</li>\n</ol>\n<p>1PHP HashTable  key-value  HashTable 1</p>\n<ul>\n<li>phph HashTable</li>\n</ul>\n<p><code>key/value -&gt; hash1 -&gt; h -&gt; hash2 -&gt; slotN -&gt; bucket()</code></p>\n<p></p>\n<p><img src=\"/images/hash_table_h.jpeg\" alt=\"\"></p>\n<ol>\n<li><p>bucket h </p>\n</li>\n<li><p>hash hash1  hash2 hash1  key  hhash2  h  slot </p>\n</li>\n<li><p>bucket  key key</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">HashTable key hkeyhkey1key2</span><br><span class=\"line\">hkey1key2h HashTable</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2></li>\n</ol>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span> _<span class=\"title\">zend_array</span> <span class=\"title\">zend_array</span>;</span></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span> _<span class=\"title\">zend_array</span> <span class=\"title\">HashTable</span>;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//Bucket</span></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span> _<span class=\"title\">Bucket</span> &#123;</span></span><br><span class=\"line\">    zval              val; <span class=\"comment\">//valuezval</span></span><br><span class=\"line\">    zend_ulong        h;   <span class=\"comment\">//keytimes 33</span></span><br><span class=\"line\">    zend_string      *key; <span class=\"comment\">//key</span></span><br><span class=\"line\">&#125; Bucket;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//HashTable</span></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span> _<span class=\"title\">zend_array</span> <span class=\"title\">HashTable</span>;</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> _<span class=\"title\">zend_array</span> &#123;</span></span><br><span class=\"line\">    zend_refcounted_h gc;   <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">union</span> &#123;</span></span><br><span class=\"line\">        <span class=\"class\"><span class=\"keyword\">struct</span> &#123;</span></span><br><span class=\"line\">            ZEND_ENDIAN_LOHI_4(</span><br><span class=\"line\">                    zend_uchar    flags,    <span class=\"comment\">// </span></span><br><span class=\"line\">                    zend_uchar    nApplyCount,  <span class=\"comment\">// </span></span><br><span class=\"line\">                    zend_uchar    nIteratorsCount,  <span class=\"comment\">// </span></span><br><span class=\"line\">                    zend_uchar    reserve)</span><br><span class=\"line\">        &#125; v;</span><br><span class=\"line\">        <span class=\"keyword\">uint32_t</span> flags;</span><br><span class=\"line\">    &#125; u;</span><br><span class=\"line\">    <span class=\"keyword\">uint32_t</span>          nTableMask; <span class=\"comment\">//nTableSize(nTableMask = -nTableSize)</span></span><br><span class=\"line\">    Bucket           *arData;     <span class=\"comment\">//Bucket</span></span><br><span class=\"line\">    <span class=\"keyword\">uint32_t</span>          nNumUsed;   <span class=\"comment\">//Bucket</span></span><br><span class=\"line\">    <span class=\"keyword\">uint32_t</span>          nNumOfElements; <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"keyword\">uint32_t</span>          nTableSize;     <span class=\"comment\">//2n</span></span><br><span class=\"line\">    <span class=\"keyword\">uint32_t</span>          nInternalPointer; <span class=\"comment\">//   reset/key/current/next/prev</span></span><br><span class=\"line\">    zend_long         nNextFreeElement; <span class=\"comment\">//,:arr[] = 1;arr[&quot;a&quot;] = 2;arr[] = 3;  nNextFreeElement = 2;</span></span><br><span class=\"line\">    <span class=\"keyword\">dtor_func_t</span>       pDestructor;  <span class=\"comment\">// </span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>bucket</li>\n</ul>\n<ol>\n<li><p>val  HashTable  value  zvalzval IS_PTR zval.value.ptr</p>\n</li>\n<li><p>h  HashTable  h key  h</p>\n</li>\n<li><p>key  HashTable  key</p>\n</li>\n</ol>\n<ul>\n<li>bucket</li>\n</ul>\n<ol>\n<li><p> </p>\n</li>\n<li><p> bucket</p>\n</li>\n<li><p> bucket</p>\n</li>\n</ol>\n<p></p>\n<p><img src=\"https://github.com/pangudashu/php7-internal/raw/master/img/zend_hash_1.png\" alt=\"\"></p>\n<h2 id=\"-nTableMask-\"><a href=\"#-nTableMask-\" class=\"headerlink\" title=\" nTableMask \"></a> nTableMask </h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">php7bucketbucket</span><br><span class=\"line\">slotslotbucketbucketslotbucket</span><br><span class=\"line\"> -1 </span><br><span class=\"line\"></span><br><span class=\"line\"> HashTable.arData bucket</span><br><span class=\"line\"> arData[0...n-1]bucket((uint32_t*)(arData))[-1...-n]slot</span><br></pre></td></tr></table></figure>\n<ul>\n<li>[-1-n]hash2nIndex  slot </li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nIndex = h | ht-&gt;nTableMask;</span><br></pre></td></tr></table></figure>\n\n<p> nTableSize=8  nTableMask=-8 </p>\n<p>11111111 11111111 11111111 11111000   -8</p>\n<p>8 [-n, -1]</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">11111111</span> <span class=\"number\">11111111</span> <span class=\"number\">11111111</span> <span class=\"number\">11111000</span>   <span class=\"number\">-8</span></span><br><span class=\"line\"><span class=\"number\">11111111</span> <span class=\"number\">11111111</span> <span class=\"number\">11111111</span> <span class=\"number\">11111001</span>   <span class=\"number\">-7</span></span><br><span class=\"line\"><span class=\"number\">11111111</span> <span class=\"number\">11111111</span> <span class=\"number\">11111111</span> <span class=\"number\">11111010</span>   <span class=\"number\">-6</span></span><br><span class=\"line\"><span class=\"number\">11111111</span> <span class=\"number\">11111111</span> <span class=\"number\">11111111</span> <span class=\"number\">11111011</span>   <span class=\"number\">-5</span></span><br><span class=\"line\"><span class=\"number\">11111111</span> <span class=\"number\">11111111</span> <span class=\"number\">11111111</span> <span class=\"number\">11111100</span>   <span class=\"number\">-4</span></span><br><span class=\"line\"><span class=\"number\">11111111</span> <span class=\"number\">11111111</span> <span class=\"number\">11111111</span> <span class=\"number\">11111101</span>   <span class=\"number\">-3</span></span><br><span class=\"line\"><span class=\"number\">11111111</span> <span class=\"number\">11111111</span> <span class=\"number\">11111111</span> <span class=\"number\">11111110</span>   <span class=\"number\">-2</span></span><br><span class=\"line\"><span class=\"number\">11111111</span> <span class=\"number\">11111111</span> <span class=\"number\">11111111</span> <span class=\"number\">11111111</span>   <span class=\"number\">-1</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"packed-array--hash-array-\"><a href=\"#packed-array--hash-array-\" class=\"headerlink\" title=\"packed array  hash array \"></a>packed array  hash array </h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$a = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]; <span class=\"comment\">// packed array</span></span><br><span class=\"line\">$b = [<span class=\"string\">&#x27;a&#x27;</span> =&gt; <span class=\"string\">&#x27;a&#x27;</span>, <span class=\"string\">&#x27;b&#x27;</span> =&gt; <span class=\"string\">&#x27;b&#x27;</span>]; <span class=\"comment\">// hash array</span></span><br></pre></td></tr></table></figure>\n\n<ol>\n<li></li>\n</ol>\n<p>1</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">$memory_start = memory_get_usage();</span><br><span class=\"line\">$test = [];</span><br><span class=\"line\"><span class=\"keyword\">for</span> ($i = <span class=\"number\">0</span>; $i &lt;= <span class=\"number\">20000</span>; $i++) &#123;</span><br><span class=\"line\">    $test[$i] = <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> memory_get_usage() - $memory_start, <span class=\"string\">&quot;bytes\\n&quot;</span>; <span class=\"comment\">// 1052728bytes</span></span><br></pre></td></tr></table></figure>\n\n<p>2</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">$memory_start = memory_get_usage();</span><br><span class=\"line\">$test = [];</span><br><span class=\"line\"><span class=\"keyword\">for</span> ($i = <span class=\"number\">20000</span>; $i &gt;= <span class=\"number\">0</span>; $i--) &#123;</span><br><span class=\"line\">    $test[$i] = <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> memory_get_usage() - $memory_start, <span class=\"string\">&quot;bytes\\n&quot;</span>; <span class=\"comment\">// 1179704bytes</span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>packed array</li>\n</ol>\n<ul>\n<li><p>key</p>\n</li>\n<li><p>key</p>\n</li>\n<li><p>key-value bucketkey</p>\n</li>\n<li><p> key=NULL</p>\n</li>\n</ul>\n<p>bucketkey<br> (nTableSize-2) * sizeof(uint32_t) bucket</p>\n<h2 id=\"hash\"><a href=\"#hash\" class=\"headerlink\" title=\"hash\"></a>hash</h2><p>(php) slotbucket</p>\n<p>hash array  idx  bucket  zval.u2.next <br>value(idx)valuenextvalue</p>\n<p> 123buckethash</p>\n<ol>\n<li><p>1bucket nIndex=-3  nIndex=-3 1</p>\n</li>\n<li><p>2bucket nIndex=-31 nIndex=-3 22bucket<br>zval  u2.next=11bucketkey nIndex2bucket key<br> u2.next  11bucketkey</p>\n</li>\n<li><p>3bucket1 2   nIndex=-3 3 3bucketzval  u2.next=2</p>\n</li>\n</ol>\n<h2 id=\"-rehash-\"><a href=\"#-rehash-\" class=\"headerlink\" title=\" rehash \"></a> rehash </h2><p>key</p>\n<ol>\n<li><p>hash array  2^n  2^3 - 0x80000000</p>\n</li>\n<li><p></p>\n</li>\n<li><p>(nNumUsed &gt;= nTableSize)HashTable<br>2bucket</p>\n</li>\n<li><p></p>\n</li>\n</ol>\n<h2 id=\"zval-\"><a href=\"#zval-\" class=\"headerlink\" title=\"zval \"></a>zval </h2><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//zend_types.h</span></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span> _<span class=\"title\">zval_struct</span>     <span class=\"title\">zval</span>;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">union</span> _<span class=\"title\">zend_value</span> &#123;</span></span><br><span class=\"line\">    zend_long         lval;    <span class=\"comment\">//int</span></span><br><span class=\"line\">    <span class=\"keyword\">double</span>            dval;    <span class=\"comment\">//</span></span><br><span class=\"line\">    zend_refcounted  *counted;</span><br><span class=\"line\">    zend_string      *str;     <span class=\"comment\">//string</span></span><br><span class=\"line\">    zend_array       *arr;     <span class=\"comment\">//array</span></span><br><span class=\"line\">    zend_object      *obj;     <span class=\"comment\">//object</span></span><br><span class=\"line\">    zend_resource    *res;     <span class=\"comment\">//resource</span></span><br><span class=\"line\">    zend_reference   *ref;     <span class=\"comment\">//&amp;$var_name</span></span><br><span class=\"line\">    zend_ast_ref     *ast;     <span class=\"comment\">//value</span></span><br><span class=\"line\">    zval             *zv;       <span class=\"comment\">// zval </span></span><br><span class=\"line\">    <span class=\"keyword\">void</span>             *ptr;      <span class=\"comment\">// </span></span><br><span class=\"line\">    zend_class_entry *ce;       <span class=\"comment\">// class </span></span><br><span class=\"line\">    zend_function    *func;     <span class=\"comment\">// function </span></span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> &#123;</span></span><br><span class=\"line\">        <span class=\"keyword\">uint32_t</span> w1;</span><br><span class=\"line\">        <span class=\"keyword\">uint32_t</span> w2;</span><br><span class=\"line\">    &#125; ww;</span><br><span class=\"line\">&#125; zend_value;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> _<span class=\"title\">zval_struct</span> &#123;</span></span><br><span class=\"line\">    zend_value        value; <span class=\"comment\">//value</span></span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">union</span> &#123;</span></span><br><span class=\"line\">        <span class=\"class\"><span class=\"keyword\">struct</span> &#123;</span></span><br><span class=\"line\">            ZEND_ENDIAN_LOHI_4( <span class=\"comment\">//4</span></span><br><span class=\"line\">                zend_uchar    type,         <span class=\"comment\">//</span></span><br><span class=\"line\">                zend_uchar    type_flags,  <span class=\"comment\">//</span></span><br><span class=\"line\">                zend_uchar    const_flags,  <span class=\"comment\">// </span></span><br><span class=\"line\">                zend_uchar    reserved)     <span class=\"comment\">//call infozend</span></span><br><span class=\"line\">        &#125; v;</span><br><span class=\"line\">        <span class=\"keyword\">uint32_t</span> type_info; <span class=\"comment\">//4type_info4</span></span><br><span class=\"line\">    &#125; u1;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">union</span> &#123;</span></span><br><span class=\"line\">        <span class=\"keyword\">uint32_t</span>     next;                 <span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"keyword\">uint32_t</span>     cache_slot;           <span class=\"comment\">/*  */</span></span><br><span class=\"line\">        <span class=\"keyword\">uint32_t</span>     lineno;               <span class=\"comment\">/* zend_ast_zvalAST */</span></span><br><span class=\"line\">        <span class=\"keyword\">uint32_t</span>     num_args;             <span class=\"comment\">/* EX(This)  */</span></span><br><span class=\"line\">        <span class=\"keyword\">uint32_t</span>     fe_pos;               <span class=\"comment\">/* foreach   +1  foreach */</span></span><br><span class=\"line\">        <span class=\"keyword\">uint32_t</span>     fe_iter_idx;          <span class=\"comment\">/* foreach   */</span></span><br><span class=\"line\">        <span class=\"keyword\">uint32_t</span>     access_flags;          <span class=\"comment\">/*  public protected private */</span></span><br><span class=\"line\">        <span class=\"keyword\">uint32_t</span>     property_guard;          <span class=\"comment\">/*   */</span></span><br><span class=\"line\">    &#125; u2;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"String-\"><a href=\"#String-\" class=\"headerlink\" title=\"String \"></a>String </h2><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> _<span class=\"title\">zend_string</span> &#123;</span></span><br><span class=\"line\">\tzend_refcounted_h gc;</span><br><span class=\"line\">\tzend_ulong        h;                <span class=\"comment\">/* hash */</span></span><br><span class=\"line\">\t<span class=\"keyword\">size_t</span>            len;  <span class=\"comment\">//  &#x27;\\0&#x27;</span></span><br><span class=\"line\">\t<span class=\"keyword\">char</span>              val[<span class=\"number\">1</span>];       <span class=\"comment\">// </span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n"},{"url":"/2017/12/20/php-spl-datastructures.html","title":"PHP Spl Datastructures","date":"2017-12-19T22:53:12.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"[PHP](https://www.php.net/manual/zh/spl.datastructures.php)\n\n```\nPHP SPL \n, \n```\n\n## SplDoublyLinkedList\n\n\n\n```php\n<?php\n$dlist = new SplDoublyLinkedList();\n\n// \n$dlist->push('hiramariam');\n$dlist->push('maaz');\n$dlist->push('zafar');\n\n// \n$dlist->unshift(1);\n$dlist->unshift(2);\n$dlist->unshift(3);\n\n/* the list now contains\n3\n2\n1\nhiramariam\nmaaz\nzafar\n*/\n\necho $dlist->pop() . PHP_EOL; // zafar\necho $dlist->shift() . PHP_EOL; // 3\n\n$dlist->add(3, 2.24);\n\nfor ($dlist->rewind(); $dlist->valid(); $dlist->next()) {\n\n    echo $dlist->current() . PHP_EOL;\n}\n\n\n$list = new SplDoublyLinkedList();\n$list->push('a');\n$list->push('b');\n$list->push('c');\n\necho 'FIFO (First In First Out) :' . PHP_EOL;\n$list->setIteratorMode(SplDoublyLinkedList::IT_MODE_FIFO);\nfor ($list->rewind(); $list->valid(); $list->next()) {\n    echo $list->current() . PHP_EOL;\n}\necho \"LIFO (Last In First Out) :\" . PHP_EOL;\n$list->setIteratorMode(SplDoublyLinkedList::IT_MODE_LIFO);\nfor ($list->rewind(); $list->valid(); $list->next()) {\n    echo $list->current() . PHP_EOL;\n}\n\necho 'test While:' . PHP_EOL;\n$splDoubleLinkedList = new SplDoublyLinkedList();\n$splDoubleLinkedList->push('a');\n$splDoubleLinkedList->push('3');\n$splDoubleLinkedList->push('v');\n//First of all, we need rewind list\n$splDoubleLinkedList->rewind();\n//Use while, check if the list has valid node\nwhile ($splDoubleLinkedList->valid()) {\n    //Print current node's value\n    echo $splDoubleLinkedList->current() . PHP_EOL;\n    //Turn the cursor to next node\n    $splDoubleLinkedList->next();\n}\n```\n\n## SplFileObject\n\nf*\n\n```php\n<?php\ntry{\n    // iterate directly over the object\n    foreach( new SplFileObject(__DIR__.'/spl_file.log') as $line)\n    // and echo each line of the file\n    echo $line;\n}\ncatch (Exception $e)\n{\n    echo $e->getMessage();\n}\n\ntry{\n    $file = new SplFileObject(__DIR__.'/spl_file.log');\n\n    $file->seek(3);\n\n    echo $file->current();\n}\ncatch (Exception $e)\n{\n    echo $e->getMessage();\n}\n```\n\n## SplFixedArray\n\n\n\n```php\n<?php\n// Initialize the array with a fixed length\n$array = new SplFixedArray(5);\n\n$array[1] = 2;\n$array[4] = \"foo\";\n\nvar_dump($array[0]); // NULL\nvar_dump($array[1]); // int(2)\n\nvar_dump($array[\"4\"]); // string(3) \"foo\"\n\n// Increase the size of the array to 10\n$array->setSize(10);\n\n$array[9] = \"asdf\";\nvar_dump($array[9]);\n\n// Shrink the array to a size of 2\n$array->setSize(2);\n\n// The following lines throw a RuntimeException: Index invalid or out of range\ntry {\n    var_dump($array[\"non-numeric\"]);\n} catch (RuntimeException $re) {\n    echo \"RuntimeException: \" . $re->getMessage() . \"\\n\";\n}\n\ntry {\n    var_dump($array[-1]);\n} catch (RuntimeException $re) {\n    echo \"RuntimeException: \" . $re->getMessage() . \"\\n\";\n}\n\ntry {\n    var_dump($array[5]);\n} catch (RuntimeException $re) {\n    echo \"RuntimeException: \" . $re->getMessage() . \"\\n\";\n}\n```\n\n## SplHeap\n\n\n\n```php\n<?php\nclass JupilerLeague extends SplHeap\n{\n    /**\n     * We modify the abstract method compare so we can sort our\n     * rankings using the values of a given array\n     */\n    public function compare($array1, $array2)\n    {\n        $values1 = array_values($array1);\n        $values2 = array_values($array2);\n        if ($values1[0] === $values2[0]) {\n            return 0;\n        }\n        return $values1[0] < $values2[0] ? -1 : 1;\n    }\n}\n\n$heap = new JupilerLeague();\n$heap->insert(['AA Gent' => 15]);\n$heap->insert(['Anderlecht' => 20]);\n$heap->insert(['Cercle Brugge' => 11]);\n\n// For displaying the ranking we move up to the first node\n$heap->top();\n\n// Then we iterate through each node for displaying the result\nwhile ($heap->valid()) {\n    foreach ($heap->current() as $team => $score) {\n        echo $team . ': ' . $score . PHP_EOL;\n    }\n    $heap->next();\n}\n```\n\n## SplMaxHeap\n\n\n\n```php\nclass MySimpleHeap extends SplMaxHeap\n{\n\n}\n\n$obj = new MySimpleHeap();\n$obj->insert(4);\n$obj->insert(8);\n$obj->insert(1);\n$obj->insert(0);\n\nforeach ($obj as $number) {\n    echo $number . PHP_EOL;\n}\n```\n\n## MySimpleHeap\n\n\n\n```php\n<?php\nclass MySimpleHeap extends SplMinHeap\n{\n\n}\n\n$obj = new MySimpleHeap();\n$obj->insert(4);\n$obj->insert(8);\n$obj->insert(1);\n$obj->insert(0);\n\nforeach ($obj as $number) {\n    echo $number . PHP_EOL;\n}\n```\n\n## SplStack\n\n\n\n```php\n$q = new SplStack();\n\n$q[] = 1;\n$q[] = 2;\n$q[] = 3;\n$q->push(4);\n$q->add(4, 5);\n\n$q->rewind();\nwhile ($q->valid()) {\n    echo $q->current(), \"\\n\";\n    $q->next();\n}\n\nclass Stack\n{\n\n    private $splstack;\n\n    function __construct(\\SplStack $splstack)\n    {\n        $this->splstack = $splstack;\n    }\n\n    public function calculateSomme()\n    {\n\n        if ($this->splstack->count() > 1) {\n            $val1 = $this->splstack->pop();\n            $val2 = $this->splstack->pop();\n            $val = $val1 + $val2;\n            $this->splstack->push($val);\n            $this->calculateSomme();\n        }\n    }\n\n    /**\n     *\n     * @return integer\n     */\n    public function displaySomme()\n    {\n        $result = $this->splstack->pop();\n        return $result;\n    }\n\n}\n\n$splstack = new \\SplStack();\n\n$splstack->push(10);\n$splstack->push(10);\n$splstack->push(10);\n\n$stack = new Stack($splstack);\n$stack->calculateSomme();\necho $stack->displaySomme() . PHP_EOL; // 30\n\n$stack = new SplStack();\n$stack->push('a');\n$stack->push('b');\n$stack->push('c');\necho $stack->offsetGet(0);\n$stack->offsetSet(0, 'C'); # the last element has index zero\n\n$stack->rewind();\n\nwhile ($stack->valid()) {\n    echo $stack->current(), PHP_EOL;\n    $stack->next();\n}\n```\n\n## SplQueue\n\n\n\n```php\n<?php\n$queue = new SplQueue();\n$queue->enqueue('A');\n$queue->enqueue('B');\n$queue->enqueue('C');\n\n$queue->rewind();\nwhile($queue->valid()){\n    echo $queue->current(),\"\\n\";\n    $queue->next();\n}\necho $queue->dequeue(); //remove first one\n```\n\n## SplPriorityQueue\n\n\n\n```php\n<?php\nclass PQtest extends SplPriorityQueue\n{\n    public function compare($priority1, $priority2)\n    {\n        if ($priority1 === $priority2) {\n            return 0;\n        }\n        return $priority1 < $priority2 ? -1 : 1;\n    }\n}\n\n$objPQ = new PQtest();\n\n$objPQ->insert('A', 3);\n$objPQ->insert('B', 6);\n$objPQ->insert('C', 1);\n$objPQ->insert('D', 2);\n\necho \"COUNT->\" . $objPQ->count() . PHP_EOL;\n\n//mode of extraction\n$objPQ->setExtractFlags(PQtest::EXTR_BOTH);\n\n//Go to TOP\n$objPQ->top();\n\nwhile ($objPQ->valid()) {\n    $value = $objPQ->current();\n    echo 'data->' . $value['data'] . '==priority->' . $value['priority'] . PHP_EOL;\n    $objPQ->next();\n}\n```\n","source":"_posts/php/spl-datastructures.md","raw":"---\nurl: /2017/12/20/php-spl-datastructures.html\ntitle: \"PHP Spl Datastructures\"\ndate: 2017-12-20T14:53:12+08:00\ndraft: false\ntags: [\"PHP\"]\ntags_weight: 100\ncategories: [\"PHP\"]\ncategoryes_weight: 100\n---\n[PHP](https://www.php.net/manual/zh/spl.datastructures.php)\n\n```\nPHP SPL \n, \n```\n\n## SplDoublyLinkedList\n\n\n\n```php\n<?php\n$dlist = new SplDoublyLinkedList();\n\n// \n$dlist->push('hiramariam');\n$dlist->push('maaz');\n$dlist->push('zafar');\n\n// \n$dlist->unshift(1);\n$dlist->unshift(2);\n$dlist->unshift(3);\n\n/* the list now contains\n3\n2\n1\nhiramariam\nmaaz\nzafar\n*/\n\necho $dlist->pop() . PHP_EOL; // zafar\necho $dlist->shift() . PHP_EOL; // 3\n\n$dlist->add(3, 2.24);\n\nfor ($dlist->rewind(); $dlist->valid(); $dlist->next()) {\n\n    echo $dlist->current() . PHP_EOL;\n}\n\n\n$list = new SplDoublyLinkedList();\n$list->push('a');\n$list->push('b');\n$list->push('c');\n\necho 'FIFO (First In First Out) :' . PHP_EOL;\n$list->setIteratorMode(SplDoublyLinkedList::IT_MODE_FIFO);\nfor ($list->rewind(); $list->valid(); $list->next()) {\n    echo $list->current() . PHP_EOL;\n}\necho \"LIFO (Last In First Out) :\" . PHP_EOL;\n$list->setIteratorMode(SplDoublyLinkedList::IT_MODE_LIFO);\nfor ($list->rewind(); $list->valid(); $list->next()) {\n    echo $list->current() . PHP_EOL;\n}\n\necho 'test While:' . PHP_EOL;\n$splDoubleLinkedList = new SplDoublyLinkedList();\n$splDoubleLinkedList->push('a');\n$splDoubleLinkedList->push('3');\n$splDoubleLinkedList->push('v');\n//First of all, we need rewind list\n$splDoubleLinkedList->rewind();\n//Use while, check if the list has valid node\nwhile ($splDoubleLinkedList->valid()) {\n    //Print current node's value\n    echo $splDoubleLinkedList->current() . PHP_EOL;\n    //Turn the cursor to next node\n    $splDoubleLinkedList->next();\n}\n```\n\n## SplFileObject\n\nf*\n\n```php\n<?php\ntry{\n    // iterate directly over the object\n    foreach( new SplFileObject(__DIR__.'/spl_file.log') as $line)\n    // and echo each line of the file\n    echo $line;\n}\ncatch (Exception $e)\n{\n    echo $e->getMessage();\n}\n\ntry{\n    $file = new SplFileObject(__DIR__.'/spl_file.log');\n\n    $file->seek(3);\n\n    echo $file->current();\n}\ncatch (Exception $e)\n{\n    echo $e->getMessage();\n}\n```\n\n## SplFixedArray\n\n\n\n```php\n<?php\n// Initialize the array with a fixed length\n$array = new SplFixedArray(5);\n\n$array[1] = 2;\n$array[4] = \"foo\";\n\nvar_dump($array[0]); // NULL\nvar_dump($array[1]); // int(2)\n\nvar_dump($array[\"4\"]); // string(3) \"foo\"\n\n// Increase the size of the array to 10\n$array->setSize(10);\n\n$array[9] = \"asdf\";\nvar_dump($array[9]);\n\n// Shrink the array to a size of 2\n$array->setSize(2);\n\n// The following lines throw a RuntimeException: Index invalid or out of range\ntry {\n    var_dump($array[\"non-numeric\"]);\n} catch (RuntimeException $re) {\n    echo \"RuntimeException: \" . $re->getMessage() . \"\\n\";\n}\n\ntry {\n    var_dump($array[-1]);\n} catch (RuntimeException $re) {\n    echo \"RuntimeException: \" . $re->getMessage() . \"\\n\";\n}\n\ntry {\n    var_dump($array[5]);\n} catch (RuntimeException $re) {\n    echo \"RuntimeException: \" . $re->getMessage() . \"\\n\";\n}\n```\n\n## SplHeap\n\n\n\n```php\n<?php\nclass JupilerLeague extends SplHeap\n{\n    /**\n     * We modify the abstract method compare so we can sort our\n     * rankings using the values of a given array\n     */\n    public function compare($array1, $array2)\n    {\n        $values1 = array_values($array1);\n        $values2 = array_values($array2);\n        if ($values1[0] === $values2[0]) {\n            return 0;\n        }\n        return $values1[0] < $values2[0] ? -1 : 1;\n    }\n}\n\n$heap = new JupilerLeague();\n$heap->insert(['AA Gent' => 15]);\n$heap->insert(['Anderlecht' => 20]);\n$heap->insert(['Cercle Brugge' => 11]);\n\n// For displaying the ranking we move up to the first node\n$heap->top();\n\n// Then we iterate through each node for displaying the result\nwhile ($heap->valid()) {\n    foreach ($heap->current() as $team => $score) {\n        echo $team . ': ' . $score . PHP_EOL;\n    }\n    $heap->next();\n}\n```\n\n## SplMaxHeap\n\n\n\n```php\nclass MySimpleHeap extends SplMaxHeap\n{\n\n}\n\n$obj = new MySimpleHeap();\n$obj->insert(4);\n$obj->insert(8);\n$obj->insert(1);\n$obj->insert(0);\n\nforeach ($obj as $number) {\n    echo $number . PHP_EOL;\n}\n```\n\n## MySimpleHeap\n\n\n\n```php\n<?php\nclass MySimpleHeap extends SplMinHeap\n{\n\n}\n\n$obj = new MySimpleHeap();\n$obj->insert(4);\n$obj->insert(8);\n$obj->insert(1);\n$obj->insert(0);\n\nforeach ($obj as $number) {\n    echo $number . PHP_EOL;\n}\n```\n\n## SplStack\n\n\n\n```php\n$q = new SplStack();\n\n$q[] = 1;\n$q[] = 2;\n$q[] = 3;\n$q->push(4);\n$q->add(4, 5);\n\n$q->rewind();\nwhile ($q->valid()) {\n    echo $q->current(), \"\\n\";\n    $q->next();\n}\n\nclass Stack\n{\n\n    private $splstack;\n\n    function __construct(\\SplStack $splstack)\n    {\n        $this->splstack = $splstack;\n    }\n\n    public function calculateSomme()\n    {\n\n        if ($this->splstack->count() > 1) {\n            $val1 = $this->splstack->pop();\n            $val2 = $this->splstack->pop();\n            $val = $val1 + $val2;\n            $this->splstack->push($val);\n            $this->calculateSomme();\n        }\n    }\n\n    /**\n     *\n     * @return integer\n     */\n    public function displaySomme()\n    {\n        $result = $this->splstack->pop();\n        return $result;\n    }\n\n}\n\n$splstack = new \\SplStack();\n\n$splstack->push(10);\n$splstack->push(10);\n$splstack->push(10);\n\n$stack = new Stack($splstack);\n$stack->calculateSomme();\necho $stack->displaySomme() . PHP_EOL; // 30\n\n$stack = new SplStack();\n$stack->push('a');\n$stack->push('b');\n$stack->push('c');\necho $stack->offsetGet(0);\n$stack->offsetSet(0, 'C'); # the last element has index zero\n\n$stack->rewind();\n\nwhile ($stack->valid()) {\n    echo $stack->current(), PHP_EOL;\n    $stack->next();\n}\n```\n\n## SplQueue\n\n\n\n```php\n<?php\n$queue = new SplQueue();\n$queue->enqueue('A');\n$queue->enqueue('B');\n$queue->enqueue('C');\n\n$queue->rewind();\nwhile($queue->valid()){\n    echo $queue->current(),\"\\n\";\n    $queue->next();\n}\necho $queue->dequeue(); //remove first one\n```\n\n## SplPriorityQueue\n\n\n\n```php\n<?php\nclass PQtest extends SplPriorityQueue\n{\n    public function compare($priority1, $priority2)\n    {\n        if ($priority1 === $priority2) {\n            return 0;\n        }\n        return $priority1 < $priority2 ? -1 : 1;\n    }\n}\n\n$objPQ = new PQtest();\n\n$objPQ->insert('A', 3);\n$objPQ->insert('B', 6);\n$objPQ->insert('C', 1);\n$objPQ->insert('D', 2);\n\necho \"COUNT->\" . $objPQ->count() . PHP_EOL;\n\n//mode of extraction\n$objPQ->setExtractFlags(PQtest::EXTR_BOTH);\n\n//Go to TOP\n$objPQ->top();\n\nwhile ($objPQ->valid()) {\n    $value = $objPQ->current();\n    echo 'data->' . $value['data'] . '==priority->' . $value['priority'] . PHP_EOL;\n    $objPQ->next();\n}\n```\n","slug":"php/spl-datastructures","published":1,"updated":"2020-03-26T12:33:22.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf3g002gmv05eiqlhv7u","content":"<p><a href=\"https://www.php.net/manual/zh/spl.datastructures.php\">PHP</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PHP SPL </span><br><span class=\"line\">, </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"SplDoublyLinkedList\"><a href=\"#SplDoublyLinkedList\" class=\"headerlink\" title=\"SplDoublyLinkedList\"></a>SplDoublyLinkedList</h2><p></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">$dlist = <span class=\"keyword\">new</span> <span class=\"built_in\">SplDoublyLinkedList</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$dlist-&gt;push(<span class=\"string\">&#x27;hiramariam&#x27;</span>);</span><br><span class=\"line\">$dlist-&gt;push(<span class=\"string\">&#x27;maaz&#x27;</span>);</span><br><span class=\"line\">$dlist-&gt;push(<span class=\"string\">&#x27;zafar&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$dlist-&gt;unshift(<span class=\"number\">1</span>);</span><br><span class=\"line\">$dlist-&gt;unshift(<span class=\"number\">2</span>);</span><br><span class=\"line\">$dlist-&gt;unshift(<span class=\"number\">3</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* the list now contains</span></span><br><span class=\"line\"><span class=\"comment\">3</span></span><br><span class=\"line\"><span class=\"comment\">2</span></span><br><span class=\"line\"><span class=\"comment\">1</span></span><br><span class=\"line\"><span class=\"comment\">hiramariam</span></span><br><span class=\"line\"><span class=\"comment\">maaz</span></span><br><span class=\"line\"><span class=\"comment\">zafar</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> $dlist-&gt;pop() . PHP_EOL; <span class=\"comment\">// zafar</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> $dlist-&gt;shift() . PHP_EOL; <span class=\"comment\">// 3</span></span><br><span class=\"line\"></span><br><span class=\"line\">$dlist-&gt;add(<span class=\"number\">3</span>, <span class=\"number\">2.24</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> ($dlist-&gt;rewind(); $dlist-&gt;valid(); $dlist-&gt;next()) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $dlist-&gt;current() . PHP_EOL;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">$list = <span class=\"keyword\">new</span> <span class=\"built_in\">SplDoublyLinkedList</span>();</span><br><span class=\"line\">$list-&gt;push(<span class=\"string\">&#x27;a&#x27;</span>);</span><br><span class=\"line\">$list-&gt;push(<span class=\"string\">&#x27;b&#x27;</span>);</span><br><span class=\"line\">$list-&gt;push(<span class=\"string\">&#x27;c&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">&#x27;FIFO (First In First Out) :&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">$list-&gt;setIteratorMode(<span class=\"built_in\">SplDoublyLinkedList</span>::IT_MODE_FIFO);</span><br><span class=\"line\"><span class=\"keyword\">for</span> ($list-&gt;rewind(); $list-&gt;valid(); $list-&gt;next()) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $list-&gt;current() . PHP_EOL;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">&quot;LIFO (Last In First Out) :&quot;</span> . PHP_EOL;</span><br><span class=\"line\">$list-&gt;setIteratorMode(<span class=\"built_in\">SplDoublyLinkedList</span>::IT_MODE_LIFO);</span><br><span class=\"line\"><span class=\"keyword\">for</span> ($list-&gt;rewind(); $list-&gt;valid(); $list-&gt;next()) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $list-&gt;current() . PHP_EOL;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">&#x27;test While:&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">$splDoubleLinkedList = <span class=\"keyword\">new</span> <span class=\"built_in\">SplDoublyLinkedList</span>();</span><br><span class=\"line\">$splDoubleLinkedList-&gt;push(<span class=\"string\">&#x27;a&#x27;</span>);</span><br><span class=\"line\">$splDoubleLinkedList-&gt;push(<span class=\"string\">&#x27;3&#x27;</span>);</span><br><span class=\"line\">$splDoubleLinkedList-&gt;push(<span class=\"string\">&#x27;v&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">//First of all, we need rewind list</span></span><br><span class=\"line\">$splDoubleLinkedList-&gt;rewind();</span><br><span class=\"line\"><span class=\"comment\">//Use while, check if the list has valid node</span></span><br><span class=\"line\"><span class=\"keyword\">while</span> ($splDoubleLinkedList-&gt;valid()) &#123;</span><br><span class=\"line\">    <span class=\"comment\">//Print current node&#x27;s value</span></span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $splDoubleLinkedList-&gt;current() . PHP_EOL;</span><br><span class=\"line\">    <span class=\"comment\">//Turn the cursor to next node</span></span><br><span class=\"line\">    $splDoubleLinkedList-&gt;next();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"SplFileObject\"><a href=\"#SplFileObject\" class=\"headerlink\" title=\"SplFileObject\"></a>SplFileObject</h2><p>f*</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"keyword\">try</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// iterate directly over the object</span></span><br><span class=\"line\">    <span class=\"keyword\">foreach</span>( <span class=\"keyword\">new</span> <span class=\"built_in\">SplFileObject</span>(<span class=\"keyword\">__DIR__</span>.<span class=\"string\">&#x27;/spl_file.log&#x27;</span>) <span class=\"keyword\">as</span> $line)</span><br><span class=\"line\">    <span class=\"comment\">// and echo each line of the file</span></span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $line;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">catch</span> (<span class=\"built_in\">Exception</span> $e)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $e-&gt;getMessage();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">try</span>&#123;</span><br><span class=\"line\">    $file = <span class=\"keyword\">new</span> <span class=\"built_in\">SplFileObject</span>(<span class=\"keyword\">__DIR__</span>.<span class=\"string\">&#x27;/spl_file.log&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    $file-&gt;seek(<span class=\"number\">3</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $file-&gt;current();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">catch</span> (<span class=\"built_in\">Exception</span> $e)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $e-&gt;getMessage();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"SplFixedArray\"><a href=\"#SplFixedArray\" class=\"headerlink\" title=\"SplFixedArray\"></a>SplFixedArray</h2><p></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">// Initialize the array with a fixed length</span></span><br><span class=\"line\">$array = <span class=\"keyword\">new</span> <span class=\"built_in\">SplFixedArray</span>(<span class=\"number\">5</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">$array[<span class=\"number\">1</span>] = <span class=\"number\">2</span>;</span><br><span class=\"line\">$array[<span class=\"number\">4</span>] = <span class=\"string\">&quot;foo&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">var_dump($array[<span class=\"number\">0</span>]); <span class=\"comment\">// NULL</span></span><br><span class=\"line\">var_dump($array[<span class=\"number\">1</span>]); <span class=\"comment\">// int(2)</span></span><br><span class=\"line\"></span><br><span class=\"line\">var_dump($array[<span class=\"string\">&quot;4&quot;</span>]); <span class=\"comment\">// string(3) &quot;foo&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Increase the size of the array to 10</span></span><br><span class=\"line\">$array-&gt;setSize(<span class=\"number\">10</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">$array[<span class=\"number\">9</span>] = <span class=\"string\">&quot;asdf&quot;</span>;</span><br><span class=\"line\">var_dump($array[<span class=\"number\">9</span>]);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Shrink the array to a size of 2</span></span><br><span class=\"line\">$array-&gt;setSize(<span class=\"number\">2</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// The following lines throw a RuntimeException: Index invalid or out of range</span></span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    var_dump($array[<span class=\"string\">&quot;non-numeric&quot;</span>]);</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (<span class=\"built_in\">RuntimeException</span> $re) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">&quot;RuntimeException: &quot;</span> . $re-&gt;getMessage() . <span class=\"string\">&quot;\\n&quot;</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    var_dump($array[<span class=\"number\">-1</span>]);</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (<span class=\"built_in\">RuntimeException</span> $re) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">&quot;RuntimeException: &quot;</span> . $re-&gt;getMessage() . <span class=\"string\">&quot;\\n&quot;</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    var_dump($array[<span class=\"number\">5</span>]);</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (<span class=\"built_in\">RuntimeException</span> $re) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">&quot;RuntimeException: &quot;</span> . $re-&gt;getMessage() . <span class=\"string\">&quot;\\n&quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"SplHeap\"><a href=\"#SplHeap\" class=\"headerlink\" title=\"SplHeap\"></a>SplHeap</h2><p></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">JupilerLeague</span> <span class=\"keyword\">extends</span> <span class=\"title\">SplHeap</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * We modify the abstract method compare so we can sort our</span></span><br><span class=\"line\"><span class=\"comment\">     * rankings using the values of a given array</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">compare</span>(<span class=\"params\">$array1, $array2</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        $values1 = array_values($array1);</span><br><span class=\"line\">        $values2 = array_values($array2);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($values1[<span class=\"number\">0</span>] === $values2[<span class=\"number\">0</span>]) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> $values1[<span class=\"number\">0</span>] &lt; $values2[<span class=\"number\">0</span>] ? <span class=\"number\">-1</span> : <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$heap = <span class=\"keyword\">new</span> JupilerLeague();</span><br><span class=\"line\">$heap-&gt;insert([<span class=\"string\">&#x27;AA Gent&#x27;</span> =&gt; <span class=\"number\">15</span>]);</span><br><span class=\"line\">$heap-&gt;insert([<span class=\"string\">&#x27;Anderlecht&#x27;</span> =&gt; <span class=\"number\">20</span>]);</span><br><span class=\"line\">$heap-&gt;insert([<span class=\"string\">&#x27;Cercle Brugge&#x27;</span> =&gt; <span class=\"number\">11</span>]);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// For displaying the ranking we move up to the first node</span></span><br><span class=\"line\">$heap-&gt;top();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Then we iterate through each node for displaying the result</span></span><br><span class=\"line\"><span class=\"keyword\">while</span> ($heap-&gt;valid()) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">foreach</span> ($heap-&gt;current() <span class=\"keyword\">as</span> $team =&gt; $score) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> $team . <span class=\"string\">&#x27;: &#x27;</span> . $score . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    $heap-&gt;next();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"SplMaxHeap\"><a href=\"#SplMaxHeap\" class=\"headerlink\" title=\"SplMaxHeap\"></a>SplMaxHeap</h2><p></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MySimpleHeap</span> <span class=\"keyword\">extends</span> <span class=\"title\">SplMaxHeap</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$obj = <span class=\"keyword\">new</span> MySimpleHeap();</span><br><span class=\"line\">$obj-&gt;insert(<span class=\"number\">4</span>);</span><br><span class=\"line\">$obj-&gt;insert(<span class=\"number\">8</span>);</span><br><span class=\"line\">$obj-&gt;insert(<span class=\"number\">1</span>);</span><br><span class=\"line\">$obj-&gt;insert(<span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">foreach</span> ($obj <span class=\"keyword\">as</span> $number) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $number . PHP_EOL;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"MySimpleHeap\"><a href=\"#MySimpleHeap\" class=\"headerlink\" title=\"MySimpleHeap\"></a>MySimpleHeap</h2><p></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MySimpleHeap</span> <span class=\"keyword\">extends</span> <span class=\"title\">SplMinHeap</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$obj = <span class=\"keyword\">new</span> MySimpleHeap();</span><br><span class=\"line\">$obj-&gt;insert(<span class=\"number\">4</span>);</span><br><span class=\"line\">$obj-&gt;insert(<span class=\"number\">8</span>);</span><br><span class=\"line\">$obj-&gt;insert(<span class=\"number\">1</span>);</span><br><span class=\"line\">$obj-&gt;insert(<span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">foreach</span> ($obj <span class=\"keyword\">as</span> $number) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $number . PHP_EOL;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"SplStack\"><a href=\"#SplStack\" class=\"headerlink\" title=\"SplStack\"></a>SplStack</h2><p></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$q = <span class=\"keyword\">new</span> <span class=\"built_in\">SplStack</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">$q[] = <span class=\"number\">1</span>;</span><br><span class=\"line\">$q[] = <span class=\"number\">2</span>;</span><br><span class=\"line\">$q[] = <span class=\"number\">3</span>;</span><br><span class=\"line\">$q-&gt;push(<span class=\"number\">4</span>);</span><br><span class=\"line\">$q-&gt;add(<span class=\"number\">4</span>, <span class=\"number\">5</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">$q-&gt;rewind();</span><br><span class=\"line\"><span class=\"keyword\">while</span> ($q-&gt;valid()) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $q-&gt;current(), <span class=\"string\">&quot;\\n&quot;</span>;</span><br><span class=\"line\">    $q-&gt;next();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Stack</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $splstack;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">\\<span class=\"built_in\">SplStack</span> $splstack</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;splstack = $splstack;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">calculateSomme</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">$this</span>-&gt;splstack-&gt;count() &gt; <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">            $val1 = <span class=\"keyword\">$this</span>-&gt;splstack-&gt;pop();</span><br><span class=\"line\">            $val2 = <span class=\"keyword\">$this</span>-&gt;splstack-&gt;pop();</span><br><span class=\"line\">            $val = $val1 + $val2;</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;splstack-&gt;push($val);</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;calculateSomme();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> integer</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">displaySomme</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        $result = <span class=\"keyword\">$this</span>-&gt;splstack-&gt;pop();</span><br><span class=\"line\">        <span class=\"keyword\">return</span> $result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$splstack = <span class=\"keyword\">new</span> \\<span class=\"built_in\">SplStack</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">$splstack-&gt;push(<span class=\"number\">10</span>);</span><br><span class=\"line\">$splstack-&gt;push(<span class=\"number\">10</span>);</span><br><span class=\"line\">$splstack-&gt;push(<span class=\"number\">10</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">$stack = <span class=\"keyword\">new</span> Stack($splstack);</span><br><span class=\"line\">$stack-&gt;calculateSomme();</span><br><span class=\"line\"><span class=\"keyword\">echo</span> $stack-&gt;displaySomme() . PHP_EOL; <span class=\"comment\">// 30</span></span><br><span class=\"line\"></span><br><span class=\"line\">$stack = <span class=\"keyword\">new</span> <span class=\"built_in\">SplStack</span>();</span><br><span class=\"line\">$stack-&gt;push(<span class=\"string\">&#x27;a&#x27;</span>);</span><br><span class=\"line\">$stack-&gt;push(<span class=\"string\">&#x27;b&#x27;</span>);</span><br><span class=\"line\">$stack-&gt;push(<span class=\"string\">&#x27;c&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> $stack-&gt;offsetGet(<span class=\"number\">0</span>);</span><br><span class=\"line\">$stack-&gt;offsetSet(<span class=\"number\">0</span>, <span class=\"string\">&#x27;C&#x27;</span>); <span class=\"comment\"># the last element has index zero</span></span><br><span class=\"line\"></span><br><span class=\"line\">$stack-&gt;rewind();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">while</span> ($stack-&gt;valid()) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $stack-&gt;current(), PHP_EOL;</span><br><span class=\"line\">    $stack-&gt;next();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"SplQueue\"><a href=\"#SplQueue\" class=\"headerlink\" title=\"SplQueue\"></a>SplQueue</h2><p></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">$queue = <span class=\"keyword\">new</span> <span class=\"built_in\">SplQueue</span>();</span><br><span class=\"line\">$queue-&gt;enqueue(<span class=\"string\">&#x27;A&#x27;</span>);</span><br><span class=\"line\">$queue-&gt;enqueue(<span class=\"string\">&#x27;B&#x27;</span>);</span><br><span class=\"line\">$queue-&gt;enqueue(<span class=\"string\">&#x27;C&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">$queue-&gt;rewind();</span><br><span class=\"line\"><span class=\"keyword\">while</span>($queue-&gt;valid())&#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $queue-&gt;current(),<span class=\"string\">&quot;\\n&quot;</span>;</span><br><span class=\"line\">    $queue-&gt;next();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">echo</span> $queue-&gt;dequeue(); <span class=\"comment\">//remove first one</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"SplPriorityQueue\"><a href=\"#SplPriorityQueue\" class=\"headerlink\" title=\"SplPriorityQueue\"></a>SplPriorityQueue</h2><p></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PQtest</span> <span class=\"keyword\">extends</span> <span class=\"title\">SplPriorityQueue</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">compare</span>(<span class=\"params\">$priority1, $priority2</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($priority1 === $priority2) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> $priority1 &lt; $priority2 ? <span class=\"number\">-1</span> : <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$objPQ = <span class=\"keyword\">new</span> PQtest();</span><br><span class=\"line\"></span><br><span class=\"line\">$objPQ-&gt;insert(<span class=\"string\">&#x27;A&#x27;</span>, <span class=\"number\">3</span>);</span><br><span class=\"line\">$objPQ-&gt;insert(<span class=\"string\">&#x27;B&#x27;</span>, <span class=\"number\">6</span>);</span><br><span class=\"line\">$objPQ-&gt;insert(<span class=\"string\">&#x27;C&#x27;</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\">$objPQ-&gt;insert(<span class=\"string\">&#x27;D&#x27;</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">&quot;COUNT-&gt;&quot;</span> . $objPQ-&gt;count() . PHP_EOL;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//mode of extraction</span></span><br><span class=\"line\">$objPQ-&gt;setExtractFlags(PQtest::EXTR_BOTH);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//Go to TOP</span></span><br><span class=\"line\">$objPQ-&gt;top();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">while</span> ($objPQ-&gt;valid()) &#123;</span><br><span class=\"line\">    $value = $objPQ-&gt;current();</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;data-&gt;&#x27;</span> . $value[<span class=\"string\">&#x27;data&#x27;</span>] . <span class=\"string\">&#x27;==priority-&gt;&#x27;</span> . $value[<span class=\"string\">&#x27;priority&#x27;</span>] . PHP_EOL;</span><br><span class=\"line\">    $objPQ-&gt;next();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://www.php.net/manual/zh/spl.datastructures.php\">PHP</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PHP SPL </span><br><span class=\"line\">, </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"SplDoublyLinkedList\"><a href=\"#SplDoublyLinkedList\" class=\"headerlink\" title=\"SplDoublyLinkedList\"></a>SplDoublyLinkedList</h2><p></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">$dlist = <span class=\"keyword\">new</span> <span class=\"built_in\">SplDoublyLinkedList</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$dlist-&gt;push(<span class=\"string\">&#x27;hiramariam&#x27;</span>);</span><br><span class=\"line\">$dlist-&gt;push(<span class=\"string\">&#x27;maaz&#x27;</span>);</span><br><span class=\"line\">$dlist-&gt;push(<span class=\"string\">&#x27;zafar&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$dlist-&gt;unshift(<span class=\"number\">1</span>);</span><br><span class=\"line\">$dlist-&gt;unshift(<span class=\"number\">2</span>);</span><br><span class=\"line\">$dlist-&gt;unshift(<span class=\"number\">3</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* the list now contains</span></span><br><span class=\"line\"><span class=\"comment\">3</span></span><br><span class=\"line\"><span class=\"comment\">2</span></span><br><span class=\"line\"><span class=\"comment\">1</span></span><br><span class=\"line\"><span class=\"comment\">hiramariam</span></span><br><span class=\"line\"><span class=\"comment\">maaz</span></span><br><span class=\"line\"><span class=\"comment\">zafar</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> $dlist-&gt;pop() . PHP_EOL; <span class=\"comment\">// zafar</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> $dlist-&gt;shift() . PHP_EOL; <span class=\"comment\">// 3</span></span><br><span class=\"line\"></span><br><span class=\"line\">$dlist-&gt;add(<span class=\"number\">3</span>, <span class=\"number\">2.24</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> ($dlist-&gt;rewind(); $dlist-&gt;valid(); $dlist-&gt;next()) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $dlist-&gt;current() . PHP_EOL;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">$list = <span class=\"keyword\">new</span> <span class=\"built_in\">SplDoublyLinkedList</span>();</span><br><span class=\"line\">$list-&gt;push(<span class=\"string\">&#x27;a&#x27;</span>);</span><br><span class=\"line\">$list-&gt;push(<span class=\"string\">&#x27;b&#x27;</span>);</span><br><span class=\"line\">$list-&gt;push(<span class=\"string\">&#x27;c&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">&#x27;FIFO (First In First Out) :&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">$list-&gt;setIteratorMode(<span class=\"built_in\">SplDoublyLinkedList</span>::IT_MODE_FIFO);</span><br><span class=\"line\"><span class=\"keyword\">for</span> ($list-&gt;rewind(); $list-&gt;valid(); $list-&gt;next()) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $list-&gt;current() . PHP_EOL;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">&quot;LIFO (Last In First Out) :&quot;</span> . PHP_EOL;</span><br><span class=\"line\">$list-&gt;setIteratorMode(<span class=\"built_in\">SplDoublyLinkedList</span>::IT_MODE_LIFO);</span><br><span class=\"line\"><span class=\"keyword\">for</span> ($list-&gt;rewind(); $list-&gt;valid(); $list-&gt;next()) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $list-&gt;current() . PHP_EOL;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">&#x27;test While:&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">$splDoubleLinkedList = <span class=\"keyword\">new</span> <span class=\"built_in\">SplDoublyLinkedList</span>();</span><br><span class=\"line\">$splDoubleLinkedList-&gt;push(<span class=\"string\">&#x27;a&#x27;</span>);</span><br><span class=\"line\">$splDoubleLinkedList-&gt;push(<span class=\"string\">&#x27;3&#x27;</span>);</span><br><span class=\"line\">$splDoubleLinkedList-&gt;push(<span class=\"string\">&#x27;v&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">//First of all, we need rewind list</span></span><br><span class=\"line\">$splDoubleLinkedList-&gt;rewind();</span><br><span class=\"line\"><span class=\"comment\">//Use while, check if the list has valid node</span></span><br><span class=\"line\"><span class=\"keyword\">while</span> ($splDoubleLinkedList-&gt;valid()) &#123;</span><br><span class=\"line\">    <span class=\"comment\">//Print current node&#x27;s value</span></span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $splDoubleLinkedList-&gt;current() . PHP_EOL;</span><br><span class=\"line\">    <span class=\"comment\">//Turn the cursor to next node</span></span><br><span class=\"line\">    $splDoubleLinkedList-&gt;next();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"SplFileObject\"><a href=\"#SplFileObject\" class=\"headerlink\" title=\"SplFileObject\"></a>SplFileObject</h2><p>f*</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"keyword\">try</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// iterate directly over the object</span></span><br><span class=\"line\">    <span class=\"keyword\">foreach</span>( <span class=\"keyword\">new</span> <span class=\"built_in\">SplFileObject</span>(<span class=\"keyword\">__DIR__</span>.<span class=\"string\">&#x27;/spl_file.log&#x27;</span>) <span class=\"keyword\">as</span> $line)</span><br><span class=\"line\">    <span class=\"comment\">// and echo each line of the file</span></span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $line;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">catch</span> (<span class=\"built_in\">Exception</span> $e)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $e-&gt;getMessage();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">try</span>&#123;</span><br><span class=\"line\">    $file = <span class=\"keyword\">new</span> <span class=\"built_in\">SplFileObject</span>(<span class=\"keyword\">__DIR__</span>.<span class=\"string\">&#x27;/spl_file.log&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    $file-&gt;seek(<span class=\"number\">3</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $file-&gt;current();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">catch</span> (<span class=\"built_in\">Exception</span> $e)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $e-&gt;getMessage();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"SplFixedArray\"><a href=\"#SplFixedArray\" class=\"headerlink\" title=\"SplFixedArray\"></a>SplFixedArray</h2><p></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">// Initialize the array with a fixed length</span></span><br><span class=\"line\">$array = <span class=\"keyword\">new</span> <span class=\"built_in\">SplFixedArray</span>(<span class=\"number\">5</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">$array[<span class=\"number\">1</span>] = <span class=\"number\">2</span>;</span><br><span class=\"line\">$array[<span class=\"number\">4</span>] = <span class=\"string\">&quot;foo&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">var_dump($array[<span class=\"number\">0</span>]); <span class=\"comment\">// NULL</span></span><br><span class=\"line\">var_dump($array[<span class=\"number\">1</span>]); <span class=\"comment\">// int(2)</span></span><br><span class=\"line\"></span><br><span class=\"line\">var_dump($array[<span class=\"string\">&quot;4&quot;</span>]); <span class=\"comment\">// string(3) &quot;foo&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Increase the size of the array to 10</span></span><br><span class=\"line\">$array-&gt;setSize(<span class=\"number\">10</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">$array[<span class=\"number\">9</span>] = <span class=\"string\">&quot;asdf&quot;</span>;</span><br><span class=\"line\">var_dump($array[<span class=\"number\">9</span>]);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Shrink the array to a size of 2</span></span><br><span class=\"line\">$array-&gt;setSize(<span class=\"number\">2</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// The following lines throw a RuntimeException: Index invalid or out of range</span></span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    var_dump($array[<span class=\"string\">&quot;non-numeric&quot;</span>]);</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (<span class=\"built_in\">RuntimeException</span> $re) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">&quot;RuntimeException: &quot;</span> . $re-&gt;getMessage() . <span class=\"string\">&quot;\\n&quot;</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    var_dump($array[<span class=\"number\">-1</span>]);</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (<span class=\"built_in\">RuntimeException</span> $re) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">&quot;RuntimeException: &quot;</span> . $re-&gt;getMessage() . <span class=\"string\">&quot;\\n&quot;</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    var_dump($array[<span class=\"number\">5</span>]);</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (<span class=\"built_in\">RuntimeException</span> $re) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">&quot;RuntimeException: &quot;</span> . $re-&gt;getMessage() . <span class=\"string\">&quot;\\n&quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"SplHeap\"><a href=\"#SplHeap\" class=\"headerlink\" title=\"SplHeap\"></a>SplHeap</h2><p></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">JupilerLeague</span> <span class=\"keyword\">extends</span> <span class=\"title\">SplHeap</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * We modify the abstract method compare so we can sort our</span></span><br><span class=\"line\"><span class=\"comment\">     * rankings using the values of a given array</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">compare</span>(<span class=\"params\">$array1, $array2</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        $values1 = array_values($array1);</span><br><span class=\"line\">        $values2 = array_values($array2);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($values1[<span class=\"number\">0</span>] === $values2[<span class=\"number\">0</span>]) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> $values1[<span class=\"number\">0</span>] &lt; $values2[<span class=\"number\">0</span>] ? <span class=\"number\">-1</span> : <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$heap = <span class=\"keyword\">new</span> JupilerLeague();</span><br><span class=\"line\">$heap-&gt;insert([<span class=\"string\">&#x27;AA Gent&#x27;</span> =&gt; <span class=\"number\">15</span>]);</span><br><span class=\"line\">$heap-&gt;insert([<span class=\"string\">&#x27;Anderlecht&#x27;</span> =&gt; <span class=\"number\">20</span>]);</span><br><span class=\"line\">$heap-&gt;insert([<span class=\"string\">&#x27;Cercle Brugge&#x27;</span> =&gt; <span class=\"number\">11</span>]);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// For displaying the ranking we move up to the first node</span></span><br><span class=\"line\">$heap-&gt;top();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Then we iterate through each node for displaying the result</span></span><br><span class=\"line\"><span class=\"keyword\">while</span> ($heap-&gt;valid()) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">foreach</span> ($heap-&gt;current() <span class=\"keyword\">as</span> $team =&gt; $score) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> $team . <span class=\"string\">&#x27;: &#x27;</span> . $score . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    $heap-&gt;next();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"SplMaxHeap\"><a href=\"#SplMaxHeap\" class=\"headerlink\" title=\"SplMaxHeap\"></a>SplMaxHeap</h2><p></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MySimpleHeap</span> <span class=\"keyword\">extends</span> <span class=\"title\">SplMaxHeap</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$obj = <span class=\"keyword\">new</span> MySimpleHeap();</span><br><span class=\"line\">$obj-&gt;insert(<span class=\"number\">4</span>);</span><br><span class=\"line\">$obj-&gt;insert(<span class=\"number\">8</span>);</span><br><span class=\"line\">$obj-&gt;insert(<span class=\"number\">1</span>);</span><br><span class=\"line\">$obj-&gt;insert(<span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">foreach</span> ($obj <span class=\"keyword\">as</span> $number) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $number . PHP_EOL;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"MySimpleHeap\"><a href=\"#MySimpleHeap\" class=\"headerlink\" title=\"MySimpleHeap\"></a>MySimpleHeap</h2><p></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MySimpleHeap</span> <span class=\"keyword\">extends</span> <span class=\"title\">SplMinHeap</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$obj = <span class=\"keyword\">new</span> MySimpleHeap();</span><br><span class=\"line\">$obj-&gt;insert(<span class=\"number\">4</span>);</span><br><span class=\"line\">$obj-&gt;insert(<span class=\"number\">8</span>);</span><br><span class=\"line\">$obj-&gt;insert(<span class=\"number\">1</span>);</span><br><span class=\"line\">$obj-&gt;insert(<span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">foreach</span> ($obj <span class=\"keyword\">as</span> $number) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $number . PHP_EOL;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"SplStack\"><a href=\"#SplStack\" class=\"headerlink\" title=\"SplStack\"></a>SplStack</h2><p></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$q = <span class=\"keyword\">new</span> <span class=\"built_in\">SplStack</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">$q[] = <span class=\"number\">1</span>;</span><br><span class=\"line\">$q[] = <span class=\"number\">2</span>;</span><br><span class=\"line\">$q[] = <span class=\"number\">3</span>;</span><br><span class=\"line\">$q-&gt;push(<span class=\"number\">4</span>);</span><br><span class=\"line\">$q-&gt;add(<span class=\"number\">4</span>, <span class=\"number\">5</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">$q-&gt;rewind();</span><br><span class=\"line\"><span class=\"keyword\">while</span> ($q-&gt;valid()) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $q-&gt;current(), <span class=\"string\">&quot;\\n&quot;</span>;</span><br><span class=\"line\">    $q-&gt;next();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Stack</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $splstack;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">\\<span class=\"built_in\">SplStack</span> $splstack</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;splstack = $splstack;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">calculateSomme</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">$this</span>-&gt;splstack-&gt;count() &gt; <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">            $val1 = <span class=\"keyword\">$this</span>-&gt;splstack-&gt;pop();</span><br><span class=\"line\">            $val2 = <span class=\"keyword\">$this</span>-&gt;splstack-&gt;pop();</span><br><span class=\"line\">            $val = $val1 + $val2;</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;splstack-&gt;push($val);</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;calculateSomme();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> integer</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">displaySomme</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        $result = <span class=\"keyword\">$this</span>-&gt;splstack-&gt;pop();</span><br><span class=\"line\">        <span class=\"keyword\">return</span> $result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$splstack = <span class=\"keyword\">new</span> \\<span class=\"built_in\">SplStack</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">$splstack-&gt;push(<span class=\"number\">10</span>);</span><br><span class=\"line\">$splstack-&gt;push(<span class=\"number\">10</span>);</span><br><span class=\"line\">$splstack-&gt;push(<span class=\"number\">10</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">$stack = <span class=\"keyword\">new</span> Stack($splstack);</span><br><span class=\"line\">$stack-&gt;calculateSomme();</span><br><span class=\"line\"><span class=\"keyword\">echo</span> $stack-&gt;displaySomme() . PHP_EOL; <span class=\"comment\">// 30</span></span><br><span class=\"line\"></span><br><span class=\"line\">$stack = <span class=\"keyword\">new</span> <span class=\"built_in\">SplStack</span>();</span><br><span class=\"line\">$stack-&gt;push(<span class=\"string\">&#x27;a&#x27;</span>);</span><br><span class=\"line\">$stack-&gt;push(<span class=\"string\">&#x27;b&#x27;</span>);</span><br><span class=\"line\">$stack-&gt;push(<span class=\"string\">&#x27;c&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> $stack-&gt;offsetGet(<span class=\"number\">0</span>);</span><br><span class=\"line\">$stack-&gt;offsetSet(<span class=\"number\">0</span>, <span class=\"string\">&#x27;C&#x27;</span>); <span class=\"comment\"># the last element has index zero</span></span><br><span class=\"line\"></span><br><span class=\"line\">$stack-&gt;rewind();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">while</span> ($stack-&gt;valid()) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $stack-&gt;current(), PHP_EOL;</span><br><span class=\"line\">    $stack-&gt;next();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"SplQueue\"><a href=\"#SplQueue\" class=\"headerlink\" title=\"SplQueue\"></a>SplQueue</h2><p></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">$queue = <span class=\"keyword\">new</span> <span class=\"built_in\">SplQueue</span>();</span><br><span class=\"line\">$queue-&gt;enqueue(<span class=\"string\">&#x27;A&#x27;</span>);</span><br><span class=\"line\">$queue-&gt;enqueue(<span class=\"string\">&#x27;B&#x27;</span>);</span><br><span class=\"line\">$queue-&gt;enqueue(<span class=\"string\">&#x27;C&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">$queue-&gt;rewind();</span><br><span class=\"line\"><span class=\"keyword\">while</span>($queue-&gt;valid())&#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $queue-&gt;current(),<span class=\"string\">&quot;\\n&quot;</span>;</span><br><span class=\"line\">    $queue-&gt;next();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">echo</span> $queue-&gt;dequeue(); <span class=\"comment\">//remove first one</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"SplPriorityQueue\"><a href=\"#SplPriorityQueue\" class=\"headerlink\" title=\"SplPriorityQueue\"></a>SplPriorityQueue</h2><p></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PQtest</span> <span class=\"keyword\">extends</span> <span class=\"title\">SplPriorityQueue</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">compare</span>(<span class=\"params\">$priority1, $priority2</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($priority1 === $priority2) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> $priority1 &lt; $priority2 ? <span class=\"number\">-1</span> : <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$objPQ = <span class=\"keyword\">new</span> PQtest();</span><br><span class=\"line\"></span><br><span class=\"line\">$objPQ-&gt;insert(<span class=\"string\">&#x27;A&#x27;</span>, <span class=\"number\">3</span>);</span><br><span class=\"line\">$objPQ-&gt;insert(<span class=\"string\">&#x27;B&#x27;</span>, <span class=\"number\">6</span>);</span><br><span class=\"line\">$objPQ-&gt;insert(<span class=\"string\">&#x27;C&#x27;</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\">$objPQ-&gt;insert(<span class=\"string\">&#x27;D&#x27;</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">&quot;COUNT-&gt;&quot;</span> . $objPQ-&gt;count() . PHP_EOL;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//mode of extraction</span></span><br><span class=\"line\">$objPQ-&gt;setExtractFlags(PQtest::EXTR_BOTH);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//Go to TOP</span></span><br><span class=\"line\">$objPQ-&gt;top();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">while</span> ($objPQ-&gt;valid()) &#123;</span><br><span class=\"line\">    $value = $objPQ-&gt;current();</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;data-&gt;&#x27;</span> . $value[<span class=\"string\">&#x27;data&#x27;</span>] . <span class=\"string\">&#x27;==priority-&gt;&#x27;</span> . $value[<span class=\"string\">&#x27;priority&#x27;</span>] . PHP_EOL;</span><br><span class=\"line\">    $objPQ-&gt;next();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n"},{"url":"/2017/12/20/php-spl-iterators.html","title":"PHP Spl Iterators","date":"2017-12-19T22:53:12.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"[PHP](https://www.php.net/manual/zh/spl.iterators.php)\n\n```\nPHP SPL ArrayAccess\n```\n\n## Iterator\n\n\n\n```php\n<?php\nclass MyIterator implements Iterator\n{\n    private $array = [];\n\n    private $valid = false;\n\n    public function __construct(array $array)\n    {\n        $this->array = $array;\n    }\n\n    /**\n     * \n     * @author jiangyi\n     */\n    function rewind()\n    {\n        $this->valid = (false !== reset($this->array));\n    }\n\n    /**\n     * \n     * @return mixed\n     * @author jiangyi\n     */\n    function current()\n    {\n        return current($this->array);\n    }\n\n    /**\n     * \n     * @return int\n     * @author jiangyi\n     */\n    function key()\n    {\n        return key($this->array);\n    }\n\n    /**\n     * \n     * @author jiangyi\n     */\n    function next()\n    {\n        $this->valid = (false !== next($this->array));\n    }\n\n    /**\n     * \n     * @return bool\n     * @author jiangyi\n     */\n    function valid()\n    {\n        return $this->valid;\n    }\n}\n\n$array = [\n    'a' => \"firstelement\",\n    \"secondelement\",\n    \"lastelement\",\n];\n$it = new MyIterator($array);\n\nforeach ($it as $key => $value) {\n    echo \"{$key}=>{$value}\\n\";\n}\n\n$it->rewind();\nwhile ($it->valid()) {\n    echo \"{$it->key()}=>{$it->current()}\\n\";\n    $it->next();\n}\n```\n\n## Countable\n\n\n\n```php\n<?php\nclass MyCountable implements Countable\n{\n    private $myCount = 3;\n\n    public function count()\n    {\n        return $this->myCount;\n    }\n}\n\n$countable = new MyCountable();\nvar_dump($countable->count());\nvar_dump(count($countable));\n```\n\n## AppendIterator\n\n``\n\n\n\n```php\n<?php\n\n$arrayIteratorOne = new ArrayIterator(['a', 'b', 'c']);\n$arrayIteratorTwo = new ArrayIterator(['d', 'e', 'f']);\n\n$iterator = new AppendIterator;\n$iterator->append($arrayIteratorOne);\n$iterator->append($arrayIteratorTwo);\n\nforeach ($iterator as $current) {\n    echo $current . PHP_EOL;\n}\n\n// a b c d e f\n```\n\n## ArrayAccess\n\n``\n\nmodel\n\n```php\n<?php\n\nclass MyArrayAccess implements ArrayAccess, IteratorAggregate\n{\n    private $container = [];\n    public $title;\n    public $author;\n    public $category;\n\n    public function __construct($title, $author, $category)\n    {\n        $this->container = [\n            \"one\"   => 1,\n            \"two\"   => 2,\n            \"three\" => 3,\n        ];\n        $this->title = $title;\n        $this->author = $author;\n        $this->category = $category;\n    }\n\n    /**\n     * \n     * @param mixed $offset\n     * @param mixed $value\n     * @author jiangyi\n     */\n    public function offsetSet($offset, $value)\n    {\n        $this->{$offset} = $value;\n    }\n\n    /**\n     * \n     * @param mixed $offset\n     * @return bool\n     * @author jiangyi\n     */\n    public function offsetExists($offset)\n    {\n        return isset($this->{$offset});\n    }\n\n    /**\n     * \n     * @param mixed $offset\n     * @author jiangyi\n     */\n    public function offsetUnset($offset)\n    {\n        unset($this->{$offset});\n    }\n\n    /**\n     * \n     * @param mixed $offset\n     * @return mixed|null\n     * @author jiangyi\n     */\n    public function offsetGet($offset)\n    {\n        return isset($this->{$offset}) ? $this->{$offset} : null;\n    }\n\n    function getIterator()\n    {\n        return new ArrayIterator($this);\n    }\n}\n\n$obj = new MyArrayAccess('a', 'wen', 'new');\n\nvar_dump(isset($obj['title']));\nvar_dump($obj[\"title\"]);\nunset($obj[\"title\"]);\nvar_dump(isset($obj[\"title\"]));\n$obj[\"title\"] = \"A value\";\nvar_dump($obj[\"title\"]);\n$obj['a'] = 'Append 1';\n$obj['b'] = 'Append 2';\n$obj['c'] = 'Append 3';\n\nforeach ($obj as $field => $value) {\n    echo \"$field=>$value\\n\";\n}\n```\n\n## ArrayIterator\n\n``\n\nArrayAccess , SeekableIterator , Countable , Serializable\n\n```php\n<?php\n\n$array = ['a', 'b', 'c', 'd'];\n\ntry {\n    $object = new ArrayIterator($array);\n    foreach ($object as $key => $value) {\n        echo $key . ' => ' . $value . PHP_EOL;\n    }\n} catch (Exception $e) {\n    echo $e->getMessage();\n}\n```\n\n## ArrayObject\n\nforeach\n\n```php\n<?php\n\n$array = ['a', 'b', 'c', 'd'];\n\n$arrayObj = new ArrayObject($array);\n$arrayObj->append('e');\n$arrayObj->natcasesort();\necho 'count->' . $arrayObj->count() . PHP_EOL;\n$arrayObj->offsetUnset(3);\nif ($arrayObj->offsetExists(2)) {\n    echo 'Offset Exists' . PHP_EOL;\n}\n$arrayObj->offsetSet(5, 'f');\necho $arrayObj->offsetGet(4) . PHP_EOL;\nfor ($iterator = $arrayObj->getIterator();\n     $iterator->valid();\n     $iterator->next()) {\n    echo $iterator->key() . ' => ' . $iterator->current() . PHP_EOL;\n}\n```\n\n## CachingIterator\n\n\n\n```php\n<?php\n\n$array = ['a', 'b', 'c', 'd'];\n\ntry {\n    $object = new CachingIterator(new ArrayIterator($array));\n    foreach ($object as $value) {\n        echo $value . PHP_EOL;\n    }\n} catch (Exception $e) {\n    echo $e->getMessage();\n}\n```\n\n## DirectoryIterator\n\n\n\n```php\n<?php\n\ntry {\n    foreach (new DirectoryIterator(__DIR__) as $item) {\n        if ($item->getFilename() == 'ArrayObject.php') {\n            echo 'getFilename()->' . $item->getFilename() . PHP_EOL;\n            echo 'isDot()->' . $item->isDot() . PHP_EOL;\n            echo '__toString()->' . $item->__toString() . PHP_EOL;\n            echo 'getPath()->' . $item->getPath() . PHP_EOL;\n            echo 'getPathname()->' . $item->getPathname() . PHP_EOL;\n            echo 'getPerms()->' . $item->getPerms() . PHP_EOL;\n            echo 'getInode()->' . $item->getInode() . PHP_EOL;\n            echo 'getSize()->' . $item->getSize() . PHP_EOL;\n            echo 'getOwner()->' . $item->getOwner() . PHP_EOL;\n            echo 'getGroup()->' . $item->getGroup() . PHP_EOL;\n            echo 'getATime()->' . $item->getATime() . PHP_EOL;\n            echo 'getMTime()->' . $item->getMTime() . PHP_EOL;\n            echo 'getCTime()->' . $item->getCTime() . PHP_EOL;\n            echo 'getType()->' . $item->getType() . PHP_EOL;\n            echo 'isWritable()->' . $item->isWritable() . PHP_EOL;\n            echo 'isReadable()->' . $item->isReadable() . PHP_EOL;\n            echo 'isExecutable()->' . $item->isExecutable() . PHP_EOL;\n            echo 'isFile()->' . $item->isFile() . PHP_EOL;\n            echo 'isDir()->' . $item->isDir() . PHP_EOL;\n            echo 'isLink()->' . $item->isLink() . PHP_EOL;\n            echo 'getFileInfo()->' . $item->getFileInfo() . PHP_EOL;\n            echo 'getPathInfo()->' . $item->getPathInfo() . PHP_EOL;\n            echo 'setFileClass()->' . $item->setFileClass() . PHP_EOL;\n            echo 'setInfoClass()->' . $item->setInfoClass() . PHP_EOL;\n            echo 'openFile()->' . $item->openFile() . PHP_EOL;\n        }\n    }\n} catch (Exception $e) {\n    echo 'No files Found!' . PHP_EOL;\n}\n```\n\n## FilterIterator\n\narray_filter\n\n```php\n<?php\n\n$animals = ['koala', 'kangaroo', 'wombat', 'wallaby', 'emu', 'NZ' => 'kiwi', 'kookaburra', 'platypus'];\n\nclass CullingIterator extends FilterIterator\n{\n\n    /*** The filteriterator takes  a iterator as param: ***/\n    public function __construct(Iterator $it)\n    {\n        parent::__construct($it);\n    }\n\n    /*** check if key is numeric ***/\n    function accept()\n    {\n        return is_numeric($this->key());\n    }\n}\n\n/*** end of class ***/\n$cull = new CullingIterator(new ArrayIterator($animals));\n\nforeach ($cull as $key => $value) {\n    echo $key . '=>' . $value . PHP_EOL;\n}\n```\n\n## IteratorAggregate\n\n\n\n```php\n<?php\nclass MyIteratorAggregate implements IteratorAggregate\n{\n    public $property1 = \"Public property one\";\n    public $property2 = \"Public property two\";\n    public $property3 = \"Public property three\";\n\n    public $arr = [1, 2, 3, 4, 5, 6];\n\n    public function __construct()\n    {\n        $this->property4 = \"last property\";\n    }\n\n    /**\n     * 5(rewind valid key current next),\n     * ArrayIterator\n     *\n     * @return ArrayIterator\n     * @author jiangyi\n     */\n    public function getIterator()\n    {\n        //return new ArrayIterator($this);\n        return new ArrayIterator($this->arr);\n    }\n}\n\n$obj = new MyIteratorAggregate;\n\nforeach ($obj as $key => $value) {\n    var_dump($key, $value);\n    echo \"\\n\";\n}\n```\n\n## LimitIterator\n\n\n\n```php\n/*** the offset value ***/\n$offset = 3;\n\n/*** the limit of records to show ***/\n$limit = 2;\n\n$array = ['koala', 'kangaroo', 'wombat', 'wallaby', 'emu', 'kiwi', 'kookaburra', 'platypus'];\n\n$it = new LimitIterator(new ArrayIterator($array), $offset, $limit);\n\nforeach ($it as $k => $v) {\n    //echo $it->getPosition() . PHP_EOL;\n    echo $k .'=>'.$v . PHP_EOL;\n}\n\n$array = ['koala', 'kangaroo', 'wombat', 'wallaby', 'emu', 'kiwi', 'kookaburra', 'platypus'];\n\n$it = new LimitIterator(new ArrayIterator($array));\n\ntry {\n    $it->seek(5);\n    echo $it->current();\n} catch (OutOfBoundsException $e) {\n    echo $e->getMessage() . PHP_EOL;\n}\n```\n\n## RecursiveIteratorIterator\n\n\n\n```php\n<?php\n$array = [\n    ['name' => 'butch', 'sex' => 'm', 'breed' => 'boxer'],\n    ['name' => 'fido', 'sex' => 'm', 'breed' => 'doberman'],\n    ['name' => 'girly', 'sex' => 'f', 'breed' => 'poodle'],\n];\n\nforeach (new RecursiveIteratorIterator(new RecursiveArrayIterator($array)) as $key => $value) {\n    echo $key . '->' . $value . PHP_EOL;\n}\n```\n\n## SimpleXMLIterator\n\nXML\n\n```php\n<?php\n\n/*** a simple xml tree ***/\n$xmlstring = <<<XML\n<?xml version = \"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\n<document>\n  <animal>\n    <category id=\"48\">\n      <species>monotremes</species>\n      <type>platypus</type>\n      <name>Bruce</name>\n    </category>\n  </animal>\n  <animal>\n    <category id=\"4\">\n      <species>arachnid</species>\n      <type>funnel web</type>\n      <name>Bruce</name>\n      <legs>8</legs>\n    </category>\n  </animal>\n</document>\nXML;\n\n/*** a new simpleXML iterator object ***/\ntry {\n    /*** a new simple xml iterator ***/\n    $it = new SimpleXMLIterator($xmlstring);\n    /*** a new limitIterator object ***/\n    foreach (new RecursiveIteratorIterator($it, 1) as $name => $data) {\n        //echo $name . '=>' . $data . PHP_EOL;\n        if ($name == 'animal') {\n            //var_dump($data);\n        }\n    }\n} catch (Exception $e) {\n    echo $e->getMessage();\n}\n\ntry {\n    /*** a new simpleXML iterator object ***/\n    $sxi =  new SimpleXMLIterator($xmlstring);\n\n    /*** set the xpath ***/\n    $foo = $sxi->xpath('animal/category/species');\n\n    /*** iterate over the xpath ***/\n    foreach ($foo as $k=>$v)\n    {\n        echo $v.PHP_EOL;\n    }\n}\ncatch(Exception $e)\n{\n    echo $e->getMessage();\n}\n```\n","source":"_posts/php/spl-iterators.md","raw":"---\nurl: /2017/12/20/php-spl-iterators.html\ntitle: \"PHP Spl Iterators\"\ndate: 2017-12-20T14:53:12+08:00\ndraft: false\ntags: [\"PHP\"]\ntags_weight: 100\ncategories: [\"PHP\"]\ncategoryes_weight: 100\n---\n[PHP](https://www.php.net/manual/zh/spl.iterators.php)\n\n```\nPHP SPL ArrayAccess\n```\n\n## Iterator\n\n\n\n```php\n<?php\nclass MyIterator implements Iterator\n{\n    private $array = [];\n\n    private $valid = false;\n\n    public function __construct(array $array)\n    {\n        $this->array = $array;\n    }\n\n    /**\n     * \n     * @author jiangyi\n     */\n    function rewind()\n    {\n        $this->valid = (false !== reset($this->array));\n    }\n\n    /**\n     * \n     * @return mixed\n     * @author jiangyi\n     */\n    function current()\n    {\n        return current($this->array);\n    }\n\n    /**\n     * \n     * @return int\n     * @author jiangyi\n     */\n    function key()\n    {\n        return key($this->array);\n    }\n\n    /**\n     * \n     * @author jiangyi\n     */\n    function next()\n    {\n        $this->valid = (false !== next($this->array));\n    }\n\n    /**\n     * \n     * @return bool\n     * @author jiangyi\n     */\n    function valid()\n    {\n        return $this->valid;\n    }\n}\n\n$array = [\n    'a' => \"firstelement\",\n    \"secondelement\",\n    \"lastelement\",\n];\n$it = new MyIterator($array);\n\nforeach ($it as $key => $value) {\n    echo \"{$key}=>{$value}\\n\";\n}\n\n$it->rewind();\nwhile ($it->valid()) {\n    echo \"{$it->key()}=>{$it->current()}\\n\";\n    $it->next();\n}\n```\n\n## Countable\n\n\n\n```php\n<?php\nclass MyCountable implements Countable\n{\n    private $myCount = 3;\n\n    public function count()\n    {\n        return $this->myCount;\n    }\n}\n\n$countable = new MyCountable();\nvar_dump($countable->count());\nvar_dump(count($countable));\n```\n\n## AppendIterator\n\n``\n\n\n\n```php\n<?php\n\n$arrayIteratorOne = new ArrayIterator(['a', 'b', 'c']);\n$arrayIteratorTwo = new ArrayIterator(['d', 'e', 'f']);\n\n$iterator = new AppendIterator;\n$iterator->append($arrayIteratorOne);\n$iterator->append($arrayIteratorTwo);\n\nforeach ($iterator as $current) {\n    echo $current . PHP_EOL;\n}\n\n// a b c d e f\n```\n\n## ArrayAccess\n\n``\n\nmodel\n\n```php\n<?php\n\nclass MyArrayAccess implements ArrayAccess, IteratorAggregate\n{\n    private $container = [];\n    public $title;\n    public $author;\n    public $category;\n\n    public function __construct($title, $author, $category)\n    {\n        $this->container = [\n            \"one\"   => 1,\n            \"two\"   => 2,\n            \"three\" => 3,\n        ];\n        $this->title = $title;\n        $this->author = $author;\n        $this->category = $category;\n    }\n\n    /**\n     * \n     * @param mixed $offset\n     * @param mixed $value\n     * @author jiangyi\n     */\n    public function offsetSet($offset, $value)\n    {\n        $this->{$offset} = $value;\n    }\n\n    /**\n     * \n     * @param mixed $offset\n     * @return bool\n     * @author jiangyi\n     */\n    public function offsetExists($offset)\n    {\n        return isset($this->{$offset});\n    }\n\n    /**\n     * \n     * @param mixed $offset\n     * @author jiangyi\n     */\n    public function offsetUnset($offset)\n    {\n        unset($this->{$offset});\n    }\n\n    /**\n     * \n     * @param mixed $offset\n     * @return mixed|null\n     * @author jiangyi\n     */\n    public function offsetGet($offset)\n    {\n        return isset($this->{$offset}) ? $this->{$offset} : null;\n    }\n\n    function getIterator()\n    {\n        return new ArrayIterator($this);\n    }\n}\n\n$obj = new MyArrayAccess('a', 'wen', 'new');\n\nvar_dump(isset($obj['title']));\nvar_dump($obj[\"title\"]);\nunset($obj[\"title\"]);\nvar_dump(isset($obj[\"title\"]));\n$obj[\"title\"] = \"A value\";\nvar_dump($obj[\"title\"]);\n$obj['a'] = 'Append 1';\n$obj['b'] = 'Append 2';\n$obj['c'] = 'Append 3';\n\nforeach ($obj as $field => $value) {\n    echo \"$field=>$value\\n\";\n}\n```\n\n## ArrayIterator\n\n``\n\nArrayAccess , SeekableIterator , Countable , Serializable\n\n```php\n<?php\n\n$array = ['a', 'b', 'c', 'd'];\n\ntry {\n    $object = new ArrayIterator($array);\n    foreach ($object as $key => $value) {\n        echo $key . ' => ' . $value . PHP_EOL;\n    }\n} catch (Exception $e) {\n    echo $e->getMessage();\n}\n```\n\n## ArrayObject\n\nforeach\n\n```php\n<?php\n\n$array = ['a', 'b', 'c', 'd'];\n\n$arrayObj = new ArrayObject($array);\n$arrayObj->append('e');\n$arrayObj->natcasesort();\necho 'count->' . $arrayObj->count() . PHP_EOL;\n$arrayObj->offsetUnset(3);\nif ($arrayObj->offsetExists(2)) {\n    echo 'Offset Exists' . PHP_EOL;\n}\n$arrayObj->offsetSet(5, 'f');\necho $arrayObj->offsetGet(4) . PHP_EOL;\nfor ($iterator = $arrayObj->getIterator();\n     $iterator->valid();\n     $iterator->next()) {\n    echo $iterator->key() . ' => ' . $iterator->current() . PHP_EOL;\n}\n```\n\n## CachingIterator\n\n\n\n```php\n<?php\n\n$array = ['a', 'b', 'c', 'd'];\n\ntry {\n    $object = new CachingIterator(new ArrayIterator($array));\n    foreach ($object as $value) {\n        echo $value . PHP_EOL;\n    }\n} catch (Exception $e) {\n    echo $e->getMessage();\n}\n```\n\n## DirectoryIterator\n\n\n\n```php\n<?php\n\ntry {\n    foreach (new DirectoryIterator(__DIR__) as $item) {\n        if ($item->getFilename() == 'ArrayObject.php') {\n            echo 'getFilename()->' . $item->getFilename() . PHP_EOL;\n            echo 'isDot()->' . $item->isDot() . PHP_EOL;\n            echo '__toString()->' . $item->__toString() . PHP_EOL;\n            echo 'getPath()->' . $item->getPath() . PHP_EOL;\n            echo 'getPathname()->' . $item->getPathname() . PHP_EOL;\n            echo 'getPerms()->' . $item->getPerms() . PHP_EOL;\n            echo 'getInode()->' . $item->getInode() . PHP_EOL;\n            echo 'getSize()->' . $item->getSize() . PHP_EOL;\n            echo 'getOwner()->' . $item->getOwner() . PHP_EOL;\n            echo 'getGroup()->' . $item->getGroup() . PHP_EOL;\n            echo 'getATime()->' . $item->getATime() . PHP_EOL;\n            echo 'getMTime()->' . $item->getMTime() . PHP_EOL;\n            echo 'getCTime()->' . $item->getCTime() . PHP_EOL;\n            echo 'getType()->' . $item->getType() . PHP_EOL;\n            echo 'isWritable()->' . $item->isWritable() . PHP_EOL;\n            echo 'isReadable()->' . $item->isReadable() . PHP_EOL;\n            echo 'isExecutable()->' . $item->isExecutable() . PHP_EOL;\n            echo 'isFile()->' . $item->isFile() . PHP_EOL;\n            echo 'isDir()->' . $item->isDir() . PHP_EOL;\n            echo 'isLink()->' . $item->isLink() . PHP_EOL;\n            echo 'getFileInfo()->' . $item->getFileInfo() . PHP_EOL;\n            echo 'getPathInfo()->' . $item->getPathInfo() . PHP_EOL;\n            echo 'setFileClass()->' . $item->setFileClass() . PHP_EOL;\n            echo 'setInfoClass()->' . $item->setInfoClass() . PHP_EOL;\n            echo 'openFile()->' . $item->openFile() . PHP_EOL;\n        }\n    }\n} catch (Exception $e) {\n    echo 'No files Found!' . PHP_EOL;\n}\n```\n\n## FilterIterator\n\narray_filter\n\n```php\n<?php\n\n$animals = ['koala', 'kangaroo', 'wombat', 'wallaby', 'emu', 'NZ' => 'kiwi', 'kookaburra', 'platypus'];\n\nclass CullingIterator extends FilterIterator\n{\n\n    /*** The filteriterator takes  a iterator as param: ***/\n    public function __construct(Iterator $it)\n    {\n        parent::__construct($it);\n    }\n\n    /*** check if key is numeric ***/\n    function accept()\n    {\n        return is_numeric($this->key());\n    }\n}\n\n/*** end of class ***/\n$cull = new CullingIterator(new ArrayIterator($animals));\n\nforeach ($cull as $key => $value) {\n    echo $key . '=>' . $value . PHP_EOL;\n}\n```\n\n## IteratorAggregate\n\n\n\n```php\n<?php\nclass MyIteratorAggregate implements IteratorAggregate\n{\n    public $property1 = \"Public property one\";\n    public $property2 = \"Public property two\";\n    public $property3 = \"Public property three\";\n\n    public $arr = [1, 2, 3, 4, 5, 6];\n\n    public function __construct()\n    {\n        $this->property4 = \"last property\";\n    }\n\n    /**\n     * 5(rewind valid key current next),\n     * ArrayIterator\n     *\n     * @return ArrayIterator\n     * @author jiangyi\n     */\n    public function getIterator()\n    {\n        //return new ArrayIterator($this);\n        return new ArrayIterator($this->arr);\n    }\n}\n\n$obj = new MyIteratorAggregate;\n\nforeach ($obj as $key => $value) {\n    var_dump($key, $value);\n    echo \"\\n\";\n}\n```\n\n## LimitIterator\n\n\n\n```php\n/*** the offset value ***/\n$offset = 3;\n\n/*** the limit of records to show ***/\n$limit = 2;\n\n$array = ['koala', 'kangaroo', 'wombat', 'wallaby', 'emu', 'kiwi', 'kookaburra', 'platypus'];\n\n$it = new LimitIterator(new ArrayIterator($array), $offset, $limit);\n\nforeach ($it as $k => $v) {\n    //echo $it->getPosition() . PHP_EOL;\n    echo $k .'=>'.$v . PHP_EOL;\n}\n\n$array = ['koala', 'kangaroo', 'wombat', 'wallaby', 'emu', 'kiwi', 'kookaburra', 'platypus'];\n\n$it = new LimitIterator(new ArrayIterator($array));\n\ntry {\n    $it->seek(5);\n    echo $it->current();\n} catch (OutOfBoundsException $e) {\n    echo $e->getMessage() . PHP_EOL;\n}\n```\n\n## RecursiveIteratorIterator\n\n\n\n```php\n<?php\n$array = [\n    ['name' => 'butch', 'sex' => 'm', 'breed' => 'boxer'],\n    ['name' => 'fido', 'sex' => 'm', 'breed' => 'doberman'],\n    ['name' => 'girly', 'sex' => 'f', 'breed' => 'poodle'],\n];\n\nforeach (new RecursiveIteratorIterator(new RecursiveArrayIterator($array)) as $key => $value) {\n    echo $key . '->' . $value . PHP_EOL;\n}\n```\n\n## SimpleXMLIterator\n\nXML\n\n```php\n<?php\n\n/*** a simple xml tree ***/\n$xmlstring = <<<XML\n<?xml version = \"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\n<document>\n  <animal>\n    <category id=\"48\">\n      <species>monotremes</species>\n      <type>platypus</type>\n      <name>Bruce</name>\n    </category>\n  </animal>\n  <animal>\n    <category id=\"4\">\n      <species>arachnid</species>\n      <type>funnel web</type>\n      <name>Bruce</name>\n      <legs>8</legs>\n    </category>\n  </animal>\n</document>\nXML;\n\n/*** a new simpleXML iterator object ***/\ntry {\n    /*** a new simple xml iterator ***/\n    $it = new SimpleXMLIterator($xmlstring);\n    /*** a new limitIterator object ***/\n    foreach (new RecursiveIteratorIterator($it, 1) as $name => $data) {\n        //echo $name . '=>' . $data . PHP_EOL;\n        if ($name == 'animal') {\n            //var_dump($data);\n        }\n    }\n} catch (Exception $e) {\n    echo $e->getMessage();\n}\n\ntry {\n    /*** a new simpleXML iterator object ***/\n    $sxi =  new SimpleXMLIterator($xmlstring);\n\n    /*** set the xpath ***/\n    $foo = $sxi->xpath('animal/category/species');\n\n    /*** iterate over the xpath ***/\n    foreach ($foo as $k=>$v)\n    {\n        echo $v.PHP_EOL;\n    }\n}\ncatch(Exception $e)\n{\n    echo $e->getMessage();\n}\n```\n","slug":"php/spl-iterators","published":1,"updated":"2020-03-26T12:33:22.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf3h002jmv05hfqh59f3","content":"<p><a href=\"https://www.php.net/manual/zh/spl.iterators.php\">PHP</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PHP SPL ArrayAccess</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Iterator\"><a href=\"#Iterator\" class=\"headerlink\" title=\"Iterator\"></a>Iterator</h2><p></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyIterator</span> <span class=\"keyword\">implements</span> <span class=\"title\">Iterator</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $array = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $valid = <span class=\"literal\">false</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"><span class=\"keyword\">array</span> $array</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;array = $array;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">rewind</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;valid = (<span class=\"literal\">false</span> !== reset(<span class=\"keyword\">$this</span>-&gt;array));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">current</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> current(<span class=\"keyword\">$this</span>-&gt;array);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> int</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">key</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> key(<span class=\"keyword\">$this</span>-&gt;array);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">next</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;valid = (<span class=\"literal\">false</span> !== next(<span class=\"keyword\">$this</span>-&gt;array));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> bool</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">valid</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;valid;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$array = [</span><br><span class=\"line\">    <span class=\"string\">&#x27;a&#x27;</span> =&gt; <span class=\"string\">&quot;firstelement&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;secondelement&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;lastelement&quot;</span>,</span><br><span class=\"line\">];</span><br><span class=\"line\">$it = <span class=\"keyword\">new</span> MyIterator($array);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">foreach</span> ($it <span class=\"keyword\">as</span> $key =&gt; $value) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">&quot;<span class=\"subst\">&#123;$key&#125;</span>=&gt;<span class=\"subst\">&#123;$value&#125;</span>\\n&quot;</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$it-&gt;rewind();</span><br><span class=\"line\"><span class=\"keyword\">while</span> ($it-&gt;valid()) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">&quot;<span class=\"subst\">&#123;$it-&gt;key()&#125;</span>=&gt;<span class=\"subst\">&#123;$it-&gt;current()&#125;</span>\\n&quot;</span>;</span><br><span class=\"line\">    $it-&gt;next();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Countable\"><a href=\"#Countable\" class=\"headerlink\" title=\"Countable\"></a>Countable</h2><p></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyCountable</span> <span class=\"keyword\">implements</span> <span class=\"title\">Countable</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $myCount = <span class=\"number\">3</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">count</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;myCount;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$countable = <span class=\"keyword\">new</span> MyCountable();</span><br><span class=\"line\">var_dump($countable-&gt;count());</span><br><span class=\"line\">var_dump(count($countable));</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"AppendIterator\"><a href=\"#AppendIterator\" class=\"headerlink\" title=\"AppendIterator\"></a>AppendIterator</h2><p><code></code></p>\n<p></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"></span><br><span class=\"line\">$arrayIteratorOne = <span class=\"keyword\">new</span> <span class=\"built_in\">ArrayIterator</span>([<span class=\"string\">&#x27;a&#x27;</span>, <span class=\"string\">&#x27;b&#x27;</span>, <span class=\"string\">&#x27;c&#x27;</span>]);</span><br><span class=\"line\">$arrayIteratorTwo = <span class=\"keyword\">new</span> <span class=\"built_in\">ArrayIterator</span>([<span class=\"string\">&#x27;d&#x27;</span>, <span class=\"string\">&#x27;e&#x27;</span>, <span class=\"string\">&#x27;f&#x27;</span>]);</span><br><span class=\"line\"></span><br><span class=\"line\">$iterator = <span class=\"keyword\">new</span> <span class=\"built_in\">AppendIterator</span>;</span><br><span class=\"line\">$iterator-&gt;append($arrayIteratorOne);</span><br><span class=\"line\">$iterator-&gt;append($arrayIteratorTwo);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">foreach</span> ($iterator <span class=\"keyword\">as</span> $current) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $current . PHP_EOL;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// a b c d e f</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ArrayAccess\"><a href=\"#ArrayAccess\" class=\"headerlink\" title=\"ArrayAccess\"></a>ArrayAccess</h2><p><code></code></p>\n<p>model</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyArrayAccess</span> <span class=\"keyword\">implements</span> <span class=\"title\">ArrayAccess</span>, <span class=\"title\">IteratorAggregate</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $container = [];</span><br><span class=\"line\">    <span class=\"keyword\">public</span> $title;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> $author;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> $category;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">$title, $author, $category</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;container = [</span><br><span class=\"line\">            <span class=\"string\">&quot;one&quot;</span>   =&gt; <span class=\"number\">1</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;two&quot;</span>   =&gt; <span class=\"number\">2</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;three&quot;</span> =&gt; <span class=\"number\">3</span>,</span><br><span class=\"line\">        ];</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;title = $title;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;author = $author;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;category = $category;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $offset</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $value</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">offsetSet</span>(<span class=\"params\">$offset, $value</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;&#123;$offset&#125; = $value;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $offset</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> bool</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">offsetExists</span>(<span class=\"params\">$offset</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">isset</span>(<span class=\"keyword\">$this</span>-&gt;&#123;$offset&#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $offset</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">offsetUnset</span>(<span class=\"params\">$offset</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">unset</span>(<span class=\"keyword\">$this</span>-&gt;&#123;$offset&#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $offset</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed|null</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">offsetGet</span>(<span class=\"params\">$offset</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">isset</span>(<span class=\"keyword\">$this</span>-&gt;&#123;$offset&#125;) ? <span class=\"keyword\">$this</span>-&gt;&#123;$offset&#125; : <span class=\"literal\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getIterator</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">ArrayIterator</span>(<span class=\"keyword\">$this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$obj = <span class=\"keyword\">new</span> MyArrayAccess(<span class=\"string\">&#x27;a&#x27;</span>, <span class=\"string\">&#x27;wen&#x27;</span>, <span class=\"string\">&#x27;new&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">var_dump(<span class=\"keyword\">isset</span>($obj[<span class=\"string\">&#x27;title&#x27;</span>]));</span><br><span class=\"line\">var_dump($obj[<span class=\"string\">&quot;title&quot;</span>]);</span><br><span class=\"line\"><span class=\"keyword\">unset</span>($obj[<span class=\"string\">&quot;title&quot;</span>]);</span><br><span class=\"line\">var_dump(<span class=\"keyword\">isset</span>($obj[<span class=\"string\">&quot;title&quot;</span>]));</span><br><span class=\"line\">$obj[<span class=\"string\">&quot;title&quot;</span>] = <span class=\"string\">&quot;A value&quot;</span>;</span><br><span class=\"line\">var_dump($obj[<span class=\"string\">&quot;title&quot;</span>]);</span><br><span class=\"line\">$obj[<span class=\"string\">&#x27;a&#x27;</span>] = <span class=\"string\">&#x27;Append 1&#x27;</span>;</span><br><span class=\"line\">$obj[<span class=\"string\">&#x27;b&#x27;</span>] = <span class=\"string\">&#x27;Append 2&#x27;</span>;</span><br><span class=\"line\">$obj[<span class=\"string\">&#x27;c&#x27;</span>] = <span class=\"string\">&#x27;Append 3&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">foreach</span> ($obj <span class=\"keyword\">as</span> $field =&gt; $value) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">&quot;<span class=\"subst\">$field</span>=&gt;<span class=\"subst\">$value</span>\\n&quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ArrayIterator\"><a href=\"#ArrayIterator\" class=\"headerlink\" title=\"ArrayIterator\"></a>ArrayIterator</h2><p><code></code></p>\n<p>ArrayAccess , SeekableIterator , Countable , Serializable</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"></span><br><span class=\"line\">$array = [<span class=\"string\">&#x27;a&#x27;</span>, <span class=\"string\">&#x27;b&#x27;</span>, <span class=\"string\">&#x27;c&#x27;</span>, <span class=\"string\">&#x27;d&#x27;</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    $object = <span class=\"keyword\">new</span> <span class=\"built_in\">ArrayIterator</span>($array);</span><br><span class=\"line\">    <span class=\"keyword\">foreach</span> ($object <span class=\"keyword\">as</span> $key =&gt; $value) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> $key . <span class=\"string\">&#x27; =&gt; &#x27;</span> . $value . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (<span class=\"built_in\">Exception</span> $e) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $e-&gt;getMessage();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ArrayObject\"><a href=\"#ArrayObject\" class=\"headerlink\" title=\"ArrayObject\"></a>ArrayObject</h2><p>foreach</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"></span><br><span class=\"line\">$array = [<span class=\"string\">&#x27;a&#x27;</span>, <span class=\"string\">&#x27;b&#x27;</span>, <span class=\"string\">&#x27;c&#x27;</span>, <span class=\"string\">&#x27;d&#x27;</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">$arrayObj = <span class=\"keyword\">new</span> <span class=\"built_in\">ArrayObject</span>($array);</span><br><span class=\"line\">$arrayObj-&gt;append(<span class=\"string\">&#x27;e&#x27;</span>);</span><br><span class=\"line\">$arrayObj-&gt;natcasesort();</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">&#x27;count-&gt;&#x27;</span> . $arrayObj-&gt;count() . PHP_EOL;</span><br><span class=\"line\">$arrayObj-&gt;offsetUnset(<span class=\"number\">3</span>);</span><br><span class=\"line\"><span class=\"keyword\">if</span> ($arrayObj-&gt;offsetExists(<span class=\"number\">2</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;Offset Exists&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">$arrayObj-&gt;offsetSet(<span class=\"number\">5</span>, <span class=\"string\">&#x27;f&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> $arrayObj-&gt;offsetGet(<span class=\"number\">4</span>) . PHP_EOL;</span><br><span class=\"line\"><span class=\"keyword\">for</span> ($iterator = $arrayObj-&gt;getIterator();</span><br><span class=\"line\">     $iterator-&gt;valid();</span><br><span class=\"line\">     $iterator-&gt;next()) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $iterator-&gt;key() . <span class=\"string\">&#x27; =&gt; &#x27;</span> . $iterator-&gt;current() . PHP_EOL;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"CachingIterator\"><a href=\"#CachingIterator\" class=\"headerlink\" title=\"CachingIterator\"></a>CachingIterator</h2><p></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"></span><br><span class=\"line\">$array = [<span class=\"string\">&#x27;a&#x27;</span>, <span class=\"string\">&#x27;b&#x27;</span>, <span class=\"string\">&#x27;c&#x27;</span>, <span class=\"string\">&#x27;d&#x27;</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    $object = <span class=\"keyword\">new</span> <span class=\"built_in\">CachingIterator</span>(<span class=\"keyword\">new</span> <span class=\"built_in\">ArrayIterator</span>($array));</span><br><span class=\"line\">    <span class=\"keyword\">foreach</span> ($object <span class=\"keyword\">as</span> $value) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> $value . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (<span class=\"built_in\">Exception</span> $e) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $e-&gt;getMessage();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"DirectoryIterator\"><a href=\"#DirectoryIterator\" class=\"headerlink\" title=\"DirectoryIterator\"></a>DirectoryIterator</h2><p></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">foreach</span> (<span class=\"keyword\">new</span> <span class=\"built_in\">DirectoryIterator</span>(<span class=\"keyword\">__DIR__</span>) <span class=\"keyword\">as</span> $item) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($item-&gt;getFilename() == <span class=\"string\">&#x27;ArrayObject.php&#x27;</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;getFilename()-&gt;&#x27;</span> . $item-&gt;getFilename() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;isDot()-&gt;&#x27;</span> . $item-&gt;isDot() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;__toString()-&gt;&#x27;</span> . $item-&gt;__toString() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;getPath()-&gt;&#x27;</span> . $item-&gt;getPath() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;getPathname()-&gt;&#x27;</span> . $item-&gt;getPathname() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;getPerms()-&gt;&#x27;</span> . $item-&gt;getPerms() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;getInode()-&gt;&#x27;</span> . $item-&gt;getInode() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;getSize()-&gt;&#x27;</span> . $item-&gt;getSize() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;getOwner()-&gt;&#x27;</span> . $item-&gt;getOwner() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;getGroup()-&gt;&#x27;</span> . $item-&gt;getGroup() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;getATime()-&gt;&#x27;</span> . $item-&gt;getATime() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;getMTime()-&gt;&#x27;</span> . $item-&gt;getMTime() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;getCTime()-&gt;&#x27;</span> . $item-&gt;getCTime() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;getType()-&gt;&#x27;</span> . $item-&gt;getType() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;isWritable()-&gt;&#x27;</span> . $item-&gt;isWritable() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;isReadable()-&gt;&#x27;</span> . $item-&gt;isReadable() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;isExecutable()-&gt;&#x27;</span> . $item-&gt;isExecutable() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;isFile()-&gt;&#x27;</span> . $item-&gt;isFile() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;isDir()-&gt;&#x27;</span> . $item-&gt;isDir() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;isLink()-&gt;&#x27;</span> . $item-&gt;isLink() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;getFileInfo()-&gt;&#x27;</span> . $item-&gt;getFileInfo() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;getPathInfo()-&gt;&#x27;</span> . $item-&gt;getPathInfo() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;setFileClass()-&gt;&#x27;</span> . $item-&gt;setFileClass() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;setInfoClass()-&gt;&#x27;</span> . $item-&gt;setInfoClass() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;openFile()-&gt;&#x27;</span> . $item-&gt;openFile() . PHP_EOL;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (<span class=\"built_in\">Exception</span> $e) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;No files Found!&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"FilterIterator\"><a href=\"#FilterIterator\" class=\"headerlink\" title=\"FilterIterator\"></a>FilterIterator</h2><p>array_filter</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"></span><br><span class=\"line\">$animals = [<span class=\"string\">&#x27;koala&#x27;</span>, <span class=\"string\">&#x27;kangaroo&#x27;</span>, <span class=\"string\">&#x27;wombat&#x27;</span>, <span class=\"string\">&#x27;wallaby&#x27;</span>, <span class=\"string\">&#x27;emu&#x27;</span>, <span class=\"string\">&#x27;NZ&#x27;</span> =&gt; <span class=\"string\">&#x27;kiwi&#x27;</span>, <span class=\"string\">&#x27;kookaburra&#x27;</span>, <span class=\"string\">&#x27;platypus&#x27;</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CullingIterator</span> <span class=\"keyword\">extends</span> <span class=\"title\">FilterIterator</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/*** The filteriterator takes  a iterator as param: ***/</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"><span class=\"built_in\">Iterator</span> $it</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">parent</span>::__construct($it);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/*** check if key is numeric ***/</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">accept</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> is_numeric(<span class=\"keyword\">$this</span>-&gt;key());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*** end of class ***/</span></span><br><span class=\"line\">$cull = <span class=\"keyword\">new</span> CullingIterator(<span class=\"keyword\">new</span> <span class=\"built_in\">ArrayIterator</span>($animals));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">foreach</span> ($cull <span class=\"keyword\">as</span> $key =&gt; $value) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $key . <span class=\"string\">&#x27;=&gt;&#x27;</span> . $value . PHP_EOL;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"IteratorAggregate\"><a href=\"#IteratorAggregate\" class=\"headerlink\" title=\"IteratorAggregate\"></a>IteratorAggregate</h2><p></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyIteratorAggregate</span> <span class=\"keyword\">implements</span> <span class=\"title\">IteratorAggregate</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> $property1 = <span class=\"string\">&quot;Public property one&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> $property2 = <span class=\"string\">&quot;Public property two&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> $property3 = <span class=\"string\">&quot;Public property three&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> $arr = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;property4 = <span class=\"string\">&quot;last property&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 5(rewind valid key current next),</span></span><br><span class=\"line\"><span class=\"comment\">     * ArrayIterator</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> ArrayIterator</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getIterator</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//return new ArrayIterator($this);</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">ArrayIterator</span>(<span class=\"keyword\">$this</span>-&gt;arr);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$obj = <span class=\"keyword\">new</span> MyIteratorAggregate;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">foreach</span> ($obj <span class=\"keyword\">as</span> $key =&gt; $value) &#123;</span><br><span class=\"line\">    var_dump($key, $value);</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">&quot;\\n&quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"LimitIterator\"><a href=\"#LimitIterator\" class=\"headerlink\" title=\"LimitIterator\"></a>LimitIterator</h2><p></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*** the offset value ***/</span></span><br><span class=\"line\">$offset = <span class=\"number\">3</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*** the limit of records to show ***/</span></span><br><span class=\"line\">$limit = <span class=\"number\">2</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">$array = [<span class=\"string\">&#x27;koala&#x27;</span>, <span class=\"string\">&#x27;kangaroo&#x27;</span>, <span class=\"string\">&#x27;wombat&#x27;</span>, <span class=\"string\">&#x27;wallaby&#x27;</span>, <span class=\"string\">&#x27;emu&#x27;</span>, <span class=\"string\">&#x27;kiwi&#x27;</span>, <span class=\"string\">&#x27;kookaburra&#x27;</span>, <span class=\"string\">&#x27;platypus&#x27;</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">$it = <span class=\"keyword\">new</span> <span class=\"built_in\">LimitIterator</span>(<span class=\"keyword\">new</span> <span class=\"built_in\">ArrayIterator</span>($array), $offset, $limit);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">foreach</span> ($it <span class=\"keyword\">as</span> $k =&gt; $v) &#123;</span><br><span class=\"line\">    <span class=\"comment\">//echo $it-&gt;getPosition() . PHP_EOL;</span></span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $k .<span class=\"string\">&#x27;=&gt;&#x27;</span>.$v . PHP_EOL;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$array = [<span class=\"string\">&#x27;koala&#x27;</span>, <span class=\"string\">&#x27;kangaroo&#x27;</span>, <span class=\"string\">&#x27;wombat&#x27;</span>, <span class=\"string\">&#x27;wallaby&#x27;</span>, <span class=\"string\">&#x27;emu&#x27;</span>, <span class=\"string\">&#x27;kiwi&#x27;</span>, <span class=\"string\">&#x27;kookaburra&#x27;</span>, <span class=\"string\">&#x27;platypus&#x27;</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">$it = <span class=\"keyword\">new</span> <span class=\"built_in\">LimitIterator</span>(<span class=\"keyword\">new</span> <span class=\"built_in\">ArrayIterator</span>($array));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    $it-&gt;seek(<span class=\"number\">5</span>);</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $it-&gt;current();</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (<span class=\"built_in\">OutOfBoundsException</span> $e) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $e-&gt;getMessage() . PHP_EOL;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"RecursiveIteratorIterator\"><a href=\"#RecursiveIteratorIterator\" class=\"headerlink\" title=\"RecursiveIteratorIterator\"></a>RecursiveIteratorIterator</h2><p></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">$array = [</span><br><span class=\"line\">    [<span class=\"string\">&#x27;name&#x27;</span> =&gt; <span class=\"string\">&#x27;butch&#x27;</span>, <span class=\"string\">&#x27;sex&#x27;</span> =&gt; <span class=\"string\">&#x27;m&#x27;</span>, <span class=\"string\">&#x27;breed&#x27;</span> =&gt; <span class=\"string\">&#x27;boxer&#x27;</span>],</span><br><span class=\"line\">    [<span class=\"string\">&#x27;name&#x27;</span> =&gt; <span class=\"string\">&#x27;fido&#x27;</span>, <span class=\"string\">&#x27;sex&#x27;</span> =&gt; <span class=\"string\">&#x27;m&#x27;</span>, <span class=\"string\">&#x27;breed&#x27;</span> =&gt; <span class=\"string\">&#x27;doberman&#x27;</span>],</span><br><span class=\"line\">    [<span class=\"string\">&#x27;name&#x27;</span> =&gt; <span class=\"string\">&#x27;girly&#x27;</span>, <span class=\"string\">&#x27;sex&#x27;</span> =&gt; <span class=\"string\">&#x27;f&#x27;</span>, <span class=\"string\">&#x27;breed&#x27;</span> =&gt; <span class=\"string\">&#x27;poodle&#x27;</span>],</span><br><span class=\"line\">];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">foreach</span> (<span class=\"keyword\">new</span> <span class=\"built_in\">RecursiveIteratorIterator</span>(<span class=\"keyword\">new</span> <span class=\"built_in\">RecursiveArrayIterator</span>($array)) <span class=\"keyword\">as</span> $key =&gt; $value) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $key . <span class=\"string\">&#x27;-&gt;&#x27;</span> . $value . PHP_EOL;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"SimpleXMLIterator\"><a href=\"#SimpleXMLIterator\" class=\"headerlink\" title=\"SimpleXMLIterator\"></a>SimpleXMLIterator</h2><p>XML</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*** a simple xml tree ***/</span></span><br><span class=\"line\">$xmlstring = &lt;&lt;&lt;XML</span><br><span class=\"line\"><span class=\"meta\">&lt;?</span>xml version = <span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span> standalone=<span class=\"string\">&quot;yes&quot;</span><span class=\"meta\">?&gt;</span></span><br><span class=\"line\">&lt;document&gt;</span><br><span class=\"line\">  &lt;animal&gt;</span><br><span class=\"line\">    &lt;category id=<span class=\"string\">&quot;48&quot;</span>&gt;</span><br><span class=\"line\">      &lt;species&gt;monotremes&lt;/species&gt;</span><br><span class=\"line\">      &lt;type&gt;platypus&lt;/type&gt;</span><br><span class=\"line\">      &lt;name&gt;Bruce&lt;/name&gt;</span><br><span class=\"line\">    &lt;/category&gt;</span><br><span class=\"line\">  &lt;/animal&gt;</span><br><span class=\"line\">  &lt;animal&gt;</span><br><span class=\"line\">    &lt;category id=<span class=\"string\">&quot;4&quot;</span>&gt;</span><br><span class=\"line\">      &lt;species&gt;arachnid&lt;/species&gt;</span><br><span class=\"line\">      &lt;type&gt;funnel web&lt;/type&gt;</span><br><span class=\"line\">      &lt;name&gt;Bruce&lt;/name&gt;</span><br><span class=\"line\">      &lt;legs&gt;<span class=\"number\">8</span>&lt;/legs&gt;</span><br><span class=\"line\">    &lt;/category&gt;</span><br><span class=\"line\">  &lt;/animal&gt;</span><br><span class=\"line\">&lt;/document&gt;</span><br><span class=\"line\">XML;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*** a new simpleXML iterator object ***/</span></span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/*** a new simple xml iterator ***/</span></span><br><span class=\"line\">    $it = <span class=\"keyword\">new</span> SimpleXMLIterator($xmlstring);</span><br><span class=\"line\">    <span class=\"comment\">/*** a new limitIterator object ***/</span></span><br><span class=\"line\">    <span class=\"keyword\">foreach</span> (<span class=\"keyword\">new</span> <span class=\"built_in\">RecursiveIteratorIterator</span>($it, <span class=\"number\">1</span>) <span class=\"keyword\">as</span> $name =&gt; $data) &#123;</span><br><span class=\"line\">        <span class=\"comment\">//echo $name . &#x27;=&gt;&#x27; . $data . PHP_EOL;</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($name == <span class=\"string\">&#x27;animal&#x27;</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">//var_dump($data);</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (<span class=\"built_in\">Exception</span> $e) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $e-&gt;getMessage();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/*** a new simpleXML iterator object ***/</span></span><br><span class=\"line\">    $sxi =  <span class=\"keyword\">new</span> SimpleXMLIterator($xmlstring);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/*** set the xpath ***/</span></span><br><span class=\"line\">    $foo = $sxi-&gt;xpath(<span class=\"string\">&#x27;animal/category/species&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/*** iterate over the xpath ***/</span></span><br><span class=\"line\">    <span class=\"keyword\">foreach</span> ($foo <span class=\"keyword\">as</span> $k=&gt;$v)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> $v.PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">catch</span>(<span class=\"built_in\">Exception</span> $e)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $e-&gt;getMessage();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://www.php.net/manual/zh/spl.iterators.php\">PHP</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PHP SPL ArrayAccess</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Iterator\"><a href=\"#Iterator\" class=\"headerlink\" title=\"Iterator\"></a>Iterator</h2><p></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyIterator</span> <span class=\"keyword\">implements</span> <span class=\"title\">Iterator</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $array = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $valid = <span class=\"literal\">false</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"><span class=\"keyword\">array</span> $array</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;array = $array;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">rewind</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;valid = (<span class=\"literal\">false</span> !== reset(<span class=\"keyword\">$this</span>-&gt;array));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">current</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> current(<span class=\"keyword\">$this</span>-&gt;array);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> int</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">key</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> key(<span class=\"keyword\">$this</span>-&gt;array);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">next</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;valid = (<span class=\"literal\">false</span> !== next(<span class=\"keyword\">$this</span>-&gt;array));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> bool</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">valid</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;valid;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$array = [</span><br><span class=\"line\">    <span class=\"string\">&#x27;a&#x27;</span> =&gt; <span class=\"string\">&quot;firstelement&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;secondelement&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;lastelement&quot;</span>,</span><br><span class=\"line\">];</span><br><span class=\"line\">$it = <span class=\"keyword\">new</span> MyIterator($array);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">foreach</span> ($it <span class=\"keyword\">as</span> $key =&gt; $value) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">&quot;<span class=\"subst\">&#123;$key&#125;</span>=&gt;<span class=\"subst\">&#123;$value&#125;</span>\\n&quot;</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$it-&gt;rewind();</span><br><span class=\"line\"><span class=\"keyword\">while</span> ($it-&gt;valid()) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">&quot;<span class=\"subst\">&#123;$it-&gt;key()&#125;</span>=&gt;<span class=\"subst\">&#123;$it-&gt;current()&#125;</span>\\n&quot;</span>;</span><br><span class=\"line\">    $it-&gt;next();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Countable\"><a href=\"#Countable\" class=\"headerlink\" title=\"Countable\"></a>Countable</h2><p></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyCountable</span> <span class=\"keyword\">implements</span> <span class=\"title\">Countable</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $myCount = <span class=\"number\">3</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">count</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;myCount;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$countable = <span class=\"keyword\">new</span> MyCountable();</span><br><span class=\"line\">var_dump($countable-&gt;count());</span><br><span class=\"line\">var_dump(count($countable));</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"AppendIterator\"><a href=\"#AppendIterator\" class=\"headerlink\" title=\"AppendIterator\"></a>AppendIterator</h2><p><code></code></p>\n<p></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"></span><br><span class=\"line\">$arrayIteratorOne = <span class=\"keyword\">new</span> <span class=\"built_in\">ArrayIterator</span>([<span class=\"string\">&#x27;a&#x27;</span>, <span class=\"string\">&#x27;b&#x27;</span>, <span class=\"string\">&#x27;c&#x27;</span>]);</span><br><span class=\"line\">$arrayIteratorTwo = <span class=\"keyword\">new</span> <span class=\"built_in\">ArrayIterator</span>([<span class=\"string\">&#x27;d&#x27;</span>, <span class=\"string\">&#x27;e&#x27;</span>, <span class=\"string\">&#x27;f&#x27;</span>]);</span><br><span class=\"line\"></span><br><span class=\"line\">$iterator = <span class=\"keyword\">new</span> <span class=\"built_in\">AppendIterator</span>;</span><br><span class=\"line\">$iterator-&gt;append($arrayIteratorOne);</span><br><span class=\"line\">$iterator-&gt;append($arrayIteratorTwo);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">foreach</span> ($iterator <span class=\"keyword\">as</span> $current) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $current . PHP_EOL;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// a b c d e f</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ArrayAccess\"><a href=\"#ArrayAccess\" class=\"headerlink\" title=\"ArrayAccess\"></a>ArrayAccess</h2><p><code></code></p>\n<p>model</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyArrayAccess</span> <span class=\"keyword\">implements</span> <span class=\"title\">ArrayAccess</span>, <span class=\"title\">IteratorAggregate</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $container = [];</span><br><span class=\"line\">    <span class=\"keyword\">public</span> $title;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> $author;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> $category;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">$title, $author, $category</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;container = [</span><br><span class=\"line\">            <span class=\"string\">&quot;one&quot;</span>   =&gt; <span class=\"number\">1</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;two&quot;</span>   =&gt; <span class=\"number\">2</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;three&quot;</span> =&gt; <span class=\"number\">3</span>,</span><br><span class=\"line\">        ];</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;title = $title;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;author = $author;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;category = $category;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $offset</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $value</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">offsetSet</span>(<span class=\"params\">$offset, $value</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;&#123;$offset&#125; = $value;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $offset</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> bool</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">offsetExists</span>(<span class=\"params\">$offset</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">isset</span>(<span class=\"keyword\">$this</span>-&gt;&#123;$offset&#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $offset</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">offsetUnset</span>(<span class=\"params\">$offset</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">unset</span>(<span class=\"keyword\">$this</span>-&gt;&#123;$offset&#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $offset</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed|null</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">offsetGet</span>(<span class=\"params\">$offset</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">isset</span>(<span class=\"keyword\">$this</span>-&gt;&#123;$offset&#125;) ? <span class=\"keyword\">$this</span>-&gt;&#123;$offset&#125; : <span class=\"literal\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getIterator</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">ArrayIterator</span>(<span class=\"keyword\">$this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$obj = <span class=\"keyword\">new</span> MyArrayAccess(<span class=\"string\">&#x27;a&#x27;</span>, <span class=\"string\">&#x27;wen&#x27;</span>, <span class=\"string\">&#x27;new&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">var_dump(<span class=\"keyword\">isset</span>($obj[<span class=\"string\">&#x27;title&#x27;</span>]));</span><br><span class=\"line\">var_dump($obj[<span class=\"string\">&quot;title&quot;</span>]);</span><br><span class=\"line\"><span class=\"keyword\">unset</span>($obj[<span class=\"string\">&quot;title&quot;</span>]);</span><br><span class=\"line\">var_dump(<span class=\"keyword\">isset</span>($obj[<span class=\"string\">&quot;title&quot;</span>]));</span><br><span class=\"line\">$obj[<span class=\"string\">&quot;title&quot;</span>] = <span class=\"string\">&quot;A value&quot;</span>;</span><br><span class=\"line\">var_dump($obj[<span class=\"string\">&quot;title&quot;</span>]);</span><br><span class=\"line\">$obj[<span class=\"string\">&#x27;a&#x27;</span>] = <span class=\"string\">&#x27;Append 1&#x27;</span>;</span><br><span class=\"line\">$obj[<span class=\"string\">&#x27;b&#x27;</span>] = <span class=\"string\">&#x27;Append 2&#x27;</span>;</span><br><span class=\"line\">$obj[<span class=\"string\">&#x27;c&#x27;</span>] = <span class=\"string\">&#x27;Append 3&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">foreach</span> ($obj <span class=\"keyword\">as</span> $field =&gt; $value) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">&quot;<span class=\"subst\">$field</span>=&gt;<span class=\"subst\">$value</span>\\n&quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ArrayIterator\"><a href=\"#ArrayIterator\" class=\"headerlink\" title=\"ArrayIterator\"></a>ArrayIterator</h2><p><code></code></p>\n<p>ArrayAccess , SeekableIterator , Countable , Serializable</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"></span><br><span class=\"line\">$array = [<span class=\"string\">&#x27;a&#x27;</span>, <span class=\"string\">&#x27;b&#x27;</span>, <span class=\"string\">&#x27;c&#x27;</span>, <span class=\"string\">&#x27;d&#x27;</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    $object = <span class=\"keyword\">new</span> <span class=\"built_in\">ArrayIterator</span>($array);</span><br><span class=\"line\">    <span class=\"keyword\">foreach</span> ($object <span class=\"keyword\">as</span> $key =&gt; $value) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> $key . <span class=\"string\">&#x27; =&gt; &#x27;</span> . $value . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (<span class=\"built_in\">Exception</span> $e) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $e-&gt;getMessage();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ArrayObject\"><a href=\"#ArrayObject\" class=\"headerlink\" title=\"ArrayObject\"></a>ArrayObject</h2><p>foreach</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"></span><br><span class=\"line\">$array = [<span class=\"string\">&#x27;a&#x27;</span>, <span class=\"string\">&#x27;b&#x27;</span>, <span class=\"string\">&#x27;c&#x27;</span>, <span class=\"string\">&#x27;d&#x27;</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">$arrayObj = <span class=\"keyword\">new</span> <span class=\"built_in\">ArrayObject</span>($array);</span><br><span class=\"line\">$arrayObj-&gt;append(<span class=\"string\">&#x27;e&#x27;</span>);</span><br><span class=\"line\">$arrayObj-&gt;natcasesort();</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">&#x27;count-&gt;&#x27;</span> . $arrayObj-&gt;count() . PHP_EOL;</span><br><span class=\"line\">$arrayObj-&gt;offsetUnset(<span class=\"number\">3</span>);</span><br><span class=\"line\"><span class=\"keyword\">if</span> ($arrayObj-&gt;offsetExists(<span class=\"number\">2</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;Offset Exists&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">$arrayObj-&gt;offsetSet(<span class=\"number\">5</span>, <span class=\"string\">&#x27;f&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> $arrayObj-&gt;offsetGet(<span class=\"number\">4</span>) . PHP_EOL;</span><br><span class=\"line\"><span class=\"keyword\">for</span> ($iterator = $arrayObj-&gt;getIterator();</span><br><span class=\"line\">     $iterator-&gt;valid();</span><br><span class=\"line\">     $iterator-&gt;next()) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $iterator-&gt;key() . <span class=\"string\">&#x27; =&gt; &#x27;</span> . $iterator-&gt;current() . PHP_EOL;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"CachingIterator\"><a href=\"#CachingIterator\" class=\"headerlink\" title=\"CachingIterator\"></a>CachingIterator</h2><p></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"></span><br><span class=\"line\">$array = [<span class=\"string\">&#x27;a&#x27;</span>, <span class=\"string\">&#x27;b&#x27;</span>, <span class=\"string\">&#x27;c&#x27;</span>, <span class=\"string\">&#x27;d&#x27;</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    $object = <span class=\"keyword\">new</span> <span class=\"built_in\">CachingIterator</span>(<span class=\"keyword\">new</span> <span class=\"built_in\">ArrayIterator</span>($array));</span><br><span class=\"line\">    <span class=\"keyword\">foreach</span> ($object <span class=\"keyword\">as</span> $value) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> $value . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (<span class=\"built_in\">Exception</span> $e) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $e-&gt;getMessage();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"DirectoryIterator\"><a href=\"#DirectoryIterator\" class=\"headerlink\" title=\"DirectoryIterator\"></a>DirectoryIterator</h2><p></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">foreach</span> (<span class=\"keyword\">new</span> <span class=\"built_in\">DirectoryIterator</span>(<span class=\"keyword\">__DIR__</span>) <span class=\"keyword\">as</span> $item) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($item-&gt;getFilename() == <span class=\"string\">&#x27;ArrayObject.php&#x27;</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;getFilename()-&gt;&#x27;</span> . $item-&gt;getFilename() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;isDot()-&gt;&#x27;</span> . $item-&gt;isDot() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;__toString()-&gt;&#x27;</span> . $item-&gt;__toString() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;getPath()-&gt;&#x27;</span> . $item-&gt;getPath() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;getPathname()-&gt;&#x27;</span> . $item-&gt;getPathname() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;getPerms()-&gt;&#x27;</span> . $item-&gt;getPerms() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;getInode()-&gt;&#x27;</span> . $item-&gt;getInode() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;getSize()-&gt;&#x27;</span> . $item-&gt;getSize() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;getOwner()-&gt;&#x27;</span> . $item-&gt;getOwner() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;getGroup()-&gt;&#x27;</span> . $item-&gt;getGroup() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;getATime()-&gt;&#x27;</span> . $item-&gt;getATime() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;getMTime()-&gt;&#x27;</span> . $item-&gt;getMTime() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;getCTime()-&gt;&#x27;</span> . $item-&gt;getCTime() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;getType()-&gt;&#x27;</span> . $item-&gt;getType() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;isWritable()-&gt;&#x27;</span> . $item-&gt;isWritable() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;isReadable()-&gt;&#x27;</span> . $item-&gt;isReadable() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;isExecutable()-&gt;&#x27;</span> . $item-&gt;isExecutable() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;isFile()-&gt;&#x27;</span> . $item-&gt;isFile() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;isDir()-&gt;&#x27;</span> . $item-&gt;isDir() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;isLink()-&gt;&#x27;</span> . $item-&gt;isLink() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;getFileInfo()-&gt;&#x27;</span> . $item-&gt;getFileInfo() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;getPathInfo()-&gt;&#x27;</span> . $item-&gt;getPathInfo() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;setFileClass()-&gt;&#x27;</span> . $item-&gt;setFileClass() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;setInfoClass()-&gt;&#x27;</span> . $item-&gt;setInfoClass() . PHP_EOL;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;openFile()-&gt;&#x27;</span> . $item-&gt;openFile() . PHP_EOL;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (<span class=\"built_in\">Exception</span> $e) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;No files Found!&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"FilterIterator\"><a href=\"#FilterIterator\" class=\"headerlink\" title=\"FilterIterator\"></a>FilterIterator</h2><p>array_filter</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"></span><br><span class=\"line\">$animals = [<span class=\"string\">&#x27;koala&#x27;</span>, <span class=\"string\">&#x27;kangaroo&#x27;</span>, <span class=\"string\">&#x27;wombat&#x27;</span>, <span class=\"string\">&#x27;wallaby&#x27;</span>, <span class=\"string\">&#x27;emu&#x27;</span>, <span class=\"string\">&#x27;NZ&#x27;</span> =&gt; <span class=\"string\">&#x27;kiwi&#x27;</span>, <span class=\"string\">&#x27;kookaburra&#x27;</span>, <span class=\"string\">&#x27;platypus&#x27;</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CullingIterator</span> <span class=\"keyword\">extends</span> <span class=\"title\">FilterIterator</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/*** The filteriterator takes  a iterator as param: ***/</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"><span class=\"built_in\">Iterator</span> $it</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">parent</span>::__construct($it);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/*** check if key is numeric ***/</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">accept</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> is_numeric(<span class=\"keyword\">$this</span>-&gt;key());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*** end of class ***/</span></span><br><span class=\"line\">$cull = <span class=\"keyword\">new</span> CullingIterator(<span class=\"keyword\">new</span> <span class=\"built_in\">ArrayIterator</span>($animals));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">foreach</span> ($cull <span class=\"keyword\">as</span> $key =&gt; $value) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $key . <span class=\"string\">&#x27;=&gt;&#x27;</span> . $value . PHP_EOL;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"IteratorAggregate\"><a href=\"#IteratorAggregate\" class=\"headerlink\" title=\"IteratorAggregate\"></a>IteratorAggregate</h2><p></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyIteratorAggregate</span> <span class=\"keyword\">implements</span> <span class=\"title\">IteratorAggregate</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> $property1 = <span class=\"string\">&quot;Public property one&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> $property2 = <span class=\"string\">&quot;Public property two&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> $property3 = <span class=\"string\">&quot;Public property three&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> $arr = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;property4 = <span class=\"string\">&quot;last property&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 5(rewind valid key current next),</span></span><br><span class=\"line\"><span class=\"comment\">     * ArrayIterator</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> ArrayIterator</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getIterator</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//return new ArrayIterator($this);</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">ArrayIterator</span>(<span class=\"keyword\">$this</span>-&gt;arr);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$obj = <span class=\"keyword\">new</span> MyIteratorAggregate;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">foreach</span> ($obj <span class=\"keyword\">as</span> $key =&gt; $value) &#123;</span><br><span class=\"line\">    var_dump($key, $value);</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">&quot;\\n&quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"LimitIterator\"><a href=\"#LimitIterator\" class=\"headerlink\" title=\"LimitIterator\"></a>LimitIterator</h2><p></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*** the offset value ***/</span></span><br><span class=\"line\">$offset = <span class=\"number\">3</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*** the limit of records to show ***/</span></span><br><span class=\"line\">$limit = <span class=\"number\">2</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">$array = [<span class=\"string\">&#x27;koala&#x27;</span>, <span class=\"string\">&#x27;kangaroo&#x27;</span>, <span class=\"string\">&#x27;wombat&#x27;</span>, <span class=\"string\">&#x27;wallaby&#x27;</span>, <span class=\"string\">&#x27;emu&#x27;</span>, <span class=\"string\">&#x27;kiwi&#x27;</span>, <span class=\"string\">&#x27;kookaburra&#x27;</span>, <span class=\"string\">&#x27;platypus&#x27;</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">$it = <span class=\"keyword\">new</span> <span class=\"built_in\">LimitIterator</span>(<span class=\"keyword\">new</span> <span class=\"built_in\">ArrayIterator</span>($array), $offset, $limit);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">foreach</span> ($it <span class=\"keyword\">as</span> $k =&gt; $v) &#123;</span><br><span class=\"line\">    <span class=\"comment\">//echo $it-&gt;getPosition() . PHP_EOL;</span></span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $k .<span class=\"string\">&#x27;=&gt;&#x27;</span>.$v . PHP_EOL;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$array = [<span class=\"string\">&#x27;koala&#x27;</span>, <span class=\"string\">&#x27;kangaroo&#x27;</span>, <span class=\"string\">&#x27;wombat&#x27;</span>, <span class=\"string\">&#x27;wallaby&#x27;</span>, <span class=\"string\">&#x27;emu&#x27;</span>, <span class=\"string\">&#x27;kiwi&#x27;</span>, <span class=\"string\">&#x27;kookaburra&#x27;</span>, <span class=\"string\">&#x27;platypus&#x27;</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">$it = <span class=\"keyword\">new</span> <span class=\"built_in\">LimitIterator</span>(<span class=\"keyword\">new</span> <span class=\"built_in\">ArrayIterator</span>($array));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    $it-&gt;seek(<span class=\"number\">5</span>);</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $it-&gt;current();</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (<span class=\"built_in\">OutOfBoundsException</span> $e) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $e-&gt;getMessage() . PHP_EOL;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"RecursiveIteratorIterator\"><a href=\"#RecursiveIteratorIterator\" class=\"headerlink\" title=\"RecursiveIteratorIterator\"></a>RecursiveIteratorIterator</h2><p></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">$array = [</span><br><span class=\"line\">    [<span class=\"string\">&#x27;name&#x27;</span> =&gt; <span class=\"string\">&#x27;butch&#x27;</span>, <span class=\"string\">&#x27;sex&#x27;</span> =&gt; <span class=\"string\">&#x27;m&#x27;</span>, <span class=\"string\">&#x27;breed&#x27;</span> =&gt; <span class=\"string\">&#x27;boxer&#x27;</span>],</span><br><span class=\"line\">    [<span class=\"string\">&#x27;name&#x27;</span> =&gt; <span class=\"string\">&#x27;fido&#x27;</span>, <span class=\"string\">&#x27;sex&#x27;</span> =&gt; <span class=\"string\">&#x27;m&#x27;</span>, <span class=\"string\">&#x27;breed&#x27;</span> =&gt; <span class=\"string\">&#x27;doberman&#x27;</span>],</span><br><span class=\"line\">    [<span class=\"string\">&#x27;name&#x27;</span> =&gt; <span class=\"string\">&#x27;girly&#x27;</span>, <span class=\"string\">&#x27;sex&#x27;</span> =&gt; <span class=\"string\">&#x27;f&#x27;</span>, <span class=\"string\">&#x27;breed&#x27;</span> =&gt; <span class=\"string\">&#x27;poodle&#x27;</span>],</span><br><span class=\"line\">];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">foreach</span> (<span class=\"keyword\">new</span> <span class=\"built_in\">RecursiveIteratorIterator</span>(<span class=\"keyword\">new</span> <span class=\"built_in\">RecursiveArrayIterator</span>($array)) <span class=\"keyword\">as</span> $key =&gt; $value) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $key . <span class=\"string\">&#x27;-&gt;&#x27;</span> . $value . PHP_EOL;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"SimpleXMLIterator\"><a href=\"#SimpleXMLIterator\" class=\"headerlink\" title=\"SimpleXMLIterator\"></a>SimpleXMLIterator</h2><p>XML</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*** a simple xml tree ***/</span></span><br><span class=\"line\">$xmlstring = &lt;&lt;&lt;XML</span><br><span class=\"line\"><span class=\"meta\">&lt;?</span>xml version = <span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span> standalone=<span class=\"string\">&quot;yes&quot;</span><span class=\"meta\">?&gt;</span></span><br><span class=\"line\">&lt;document&gt;</span><br><span class=\"line\">  &lt;animal&gt;</span><br><span class=\"line\">    &lt;category id=<span class=\"string\">&quot;48&quot;</span>&gt;</span><br><span class=\"line\">      &lt;species&gt;monotremes&lt;/species&gt;</span><br><span class=\"line\">      &lt;type&gt;platypus&lt;/type&gt;</span><br><span class=\"line\">      &lt;name&gt;Bruce&lt;/name&gt;</span><br><span class=\"line\">    &lt;/category&gt;</span><br><span class=\"line\">  &lt;/animal&gt;</span><br><span class=\"line\">  &lt;animal&gt;</span><br><span class=\"line\">    &lt;category id=<span class=\"string\">&quot;4&quot;</span>&gt;</span><br><span class=\"line\">      &lt;species&gt;arachnid&lt;/species&gt;</span><br><span class=\"line\">      &lt;type&gt;funnel web&lt;/type&gt;</span><br><span class=\"line\">      &lt;name&gt;Bruce&lt;/name&gt;</span><br><span class=\"line\">      &lt;legs&gt;<span class=\"number\">8</span>&lt;/legs&gt;</span><br><span class=\"line\">    &lt;/category&gt;</span><br><span class=\"line\">  &lt;/animal&gt;</span><br><span class=\"line\">&lt;/document&gt;</span><br><span class=\"line\">XML;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*** a new simpleXML iterator object ***/</span></span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/*** a new simple xml iterator ***/</span></span><br><span class=\"line\">    $it = <span class=\"keyword\">new</span> SimpleXMLIterator($xmlstring);</span><br><span class=\"line\">    <span class=\"comment\">/*** a new limitIterator object ***/</span></span><br><span class=\"line\">    <span class=\"keyword\">foreach</span> (<span class=\"keyword\">new</span> <span class=\"built_in\">RecursiveIteratorIterator</span>($it, <span class=\"number\">1</span>) <span class=\"keyword\">as</span> $name =&gt; $data) &#123;</span><br><span class=\"line\">        <span class=\"comment\">//echo $name . &#x27;=&gt;&#x27; . $data . PHP_EOL;</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($name == <span class=\"string\">&#x27;animal&#x27;</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">//var_dump($data);</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (<span class=\"built_in\">Exception</span> $e) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $e-&gt;getMessage();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/*** a new simpleXML iterator object ***/</span></span><br><span class=\"line\">    $sxi =  <span class=\"keyword\">new</span> SimpleXMLIterator($xmlstring);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/*** set the xpath ***/</span></span><br><span class=\"line\">    $foo = $sxi-&gt;xpath(<span class=\"string\">&#x27;animal/category/species&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/*** iterate over the xpath ***/</span></span><br><span class=\"line\">    <span class=\"keyword\">foreach</span> ($foo <span class=\"keyword\">as</span> $k=&gt;$v)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> $v.PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">catch</span>(<span class=\"built_in\">Exception</span> $e)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $e-&gt;getMessage();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n"},{"url":"/2020/03/26/git-command.html","title":"Git ","keywords":"Git ","description":"Git ","date":"2020-03-26T06:53:12.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"## git init\ngit\n\n`git init` \n\n`git init --bare` \n```\n.git\nadd, commit, delete\n\n.git\npush\nclonepush\n```\n\nwwwhomeclone\n\n\n```\nmkdir git_test && cd git_test && git init --bare\n```\n\n\n```\nssh-copy-id www@ip\n\ngit clone ssh://www@ip/~/git_test\n\ntouch readme.md\n\ngit add .\n\ngit commit -m \"first commit\"\n\ngit push\n```\n\n## git config\ngit\n\n`git config user.name \"xxx\"` \n\n`git config user.email \"xxx@xxx.com\"` \n\n`git config --global color.ui true` git status\n\n```\ngit config --global http.proxy 'socks5://127.0.0.1:1080'\ngit config --global https.proxy 'socks5://127.0.0.1:1080'\n\ngit config --global --unset http.proxy\ngit config --global --unset https.proxy\n```\n\ngitCRLF\n\n`git config --global core.autocrlf true` LFCRLF\n\n`git config --global core.autocrlf input` LF\n\n`git config --global core.autocrlf false` \n\n`git config --global core.safecrlf true` \n\n`git config --global core.safecrlf false` \n\n`git config --global core.safecrlf warn` \n\n `--global` \n\n## git clone\n\nclone\n\n`git clone git+ssh://git@192.168.53.168/VT.git`\n\n## git submodule\n\n\n\n`git submodule add https://github.com/wenjy/maupassant-hugo.git themes/maupassant`\n\n`git submodule update --remote` \n\n```\ngit Submodule repositorygit\ncommitpushpullSubmoduleheader\nSubmodulecloneSubmodule\n```\n\n## git status\n                                                \n\n\n## git add\n\nindex\n\n`git add xyz ` xyzindex\n\n`git add .` index\n\n## git commit\n\n\n\n`git commit -m 'xxx'` \n\n`git commit --amend -m 'xxx'` \n\n`git commit -am 'xxx'` addcommit\n\n## git rm\n\nindex\n\n`git rm xxx` indexxxx\n\n`git rm -r *` \n\n## git log\n\n\n\n`git log` \n\n`git log -1` 1 -nn\n\n`git log --stat` \n\n`git log -p -m`  diff\n\n`git log v2.0` tag v2.0\n\n`git log --pretty=format:'%h' --graph` \n\n## git show\n\n\n\n`git show dfb02e6e4f2f7b573337763e5c0013802e392818` \n\n`git show dfb02` commitid\n\n`git show HEAD` HEAD\n\n`git show HEAD^` HEAD ^^ ^55\n\n`git show v2.0` tag v2.0\n\n`git show master@{yesterday}` master\n\n\n## git ls-files                                              \ngit index\n\n## git show-branch                                           \n\n\n`git show-branch --all` \n\n## git whatchanged                                          \n\n\n## git reflog                                                \n\n\n```\ngit commit id commitcommitHEAD\ncommit merge commit\n```\n\n## git tag\n\n`git tag` tag\n\n`git tag -a v2.0 -m 'xxx'` v2.0tag\n\n\n## git diff\nindex\n\n`git diff` index\n\n`git diff --cached` indexcommit\n\n`git diff HEAD^` \n\n`git diff HEAD -- ./lib` HEADlib\n\n`git diff origin/master..master` mastermaster\n\n`git diff origin/master..master --stat` \n\n## git remote\n\n\n\n`git remote add origin git+ssh://git@192.168.53.168/VT.git` push/pull/fetch\n\n`git remote rename origin origin_new` \n\n`git remote remove origin_new` \n\n`git remote show` \n\n`git remote show origin` \n\n## git branch\n\n\n\n`git branch` \n\n`git branch --contains 50089` 50089\n\n`git branch -a` \n\n`git branch -r` \n\n`git branch --merged` \n\n`git branch --no-merged` \n\n`git branch -m master master_copy` \n\n`git branch -d hotfixes/BJVEP933` hotfixes/BJVEP933\n\n`git branch -D hotfixes/BJVEP933` hotfixes/BJVEP933\n\n## git checkout\n\n\n\n`git checkout -b master_copy` master_copy\n\n`git checkout -b master master_copy` \n\n`git checkout features/performance` features/performance\n\n`git checkout --track hotfixes/BJVEP933` hotfixes/BJVEP933\n\n`git checkout v2.0` v2.0\n\n`git checkout -b develop origin/develop` developdevelop\n\n`git checkout -- README` headREADME`--` tag\n\n## git merge\n\n\n\n`git merge origin/master` master\n\n```\nfast-forwardgitHEAD\ncommit\n```\n\n`git merge --no-ff origin/master` fast-forwardfast-forwardcommit\n\n`git merge --squash origin/master` commitcommit\n\n\n## git cherry-pick\n\n\n`git cherry-pick ff44785404a8e` ff44785404a8e\n```\ncommit(s)\nv2.0v3.0\nv3.0v2.0cherry-pick,commit \n```\n`git cherry-pick (--continue | --quit | --abort)` \n\n`git cherry-pick -x <commit id>` \n\n`git cherry-pick <start-commit-id>..<end-commit-id>` Git1.7.2cherry-pickcherry-pickcommit\n\n`git cherry-pick <start-commit-id>^..<end-commit-id>`\n```\n<start-commit-id><end-commit-id>(start-commit-id)cherry-pick\n\"^\"<start-commit-id><end-commit-id>(start-commit-id)cherry-pick\n<start-commit-id><end-commit-id>commit-id6<start-commit-id><end-commit-id>\n```\n\n\n## git push\n\n\n`git push origin master` pushmaster\n\n`git push origin :hotfixes/BJVEP933` hotfixes/BJVEP933\n\n`git push --tags` tag\n\n## git fetch\nmergeFETCH_HEAD\n\n`git fetch --prune` \n\n## git pull\n\n\n`git pull origin master` mastermerge\n\n `git fetch`merge\n\n\n## git mv\n\n\n`git mv README README2` READMEREADME2\n\n## git reset\n\n\n`git reset --hard HEAD` HEADmerge\n\n`git reset HEAD <file>...` \n\n```\n hard \n git \n git reset --hard ORIG_HEAD  git reflog \n```\n\n`git reset --mixed HEAD` mixed  soft   mixed  soft  add \n\n`git reset --soft HEAD`  commit\n\n\n## git rebase\n```\nrebase  Merge Base \n Fast Forward\nrebase  -f force\n rebase \n```\n\n## git revert\n\n\n\n`git revert dfb02e6` dfb02e6\n```\n revert \n\n\nrevert \n```\n\n## git stash\nHEAD\n\n`git stash list` \n\n`git stash show -p stash@{0}` \n\n`git stash apply stash@{0}` \n\n```\n\nmessage  half of work reset soft  commit amend\n\ngit  stash \n\nstash reset hard stash apply \n\nstash .git/refs/stash\n```\n\n## git grep\n\n\n`git grep \"delete from\"` delete from\n\n\n\n[git ](https://gist.github.com/guweigang/9848271)\n\n[git ](https://blog.coding.net/blog/principle-of-git)\n\n[git](https://git-scm.com/docs)\n","source":"_posts/tools/git_command.md","raw":"---\nurl: /2020/03/26/git-command.html\ntitle: \"Git \"\nkeywords: \"Git \"\ndescription: \"Git \"\ndate: 2020-03-26T22:53:12+08:00\ndraft: false\ntags: [\"Git\"]\ntags_weight: 100\ncategories: [\"Git\"]\ncategoryes_weight: 100\n---\n## git init\ngit\n\n`git init` \n\n`git init --bare` \n```\n.git\nadd, commit, delete\n\n.git\npush\nclonepush\n```\n\nwwwhomeclone\n\n\n```\nmkdir git_test && cd git_test && git init --bare\n```\n\n\n```\nssh-copy-id www@ip\n\ngit clone ssh://www@ip/~/git_test\n\ntouch readme.md\n\ngit add .\n\ngit commit -m \"first commit\"\n\ngit push\n```\n\n## git config\ngit\n\n`git config user.name \"xxx\"` \n\n`git config user.email \"xxx@xxx.com\"` \n\n`git config --global color.ui true` git status\n\n```\ngit config --global http.proxy 'socks5://127.0.0.1:1080'\ngit config --global https.proxy 'socks5://127.0.0.1:1080'\n\ngit config --global --unset http.proxy\ngit config --global --unset https.proxy\n```\n\ngitCRLF\n\n`git config --global core.autocrlf true` LFCRLF\n\n`git config --global core.autocrlf input` LF\n\n`git config --global core.autocrlf false` \n\n`git config --global core.safecrlf true` \n\n`git config --global core.safecrlf false` \n\n`git config --global core.safecrlf warn` \n\n `--global` \n\n## git clone\n\nclone\n\n`git clone git+ssh://git@192.168.53.168/VT.git`\n\n## git submodule\n\n\n\n`git submodule add https://github.com/wenjy/maupassant-hugo.git themes/maupassant`\n\n`git submodule update --remote` \n\n```\ngit Submodule repositorygit\ncommitpushpullSubmoduleheader\nSubmodulecloneSubmodule\n```\n\n## git status\n                                                \n\n\n## git add\n\nindex\n\n`git add xyz ` xyzindex\n\n`git add .` index\n\n## git commit\n\n\n\n`git commit -m 'xxx'` \n\n`git commit --amend -m 'xxx'` \n\n`git commit -am 'xxx'` addcommit\n\n## git rm\n\nindex\n\n`git rm xxx` indexxxx\n\n`git rm -r *` \n\n## git log\n\n\n\n`git log` \n\n`git log -1` 1 -nn\n\n`git log --stat` \n\n`git log -p -m`  diff\n\n`git log v2.0` tag v2.0\n\n`git log --pretty=format:'%h' --graph` \n\n## git show\n\n\n\n`git show dfb02e6e4f2f7b573337763e5c0013802e392818` \n\n`git show dfb02` commitid\n\n`git show HEAD` HEAD\n\n`git show HEAD^` HEAD ^^ ^55\n\n`git show v2.0` tag v2.0\n\n`git show master@{yesterday}` master\n\n\n## git ls-files                                              \ngit index\n\n## git show-branch                                           \n\n\n`git show-branch --all` \n\n## git whatchanged                                          \n\n\n## git reflog                                                \n\n\n```\ngit commit id commitcommitHEAD\ncommit merge commit\n```\n\n## git tag\n\n`git tag` tag\n\n`git tag -a v2.0 -m 'xxx'` v2.0tag\n\n\n## git diff\nindex\n\n`git diff` index\n\n`git diff --cached` indexcommit\n\n`git diff HEAD^` \n\n`git diff HEAD -- ./lib` HEADlib\n\n`git diff origin/master..master` mastermaster\n\n`git diff origin/master..master --stat` \n\n## git remote\n\n\n\n`git remote add origin git+ssh://git@192.168.53.168/VT.git` push/pull/fetch\n\n`git remote rename origin origin_new` \n\n`git remote remove origin_new` \n\n`git remote show` \n\n`git remote show origin` \n\n## git branch\n\n\n\n`git branch` \n\n`git branch --contains 50089` 50089\n\n`git branch -a` \n\n`git branch -r` \n\n`git branch --merged` \n\n`git branch --no-merged` \n\n`git branch -m master master_copy` \n\n`git branch -d hotfixes/BJVEP933` hotfixes/BJVEP933\n\n`git branch -D hotfixes/BJVEP933` hotfixes/BJVEP933\n\n## git checkout\n\n\n\n`git checkout -b master_copy` master_copy\n\n`git checkout -b master master_copy` \n\n`git checkout features/performance` features/performance\n\n`git checkout --track hotfixes/BJVEP933` hotfixes/BJVEP933\n\n`git checkout v2.0` v2.0\n\n`git checkout -b develop origin/develop` developdevelop\n\n`git checkout -- README` headREADME`--` tag\n\n## git merge\n\n\n\n`git merge origin/master` master\n\n```\nfast-forwardgitHEAD\ncommit\n```\n\n`git merge --no-ff origin/master` fast-forwardfast-forwardcommit\n\n`git merge --squash origin/master` commitcommit\n\n\n## git cherry-pick\n\n\n`git cherry-pick ff44785404a8e` ff44785404a8e\n```\ncommit(s)\nv2.0v3.0\nv3.0v2.0cherry-pick,commit \n```\n`git cherry-pick (--continue | --quit | --abort)` \n\n`git cherry-pick -x <commit id>` \n\n`git cherry-pick <start-commit-id>..<end-commit-id>` Git1.7.2cherry-pickcherry-pickcommit\n\n`git cherry-pick <start-commit-id>^..<end-commit-id>`\n```\n<start-commit-id><end-commit-id>(start-commit-id)cherry-pick\n\"^\"<start-commit-id><end-commit-id>(start-commit-id)cherry-pick\n<start-commit-id><end-commit-id>commit-id6<start-commit-id><end-commit-id>\n```\n\n\n## git push\n\n\n`git push origin master` pushmaster\n\n`git push origin :hotfixes/BJVEP933` hotfixes/BJVEP933\n\n`git push --tags` tag\n\n## git fetch\nmergeFETCH_HEAD\n\n`git fetch --prune` \n\n## git pull\n\n\n`git pull origin master` mastermerge\n\n `git fetch`merge\n\n\n## git mv\n\n\n`git mv README README2` READMEREADME2\n\n## git reset\n\n\n`git reset --hard HEAD` HEADmerge\n\n`git reset HEAD <file>...` \n\n```\n hard \n git \n git reset --hard ORIG_HEAD  git reflog \n```\n\n`git reset --mixed HEAD` mixed  soft   mixed  soft  add \n\n`git reset --soft HEAD`  commit\n\n\n## git rebase\n```\nrebase  Merge Base \n Fast Forward\nrebase  -f force\n rebase \n```\n\n## git revert\n\n\n\n`git revert dfb02e6` dfb02e6\n```\n revert \n\n\nrevert \n```\n\n## git stash\nHEAD\n\n`git stash list` \n\n`git stash show -p stash@{0}` \n\n`git stash apply stash@{0}` \n\n```\n\nmessage  half of work reset soft  commit amend\n\ngit  stash \n\nstash reset hard stash apply \n\nstash .git/refs/stash\n```\n\n## git grep\n\n\n`git grep \"delete from\"` delete from\n\n\n\n[git ](https://gist.github.com/guweigang/9848271)\n\n[git ](https://blog.coding.net/blog/principle-of-git)\n\n[git](https://git-scm.com/docs)\n","slug":"tools/git_command","published":1,"updated":"2020-08-28T13:49:02.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf3j002omv050ck8dfnm","content":"<h2 id=\"git-init\"><a href=\"#git-init\" class=\"headerlink\" title=\"git init\"></a>git init</h2><p>git</p>\n<p><code>git init</code> </p>\n<p><code>git init --bare</code> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.git</span><br><span class=\"line\">add, commit, delete</span><br><span class=\"line\"></span><br><span class=\"line\">.git</span><br><span class=\"line\">push</span><br><span class=\"line\">clonepush</span><br></pre></td></tr></table></figure>\n\n<p>wwwhomeclone</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir git_test &amp;&amp; cd git_test &amp;&amp; git init --bare</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-copy-id www@ip</span><br><span class=\"line\"></span><br><span class=\"line\">git clone ssh:&#x2F;&#x2F;www@ip&#x2F;~&#x2F;git_test</span><br><span class=\"line\"></span><br><span class=\"line\">touch readme.md</span><br><span class=\"line\"></span><br><span class=\"line\">git add .</span><br><span class=\"line\"></span><br><span class=\"line\">git commit -m &quot;first commit&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">git push</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"git-config\"><a href=\"#git-config\" class=\"headerlink\" title=\"git config\"></a>git config</h2><p>git</p>\n<p><code>git config user.name &quot;xxx&quot;</code> </p>\n<p><code>git config user.email &quot;xxx@xxx.com&quot;</code> </p>\n<p><code>git config --global color.ui true</code> git status</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config --global http.proxy &#39;socks5:&#x2F;&#x2F;127.0.0.1:1080&#39;</span><br><span class=\"line\">git config --global https.proxy &#39;socks5:&#x2F;&#x2F;127.0.0.1:1080&#39;</span><br><span class=\"line\"></span><br><span class=\"line\">git config --global --unset http.proxy</span><br><span class=\"line\">git config --global --unset https.proxy</span><br></pre></td></tr></table></figure>\n\n<p>gitCRLF</p>\n<p><code>git config --global core.autocrlf true</code> LFCRLF</p>\n<p><code>git config --global core.autocrlf input</code> LF</p>\n<p><code>git config --global core.autocrlf false</code> </p>\n<p><code>git config --global core.safecrlf true</code> </p>\n<p><code>git config --global core.safecrlf false</code> </p>\n<p><code>git config --global core.safecrlf warn</code> </p>\n<p> <code>--global</code> </p>\n<h2 id=\"git-clone\"><a href=\"#git-clone\" class=\"headerlink\" title=\"git clone\"></a>git clone</h2><p>clone</p>\n<p><code>git clone git+ssh://git@192.168.53.168/VT.git</code></p>\n<h2 id=\"git-submodule\"><a href=\"#git-submodule\" class=\"headerlink\" title=\"git submodule\"></a>git submodule</h2><p></p>\n<p><code>git submodule add https://github.com/wenjy/maupassant-hugo.git themes/maupassant</code></p>\n<p><code>git submodule update --remote</code> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git Submodule repositorygit</span><br><span class=\"line\">commitpushpullSubmoduleheader</span><br><span class=\"line\">SubmodulecloneSubmodule</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"git-status\"><a href=\"#git-status\" class=\"headerlink\" title=\"git status\"></a>git status</h2><p></p>\n<h2 id=\"git-add\"><a href=\"#git-add\" class=\"headerlink\" title=\"git add\"></a>git add</h2><p>index</p>\n<p><code>git add xyz </code> xyzindex</p>\n<p><code>git add .</code> index</p>\n<h2 id=\"git-commit\"><a href=\"#git-commit\" class=\"headerlink\" title=\"git commit\"></a>git commit</h2><p></p>\n<p><code>git commit -m &#39;xxx&#39;</code> </p>\n<p><code>git commit --amend -m &#39;xxx&#39;</code> </p>\n<p><code>git commit -am &#39;xxx&#39;</code> addcommit</p>\n<h2 id=\"git-rm\"><a href=\"#git-rm\" class=\"headerlink\" title=\"git rm\"></a>git rm</h2><p>index</p>\n<p><code>git rm xxx</code> indexxxx</p>\n<p><code>git rm -r *</code> </p>\n<h2 id=\"git-log\"><a href=\"#git-log\" class=\"headerlink\" title=\"git log\"></a>git log</h2><p></p>\n<p><code>git log</code> </p>\n<p><code>git log -1</code> 1 -nn</p>\n<p><code>git log --stat</code> </p>\n<p><code>git log -p -m</code>  diff</p>\n<p><code>git log v2.0</code> tag v2.0</p>\n<p><code>git log --pretty=format:&#39;%h&#39; --graph</code> </p>\n<h2 id=\"git-show\"><a href=\"#git-show\" class=\"headerlink\" title=\"git show\"></a>git show</h2><p></p>\n<p><code>git show dfb02e6e4f2f7b573337763e5c0013802e392818</code> </p>\n<p><code>git show dfb02</code> commitid</p>\n<p><code>git show HEAD</code> HEAD</p>\n<p><code>git show HEAD^</code> HEAD ^^ ^55</p>\n<p><code>git show v2.0</code> tag v2.0</p>\n<p><code>git show master@&#123;yesterday&#125;</code> master</p>\n<h2 id=\"git-ls-files\"><a href=\"#git-ls-files\" class=\"headerlink\" title=\"git ls-files\"></a>git ls-files</h2><p>git index</p>\n<h2 id=\"git-show-branch\"><a href=\"#git-show-branch\" class=\"headerlink\" title=\"git show-branch\"></a>git show-branch</h2><p></p>\n<p><code>git show-branch --all</code> </p>\n<h2 id=\"git-whatchanged\"><a href=\"#git-whatchanged\" class=\"headerlink\" title=\"git whatchanged\"></a>git whatchanged</h2><p></p>\n<h2 id=\"git-reflog\"><a href=\"#git-reflog\" class=\"headerlink\" title=\"git reflog\"></a>git reflog</h2><p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git commit id commitcommitHEAD</span><br><span class=\"line\">commit merge commit</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"git-tag\"><a href=\"#git-tag\" class=\"headerlink\" title=\"git tag\"></a>git tag</h2><p><code>git tag</code> tag</p>\n<p><code>git tag -a v2.0 -m &#39;xxx&#39;</code> v2.0tag</p>\n<h2 id=\"git-diff\"><a href=\"#git-diff\" class=\"headerlink\" title=\"git diff\"></a>git diff</h2><p>index</p>\n<p><code>git diff</code> index</p>\n<p><code>git diff --cached</code> indexcommit</p>\n<p><code>git diff HEAD^</code> </p>\n<p><code>git diff HEAD -- ./lib</code> HEADlib</p>\n<p><code>git diff origin/master..master</code> mastermaster</p>\n<p><code>git diff origin/master..master --stat</code> </p>\n<h2 id=\"git-remote\"><a href=\"#git-remote\" class=\"headerlink\" title=\"git remote\"></a>git remote</h2><p></p>\n<p><code>git remote add origin git+ssh://git@192.168.53.168/VT.git</code> push/pull/fetch</p>\n<p><code>git remote rename origin origin_new</code> </p>\n<p><code>git remote remove origin_new</code> </p>\n<p><code>git remote show</code> </p>\n<p><code>git remote show origin</code> </p>\n<h2 id=\"git-branch\"><a href=\"#git-branch\" class=\"headerlink\" title=\"git branch\"></a>git branch</h2><p></p>\n<p><code>git branch</code> </p>\n<p><code>git branch --contains 50089</code> 50089</p>\n<p><code>git branch -a</code> </p>\n<p><code>git branch -r</code> </p>\n<p><code>git branch --merged</code> </p>\n<p><code>git branch --no-merged</code> </p>\n<p><code>git branch -m master master_copy</code> </p>\n<p><code>git branch -d hotfixes/BJVEP933</code> hotfixes/BJVEP933</p>\n<p><code>git branch -D hotfixes/BJVEP933</code> hotfixes/BJVEP933</p>\n<h2 id=\"git-checkout\"><a href=\"#git-checkout\" class=\"headerlink\" title=\"git checkout\"></a>git checkout</h2><p></p>\n<p><code>git checkout -b master_copy</code> master_copy</p>\n<p><code>git checkout -b master master_copy</code> </p>\n<p><code>git checkout features/performance</code> features/performance</p>\n<p><code>git checkout --track hotfixes/BJVEP933</code> hotfixes/BJVEP933</p>\n<p><code>git checkout v2.0</code> v2.0</p>\n<p><code>git checkout -b develop origin/develop</code> developdevelop</p>\n<p><code>git checkout -- README</code> headREADME<code>--</code> tag</p>\n<h2 id=\"git-merge\"><a href=\"#git-merge\" class=\"headerlink\" title=\"git merge\"></a>git merge</h2><p></p>\n<p><code>git merge origin/master</code> master</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fast-forwardgitHEAD</span><br><span class=\"line\">commit</span><br></pre></td></tr></table></figure>\n\n<p><code>git merge --no-ff origin/master</code> fast-forwardfast-forwardcommit</p>\n<p><code>git merge --squash origin/master</code> commitcommit</p>\n<h2 id=\"git-cherry-pick\"><a href=\"#git-cherry-pick\" class=\"headerlink\" title=\"git cherry-pick\"></a>git cherry-pick</h2><p></p>\n<p><code>git cherry-pick ff44785404a8e</code> ff44785404a8e</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">commit(s)</span><br><span class=\"line\">v2.0v3.0</span><br><span class=\"line\">v3.0v2.0cherry-pick,commit </span><br></pre></td></tr></table></figure>\n<p><code>git cherry-pick (--continue | --quit | --abort)</code> </p>\n<p><code>git cherry-pick -x &lt;commit id&gt;</code> </p>\n<p><code>git cherry-pick &lt;start-commit-id&gt;..&lt;end-commit-id&gt;</code> Git1.7.2cherry-pickcherry-pickcommit</p>\n<p><code>git cherry-pick &lt;start-commit-id&gt;^..&lt;end-commit-id&gt;</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;start-commit-id&gt;&lt;end-commit-id&gt;(start-commit-id)cherry-pick</span><br><span class=\"line\">&quot;^&quot;&lt;start-commit-id&gt;&lt;end-commit-id&gt;(start-commit-id)cherry-pick</span><br><span class=\"line\">&lt;start-commit-id&gt;&lt;end-commit-id&gt;commit-id6&lt;start-commit-id&gt;&lt;end-commit-id&gt;</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"git-push\"><a href=\"#git-push\" class=\"headerlink\" title=\"git push\"></a>git push</h2><p></p>\n<p><code>git push origin master</code> pushmaster</p>\n<p><code>git push origin :hotfixes/BJVEP933</code> hotfixes/BJVEP933</p>\n<p><code>git push --tags</code> tag</p>\n<h2 id=\"git-fetch\"><a href=\"#git-fetch\" class=\"headerlink\" title=\"git fetch\"></a>git fetch</h2><p>mergeFETCH_HEAD</p>\n<p><code>git fetch --prune</code> </p>\n<h2 id=\"git-pull\"><a href=\"#git-pull\" class=\"headerlink\" title=\"git pull\"></a>git pull</h2><p></p>\n<p><code>git pull origin master</code> mastermerge</p>\n<p> <code>git fetch</code>merge</p>\n<h2 id=\"git-mv\"><a href=\"#git-mv\" class=\"headerlink\" title=\"git mv\"></a>git mv</h2><p></p>\n<p><code>git mv README README2</code> READMEREADME2</p>\n<h2 id=\"git-reset\"><a href=\"#git-reset\" class=\"headerlink\" title=\"git reset\"></a>git reset</h2><p></p>\n<p><code>git reset --hard HEAD</code> HEADmerge</p>\n<p><code>git reset HEAD &lt;file&gt;...</code> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> hard </span><br><span class=\"line\"> git </span><br><span class=\"line\"> git reset --hard ORIG_HEAD  git reflog </span><br></pre></td></tr></table></figure>\n\n<p><code>git reset --mixed HEAD</code> mixed  soft   mixed  soft  add </p>\n<p><code>git reset --soft HEAD</code>  commit</p>\n<h2 id=\"git-rebase\"><a href=\"#git-rebase\" class=\"headerlink\" title=\"git rebase\"></a>git rebase</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rebase  Merge Base </span><br><span class=\"line\"> Fast Forward</span><br><span class=\"line\">rebase  -f force</span><br><span class=\"line\"> rebase </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"git-revert\"><a href=\"#git-revert\" class=\"headerlink\" title=\"git revert\"></a>git revert</h2><p></p>\n<p><code>git revert dfb02e6</code> dfb02e6</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> revert </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">revert </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"git-stash\"><a href=\"#git-stash\" class=\"headerlink\" title=\"git stash\"></a>git stash</h2><p>HEAD</p>\n<p><code>git stash list</code> </p>\n<p><code>git stash show -p stash@&#123;0&#125;</code> </p>\n<p><code>git stash apply stash@&#123;0&#125;</code> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">message  half of work reset soft  commit amend</span><br><span class=\"line\"></span><br><span class=\"line\">git  stash </span><br><span class=\"line\"></span><br><span class=\"line\">stash reset hard stash apply </span><br><span class=\"line\"></span><br><span class=\"line\">stash .git&#x2F;refs&#x2F;stash</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"git-grep\"><a href=\"#git-grep\" class=\"headerlink\" title=\"git grep\"></a>git grep</h2><p></p>\n<p><code>git grep &quot;delete from&quot;</code> delete from</p>\n<p></p>\n<p><a href=\"https://gist.github.com/guweigang/9848271\">git </a></p>\n<p><a href=\"https://blog.coding.net/blog/principle-of-git\">git </a></p>\n<p><a href=\"https://git-scm.com/docs\">git</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"git-init\"><a href=\"#git-init\" class=\"headerlink\" title=\"git init\"></a>git init</h2><p>git</p>\n<p><code>git init</code> </p>\n<p><code>git init --bare</code> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.git</span><br><span class=\"line\">add, commit, delete</span><br><span class=\"line\"></span><br><span class=\"line\">.git</span><br><span class=\"line\">push</span><br><span class=\"line\">clonepush</span><br></pre></td></tr></table></figure>\n\n<p>wwwhomeclone</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir git_test &amp;&amp; cd git_test &amp;&amp; git init --bare</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-copy-id www@ip</span><br><span class=\"line\"></span><br><span class=\"line\">git clone ssh:&#x2F;&#x2F;www@ip&#x2F;~&#x2F;git_test</span><br><span class=\"line\"></span><br><span class=\"line\">touch readme.md</span><br><span class=\"line\"></span><br><span class=\"line\">git add .</span><br><span class=\"line\"></span><br><span class=\"line\">git commit -m &quot;first commit&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">git push</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"git-config\"><a href=\"#git-config\" class=\"headerlink\" title=\"git config\"></a>git config</h2><p>git</p>\n<p><code>git config user.name &quot;xxx&quot;</code> </p>\n<p><code>git config user.email &quot;xxx@xxx.com&quot;</code> </p>\n<p><code>git config --global color.ui true</code> git status</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config --global http.proxy &#39;socks5:&#x2F;&#x2F;127.0.0.1:1080&#39;</span><br><span class=\"line\">git config --global https.proxy &#39;socks5:&#x2F;&#x2F;127.0.0.1:1080&#39;</span><br><span class=\"line\"></span><br><span class=\"line\">git config --global --unset http.proxy</span><br><span class=\"line\">git config --global --unset https.proxy</span><br></pre></td></tr></table></figure>\n\n<p>gitCRLF</p>\n<p><code>git config --global core.autocrlf true</code> LFCRLF</p>\n<p><code>git config --global core.autocrlf input</code> LF</p>\n<p><code>git config --global core.autocrlf false</code> </p>\n<p><code>git config --global core.safecrlf true</code> </p>\n<p><code>git config --global core.safecrlf false</code> </p>\n<p><code>git config --global core.safecrlf warn</code> </p>\n<p> <code>--global</code> </p>\n<h2 id=\"git-clone\"><a href=\"#git-clone\" class=\"headerlink\" title=\"git clone\"></a>git clone</h2><p>clone</p>\n<p><code>git clone git+ssh://git@192.168.53.168/VT.git</code></p>\n<h2 id=\"git-submodule\"><a href=\"#git-submodule\" class=\"headerlink\" title=\"git submodule\"></a>git submodule</h2><p></p>\n<p><code>git submodule add https://github.com/wenjy/maupassant-hugo.git themes/maupassant</code></p>\n<p><code>git submodule update --remote</code> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git Submodule repositorygit</span><br><span class=\"line\">commitpushpullSubmoduleheader</span><br><span class=\"line\">SubmodulecloneSubmodule</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"git-status\"><a href=\"#git-status\" class=\"headerlink\" title=\"git status\"></a>git status</h2><p></p>\n<h2 id=\"git-add\"><a href=\"#git-add\" class=\"headerlink\" title=\"git add\"></a>git add</h2><p>index</p>\n<p><code>git add xyz </code> xyzindex</p>\n<p><code>git add .</code> index</p>\n<h2 id=\"git-commit\"><a href=\"#git-commit\" class=\"headerlink\" title=\"git commit\"></a>git commit</h2><p></p>\n<p><code>git commit -m &#39;xxx&#39;</code> </p>\n<p><code>git commit --amend -m &#39;xxx&#39;</code> </p>\n<p><code>git commit -am &#39;xxx&#39;</code> addcommit</p>\n<h2 id=\"git-rm\"><a href=\"#git-rm\" class=\"headerlink\" title=\"git rm\"></a>git rm</h2><p>index</p>\n<p><code>git rm xxx</code> indexxxx</p>\n<p><code>git rm -r *</code> </p>\n<h2 id=\"git-log\"><a href=\"#git-log\" class=\"headerlink\" title=\"git log\"></a>git log</h2><p></p>\n<p><code>git log</code> </p>\n<p><code>git log -1</code> 1 -nn</p>\n<p><code>git log --stat</code> </p>\n<p><code>git log -p -m</code>  diff</p>\n<p><code>git log v2.0</code> tag v2.0</p>\n<p><code>git log --pretty=format:&#39;%h&#39; --graph</code> </p>\n<h2 id=\"git-show\"><a href=\"#git-show\" class=\"headerlink\" title=\"git show\"></a>git show</h2><p></p>\n<p><code>git show dfb02e6e4f2f7b573337763e5c0013802e392818</code> </p>\n<p><code>git show dfb02</code> commitid</p>\n<p><code>git show HEAD</code> HEAD</p>\n<p><code>git show HEAD^</code> HEAD ^^ ^55</p>\n<p><code>git show v2.0</code> tag v2.0</p>\n<p><code>git show master@&#123;yesterday&#125;</code> master</p>\n<h2 id=\"git-ls-files\"><a href=\"#git-ls-files\" class=\"headerlink\" title=\"git ls-files\"></a>git ls-files</h2><p>git index</p>\n<h2 id=\"git-show-branch\"><a href=\"#git-show-branch\" class=\"headerlink\" title=\"git show-branch\"></a>git show-branch</h2><p></p>\n<p><code>git show-branch --all</code> </p>\n<h2 id=\"git-whatchanged\"><a href=\"#git-whatchanged\" class=\"headerlink\" title=\"git whatchanged\"></a>git whatchanged</h2><p></p>\n<h2 id=\"git-reflog\"><a href=\"#git-reflog\" class=\"headerlink\" title=\"git reflog\"></a>git reflog</h2><p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git commit id commitcommitHEAD</span><br><span class=\"line\">commit merge commit</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"git-tag\"><a href=\"#git-tag\" class=\"headerlink\" title=\"git tag\"></a>git tag</h2><p><code>git tag</code> tag</p>\n<p><code>git tag -a v2.0 -m &#39;xxx&#39;</code> v2.0tag</p>\n<h2 id=\"git-diff\"><a href=\"#git-diff\" class=\"headerlink\" title=\"git diff\"></a>git diff</h2><p>index</p>\n<p><code>git diff</code> index</p>\n<p><code>git diff --cached</code> indexcommit</p>\n<p><code>git diff HEAD^</code> </p>\n<p><code>git diff HEAD -- ./lib</code> HEADlib</p>\n<p><code>git diff origin/master..master</code> mastermaster</p>\n<p><code>git diff origin/master..master --stat</code> </p>\n<h2 id=\"git-remote\"><a href=\"#git-remote\" class=\"headerlink\" title=\"git remote\"></a>git remote</h2><p></p>\n<p><code>git remote add origin git+ssh://git@192.168.53.168/VT.git</code> push/pull/fetch</p>\n<p><code>git remote rename origin origin_new</code> </p>\n<p><code>git remote remove origin_new</code> </p>\n<p><code>git remote show</code> </p>\n<p><code>git remote show origin</code> </p>\n<h2 id=\"git-branch\"><a href=\"#git-branch\" class=\"headerlink\" title=\"git branch\"></a>git branch</h2><p></p>\n<p><code>git branch</code> </p>\n<p><code>git branch --contains 50089</code> 50089</p>\n<p><code>git branch -a</code> </p>\n<p><code>git branch -r</code> </p>\n<p><code>git branch --merged</code> </p>\n<p><code>git branch --no-merged</code> </p>\n<p><code>git branch -m master master_copy</code> </p>\n<p><code>git branch -d hotfixes/BJVEP933</code> hotfixes/BJVEP933</p>\n<p><code>git branch -D hotfixes/BJVEP933</code> hotfixes/BJVEP933</p>\n<h2 id=\"git-checkout\"><a href=\"#git-checkout\" class=\"headerlink\" title=\"git checkout\"></a>git checkout</h2><p></p>\n<p><code>git checkout -b master_copy</code> master_copy</p>\n<p><code>git checkout -b master master_copy</code> </p>\n<p><code>git checkout features/performance</code> features/performance</p>\n<p><code>git checkout --track hotfixes/BJVEP933</code> hotfixes/BJVEP933</p>\n<p><code>git checkout v2.0</code> v2.0</p>\n<p><code>git checkout -b develop origin/develop</code> developdevelop</p>\n<p><code>git checkout -- README</code> headREADME<code>--</code> tag</p>\n<h2 id=\"git-merge\"><a href=\"#git-merge\" class=\"headerlink\" title=\"git merge\"></a>git merge</h2><p></p>\n<p><code>git merge origin/master</code> master</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fast-forwardgitHEAD</span><br><span class=\"line\">commit</span><br></pre></td></tr></table></figure>\n\n<p><code>git merge --no-ff origin/master</code> fast-forwardfast-forwardcommit</p>\n<p><code>git merge --squash origin/master</code> commitcommit</p>\n<h2 id=\"git-cherry-pick\"><a href=\"#git-cherry-pick\" class=\"headerlink\" title=\"git cherry-pick\"></a>git cherry-pick</h2><p></p>\n<p><code>git cherry-pick ff44785404a8e</code> ff44785404a8e</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">commit(s)</span><br><span class=\"line\">v2.0v3.0</span><br><span class=\"line\">v3.0v2.0cherry-pick,commit </span><br></pre></td></tr></table></figure>\n<p><code>git cherry-pick (--continue | --quit | --abort)</code> </p>\n<p><code>git cherry-pick -x &lt;commit id&gt;</code> </p>\n<p><code>git cherry-pick &lt;start-commit-id&gt;..&lt;end-commit-id&gt;</code> Git1.7.2cherry-pickcherry-pickcommit</p>\n<p><code>git cherry-pick &lt;start-commit-id&gt;^..&lt;end-commit-id&gt;</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;start-commit-id&gt;&lt;end-commit-id&gt;(start-commit-id)cherry-pick</span><br><span class=\"line\">&quot;^&quot;&lt;start-commit-id&gt;&lt;end-commit-id&gt;(start-commit-id)cherry-pick</span><br><span class=\"line\">&lt;start-commit-id&gt;&lt;end-commit-id&gt;commit-id6&lt;start-commit-id&gt;&lt;end-commit-id&gt;</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"git-push\"><a href=\"#git-push\" class=\"headerlink\" title=\"git push\"></a>git push</h2><p></p>\n<p><code>git push origin master</code> pushmaster</p>\n<p><code>git push origin :hotfixes/BJVEP933</code> hotfixes/BJVEP933</p>\n<p><code>git push --tags</code> tag</p>\n<h2 id=\"git-fetch\"><a href=\"#git-fetch\" class=\"headerlink\" title=\"git fetch\"></a>git fetch</h2><p>mergeFETCH_HEAD</p>\n<p><code>git fetch --prune</code> </p>\n<h2 id=\"git-pull\"><a href=\"#git-pull\" class=\"headerlink\" title=\"git pull\"></a>git pull</h2><p></p>\n<p><code>git pull origin master</code> mastermerge</p>\n<p> <code>git fetch</code>merge</p>\n<h2 id=\"git-mv\"><a href=\"#git-mv\" class=\"headerlink\" title=\"git mv\"></a>git mv</h2><p></p>\n<p><code>git mv README README2</code> READMEREADME2</p>\n<h2 id=\"git-reset\"><a href=\"#git-reset\" class=\"headerlink\" title=\"git reset\"></a>git reset</h2><p></p>\n<p><code>git reset --hard HEAD</code> HEADmerge</p>\n<p><code>git reset HEAD &lt;file&gt;...</code> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> hard </span><br><span class=\"line\"> git </span><br><span class=\"line\"> git reset --hard ORIG_HEAD  git reflog </span><br></pre></td></tr></table></figure>\n\n<p><code>git reset --mixed HEAD</code> mixed  soft   mixed  soft  add </p>\n<p><code>git reset --soft HEAD</code>  commit</p>\n<h2 id=\"git-rebase\"><a href=\"#git-rebase\" class=\"headerlink\" title=\"git rebase\"></a>git rebase</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rebase  Merge Base </span><br><span class=\"line\"> Fast Forward</span><br><span class=\"line\">rebase  -f force</span><br><span class=\"line\"> rebase </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"git-revert\"><a href=\"#git-revert\" class=\"headerlink\" title=\"git revert\"></a>git revert</h2><p></p>\n<p><code>git revert dfb02e6</code> dfb02e6</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> revert </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">revert </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"git-stash\"><a href=\"#git-stash\" class=\"headerlink\" title=\"git stash\"></a>git stash</h2><p>HEAD</p>\n<p><code>git stash list</code> </p>\n<p><code>git stash show -p stash@&#123;0&#125;</code> </p>\n<p><code>git stash apply stash@&#123;0&#125;</code> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">message  half of work reset soft  commit amend</span><br><span class=\"line\"></span><br><span class=\"line\">git  stash </span><br><span class=\"line\"></span><br><span class=\"line\">stash reset hard stash apply </span><br><span class=\"line\"></span><br><span class=\"line\">stash .git&#x2F;refs&#x2F;stash</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"git-grep\"><a href=\"#git-grep\" class=\"headerlink\" title=\"git grep\"></a>git grep</h2><p></p>\n<p><code>git grep &quot;delete from&quot;</code> delete from</p>\n<p></p>\n<p><a href=\"https://gist.github.com/guweigang/9848271\">git </a></p>\n<p><a href=\"https://blog.coding.net/blog/principle-of-git\">git </a></p>\n<p><a href=\"https://git-scm.com/docs\">git</a></p>\n"},{"url":"/2020/03/26/linux-command.html","title":"Linux ","keywords":"Linux ","description":"Linux ","date":"2020-03-26T06:53:12.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n## ls\n\n`ls -alh` \n\n```\n-a, -all  . \n-l \n-h, human-readable  ( 1K 234M 2G)\n```\n\n## cd\n\n`cd /usr/local` \n\n`cd ../` \n\n`cd ~` home\n\n`cd -` \n\n## pwd\n\n\n`pwd -P`  link\n\n`pwd -L` \n\n## rm\n\n\n\n`rm -rf /a/b/c` \n\n`rm -i /a/b/*.log` \n\n```\n-f, --force \n-i, --interactive \n-r, -R, --recursive rm\n```\n\n## rmdir\n\n\n## mv\nmvmove\n\n`mv test.log test1.txt` test.logtest1.txt\n\n## cp\n\n\n`cp log1 log.bak` log1log.bak\n\n## cat\n\n\n`cat filename` filename\n\n`cat filename1 fielname2 > filename3` filename12filename3,\n\n## less\nless\n\n## head\n\n\n`head -n 10 filename` 10\n\n## tail\n\n\n`tail -n 10 -f filename` 10\n\n## which\n\nPATH\n\n## whereis \n\n \n## locate   \nloacte\n\n## find   \n\n\n`find . -type f -exec ls -l {} \\;` ls -lfind-exec\n\n`find . -type f -print | xargs file` xargs\n\n`find . -name \"*.log\" -print` *.log\n\n## chomd\nlinux\n\n`chomd -R 0644 /test` \n\n`chomd +x /test/test.sh` \n\n## tar\n\n\n`tar xvf FileName.tar` \n\n`tar cvf FileName.tar DirName` \n\n`tar zxvf FileName.tar.gz` \n\n`tar zcvf FileName.tar.gz DirName` \n\n`tar jxvf FileName.tar.bz2` \n\n`tar jcvf FileName.tar.bz2 DirName` \n\n## chown\nIDID\n\n\n`chown mail:mail -R /test` `/test` mail\n\n## df\nlinux\n\n`df -h` \n\n## du\n\n\n`du -h  --max-depth=1` \n\n## ln\n.\n\n lnlink\n\n`ln -s log2013.log link2013` log2013.log\n\n## diff\n\n\n`diff log2014.log log2013.log`\n\n## date \n\n\n`date '+%Y-%m-%d %T'` 2020-03-26 15:26:08\n\n## grep\n(Global Regular Expression Print) \n\n`ll /usr/local/bin |grep php`\n\n## wc\n(Word Count)\n\n`ps aux|grep php-fpm|wc -l` php-fpm\n\n## ps\n\n`ps aux|grep php-fpm`\n\n\n\nUSER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMAND\n\nUSER  \n\nPID ID\n \n%CPU CPU\n \n%MEM  \n\nVSZ KB \n\nRSS KB\n\nTTY pts/0\n\nSTAT D R S T Z < N s l + \n\nSTART \n\nTIME CPU\n\nCOMMAND \n`\n\n`ps -ef|grep php-fpm`\n\n## kill\n\n\n`kill -9 12345` \n\n`kill -15 12345` \n\n## killall\nkill processes by name\n\n`killall php-fpm`\n\n## pkill\npkillkillallkill\n\n``\n\n## top\n\n\n## uptime\ntop\n\n## free\nLinuxswap,buffer\n\n`free -m`\n\n## vmstat\nVirtual Meomory StatisticsCPU\n\n## watch\nwatchLinuxwatch\n\n`watch -n 1 -d netstat -ant` \n\n## crontab\n\n`crontab -u www -l` \n\n`crontab -e` \n\n## ifconfig\n\n\n`ifconfig eth0 up` \n\n`ifconfig eth0 down` \n\n## route\nIPshow / manipulate the IP routing table\n\n## ping\n\n\n`ping www.baidu.com`\n\n`ping 112.112.112.112`\n\n## traceroute\ntraceroute3\n(ms)IP\n\n`traceroute www.baidu.com`\n\n## netstat\nIPTCPUDPICMP\nnetstatTCPTCPUDP\n\n`netstat -anlp |grep :9999`\n\n`netstat -s` \n\n## ss\nSocket Statisticssssocketnetstat\nssTCPnetstat\n\n`ss -anlp|grep :9999`\n\n## telnet\n\n\n`telnet 127.0.0.1 9999`\n\n## rcp\nrcp\n\n`rcp test1 webserver1:/home/root/test3`  test1  webserver1\n\n## scp\nsecure copyLinuxcpcpscp\n\n`scp local_file remote_username@remote_ip:remote_folder` \n\n`scp root@192.168.120.204:/opt/soft/nginx-0.5.38.tar.gz /opt/soft/` \n\n## wget\n\n\n`wget http://www.minjieren.com/wordpress-3.1-zh_CN.zip` \n\n`wget -O wordpress.zip http://www.minjieren.com/download.aspx?id=1080` wget -O\n\n`wget -c http://www.minjieren.com/wordpress-3.1-zh_CN.zip` wget -c\n\n`wget -c http://www.minjieren.com/wordpress-3.1-zh_CN.zip` wget -b\n\n## tcpdump\n tcpdump tcpdump \n TCP 3 PUSH/ACK close4 \n\n`tcpdump -i lo -Xnlps0 tcp port 9999` lotcp9999 \n\n`tcpdump host 127.0.0.1` IP\n\n[](https://www.cnblogs.com/ggjucheng/archive/2012/01/14/2322659.html)\n\n## strace\n strace \n\n`strace -o /tmp/strace.log -f -p $PID`\n\n## gdb\nGDB  GNU  UNIX  C/C++ PHP  Swoole  C \n GDB  PHP+Swoole \ngdb \n\n`gdb -p ID`\n\n## lsof\n swoole  socketfile\n\n`lsof -i:9999`\n\n`lsof -p [ID]`\n\n## pref\nperf top \n callgrindxdebugxhprof perf  profile \n\n`perf top -p [ID]`\n\n## awk\n\n\n`awk '1'{1} 2{2}... filename` \n\n```bash\n# \n# $0 \n# $1-$n \n# NF $0\n# NR  awk   \n# FS \n\n# \n# 1$0,$1,$2..$n\n# 2\n# 3\n# 4123\n\n```\n\n`cat /etc/passwd |awk 'BEGIN {FS=\":\"} $3 < 10 {print $1 \"\\t\" $3}'`\n\n## groups\n\n\n## useradd\n\n\n`userass test_user`\n\n## passwd\n\n\n`passwd test_user`\n\n## su\n\n\n`su username` username`non-login`shell\n\n`su - username` `login`shell\n\n`su -c username \"cmd\"` \n\n## sudo\n `/ect/sudoers``visudo`\n\n`sudo -u username pwd` root\n\n## curl\nURL\ncurlDICT, FILE, FTP, FTPS, GOPHER, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS, POP3, POP3S, RTMP, RTMPS, RTSP, SCP, SFTP, SMB, SBMS, SMTP, SMTPS, TELNET TFTP\n\n`curl --trace-time -v https://www.baidu.com` \n\n## ssh\nSSH\n\n`ssh-keygen` \n\n`ssh-copy-id user@host` \n\n`ssh -p 2222 user@host` \n\n### \n\n`cd && tar czv src | ssh user@host 'tar xz'` $HOME/src/$HOME/src/\n\n`ssh user@host 'tar cz src' | tar xzv` $HOME/src/\n\n### \n\nSSH\n\n`ssh -D 8080 user@host` 8080SSH\n\nSSHsocket8080SSH\n8080\n\n### \n\n\"\"\n\"\"\"\"Local forwarding\n\nhost1host2host3\nhost3host1host2\n\n`ssh -L 2121:host2:21 host3`\n\nL\"::\"\nSSH2121host3host221host2FTP21\nhost12121host221\n\n\"\"host1host3\"SSH\"\n\n### \n\n\"\"\"\"remote forwarding\n\nhost1host2host3host3host1host1host3\"\"\n\nhost3host1host3host1SSHhost1\n\n`ssh -R 2121:host2:21 host1`\n\nR\"::\"\nhost12121host3host221host3host1\"\"\n\n`ssh -NT -f -D 8080 host`\n\nNshellTTTYSSH\nfSSHSSHshell\n\n## netcat\n\ntcp udp\n\n`netcat -u ip port` udp\n\n## time\n\n\n\n`time command`\n\n\n\n[Linux](https://www.cnblogs.com/peida/category/309012.html)\n\n[Swoole ](https://wiki.swoole.com/#/other/tools)\n\n[ SSH](http://www.ruanyifeng.com/blog/2011/12/ssh_port_forwarding.html)\n","source":"_posts/tools/linux_command.md","raw":"---\nurl: /2020/03/26/linux-command.html\ntitle: \"Linux \"\nkeywords: \"Linux \"\ndescription: \"Linux \"\ndate: 2020-03-26T22:53:12+08:00\ndraft: false\ntags: [\"Linux\"]\ntags_weight: 100\ncategories: [\"Linux\"]\ncategoryes_weight: 100\n---\n\n## ls\n\n`ls -alh` \n\n```\n-a, -all  . \n-l \n-h, human-readable  ( 1K 234M 2G)\n```\n\n## cd\n\n`cd /usr/local` \n\n`cd ../` \n\n`cd ~` home\n\n`cd -` \n\n## pwd\n\n\n`pwd -P`  link\n\n`pwd -L` \n\n## rm\n\n\n\n`rm -rf /a/b/c` \n\n`rm -i /a/b/*.log` \n\n```\n-f, --force \n-i, --interactive \n-r, -R, --recursive rm\n```\n\n## rmdir\n\n\n## mv\nmvmove\n\n`mv test.log test1.txt` test.logtest1.txt\n\n## cp\n\n\n`cp log1 log.bak` log1log.bak\n\n## cat\n\n\n`cat filename` filename\n\n`cat filename1 fielname2 > filename3` filename12filename3,\n\n## less\nless\n\n## head\n\n\n`head -n 10 filename` 10\n\n## tail\n\n\n`tail -n 10 -f filename` 10\n\n## which\n\nPATH\n\n## whereis \n\n \n## locate   \nloacte\n\n## find   \n\n\n`find . -type f -exec ls -l {} \\;` ls -lfind-exec\n\n`find . -type f -print | xargs file` xargs\n\n`find . -name \"*.log\" -print` *.log\n\n## chomd\nlinux\n\n`chomd -R 0644 /test` \n\n`chomd +x /test/test.sh` \n\n## tar\n\n\n`tar xvf FileName.tar` \n\n`tar cvf FileName.tar DirName` \n\n`tar zxvf FileName.tar.gz` \n\n`tar zcvf FileName.tar.gz DirName` \n\n`tar jxvf FileName.tar.bz2` \n\n`tar jcvf FileName.tar.bz2 DirName` \n\n## chown\nIDID\n\n\n`chown mail:mail -R /test` `/test` mail\n\n## df\nlinux\n\n`df -h` \n\n## du\n\n\n`du -h  --max-depth=1` \n\n## ln\n.\n\n lnlink\n\n`ln -s log2013.log link2013` log2013.log\n\n## diff\n\n\n`diff log2014.log log2013.log`\n\n## date \n\n\n`date '+%Y-%m-%d %T'` 2020-03-26 15:26:08\n\n## grep\n(Global Regular Expression Print) \n\n`ll /usr/local/bin |grep php`\n\n## wc\n(Word Count)\n\n`ps aux|grep php-fpm|wc -l` php-fpm\n\n## ps\n\n`ps aux|grep php-fpm`\n\n\n\nUSER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMAND\n\nUSER  \n\nPID ID\n \n%CPU CPU\n \n%MEM  \n\nVSZ KB \n\nRSS KB\n\nTTY pts/0\n\nSTAT D R S T Z < N s l + \n\nSTART \n\nTIME CPU\n\nCOMMAND \n`\n\n`ps -ef|grep php-fpm`\n\n## kill\n\n\n`kill -9 12345` \n\n`kill -15 12345` \n\n## killall\nkill processes by name\n\n`killall php-fpm`\n\n## pkill\npkillkillallkill\n\n``\n\n## top\n\n\n## uptime\ntop\n\n## free\nLinuxswap,buffer\n\n`free -m`\n\n## vmstat\nVirtual Meomory StatisticsCPU\n\n## watch\nwatchLinuxwatch\n\n`watch -n 1 -d netstat -ant` \n\n## crontab\n\n`crontab -u www -l` \n\n`crontab -e` \n\n## ifconfig\n\n\n`ifconfig eth0 up` \n\n`ifconfig eth0 down` \n\n## route\nIPshow / manipulate the IP routing table\n\n## ping\n\n\n`ping www.baidu.com`\n\n`ping 112.112.112.112`\n\n## traceroute\ntraceroute3\n(ms)IP\n\n`traceroute www.baidu.com`\n\n## netstat\nIPTCPUDPICMP\nnetstatTCPTCPUDP\n\n`netstat -anlp |grep :9999`\n\n`netstat -s` \n\n## ss\nSocket Statisticssssocketnetstat\nssTCPnetstat\n\n`ss -anlp|grep :9999`\n\n## telnet\n\n\n`telnet 127.0.0.1 9999`\n\n## rcp\nrcp\n\n`rcp test1 webserver1:/home/root/test3`  test1  webserver1\n\n## scp\nsecure copyLinuxcpcpscp\n\n`scp local_file remote_username@remote_ip:remote_folder` \n\n`scp root@192.168.120.204:/opt/soft/nginx-0.5.38.tar.gz /opt/soft/` \n\n## wget\n\n\n`wget http://www.minjieren.com/wordpress-3.1-zh_CN.zip` \n\n`wget -O wordpress.zip http://www.minjieren.com/download.aspx?id=1080` wget -O\n\n`wget -c http://www.minjieren.com/wordpress-3.1-zh_CN.zip` wget -c\n\n`wget -c http://www.minjieren.com/wordpress-3.1-zh_CN.zip` wget -b\n\n## tcpdump\n tcpdump tcpdump \n TCP 3 PUSH/ACK close4 \n\n`tcpdump -i lo -Xnlps0 tcp port 9999` lotcp9999 \n\n`tcpdump host 127.0.0.1` IP\n\n[](https://www.cnblogs.com/ggjucheng/archive/2012/01/14/2322659.html)\n\n## strace\n strace \n\n`strace -o /tmp/strace.log -f -p $PID`\n\n## gdb\nGDB  GNU  UNIX  C/C++ PHP  Swoole  C \n GDB  PHP+Swoole \ngdb \n\n`gdb -p ID`\n\n## lsof\n swoole  socketfile\n\n`lsof -i:9999`\n\n`lsof -p [ID]`\n\n## pref\nperf top \n callgrindxdebugxhprof perf  profile \n\n`perf top -p [ID]`\n\n## awk\n\n\n`awk '1'{1} 2{2}... filename` \n\n```bash\n# \n# $0 \n# $1-$n \n# NF $0\n# NR  awk   \n# FS \n\n# \n# 1$0,$1,$2..$n\n# 2\n# 3\n# 4123\n\n```\n\n`cat /etc/passwd |awk 'BEGIN {FS=\":\"} $3 < 10 {print $1 \"\\t\" $3}'`\n\n## groups\n\n\n## useradd\n\n\n`userass test_user`\n\n## passwd\n\n\n`passwd test_user`\n\n## su\n\n\n`su username` username`non-login`shell\n\n`su - username` `login`shell\n\n`su -c username \"cmd\"` \n\n## sudo\n `/ect/sudoers``visudo`\n\n`sudo -u username pwd` root\n\n## curl\nURL\ncurlDICT, FILE, FTP, FTPS, GOPHER, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS, POP3, POP3S, RTMP, RTMPS, RTSP, SCP, SFTP, SMB, SBMS, SMTP, SMTPS, TELNET TFTP\n\n`curl --trace-time -v https://www.baidu.com` \n\n## ssh\nSSH\n\n`ssh-keygen` \n\n`ssh-copy-id user@host` \n\n`ssh -p 2222 user@host` \n\n### \n\n`cd && tar czv src | ssh user@host 'tar xz'` $HOME/src/$HOME/src/\n\n`ssh user@host 'tar cz src' | tar xzv` $HOME/src/\n\n### \n\nSSH\n\n`ssh -D 8080 user@host` 8080SSH\n\nSSHsocket8080SSH\n8080\n\n### \n\n\"\"\n\"\"\"\"Local forwarding\n\nhost1host2host3\nhost3host1host2\n\n`ssh -L 2121:host2:21 host3`\n\nL\"::\"\nSSH2121host3host221host2FTP21\nhost12121host221\n\n\"\"host1host3\"SSH\"\n\n### \n\n\"\"\"\"remote forwarding\n\nhost1host2host3host3host1host1host3\"\"\n\nhost3host1host3host1SSHhost1\n\n`ssh -R 2121:host2:21 host1`\n\nR\"::\"\nhost12121host3host221host3host1\"\"\n\n`ssh -NT -f -D 8080 host`\n\nNshellTTTYSSH\nfSSHSSHshell\n\n## netcat\n\ntcp udp\n\n`netcat -u ip port` udp\n\n## time\n\n\n\n`time command`\n\n\n\n[Linux](https://www.cnblogs.com/peida/category/309012.html)\n\n[Swoole ](https://wiki.swoole.com/#/other/tools)\n\n[ SSH](http://www.ruanyifeng.com/blog/2011/12/ssh_port_forwarding.html)\n","slug":"tools/linux_command","published":1,"updated":"2020-05-16T14:58:19.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf3k002rmv050xex0m1i","content":"<h2 id=\"ls\"><a href=\"#ls\" class=\"headerlink\" title=\"ls\"></a>ls</h2><p><code>ls -alh</code> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-a, -all  . </span><br><span class=\"line\">-l </span><br><span class=\"line\">-h, human-readable  ( 1K 234M 2G)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"cd\"><a href=\"#cd\" class=\"headerlink\" title=\"cd\"></a>cd</h2><p><code>cd /usr/local</code> </p>\n<p><code>cd ../</code> </p>\n<p><code>cd ~</code> home</p>\n<p><code>cd -</code> </p>\n<h2 id=\"pwd\"><a href=\"#pwd\" class=\"headerlink\" title=\"pwd\"></a>pwd</h2><p></p>\n<p><code>pwd -P</code>  link</p>\n<p><code>pwd -L</code> </p>\n<h2 id=\"rm\"><a href=\"#rm\" class=\"headerlink\" title=\"rm\"></a>rm</h2><p><br></p>\n<p><code>rm -rf /a/b/c</code> </p>\n<p><code>rm -i /a/b/*.log</code> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-f, --force </span><br><span class=\"line\">-i, --interactive </span><br><span class=\"line\">-r, -R, --recursive rm</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"rmdir\"><a href=\"#rmdir\" class=\"headerlink\" title=\"rmdir\"></a>rmdir</h2><p></p>\n<h2 id=\"mv\"><a href=\"#mv\" class=\"headerlink\" title=\"mv\"></a>mv</h2><p>mvmove</p>\n<p><code>mv test.log test1.txt</code> test.logtest1.txt</p>\n<h2 id=\"cp\"><a href=\"#cp\" class=\"headerlink\" title=\"cp\"></a>cp</h2><p></p>\n<p><code>cp log1 log.bak</code> log1log.bak</p>\n<h2 id=\"cat\"><a href=\"#cat\" class=\"headerlink\" title=\"cat\"></a>cat</h2><p></p>\n<p><code>cat filename</code> filename</p>\n<p><code>cat filename1 fielname2 &gt; filename3</code> filename12filename3,</p>\n<h2 id=\"less\"><a href=\"#less\" class=\"headerlink\" title=\"less\"></a>less</h2><p>less</p>\n<h2 id=\"head\"><a href=\"#head\" class=\"headerlink\" title=\"head\"></a>head</h2><p></p>\n<p><code>head -n 10 filename</code> 10</p>\n<h2 id=\"tail\"><a href=\"#tail\" class=\"headerlink\" title=\"tail\"></a>tail</h2><p></p>\n<p><code>tail -n 10 -f filename</code> 10</p>\n<h2 id=\"which\"><a href=\"#which\" class=\"headerlink\" title=\"which\"></a>which</h2><p><br>PATH</p>\n<h2 id=\"whereis\"><a href=\"#whereis\" class=\"headerlink\" title=\"whereis\"></a>whereis</h2><p></p>\n<h2 id=\"locate\"><a href=\"#locate\" class=\"headerlink\" title=\"locate\"></a>locate</h2><p>loacte</p>\n<h2 id=\"find\"><a href=\"#find\" class=\"headerlink\" title=\"find\"></a>find</h2><p></p>\n<p><code>find . -type f -exec ls -l &#123;&#125; \\;</code> ls -lfind-exec</p>\n<p><code>find . -type f -print | xargs file</code> xargs</p>\n<p><code>find . -name &quot;*.log&quot; -print</code> *.log</p>\n<h2 id=\"chomd\"><a href=\"#chomd\" class=\"headerlink\" title=\"chomd\"></a>chomd</h2><p>linux</p>\n<p><code>chomd -R 0644 /test</code> </p>\n<p><code>chomd +x /test/test.sh</code> </p>\n<h2 id=\"tar\"><a href=\"#tar\" class=\"headerlink\" title=\"tar\"></a>tar</h2><p></p>\n<p><code>tar xvf FileName.tar</code> </p>\n<p><code>tar cvf FileName.tar DirName</code> </p>\n<p><code>tar zxvf FileName.tar.gz</code> </p>\n<p><code>tar zcvf FileName.tar.gz DirName</code> </p>\n<p><code>tar jxvf FileName.tar.bz2</code> </p>\n<p><code>tar jcvf FileName.tar.bz2 DirName</code> </p>\n<h2 id=\"chown\"><a href=\"#chown\" class=\"headerlink\" title=\"chown\"></a>chown</h2><p>IDID<br></p>\n<p><code>chown mail:mail -R /test</code> <code>/test</code> mail</p>\n<h2 id=\"df\"><a href=\"#df\" class=\"headerlink\" title=\"df\"></a>df</h2><p>linux</p>\n<p><code>df -h</code> </p>\n<h2 id=\"du\"><a href=\"#du\" class=\"headerlink\" title=\"du\"></a>du</h2><p></p>\n<p><code>du -h  --max-depth=1</code> </p>\n<h2 id=\"ln\"><a href=\"#ln\" class=\"headerlink\" title=\"ln\"></a>ln</h2><p>.<br><br> lnlink</p>\n<p><code>ln -s log2013.log link2013</code> log2013.log</p>\n<h2 id=\"diff\"><a href=\"#diff\" class=\"headerlink\" title=\"diff\"></a>diff</h2><p></p>\n<p><code>diff log2014.log log2013.log</code></p>\n<h2 id=\"date\"><a href=\"#date\" class=\"headerlink\" title=\"date\"></a>date</h2><p></p>\n<p><code>date &#39;+%Y-%m-%d %T&#39;</code> 2020-03-26 15:26:08</p>\n<h2 id=\"grep\"><a href=\"#grep\" class=\"headerlink\" title=\"grep\"></a>grep</h2><p>(Global Regular Expression Print) </p>\n<p><code>ll /usr/local/bin |grep php</code></p>\n<h2 id=\"wc\"><a href=\"#wc\" class=\"headerlink\" title=\"wc\"></a>wc</h2><p>(Word Count)</p>\n<p><code>ps aux|grep php-fpm|wc -l</code> php-fpm</p>\n<h2 id=\"ps\"><a href=\"#ps\" class=\"headerlink\" title=\"ps\"></a>ps</h2><p><code>ps aux|grep php-fpm</code></p>\n<p></p>\n<p>USER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMAND</p>\n<p>USER  </p>\n<p>PID ID</p>\n<p>%CPU CPU</p>\n<p>%MEM  </p>\n<p>VSZ KB </p>\n<p>RSS KB</p>\n<p>TTY pts/0</p>\n<p>STAT D R S T Z &lt; N s l + </p>\n<p>START </p>\n<p>TIME CPU</p>\n<p>COMMAND <br>`</p>\n<p><code>ps -ef|grep php-fpm</code></p>\n<h2 id=\"kill\"><a href=\"#kill\" class=\"headerlink\" title=\"kill\"></a>kill</h2><p></p>\n<p><code>kill -9 12345</code> </p>\n<p><code>kill -15 12345</code> </p>\n<h2 id=\"killall\"><a href=\"#killall\" class=\"headerlink\" title=\"killall\"></a>killall</h2><p>kill processes by name</p>\n<p><code>killall php-fpm</code></p>\n<h2 id=\"pkill\"><a href=\"#pkill\" class=\"headerlink\" title=\"pkill\"></a>pkill</h2><p>pkillkillallkill</p>\n<p><code></code></p>\n<h2 id=\"top\"><a href=\"#top\" class=\"headerlink\" title=\"top\"></a>top</h2><p></p>\n<h2 id=\"uptime\"><a href=\"#uptime\" class=\"headerlink\" title=\"uptime\"></a>uptime</h2><p>top</p>\n<h2 id=\"free\"><a href=\"#free\" class=\"headerlink\" title=\"free\"></a>free</h2><p>Linuxswap,buffer</p>\n<p><code>free -m</code></p>\n<h2 id=\"vmstat\"><a href=\"#vmstat\" class=\"headerlink\" title=\"vmstat\"></a>vmstat</h2><p>Virtual Meomory StatisticsCPU</p>\n<h2 id=\"watch\"><a href=\"#watch\" class=\"headerlink\" title=\"watch\"></a>watch</h2><p>watchLinuxwatch</p>\n<p><code>watch -n 1 -d netstat -ant</code> </p>\n<h2 id=\"crontab\"><a href=\"#crontab\" class=\"headerlink\" title=\"crontab\"></a>crontab</h2><p><code>crontab -u www -l</code> </p>\n<p><code>crontab -e</code> </p>\n<h2 id=\"ifconfig\"><a href=\"#ifconfig\" class=\"headerlink\" title=\"ifconfig\"></a>ifconfig</h2><p></p>\n<p><code>ifconfig eth0 up</code> </p>\n<p><code>ifconfig eth0 down</code> </p>\n<h2 id=\"route\"><a href=\"#route\" class=\"headerlink\" title=\"route\"></a>route</h2><p>IPshow / manipulate the IP routing table</p>\n<h2 id=\"ping\"><a href=\"#ping\" class=\"headerlink\" title=\"ping\"></a>ping</h2><p></p>\n<p><code>ping www.baidu.com</code></p>\n<p><code>ping 112.112.112.112</code></p>\n<h2 id=\"traceroute\"><a href=\"#traceroute\" class=\"headerlink\" title=\"traceroute\"></a>traceroute</h2><p>traceroute3<br>(ms)IP</p>\n<p><code>traceroute www.baidu.com</code></p>\n<h2 id=\"netstat\"><a href=\"#netstat\" class=\"headerlink\" title=\"netstat\"></a>netstat</h2><p>IPTCPUDPICMP<br>netstatTCPTCPUDP</p>\n<p><code>netstat -anlp |grep :9999</code></p>\n<p><code>netstat -s</code> </p>\n<h2 id=\"ss\"><a href=\"#ss\" class=\"headerlink\" title=\"ss\"></a>ss</h2><p>Socket Statisticssssocketnetstat<br>ssTCPnetstat</p>\n<p><code>ss -anlp|grep :9999</code></p>\n<h2 id=\"telnet\"><a href=\"#telnet\" class=\"headerlink\" title=\"telnet\"></a>telnet</h2><p></p>\n<p><code>telnet 127.0.0.1 9999</code></p>\n<h2 id=\"rcp\"><a href=\"#rcp\" class=\"headerlink\" title=\"rcp\"></a>rcp</h2><p>rcp</p>\n<p><code>rcp test1 webserver1:/home/root/test3</code>  test1  webserver1</p>\n<h2 id=\"scp\"><a href=\"#scp\" class=\"headerlink\" title=\"scp\"></a>scp</h2><p>secure copyLinuxcpcpscp</p>\n<p><code>scp local_file remote_username@remote_ip:remote_folder</code> </p>\n<p><code>scp root@192.168.120.204:/opt/soft/nginx-0.5.38.tar.gz /opt/soft/</code> </p>\n<h2 id=\"wget\"><a href=\"#wget\" class=\"headerlink\" title=\"wget\"></a>wget</h2><p></p>\n<p><code>wget http://www.minjieren.com/wordpress-3.1-zh_CN.zip</code> </p>\n<p><code>wget -O wordpress.zip http://www.minjieren.com/download.aspx?id=1080</code> wget -O</p>\n<p><code>wget -c http://www.minjieren.com/wordpress-3.1-zh_CN.zip</code> wget -c</p>\n<p><code>wget -c http://www.minjieren.com/wordpress-3.1-zh_CN.zip</code> wget -b</p>\n<h2 id=\"tcpdump\"><a href=\"#tcpdump\" class=\"headerlink\" title=\"tcpdump\"></a>tcpdump</h2><p> tcpdump tcpdump <br> TCP 3 PUSH/ACK close4 </p>\n<p><code>tcpdump -i lo -Xnlps0 tcp port 9999</code> lotcp9999 </p>\n<p><code>tcpdump host 127.0.0.1</code> IP</p>\n<p><a href=\"https://www.cnblogs.com/ggjucheng/archive/2012/01/14/2322659.html\"></a></p>\n<h2 id=\"strace\"><a href=\"#strace\" class=\"headerlink\" title=\"strace\"></a>strace</h2><p> strace </p>\n<p><code>strace -o /tmp/strace.log -f -p $PID</code></p>\n<h2 id=\"gdb\"><a href=\"#gdb\" class=\"headerlink\" title=\"gdb\"></a>gdb</h2><p>GDB  GNU  UNIX  C/C++ PHP  Swoole  C <br> GDB  PHP+Swoole <br>gdb </p>\n<p><code>gdb -p ID</code></p>\n<h2 id=\"lsof\"><a href=\"#lsof\" class=\"headerlink\" title=\"lsof\"></a>lsof</h2><p> swoole  socketfile</p>\n<p><code>lsof -i:9999</code></p>\n<p><code>lsof -p [ID]</code></p>\n<h2 id=\"pref\"><a href=\"#pref\" class=\"headerlink\" title=\"pref\"></a>pref</h2><p>perf top <br> callgrindxdebugxhprof perf  profile </p>\n<p><code>perf top -p [ID]</code></p>\n<h2 id=\"awk\"><a href=\"#awk\" class=\"headerlink\" title=\"awk\"></a>awk</h2><p></p>\n<p><code>awk &#39;1&#39;&#123;1&#125; 2&#123;2&#125;... filename</code> </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"comment\"># $0 </span></span><br><span class=\"line\"><span class=\"comment\"># $1-$n </span></span><br><span class=\"line\"><span class=\"comment\"># NF $0</span></span><br><span class=\"line\"><span class=\"comment\"># NR  awk   </span></span><br><span class=\"line\"><span class=\"comment\"># FS </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"comment\"># 1$0,$1,$2..$n</span></span><br><span class=\"line\"><span class=\"comment\"># 2</span></span><br><span class=\"line\"><span class=\"comment\"># 3</span></span><br><span class=\"line\"><span class=\"comment\"># 4123</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><code>cat /etc/passwd |awk &#39;BEGIN &#123;FS=&quot;:&quot;&#125; $3 &lt; 10 &#123;print $1 &quot;\\t&quot; $3&#125;&#39;</code></p>\n<h2 id=\"groups\"><a href=\"#groups\" class=\"headerlink\" title=\"groups\"></a>groups</h2><p></p>\n<h2 id=\"useradd\"><a href=\"#useradd\" class=\"headerlink\" title=\"useradd\"></a>useradd</h2><p></p>\n<p><code>userass test_user</code></p>\n<h2 id=\"passwd\"><a href=\"#passwd\" class=\"headerlink\" title=\"passwd\"></a>passwd</h2><p></p>\n<p><code>passwd test_user</code></p>\n<h2 id=\"su\"><a href=\"#su\" class=\"headerlink\" title=\"su\"></a>su</h2><p></p>\n<p><code>su username</code> username<code>non-login</code>shell</p>\n<p><code>su - username</code> <code>login</code>shell</p>\n<p><code>su -c username &quot;cmd&quot;</code> </p>\n<h2 id=\"sudo\"><a href=\"#sudo\" class=\"headerlink\" title=\"sudo\"></a>sudo</h2><p> <code>/ect/sudoers</code><code>visudo</code></p>\n<p><code>sudo -u username pwd</code> root</p>\n<h2 id=\"curl\"><a href=\"#curl\" class=\"headerlink\" title=\"curl\"></a>curl</h2><p>URL<br>curlDICT, FILE, FTP, FTPS, GOPHER, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS, POP3, POP3S, RTMP, RTMPS, RTSP, SCP, SFTP, SMB, SBMS, SMTP, SMTPS, TELNET TFTP</p>\n<p><code>curl --trace-time -v https://www.baidu.com</code> </p>\n<h2 id=\"ssh\"><a href=\"#ssh\" class=\"headerlink\" title=\"ssh\"></a>ssh</h2><p>SSH</p>\n<p><code>ssh-keygen</code> </p>\n<p><code>ssh-copy-id user@host</code> </p>\n<p><code>ssh -p 2222 user@host</code> </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>cd &amp;&amp; tar czv src | ssh user@host &#39;tar xz&#39;</code> $HOME/src/$HOME/src/</p>\n<p><code>ssh user@host &#39;tar cz src&#39; | tar xzv</code> $HOME/src/</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>SSH</p>\n<p><code>ssh -D 8080 user@host</code> 8080SSH</p>\n<p>SSHsocket8080SSH<br>8080</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br>Local forwarding</p>\n<p>host1host2host3<br>host3host1host2</p>\n<p><code>ssh -L 2121:host2:21 host3</code></p>\n<p>L::<br>SSH2121host3host221host2FTP21<br>host12121host221</p>\n<p>host1host3SSH</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>remote forwarding</p>\n<p>host1host2host3host3host1host1host3</p>\n<p>host3host1host3host1SSHhost1</p>\n<p><code>ssh -R 2121:host2:21 host1</code></p>\n<p>R::<br>host12121host3host221host3host1</p>\n<p><code>ssh -NT -f -D 8080 host</code></p>\n<p>NshellTTTYSSH<br>fSSHSSHshell</p>\n<h2 id=\"netcat\"><a href=\"#netcat\" class=\"headerlink\" title=\"netcat\"></a>netcat</h2><p>tcp udp</p>\n<p><code>netcat -u ip port</code> udp</p>\n<h2 id=\"time\"><a href=\"#time\" class=\"headerlink\" title=\"time\"></a>time</h2><p></p>\n<p><code>time command</code></p>\n<p></p>\n<p><a href=\"https://www.cnblogs.com/peida/category/309012.html\">Linux</a></p>\n<p><a href=\"https://wiki.swoole.com/#/other/tools\">Swoole </a></p>\n<p><a href=\"http://www.ruanyifeng.com/blog/2011/12/ssh_port_forwarding.html\"> SSH</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"ls\"><a href=\"#ls\" class=\"headerlink\" title=\"ls\"></a>ls</h2><p><code>ls -alh</code> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-a, -all  . </span><br><span class=\"line\">-l </span><br><span class=\"line\">-h, human-readable  ( 1K 234M 2G)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"cd\"><a href=\"#cd\" class=\"headerlink\" title=\"cd\"></a>cd</h2><p><code>cd /usr/local</code> </p>\n<p><code>cd ../</code> </p>\n<p><code>cd ~</code> home</p>\n<p><code>cd -</code> </p>\n<h2 id=\"pwd\"><a href=\"#pwd\" class=\"headerlink\" title=\"pwd\"></a>pwd</h2><p></p>\n<p><code>pwd -P</code>  link</p>\n<p><code>pwd -L</code> </p>\n<h2 id=\"rm\"><a href=\"#rm\" class=\"headerlink\" title=\"rm\"></a>rm</h2><p><br></p>\n<p><code>rm -rf /a/b/c</code> </p>\n<p><code>rm -i /a/b/*.log</code> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-f, --force </span><br><span class=\"line\">-i, --interactive </span><br><span class=\"line\">-r, -R, --recursive rm</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"rmdir\"><a href=\"#rmdir\" class=\"headerlink\" title=\"rmdir\"></a>rmdir</h2><p></p>\n<h2 id=\"mv\"><a href=\"#mv\" class=\"headerlink\" title=\"mv\"></a>mv</h2><p>mvmove</p>\n<p><code>mv test.log test1.txt</code> test.logtest1.txt</p>\n<h2 id=\"cp\"><a href=\"#cp\" class=\"headerlink\" title=\"cp\"></a>cp</h2><p></p>\n<p><code>cp log1 log.bak</code> log1log.bak</p>\n<h2 id=\"cat\"><a href=\"#cat\" class=\"headerlink\" title=\"cat\"></a>cat</h2><p></p>\n<p><code>cat filename</code> filename</p>\n<p><code>cat filename1 fielname2 &gt; filename3</code> filename12filename3,</p>\n<h2 id=\"less\"><a href=\"#less\" class=\"headerlink\" title=\"less\"></a>less</h2><p>less</p>\n<h2 id=\"head\"><a href=\"#head\" class=\"headerlink\" title=\"head\"></a>head</h2><p></p>\n<p><code>head -n 10 filename</code> 10</p>\n<h2 id=\"tail\"><a href=\"#tail\" class=\"headerlink\" title=\"tail\"></a>tail</h2><p></p>\n<p><code>tail -n 10 -f filename</code> 10</p>\n<h2 id=\"which\"><a href=\"#which\" class=\"headerlink\" title=\"which\"></a>which</h2><p><br>PATH</p>\n<h2 id=\"whereis\"><a href=\"#whereis\" class=\"headerlink\" title=\"whereis\"></a>whereis</h2><p></p>\n<h2 id=\"locate\"><a href=\"#locate\" class=\"headerlink\" title=\"locate\"></a>locate</h2><p>loacte</p>\n<h2 id=\"find\"><a href=\"#find\" class=\"headerlink\" title=\"find\"></a>find</h2><p></p>\n<p><code>find . -type f -exec ls -l &#123;&#125; \\;</code> ls -lfind-exec</p>\n<p><code>find . -type f -print | xargs file</code> xargs</p>\n<p><code>find . -name &quot;*.log&quot; -print</code> *.log</p>\n<h2 id=\"chomd\"><a href=\"#chomd\" class=\"headerlink\" title=\"chomd\"></a>chomd</h2><p>linux</p>\n<p><code>chomd -R 0644 /test</code> </p>\n<p><code>chomd +x /test/test.sh</code> </p>\n<h2 id=\"tar\"><a href=\"#tar\" class=\"headerlink\" title=\"tar\"></a>tar</h2><p></p>\n<p><code>tar xvf FileName.tar</code> </p>\n<p><code>tar cvf FileName.tar DirName</code> </p>\n<p><code>tar zxvf FileName.tar.gz</code> </p>\n<p><code>tar zcvf FileName.tar.gz DirName</code> </p>\n<p><code>tar jxvf FileName.tar.bz2</code> </p>\n<p><code>tar jcvf FileName.tar.bz2 DirName</code> </p>\n<h2 id=\"chown\"><a href=\"#chown\" class=\"headerlink\" title=\"chown\"></a>chown</h2><p>IDID<br></p>\n<p><code>chown mail:mail -R /test</code> <code>/test</code> mail</p>\n<h2 id=\"df\"><a href=\"#df\" class=\"headerlink\" title=\"df\"></a>df</h2><p>linux</p>\n<p><code>df -h</code> </p>\n<h2 id=\"du\"><a href=\"#du\" class=\"headerlink\" title=\"du\"></a>du</h2><p></p>\n<p><code>du -h  --max-depth=1</code> </p>\n<h2 id=\"ln\"><a href=\"#ln\" class=\"headerlink\" title=\"ln\"></a>ln</h2><p>.<br><br> lnlink</p>\n<p><code>ln -s log2013.log link2013</code> log2013.log</p>\n<h2 id=\"diff\"><a href=\"#diff\" class=\"headerlink\" title=\"diff\"></a>diff</h2><p></p>\n<p><code>diff log2014.log log2013.log</code></p>\n<h2 id=\"date\"><a href=\"#date\" class=\"headerlink\" title=\"date\"></a>date</h2><p></p>\n<p><code>date &#39;+%Y-%m-%d %T&#39;</code> 2020-03-26 15:26:08</p>\n<h2 id=\"grep\"><a href=\"#grep\" class=\"headerlink\" title=\"grep\"></a>grep</h2><p>(Global Regular Expression Print) </p>\n<p><code>ll /usr/local/bin |grep php</code></p>\n<h2 id=\"wc\"><a href=\"#wc\" class=\"headerlink\" title=\"wc\"></a>wc</h2><p>(Word Count)</p>\n<p><code>ps aux|grep php-fpm|wc -l</code> php-fpm</p>\n<h2 id=\"ps\"><a href=\"#ps\" class=\"headerlink\" title=\"ps\"></a>ps</h2><p><code>ps aux|grep php-fpm</code></p>\n<p></p>\n<p>USER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMAND</p>\n<p>USER  </p>\n<p>PID ID</p>\n<p>%CPU CPU</p>\n<p>%MEM  </p>\n<p>VSZ KB </p>\n<p>RSS KB</p>\n<p>TTY pts/0</p>\n<p>STAT D R S T Z &lt; N s l + </p>\n<p>START </p>\n<p>TIME CPU</p>\n<p>COMMAND <br>`</p>\n<p><code>ps -ef|grep php-fpm</code></p>\n<h2 id=\"kill\"><a href=\"#kill\" class=\"headerlink\" title=\"kill\"></a>kill</h2><p></p>\n<p><code>kill -9 12345</code> </p>\n<p><code>kill -15 12345</code> </p>\n<h2 id=\"killall\"><a href=\"#killall\" class=\"headerlink\" title=\"killall\"></a>killall</h2><p>kill processes by name</p>\n<p><code>killall php-fpm</code></p>\n<h2 id=\"pkill\"><a href=\"#pkill\" class=\"headerlink\" title=\"pkill\"></a>pkill</h2><p>pkillkillallkill</p>\n<p><code></code></p>\n<h2 id=\"top\"><a href=\"#top\" class=\"headerlink\" title=\"top\"></a>top</h2><p></p>\n<h2 id=\"uptime\"><a href=\"#uptime\" class=\"headerlink\" title=\"uptime\"></a>uptime</h2><p>top</p>\n<h2 id=\"free\"><a href=\"#free\" class=\"headerlink\" title=\"free\"></a>free</h2><p>Linuxswap,buffer</p>\n<p><code>free -m</code></p>\n<h2 id=\"vmstat\"><a href=\"#vmstat\" class=\"headerlink\" title=\"vmstat\"></a>vmstat</h2><p>Virtual Meomory StatisticsCPU</p>\n<h2 id=\"watch\"><a href=\"#watch\" class=\"headerlink\" title=\"watch\"></a>watch</h2><p>watchLinuxwatch</p>\n<p><code>watch -n 1 -d netstat -ant</code> </p>\n<h2 id=\"crontab\"><a href=\"#crontab\" class=\"headerlink\" title=\"crontab\"></a>crontab</h2><p><code>crontab -u www -l</code> </p>\n<p><code>crontab -e</code> </p>\n<h2 id=\"ifconfig\"><a href=\"#ifconfig\" class=\"headerlink\" title=\"ifconfig\"></a>ifconfig</h2><p></p>\n<p><code>ifconfig eth0 up</code> </p>\n<p><code>ifconfig eth0 down</code> </p>\n<h2 id=\"route\"><a href=\"#route\" class=\"headerlink\" title=\"route\"></a>route</h2><p>IPshow / manipulate the IP routing table</p>\n<h2 id=\"ping\"><a href=\"#ping\" class=\"headerlink\" title=\"ping\"></a>ping</h2><p></p>\n<p><code>ping www.baidu.com</code></p>\n<p><code>ping 112.112.112.112</code></p>\n<h2 id=\"traceroute\"><a href=\"#traceroute\" class=\"headerlink\" title=\"traceroute\"></a>traceroute</h2><p>traceroute3<br>(ms)IP</p>\n<p><code>traceroute www.baidu.com</code></p>\n<h2 id=\"netstat\"><a href=\"#netstat\" class=\"headerlink\" title=\"netstat\"></a>netstat</h2><p>IPTCPUDPICMP<br>netstatTCPTCPUDP</p>\n<p><code>netstat -anlp |grep :9999</code></p>\n<p><code>netstat -s</code> </p>\n<h2 id=\"ss\"><a href=\"#ss\" class=\"headerlink\" title=\"ss\"></a>ss</h2><p>Socket Statisticssssocketnetstat<br>ssTCPnetstat</p>\n<p><code>ss -anlp|grep :9999</code></p>\n<h2 id=\"telnet\"><a href=\"#telnet\" class=\"headerlink\" title=\"telnet\"></a>telnet</h2><p></p>\n<p><code>telnet 127.0.0.1 9999</code></p>\n<h2 id=\"rcp\"><a href=\"#rcp\" class=\"headerlink\" title=\"rcp\"></a>rcp</h2><p>rcp</p>\n<p><code>rcp test1 webserver1:/home/root/test3</code>  test1  webserver1</p>\n<h2 id=\"scp\"><a href=\"#scp\" class=\"headerlink\" title=\"scp\"></a>scp</h2><p>secure copyLinuxcpcpscp</p>\n<p><code>scp local_file remote_username@remote_ip:remote_folder</code> </p>\n<p><code>scp root@192.168.120.204:/opt/soft/nginx-0.5.38.tar.gz /opt/soft/</code> </p>\n<h2 id=\"wget\"><a href=\"#wget\" class=\"headerlink\" title=\"wget\"></a>wget</h2><p></p>\n<p><code>wget http://www.minjieren.com/wordpress-3.1-zh_CN.zip</code> </p>\n<p><code>wget -O wordpress.zip http://www.minjieren.com/download.aspx?id=1080</code> wget -O</p>\n<p><code>wget -c http://www.minjieren.com/wordpress-3.1-zh_CN.zip</code> wget -c</p>\n<p><code>wget -c http://www.minjieren.com/wordpress-3.1-zh_CN.zip</code> wget -b</p>\n<h2 id=\"tcpdump\"><a href=\"#tcpdump\" class=\"headerlink\" title=\"tcpdump\"></a>tcpdump</h2><p> tcpdump tcpdump <br> TCP 3 PUSH/ACK close4 </p>\n<p><code>tcpdump -i lo -Xnlps0 tcp port 9999</code> lotcp9999 </p>\n<p><code>tcpdump host 127.0.0.1</code> IP</p>\n<p><a href=\"https://www.cnblogs.com/ggjucheng/archive/2012/01/14/2322659.html\"></a></p>\n<h2 id=\"strace\"><a href=\"#strace\" class=\"headerlink\" title=\"strace\"></a>strace</h2><p> strace </p>\n<p><code>strace -o /tmp/strace.log -f -p $PID</code></p>\n<h2 id=\"gdb\"><a href=\"#gdb\" class=\"headerlink\" title=\"gdb\"></a>gdb</h2><p>GDB  GNU  UNIX  C/C++ PHP  Swoole  C <br> GDB  PHP+Swoole <br>gdb </p>\n<p><code>gdb -p ID</code></p>\n<h2 id=\"lsof\"><a href=\"#lsof\" class=\"headerlink\" title=\"lsof\"></a>lsof</h2><p> swoole  socketfile</p>\n<p><code>lsof -i:9999</code></p>\n<p><code>lsof -p [ID]</code></p>\n<h2 id=\"pref\"><a href=\"#pref\" class=\"headerlink\" title=\"pref\"></a>pref</h2><p>perf top <br> callgrindxdebugxhprof perf  profile </p>\n<p><code>perf top -p [ID]</code></p>\n<h2 id=\"awk\"><a href=\"#awk\" class=\"headerlink\" title=\"awk\"></a>awk</h2><p></p>\n<p><code>awk &#39;1&#39;&#123;1&#125; 2&#123;2&#125;... filename</code> </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"comment\"># $0 </span></span><br><span class=\"line\"><span class=\"comment\"># $1-$n </span></span><br><span class=\"line\"><span class=\"comment\"># NF $0</span></span><br><span class=\"line\"><span class=\"comment\"># NR  awk   </span></span><br><span class=\"line\"><span class=\"comment\"># FS </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"comment\"># 1$0,$1,$2..$n</span></span><br><span class=\"line\"><span class=\"comment\"># 2</span></span><br><span class=\"line\"><span class=\"comment\"># 3</span></span><br><span class=\"line\"><span class=\"comment\"># 4123</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><code>cat /etc/passwd |awk &#39;BEGIN &#123;FS=&quot;:&quot;&#125; $3 &lt; 10 &#123;print $1 &quot;\\t&quot; $3&#125;&#39;</code></p>\n<h2 id=\"groups\"><a href=\"#groups\" class=\"headerlink\" title=\"groups\"></a>groups</h2><p></p>\n<h2 id=\"useradd\"><a href=\"#useradd\" class=\"headerlink\" title=\"useradd\"></a>useradd</h2><p></p>\n<p><code>userass test_user</code></p>\n<h2 id=\"passwd\"><a href=\"#passwd\" class=\"headerlink\" title=\"passwd\"></a>passwd</h2><p></p>\n<p><code>passwd test_user</code></p>\n<h2 id=\"su\"><a href=\"#su\" class=\"headerlink\" title=\"su\"></a>su</h2><p></p>\n<p><code>su username</code> username<code>non-login</code>shell</p>\n<p><code>su - username</code> <code>login</code>shell</p>\n<p><code>su -c username &quot;cmd&quot;</code> </p>\n<h2 id=\"sudo\"><a href=\"#sudo\" class=\"headerlink\" title=\"sudo\"></a>sudo</h2><p> <code>/ect/sudoers</code><code>visudo</code></p>\n<p><code>sudo -u username pwd</code> root</p>\n<h2 id=\"curl\"><a href=\"#curl\" class=\"headerlink\" title=\"curl\"></a>curl</h2><p>URL<br>curlDICT, FILE, FTP, FTPS, GOPHER, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS, POP3, POP3S, RTMP, RTMPS, RTSP, SCP, SFTP, SMB, SBMS, SMTP, SMTPS, TELNET TFTP</p>\n<p><code>curl --trace-time -v https://www.baidu.com</code> </p>\n<h2 id=\"ssh\"><a href=\"#ssh\" class=\"headerlink\" title=\"ssh\"></a>ssh</h2><p>SSH</p>\n<p><code>ssh-keygen</code> </p>\n<p><code>ssh-copy-id user@host</code> </p>\n<p><code>ssh -p 2222 user@host</code> </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>cd &amp;&amp; tar czv src | ssh user@host &#39;tar xz&#39;</code> $HOME/src/$HOME/src/</p>\n<p><code>ssh user@host &#39;tar cz src&#39; | tar xzv</code> $HOME/src/</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>SSH</p>\n<p><code>ssh -D 8080 user@host</code> 8080SSH</p>\n<p>SSHsocket8080SSH<br>8080</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br>Local forwarding</p>\n<p>host1host2host3<br>host3host1host2</p>\n<p><code>ssh -L 2121:host2:21 host3</code></p>\n<p>L::<br>SSH2121host3host221host2FTP21<br>host12121host221</p>\n<p>host1host3SSH</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>remote forwarding</p>\n<p>host1host2host3host3host1host1host3</p>\n<p>host3host1host3host1SSHhost1</p>\n<p><code>ssh -R 2121:host2:21 host1</code></p>\n<p>R::<br>host12121host3host221host3host1</p>\n<p><code>ssh -NT -f -D 8080 host</code></p>\n<p>NshellTTTYSSH<br>fSSHSSHshell</p>\n<h2 id=\"netcat\"><a href=\"#netcat\" class=\"headerlink\" title=\"netcat\"></a>netcat</h2><p>tcp udp</p>\n<p><code>netcat -u ip port</code> udp</p>\n<h2 id=\"time\"><a href=\"#time\" class=\"headerlink\" title=\"time\"></a>time</h2><p></p>\n<p><code>time command</code></p>\n<p></p>\n<p><a href=\"https://www.cnblogs.com/peida/category/309012.html\">Linux</a></p>\n<p><a href=\"https://wiki.swoole.com/#/other/tools\">Swoole </a></p>\n<p><a href=\"http://www.ruanyifeng.com/blog/2011/12/ssh_port_forwarding.html\"> SSH</a></p>\n"},{"url":"/2020/04/14/markdown.html","title":"Markdown","keywords":"Markdown","description":"Markdown","date":"2020-04-14T06:53:12.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n## 2\n\n```markdown\n## 2\n```\n\n## \n\n> \n\n> \n> > 1\n> > > 2\n\n```markdown\n> \n\n> \n> > 1\n> > > 2\n ```\n\n## \n\n- 1\n- 2\n- 3\n\n```markdown\n- 1\n- 2\n- 3\n```\n\n## \n\n1. 1\n2. 1\n3. 1\n\n```markdown\n1. 1\n2. 1\n3. 1\n```\n\n## \n\n1|2|3\n:---|:---:|---:\n1|2|3\n\n```markdown\n1|2|3\n:---|:---:|---:\n1|2|3\n```\n\n## \n\n```php\n<?php\necho 'Hello world';\n```\n\n```markdown\n```php\n<?php\necho 'Hello world';\n```\n```\n\n## \n***\n---\n\n```markdown\n***\n---\n```\n## \n\n[](https://blog.wenjy.top)\n\n```markdown\n[](https://blog.wenjy.top)\n```\n\n## \n\n![](https://www.baidu.com/img/bd_logo1.png \"logo\")\n\n```markdown\n![](https://www.baidu.com/img/bd_logo1.png \"logo\")\n```\n\n## \n\n*1*\n\n**1**\n\n```markdown\n*1*\n\n**1**\n```\n\n\n\n[Markdown](https://markdown-zh.readthedocs.io/en/latest/)\n","source":"_posts/tools/markdown.md","raw":"---\nurl: /2020/04/14/markdown.html\ntitle: \"Markdown\"\nkeywords: \"Markdown\"\ndescription: \"Markdown\"\ndate: 2020-04-14T22:53:12+08:00\ndraft: false\ntags: [\"Markdown\"]\ntags_weight: 100\ncategories: [\"Markdown\"]\ncategoryes_weight: 100\n---\n\n## 2\n\n```markdown\n## 2\n```\n\n## \n\n> \n\n> \n> > 1\n> > > 2\n\n```markdown\n> \n\n> \n> > 1\n> > > 2\n ```\n\n## \n\n- 1\n- 2\n- 3\n\n```markdown\n- 1\n- 2\n- 3\n```\n\n## \n\n1. 1\n2. 1\n3. 1\n\n```markdown\n1. 1\n2. 1\n3. 1\n```\n\n## \n\n1|2|3\n:---|:---:|---:\n1|2|3\n\n```markdown\n1|2|3\n:---|:---:|---:\n1|2|3\n```\n\n## \n\n```php\n<?php\necho 'Hello world';\n```\n\n```markdown\n```php\n<?php\necho 'Hello world';\n```\n```\n\n## \n***\n---\n\n```markdown\n***\n---\n```\n## \n\n[](https://blog.wenjy.top)\n\n```markdown\n[](https://blog.wenjy.top)\n```\n\n## \n\n![](https://www.baidu.com/img/bd_logo1.png \"logo\")\n\n```markdown\n![](https://www.baidu.com/img/bd_logo1.png \"logo\")\n```\n\n## \n\n*1*\n\n**1**\n\n```markdown\n*1*\n\n**1**\n```\n\n\n\n[Markdown](https://markdown-zh.readthedocs.io/en/latest/)\n","slug":"tools/markdown","published":1,"updated":"2020-04-16T13:10:20.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf3m002wmv0548z3251x","content":"<h2 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h2><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">## 2</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><blockquote>\n<p></p>\n</blockquote>\n<blockquote>\n<p></p>\n<blockquote>\n<p>1</p>\n<blockquote>\n<p>2</p>\n</blockquote>\n</blockquote>\n</blockquote>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"quote\">&gt; </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"quote\">&gt; </span></span><br><span class=\"line\"><span class=\"quote\">&gt; &gt; 1</span></span><br><span class=\"line\"><span class=\"quote\">&gt; &gt; &gt; 2</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>1</li>\n<li>2</li>\n<li>3</li>\n</ul>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"bullet\">-</span> 1</span><br><span class=\"line\"><span class=\"bullet\">-</span> 2</span><br><span class=\"line\"><span class=\"bullet\">-</span> 3</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li>1</li>\n<li>1</li>\n<li>1</li>\n</ol>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"bullet\">1.</span> 1</span><br><span class=\"line\"><span class=\"bullet\">2.</span> 1</span><br><span class=\"line\"><span class=\"bullet\">3.</span> 1</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><table>\n<thead>\n<tr>\n<th align=\"left\">1</th>\n<th align=\"center\">2</th>\n<th align=\"right\">3</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">1</td>\n<td align=\"center\">2</td>\n<td align=\"right\">3</td>\n</tr>\n</tbody></table>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1|2|3</span><br><span class=\"line\">:---|:---:|---:</span><br><span class=\"line\">1|2|3</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">&#x27;Hello world&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"code\">```php</span></span><br><span class=\"line\"><span class=\"code\">&lt;?php</span></span><br><span class=\"line\"><span class=\"code\">echo &#x27;Hello world&#x27;;</span></span><br><span class=\"line\"><span class=\"code\">```</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><hr>\n<hr>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"strong\">**<span class=\"emphasis\">*</span></span></span><br><span class=\"line\"><span class=\"strong\"><span class=\"emphasis\">---</span></span></span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"https://blog.wenjy.top/\"></a></p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"string\"></span>](<span class=\"link\">https://blog.wenjy.top</span>)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><img src=\"https://www.baidu.com/img/bd_logo1.png\" alt=\"\" title=\"logo\"></p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">![<span class=\"string\"></span>](<span class=\"link\">https://www.baidu.com/img/bd_logo1.png &quot;logo&quot;</span>)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><em>1</em></p>\n<p><strong>1</strong></p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"emphasis\">*1*</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"strong\">**1**</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><a href=\"https://markdown-zh.readthedocs.io/en/latest/\">Markdown</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h2><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">## 2</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><blockquote>\n<p></p>\n</blockquote>\n<blockquote>\n<p></p>\n<blockquote>\n<p>1</p>\n<blockquote>\n<p>2</p>\n</blockquote>\n</blockquote>\n</blockquote>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"quote\">&gt; </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"quote\">&gt; </span></span><br><span class=\"line\"><span class=\"quote\">&gt; &gt; 1</span></span><br><span class=\"line\"><span class=\"quote\">&gt; &gt; &gt; 2</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>1</li>\n<li>2</li>\n<li>3</li>\n</ul>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"bullet\">-</span> 1</span><br><span class=\"line\"><span class=\"bullet\">-</span> 2</span><br><span class=\"line\"><span class=\"bullet\">-</span> 3</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li>1</li>\n<li>1</li>\n<li>1</li>\n</ol>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"bullet\">1.</span> 1</span><br><span class=\"line\"><span class=\"bullet\">2.</span> 1</span><br><span class=\"line\"><span class=\"bullet\">3.</span> 1</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><table>\n<thead>\n<tr>\n<th align=\"left\">1</th>\n<th align=\"center\">2</th>\n<th align=\"right\">3</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">1</td>\n<td align=\"center\">2</td>\n<td align=\"right\">3</td>\n</tr>\n</tbody></table>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1|2|3</span><br><span class=\"line\">:---|:---:|---:</span><br><span class=\"line\">1|2|3</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">&#x27;Hello world&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"code\">```php</span></span><br><span class=\"line\"><span class=\"code\">&lt;?php</span></span><br><span class=\"line\"><span class=\"code\">echo &#x27;Hello world&#x27;;</span></span><br><span class=\"line\"><span class=\"code\">```</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><hr>\n<hr>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"strong\">**<span class=\"emphasis\">*</span></span></span><br><span class=\"line\"><span class=\"strong\"><span class=\"emphasis\">---</span></span></span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"https://blog.wenjy.top/\"></a></p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"string\"></span>](<span class=\"link\">https://blog.wenjy.top</span>)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><img src=\"https://www.baidu.com/img/bd_logo1.png\" alt=\"\" title=\"logo\"></p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">![<span class=\"string\"></span>](<span class=\"link\">https://www.baidu.com/img/bd_logo1.png &quot;logo&quot;</span>)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><em>1</em></p>\n<p><strong>1</strong></p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"emphasis\">*1*</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"strong\">**1**</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><a href=\"https://markdown-zh.readthedocs.io/en/latest/\">Markdown</a></p>\n"},{"url":"/2020/05/12/phpstorm-keymap.html","title":"Phpstorm","date":"2020-05-12T02:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n[peryiqiao https://learnku.com/laravel/t/5420/your-keyboard-shortcuts-please](https://learnku.com/laravel/t/5420/your-keyboard-shortcuts-please)\n\n\n\n## Mac\n\n|\n---|---\n|Command\n|Shift\n|Control\n|Enter/Return\n|Option/Alt\n\n## \n\nWin/Linux|Mac|\n---|---|---\nCtrl + mouse over code|+mouse over code|\nAlt + Insert|N,,N|  `/**` + \nCtrl + /|/| // \nCtrl + Shift + /|/| /**/ \nAlt + Enter|| Show Intention Actionuse namespacegetter setter\nCtrl + Alt + L|L|\nTab / Shift + Tab|tab,+tab| / \nCtrl+X or Shift+Delete|X|\nCtrl+C or Ctrl+Insert|C|\nCtrl+V or Shift+Insert|V|\nCtrl+Shift+V|V|\t\nCtrl+ D|D|\nCtrl+ Y|del|win Ctrl+Insert\nCtrl+Delete| + del|\nCtrl++/-| +,-| /  / \nCtrl + F4|W|win Ctrl + W\nAlt + Up/Down| + /|\n\n##  / \n\nWin/Linux|Mac|\n---|---|---\nCtrl + F|F|\nShift + Shift| + |\n\n## \nWin/Linux|Mac|\n---|---|---\nCtrl + E|E|\nCtrl + L|L|\nCtrl + Click| + Click|\nAlt + Left| + Left|\nCtrl + W| + W|\nCtrl + Tab| + Tab|\n\n## \n\n\n\n","source":"_posts/tools/phpstorm_keymap.md","raw":"---\nurl: /2020/05/12/phpstorm-keymap.html\ntitle: \"Phpstorm\"\ndate: 2020-05-12T18:31:57+08:00\ndraft: false\ntags: [\"Phpstorm\"]\ntags_weight: 100\ncategories: [\"Phpstorm\"]\ncategoryes_weight: 100\n---\n\n[peryiqiao https://learnku.com/laravel/t/5420/your-keyboard-shortcuts-please](https://learnku.com/laravel/t/5420/your-keyboard-shortcuts-please)\n\n\n\n## Mac\n\n|\n---|---\n|Command\n|Shift\n|Control\n|Enter/Return\n|Option/Alt\n\n## \n\nWin/Linux|Mac|\n---|---|---\nCtrl + mouse over code|+mouse over code|\nAlt + Insert|N,,N|  `/**` + \nCtrl + /|/| // \nCtrl + Shift + /|/| /**/ \nAlt + Enter|| Show Intention Actionuse namespacegetter setter\nCtrl + Alt + L|L|\nTab / Shift + Tab|tab,+tab| / \nCtrl+X or Shift+Delete|X|\nCtrl+C or Ctrl+Insert|C|\nCtrl+V or Shift+Insert|V|\nCtrl+Shift+V|V|\t\nCtrl+ D|D|\nCtrl+ Y|del|win Ctrl+Insert\nCtrl+Delete| + del|\nCtrl++/-| +,-| /  / \nCtrl + F4|W|win Ctrl + W\nAlt + Up/Down| + /|\n\n##  / \n\nWin/Linux|Mac|\n---|---|---\nCtrl + F|F|\nShift + Shift| + |\n\n## \nWin/Linux|Mac|\n---|---|---\nCtrl + E|E|\nCtrl + L|L|\nCtrl + Click| + Click|\nAlt + Left| + Left|\nCtrl + W| + W|\nCtrl + Tab| + Tab|\n\n## \n\n\n\n","slug":"tools/phpstorm_keymap","published":1,"updated":"2020-05-16T14:58:19.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf3n002zmv05b5zq29v3","content":"<p><a href=\"https://learnku.com/laravel/t/5420/your-keyboard-shortcuts-please\">peryiqiao https://learnku.com/laravel/t/5420/your-keyboard-shortcuts-please</a></p>\n<p></p>\n<h2 id=\"Mac\"><a href=\"#Mac\" class=\"headerlink\" title=\"Mac\"></a>Mac</h2><table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td></td>\n<td>Command</td>\n</tr>\n<tr>\n<td></td>\n<td>Shift</td>\n</tr>\n<tr>\n<td></td>\n<td>Control</td>\n</tr>\n<tr>\n<td></td>\n<td>Enter/Return</td>\n</tr>\n<tr>\n<td></td>\n<td>Option/Alt</td>\n</tr>\n</tbody></table>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><table>\n<thead>\n<tr>\n<th>Win/Linux</th>\n<th>Mac</th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Ctrl + mouse over code</td>\n<td>+mouse over code</td>\n<td></td>\n</tr>\n<tr>\n<td>Alt + Insert</td>\n<td>N,,N</td>\n<td>  <code>/**</code> + </td>\n</tr>\n<tr>\n<td>Ctrl + /</td>\n<td>/</td>\n<td> // </td>\n</tr>\n<tr>\n<td>Ctrl + Shift + /</td>\n<td>/</td>\n<td> /**/ </td>\n</tr>\n<tr>\n<td>Alt + Enter</td>\n<td></td>\n<td> Show Intention Actionuse namespacegetter setter</td>\n</tr>\n<tr>\n<td>Ctrl + Alt + L</td>\n<td>L</td>\n<td></td>\n</tr>\n<tr>\n<td>Tab / Shift + Tab</td>\n<td>tab,+tab</td>\n<td> / </td>\n</tr>\n<tr>\n<td>Ctrl+X or Shift+Delete</td>\n<td>X</td>\n<td></td>\n</tr>\n<tr>\n<td>Ctrl+C or Ctrl+Insert</td>\n<td>C</td>\n<td></td>\n</tr>\n<tr>\n<td>Ctrl+V or Shift+Insert</td>\n<td>V</td>\n<td></td>\n</tr>\n<tr>\n<td>Ctrl+Shift+V</td>\n<td>V</td>\n<td></td>\n</tr>\n<tr>\n<td>Ctrl+ D</td>\n<td>D</td>\n<td></td>\n</tr>\n<tr>\n<td>Ctrl+ Y</td>\n<td>del</td>\n<td>win Ctrl+Insert</td>\n</tr>\n<tr>\n<td>Ctrl+Delete</td>\n<td> + del</td>\n<td></td>\n</tr>\n<tr>\n<td>Ctrl++/-</td>\n<td> +,-</td>\n<td> /  / </td>\n</tr>\n<tr>\n<td>Ctrl + F4</td>\n<td>W</td>\n<td>win Ctrl + W</td>\n</tr>\n<tr>\n<td>Alt + Up/Down</td>\n<td> + /</td>\n<td></td>\n</tr>\n</tbody></table>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" / \"></a> / </h2><table>\n<thead>\n<tr>\n<th>Win/Linux</th>\n<th>Mac</th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Ctrl + F</td>\n<td>F</td>\n<td></td>\n</tr>\n<tr>\n<td>Shift + Shift</td>\n<td> + </td>\n<td></td>\n</tr>\n</tbody></table>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><table>\n<thead>\n<tr>\n<th>Win/Linux</th>\n<th>Mac</th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Ctrl + E</td>\n<td>E</td>\n<td></td>\n</tr>\n<tr>\n<td>Ctrl + L</td>\n<td>L</td>\n<td></td>\n</tr>\n<tr>\n<td>Ctrl + Click</td>\n<td> + Click</td>\n<td></td>\n</tr>\n<tr>\n<td>Alt + Left</td>\n<td> + Left</td>\n<td></td>\n</tr>\n<tr>\n<td>Ctrl + W</td>\n<td> + W</td>\n<td></td>\n</tr>\n<tr>\n<td>Ctrl + Tab</td>\n<td> + Tab</td>\n<td></td>\n</tr>\n</tbody></table>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://learnku.com/laravel/t/5420/your-keyboard-shortcuts-please\">peryiqiao https://learnku.com/laravel/t/5420/your-keyboard-shortcuts-please</a></p>\n<p></p>\n<h2 id=\"Mac\"><a href=\"#Mac\" class=\"headerlink\" title=\"Mac\"></a>Mac</h2><table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td></td>\n<td>Command</td>\n</tr>\n<tr>\n<td></td>\n<td>Shift</td>\n</tr>\n<tr>\n<td></td>\n<td>Control</td>\n</tr>\n<tr>\n<td></td>\n<td>Enter/Return</td>\n</tr>\n<tr>\n<td></td>\n<td>Option/Alt</td>\n</tr>\n</tbody></table>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><table>\n<thead>\n<tr>\n<th>Win/Linux</th>\n<th>Mac</th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Ctrl + mouse over code</td>\n<td>+mouse over code</td>\n<td></td>\n</tr>\n<tr>\n<td>Alt + Insert</td>\n<td>N,,N</td>\n<td>  <code>/**</code> + </td>\n</tr>\n<tr>\n<td>Ctrl + /</td>\n<td>/</td>\n<td> // </td>\n</tr>\n<tr>\n<td>Ctrl + Shift + /</td>\n<td>/</td>\n<td> /**/ </td>\n</tr>\n<tr>\n<td>Alt + Enter</td>\n<td></td>\n<td> Show Intention Actionuse namespacegetter setter</td>\n</tr>\n<tr>\n<td>Ctrl + Alt + L</td>\n<td>L</td>\n<td></td>\n</tr>\n<tr>\n<td>Tab / Shift + Tab</td>\n<td>tab,+tab</td>\n<td> / </td>\n</tr>\n<tr>\n<td>Ctrl+X or Shift+Delete</td>\n<td>X</td>\n<td></td>\n</tr>\n<tr>\n<td>Ctrl+C or Ctrl+Insert</td>\n<td>C</td>\n<td></td>\n</tr>\n<tr>\n<td>Ctrl+V or Shift+Insert</td>\n<td>V</td>\n<td></td>\n</tr>\n<tr>\n<td>Ctrl+Shift+V</td>\n<td>V</td>\n<td></td>\n</tr>\n<tr>\n<td>Ctrl+ D</td>\n<td>D</td>\n<td></td>\n</tr>\n<tr>\n<td>Ctrl+ Y</td>\n<td>del</td>\n<td>win Ctrl+Insert</td>\n</tr>\n<tr>\n<td>Ctrl+Delete</td>\n<td> + del</td>\n<td></td>\n</tr>\n<tr>\n<td>Ctrl++/-</td>\n<td> +,-</td>\n<td> /  / </td>\n</tr>\n<tr>\n<td>Ctrl + F4</td>\n<td>W</td>\n<td>win Ctrl + W</td>\n</tr>\n<tr>\n<td>Alt + Up/Down</td>\n<td> + /</td>\n<td></td>\n</tr>\n</tbody></table>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" / \"></a> / </h2><table>\n<thead>\n<tr>\n<th>Win/Linux</th>\n<th>Mac</th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Ctrl + F</td>\n<td>F</td>\n<td></td>\n</tr>\n<tr>\n<td>Shift + Shift</td>\n<td> + </td>\n<td></td>\n</tr>\n</tbody></table>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><table>\n<thead>\n<tr>\n<th>Win/Linux</th>\n<th>Mac</th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Ctrl + E</td>\n<td>E</td>\n<td></td>\n</tr>\n<tr>\n<td>Ctrl + L</td>\n<td>L</td>\n<td></td>\n</tr>\n<tr>\n<td>Ctrl + Click</td>\n<td> + Click</td>\n<td></td>\n</tr>\n<tr>\n<td>Alt + Left</td>\n<td> + Left</td>\n<td></td>\n</tr>\n<tr>\n<td>Ctrl + W</td>\n<td> + W</td>\n<td></td>\n</tr>\n<tr>\n<td>Ctrl + Tab</td>\n<td> + Tab</td>\n<td></td>\n</tr>\n</tbody></table>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n"},{"url":"/2020/04/14/regexp.html","title":"","keywords":"","description":"","date":"2020-04-14T06:53:12.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n## \n\n|\n---|---\n\\\\|`\\\\`  \\\n^|\n$|\n.|\\n\\n\n*|`zo*`zzoo*{0,}\n+|`zo+`zozooz+{1,}\n?|`do(es)?`doesdoesdo?{0,1}\n?|*,+,?{n}{n,}{n,m}oooo`o+?`o`o+`o\n{n}|nn`o{2}`Bobofoodo\n{n,}|nn`o{2,}`Bobofooooodo`o{1,}``o+``o{0,}``o*`\n{n,m}|mnn<=mnm`{1,3}`foooooodo`o{0,1}``o?`\n(pattern)|patternMatches\n(?<group>pattern)|patternMatches\nx&#124;y|xyz&#124;foodzfood(z&#124;f)oodzoodfood\nxyz|`[abc]`plaina\n[^xyz]|`[^abc]`plainp\n[a-z]|`[a-z]`az\n[^a-z]|`[^a-z]`az\n\\d|`[0-9]`\n\\D|`[^0-9]`\n\\s|`[ \\f\\n\\r\\t\\v]`\n\\S|`[^ \\f\\n\\r\\t\\v]`\n\\w|`[A-Za-z0-9_]`\n\\W|`[^A-Za-z0-9_]`\n\n## \n\n`/^[\\u2E80-\\u9FFF]+$/` \n\n## \n\n[1](https://regex101.com/)\n\n\n\n[](https://tool.oschina.net/uploads/apidocs/jquery/regexp.html)\n","source":"_posts/tools/regexp.md","raw":"---\nurl: /2020/04/14/regexp.html\ntitle: \"\"\nkeywords: \"\"\ndescription: \"\"\ndate: 2020-04-14T22:53:12+08:00\ndraft: false\ntags: [\"\"]\ntags_weight: 100\ncategories: [\"\"]\ncategoryes_weight: 100\n---\n\n## \n\n|\n---|---\n\\\\|`\\\\`  \\\n^|\n$|\n.|\\n\\n\n*|`zo*`zzoo*{0,}\n+|`zo+`zozooz+{1,}\n?|`do(es)?`doesdoesdo?{0,1}\n?|*,+,?{n}{n,}{n,m}oooo`o+?`o`o+`o\n{n}|nn`o{2}`Bobofoodo\n{n,}|nn`o{2,}`Bobofooooodo`o{1,}``o+``o{0,}``o*`\n{n,m}|mnn<=mnm`{1,3}`foooooodo`o{0,1}``o?`\n(pattern)|patternMatches\n(?<group>pattern)|patternMatches\nx&#124;y|xyz&#124;foodzfood(z&#124;f)oodzoodfood\nxyz|`[abc]`plaina\n[^xyz]|`[^abc]`plainp\n[a-z]|`[a-z]`az\n[^a-z]|`[^a-z]`az\n\\d|`[0-9]`\n\\D|`[^0-9]`\n\\s|`[ \\f\\n\\r\\t\\v]`\n\\S|`[^ \\f\\n\\r\\t\\v]`\n\\w|`[A-Za-z0-9_]`\n\\W|`[^A-Za-z0-9_]`\n\n## \n\n`/^[\\u2E80-\\u9FFF]+$/` \n\n## \n\n[1](https://regex101.com/)\n\n\n\n[](https://tool.oschina.net/uploads/apidocs/jquery/regexp.html)\n","slug":"tools/regexp","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf3q0034mv0532rd63s5","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>\\</td>\n<td><code>\\\\</code>  \\</td>\n</tr>\n<tr>\n<td>^</td>\n<td></td>\n</tr>\n<tr>\n<td>$</td>\n<td></td>\n</tr>\n<tr>\n<td>.</td>\n<td>\\n\\n</td>\n</tr>\n<tr>\n<td>*</td>\n<td><code>zo*</code>zzoo*{0,}</td>\n</tr>\n<tr>\n<td>+</td>\n<td><code>zo+</code>zozooz+{1,}</td>\n</tr>\n<tr>\n<td>?</td>\n<td><code>do(es)?</code>doesdoesdo?{0,1}</td>\n</tr>\n<tr>\n<td>?</td>\n<td>*,+,?{n}{n,}{n,m}oooo<code>o+?</code>o<code>o+</code>o</td>\n</tr>\n<tr>\n<td>{n}</td>\n<td>nn<code>o&#123;2&#125;</code>Bobofoodo</td>\n</tr>\n<tr>\n<td>{n,}</td>\n<td>nn<code>o&#123;2,&#125;</code>Bobofooooodo<code>o&#123;1,&#125;</code><code>o+</code><code>o&#123;0,&#125;</code><code>o*</code></td>\n</tr>\n<tr>\n<td>{n,m}</td>\n<td>mnn&lt;=mnm<code>&#123;1,3&#125;</code>foooooodo<code>o&#123;0,1&#125;</code><code>o?</code></td>\n</tr>\n<tr>\n<td>(pattern)</td>\n<td>patternMatches</td>\n</tr>\n<tr>\n<td>(?<group>pattern)</td>\n<td>patternMatches</td>\n</tr>\n<tr>\n<td>x&#124;y</td>\n<td>xyz&#124;foodzfood(z&#124;f)oodzoodfood</td>\n</tr>\n<tr>\n<td>xyz</td>\n<td><code>[abc]</code>plaina</td>\n</tr>\n<tr>\n<td>[^xyz]</td>\n<td><code>[^abc]</code>plainp</td>\n</tr>\n<tr>\n<td>[a-z]</td>\n<td><code>[a-z]</code>az</td>\n</tr>\n<tr>\n<td>[^a-z]</td>\n<td><code>[^a-z]</code>az</td>\n</tr>\n<tr>\n<td>\\d</td>\n<td><code>[0-9]</code></td>\n</tr>\n<tr>\n<td>\\D</td>\n<td><code>[^0-9]</code></td>\n</tr>\n<tr>\n<td>\\s</td>\n<td><code>[ \\f\\n\\r\\t\\v]</code></td>\n</tr>\n<tr>\n<td>\\S</td>\n<td><code>[^ \\f\\n\\r\\t\\v]</code></td>\n</tr>\n<tr>\n<td>\\w</td>\n<td><code>[A-Za-z0-9_]</code></td>\n</tr>\n<tr>\n<td>\\W</td>\n<td><code>[^A-Za-z0-9_]</code></td>\n</tr>\n</tbody></table>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code>/^[\\u2E80-\\u9FFF]+$/</code> </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"https://regex101.com/\">1</a></p>\n<p></p>\n<p><a href=\"https://tool.oschina.net/uploads/apidocs/jquery/regexp.html\"></a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>\\</td>\n<td><code>\\\\</code>  \\</td>\n</tr>\n<tr>\n<td>^</td>\n<td></td>\n</tr>\n<tr>\n<td>$</td>\n<td></td>\n</tr>\n<tr>\n<td>.</td>\n<td>\\n\\n</td>\n</tr>\n<tr>\n<td>*</td>\n<td><code>zo*</code>zzoo*{0,}</td>\n</tr>\n<tr>\n<td>+</td>\n<td><code>zo+</code>zozooz+{1,}</td>\n</tr>\n<tr>\n<td>?</td>\n<td><code>do(es)?</code>doesdoesdo?{0,1}</td>\n</tr>\n<tr>\n<td>?</td>\n<td>*,+,?{n}{n,}{n,m}oooo<code>o+?</code>o<code>o+</code>o</td>\n</tr>\n<tr>\n<td>{n}</td>\n<td>nn<code>o&#123;2&#125;</code>Bobofoodo</td>\n</tr>\n<tr>\n<td>{n,}</td>\n<td>nn<code>o&#123;2,&#125;</code>Bobofooooodo<code>o&#123;1,&#125;</code><code>o+</code><code>o&#123;0,&#125;</code><code>o*</code></td>\n</tr>\n<tr>\n<td>{n,m}</td>\n<td>mnn&lt;=mnm<code>&#123;1,3&#125;</code>foooooodo<code>o&#123;0,1&#125;</code><code>o?</code></td>\n</tr>\n<tr>\n<td>(pattern)</td>\n<td>patternMatches</td>\n</tr>\n<tr>\n<td>(?<group>pattern)</td>\n<td>patternMatches</td>\n</tr>\n<tr>\n<td>x&#124;y</td>\n<td>xyz&#124;foodzfood(z&#124;f)oodzoodfood</td>\n</tr>\n<tr>\n<td>xyz</td>\n<td><code>[abc]</code>plaina</td>\n</tr>\n<tr>\n<td>[^xyz]</td>\n<td><code>[^abc]</code>plainp</td>\n</tr>\n<tr>\n<td>[a-z]</td>\n<td><code>[a-z]</code>az</td>\n</tr>\n<tr>\n<td>[^a-z]</td>\n<td><code>[^a-z]</code>az</td>\n</tr>\n<tr>\n<td>\\d</td>\n<td><code>[0-9]</code></td>\n</tr>\n<tr>\n<td>\\D</td>\n<td><code>[^0-9]</code></td>\n</tr>\n<tr>\n<td>\\s</td>\n<td><code>[ \\f\\n\\r\\t\\v]</code></td>\n</tr>\n<tr>\n<td>\\S</td>\n<td><code>[^ \\f\\n\\r\\t\\v]</code></td>\n</tr>\n<tr>\n<td>\\w</td>\n<td><code>[A-Za-z0-9_]</code></td>\n</tr>\n<tr>\n<td>\\W</td>\n<td><code>[^A-Za-z0-9_]</code></td>\n</tr>\n</tbody></table>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code>/^[\\u2E80-\\u9FFF]+$/</code> </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"https://regex101.com/\">1</a></p>\n<p></p>\n<p><a href=\"https://tool.oschina.net/uploads/apidocs/jquery/regexp.html\"></a></p>\n"},{"url":"/2020/08/02/mysql-common-sql.html","title":"Mysql ","keywords":"Mysql","description":"Mysql","date":"2020-08-02T06:30:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n## \n```mysql\nselect version();\n\nselect @@version;\n\nSHOW VARIABLES LIKE \"version\";\n```\n## \n\n```mysql\nselect @@tx_isolation;\n```\n\n## \n\n```mysql\nselect @@global.tx_isolation;\n```\n\n## \n\n```mysql\nSELECT * FROM INFORMATION_SCHEMA.INNODB_TRX;\n```\n\n## \n\n```mysql\nSELECT * FROM INFORMATION_SCHEMA.INNODB_LOCKS;\n```\n\n## \n\n```mysql\nSELECT * FROM INFORMATION_SCHEMA.INNODB_LOCK_WAITS;\n```\n\n## InnoDB\n```mysql\nSET GLOBAL innodb_status_output=ON;\n```\n\n## InnoDB\n```mysql\nSET GLOBAL innodb_status_output_locks=ON;\n```\n\n## \n```mysql\nSHOW ENGINE INNODB STATUS;\n```\n\n## \n```mysql\nCREATE USER 'test1'@'127.0.0.1' IDENTIFIED BY '123456';\n```\n\n## \n```mysql\nRENAME USER 'test1'@'127.0.0.1' TO 'test1'@'127.0.0.2';\n\nSET PASSWORD FOR 'test1'@'127.0.0.2' = PASSWORD('1234567');\nupdate user set password = password('123456') where user = 'test1';\ngrant all privileges on test_dadabase.* to 'test1'@'127.0.0.2' identified by '1234567';\n\nflush privileges;\n```\n","source":"_posts/mysql/common.md","raw":"---\nurl: /2020/08/02/mysql-common-sql.html\ntitle: \"Mysql \"\nkeywords: \"Mysql\"\ndescription: \"Mysql\"\ndate: 2020-08-02T22:30:57+08:00\ndraft: false\ntags: [\"MySQL\"]\ntags_weight: 100\ncategories: [\"MySQL\"]\ncategoryes_weight: 100\n---\n\n## \n```mysql\nselect version();\n\nselect @@version;\n\nSHOW VARIABLES LIKE \"version\";\n```\n## \n\n```mysql\nselect @@tx_isolation;\n```\n\n## \n\n```mysql\nselect @@global.tx_isolation;\n```\n\n## \n\n```mysql\nSELECT * FROM INFORMATION_SCHEMA.INNODB_TRX;\n```\n\n## \n\n```mysql\nSELECT * FROM INFORMATION_SCHEMA.INNODB_LOCKS;\n```\n\n## \n\n```mysql\nSELECT * FROM INFORMATION_SCHEMA.INNODB_LOCK_WAITS;\n```\n\n## InnoDB\n```mysql\nSET GLOBAL innodb_status_output=ON;\n```\n\n## InnoDB\n```mysql\nSET GLOBAL innodb_status_output_locks=ON;\n```\n\n## \n```mysql\nSHOW ENGINE INNODB STATUS;\n```\n\n## \n```mysql\nCREATE USER 'test1'@'127.0.0.1' IDENTIFIED BY '123456';\n```\n\n## \n```mysql\nRENAME USER 'test1'@'127.0.0.1' TO 'test1'@'127.0.0.2';\n\nSET PASSWORD FOR 'test1'@'127.0.0.2' = PASSWORD('1234567');\nupdate user set password = password('123456') where user = 'test1';\ngrant all privileges on test_dadabase.* to 'test1'@'127.0.0.2' identified by '1234567';\n\nflush privileges;\n```\n","slug":"mysql/common","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf3r0037mv05bbhacny6","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select version();</span><br><span class=\"line\"></span><br><span class=\"line\">select @@version;</span><br><span class=\"line\"></span><br><span class=\"line\">SHOW VARIABLES LIKE &quot;version&quot;;</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select @@tx_isolation;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select @@global.tx_isolation;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT * FROM INFORMATION_SCHEMA.INNODB_TRX;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT * FROM INFORMATION_SCHEMA.INNODB_LOCKS;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT * FROM INFORMATION_SCHEMA.INNODB_LOCK_WAITS;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"InnoDB\"><a href=\"#InnoDB\" class=\"headerlink\" title=\"InnoDB\"></a>InnoDB</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SET GLOBAL innodb_status_output&#x3D;ON;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"InnoDB\"><a href=\"#InnoDB\" class=\"headerlink\" title=\"InnoDB\"></a>InnoDB</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SET GLOBAL innodb_status_output_locks&#x3D;ON;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SHOW ENGINE INNODB STATUS;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CREATE USER &#39;test1&#39;@&#39;127.0.0.1&#39; IDENTIFIED BY &#39;123456&#39;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">RENAME USER &#39;test1&#39;@&#39;127.0.0.1&#39; TO &#39;test1&#39;@&#39;127.0.0.2&#39;;</span><br><span class=\"line\"></span><br><span class=\"line\">SET PASSWORD FOR &#39;test1&#39;@&#39;127.0.0.2&#39; &#x3D; PASSWORD(&#39;1234567&#39;);</span><br><span class=\"line\">update user set password &#x3D; password(&#39;123456&#39;) where user &#x3D; &#39;test1&#39;;</span><br><span class=\"line\">grant all privileges on test_dadabase.* to &#39;test1&#39;@&#39;127.0.0.2&#39; identified by &#39;1234567&#39;;</span><br><span class=\"line\"></span><br><span class=\"line\">flush privileges;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select version();</span><br><span class=\"line\"></span><br><span class=\"line\">select @@version;</span><br><span class=\"line\"></span><br><span class=\"line\">SHOW VARIABLES LIKE &quot;version&quot;;</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select @@tx_isolation;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select @@global.tx_isolation;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT * FROM INFORMATION_SCHEMA.INNODB_TRX;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT * FROM INFORMATION_SCHEMA.INNODB_LOCKS;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT * FROM INFORMATION_SCHEMA.INNODB_LOCK_WAITS;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"InnoDB\"><a href=\"#InnoDB\" class=\"headerlink\" title=\"InnoDB\"></a>InnoDB</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SET GLOBAL innodb_status_output&#x3D;ON;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"InnoDB\"><a href=\"#InnoDB\" class=\"headerlink\" title=\"InnoDB\"></a>InnoDB</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SET GLOBAL innodb_status_output_locks&#x3D;ON;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SHOW ENGINE INNODB STATUS;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CREATE USER &#39;test1&#39;@&#39;127.0.0.1&#39; IDENTIFIED BY &#39;123456&#39;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">RENAME USER &#39;test1&#39;@&#39;127.0.0.1&#39; TO &#39;test1&#39;@&#39;127.0.0.2&#39;;</span><br><span class=\"line\"></span><br><span class=\"line\">SET PASSWORD FOR &#39;test1&#39;@&#39;127.0.0.2&#39; &#x3D; PASSWORD(&#39;1234567&#39;);</span><br><span class=\"line\">update user set password &#x3D; password(&#39;123456&#39;) where user &#x3D; &#39;test1&#39;;</span><br><span class=\"line\">grant all privileges on test_dadabase.* to &#39;test1&#39;@&#39;127.0.0.2&#39; identified by &#39;1234567&#39;;</span><br><span class=\"line\"></span><br><span class=\"line\">flush privileges;</span><br></pre></td></tr></table></figure>\n"},{"url":"/2019/10/11/mysql-index-optimize.html","title":"Mysql ","keywords":"Mysql,","description":"Mysql ","date":"2019-10-11T06:30:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n## \n### \n#### 1. B-Tree\n```\n\nInnoDB()MyISAM()\n```\n- \n```\nwhere\n```\n\n- InnoDB\n```\nInnoDB\n```\n\n- \n```\n\n```\n\n- \n```\nORDER BYMySQLORDER BY\n```\n\n- \n```mysql\nCREATE TABLE `test` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `realname` varchar(10) NOT NULL DEFAULT '',\n  `sex` tinyint(4) NOT NULL DEFAULT '0',\n  `age` tinyint(4) NOT NULL DEFAULT '0',\n  `job` varchar(10) NOT NULL DEFAULT '',\n  PRIMARY KEY (`id`),\n  KEY `test_realname_sex_age_index` (`realname`,`sex`,`age`),\n  KEY `sex_index` (`sex`),\n  KEY `age_index` (`age`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8\n```\n#### 1. \n\n- \n```mysql\nEXPLAIN SELECT * FROM test WHERE realname = 'wen' ORDER BY sex DESC ,age DESC;\n```\n\n- \n```mysql\nEXPLAIN SELECT * FROM test WHERE realname = 'wen' ORDER BY sex DESC ,age ASC;\n```\n#### 2. \n\n- \n```mysql\nEXPLAIN SELECT * FROM test WHERE realname = 'wen' ORDER BY sex,job;\n```\n#### 3. where order by\n\n- \n```mysql\nEXPLAIN SELECT * FROM test WHERE realname = 'wen' ORDER BY age;\n```\n- \n```mysql\nEXPLAIN SELECT * FROM test WHERE realname = 'wen' ORDER BY sex;\n```\n#### 4. \n\n- \n```mysql\nEXPLAIN SELECT * FROM test WHERE realname > 'wen' ORDER BY sex,age;\n\nEXPLAIN SELECT * FROM test WHERE realname BETWEEN 'wen1' AND 'wen2' ORDER BY sex,age;\n```\n#### 5. \n\n- \n```\nEXPLAIN SELECT * FROM test WHERE realname = 'wen' AND sex IN (1,2) ORDER BY  age;\n```\n#### 6. \n\n\n```mysql\nEXPLAIN SELECT * FROM test WHERE realname > 'qqq' ORDER BY realname;\n```\n\n\n```mysql\nEXPLAIN SELECT * FROM test WHERE realname = 'qqq' ORDER BY realname;\n```\n- \n\n\n```mysql\nSELECT count(DISTINCT realname)/COUNT(\\*) realname_selectivity,count(DISTINCT sex)/COUNT(\\*) sex_selectivity,count(DISTINCT age)/COUNT(\\*) age_selectivity,count(\\*) total FROM test;\n```\n\n- \n\n#### 1. where\n\n \n```mysql\nEXPLAIN SELECT * FROM test WHERE sex = 1 ORDER BY age;\n```\n \n```mysql\nEXPLAIN SELECT * FROM test WHERE sex = 1 ORDER BY sex;\n```\n \n```mysql\nEXPLAIN SELECT * FROM test WHERE age > 17 ORDER BY age;\n```\n#### 2. where\n\n \n```mysql\nEXPLAIN SELECT * FROM test ORDER BY id;\n```\n \n```mysql\nEXPLAIN SELECT * FROM test ORDER BY sex;\n```\n#### 3. where\n\n \n```mysql\nEXPLAIN SELECT * FROM test WHERE sex = 1 AND age > 17 ORDER BY age;\n```\n \n```mysql\nEXPLAIN SELECT * FROM test WHERE sex > 1 AND age > 17 ORDER BY age;\n```\n\n \n```mysql\nEXPLAIN SELECT * FROM test WHERE sex > 1 AND age > 18 ORDER BY sex,age;\n```\n\n \n```mysql\nEXPLAIN SELECT * FROM test WHERE age > 17 ORDER BY age;\n```\n\n \n```mysql\nEXPLAIN SELECT * FROM test WHERE sex > 1 AND age > 17 ORDER BY sex;\n```\n- \n\nORDER BY LIMIT\n```mysql\nSELECT * FROM test WHERE realname = 'wen' ORDER BY sex LIMIT 100000,10;\n\nSELECT * FROM test INNER JOIN (SELECT id FROM test WHERE realname = 'wen' ORDER BY sex LIMIT 100000,10) t USING (id);\n```\n\n#### 2. \nMemory\n\n#### 3. R-Tree\n\n#### 4. (Full-text)\nB-Tree\n\n## \n","source":"_posts/mysql/index-optimize.md","raw":"---\nurl: /2019/10/11/mysql-index-optimize.html\ntitle: \"Mysql \"\nkeywords: \"Mysql,\"\ndescription: \"Mysql \"\ndate: 2019-10-11T22:30:57+08:00\ndraft: false\ntags: [\"MySQL\"]\ntags_weight: 100\ncategories: [\"MySQL\"]\ncategoryes_weight: 100\n---\n\n## \n### \n#### 1. B-Tree\n```\n\nInnoDB()MyISAM()\n```\n- \n```\nwhere\n```\n\n- InnoDB\n```\nInnoDB\n```\n\n- \n```\n\n```\n\n- \n```\nORDER BYMySQLORDER BY\n```\n\n- \n```mysql\nCREATE TABLE `test` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `realname` varchar(10) NOT NULL DEFAULT '',\n  `sex` tinyint(4) NOT NULL DEFAULT '0',\n  `age` tinyint(4) NOT NULL DEFAULT '0',\n  `job` varchar(10) NOT NULL DEFAULT '',\n  PRIMARY KEY (`id`),\n  KEY `test_realname_sex_age_index` (`realname`,`sex`,`age`),\n  KEY `sex_index` (`sex`),\n  KEY `age_index` (`age`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8\n```\n#### 1. \n\n- \n```mysql\nEXPLAIN SELECT * FROM test WHERE realname = 'wen' ORDER BY sex DESC ,age DESC;\n```\n\n- \n```mysql\nEXPLAIN SELECT * FROM test WHERE realname = 'wen' ORDER BY sex DESC ,age ASC;\n```\n#### 2. \n\n- \n```mysql\nEXPLAIN SELECT * FROM test WHERE realname = 'wen' ORDER BY sex,job;\n```\n#### 3. where order by\n\n- \n```mysql\nEXPLAIN SELECT * FROM test WHERE realname = 'wen' ORDER BY age;\n```\n- \n```mysql\nEXPLAIN SELECT * FROM test WHERE realname = 'wen' ORDER BY sex;\n```\n#### 4. \n\n- \n```mysql\nEXPLAIN SELECT * FROM test WHERE realname > 'wen' ORDER BY sex,age;\n\nEXPLAIN SELECT * FROM test WHERE realname BETWEEN 'wen1' AND 'wen2' ORDER BY sex,age;\n```\n#### 5. \n\n- \n```\nEXPLAIN SELECT * FROM test WHERE realname = 'wen' AND sex IN (1,2) ORDER BY  age;\n```\n#### 6. \n\n\n```mysql\nEXPLAIN SELECT * FROM test WHERE realname > 'qqq' ORDER BY realname;\n```\n\n\n```mysql\nEXPLAIN SELECT * FROM test WHERE realname = 'qqq' ORDER BY realname;\n```\n- \n\n\n```mysql\nSELECT count(DISTINCT realname)/COUNT(\\*) realname_selectivity,count(DISTINCT sex)/COUNT(\\*) sex_selectivity,count(DISTINCT age)/COUNT(\\*) age_selectivity,count(\\*) total FROM test;\n```\n\n- \n\n#### 1. where\n\n \n```mysql\nEXPLAIN SELECT * FROM test WHERE sex = 1 ORDER BY age;\n```\n \n```mysql\nEXPLAIN SELECT * FROM test WHERE sex = 1 ORDER BY sex;\n```\n \n```mysql\nEXPLAIN SELECT * FROM test WHERE age > 17 ORDER BY age;\n```\n#### 2. where\n\n \n```mysql\nEXPLAIN SELECT * FROM test ORDER BY id;\n```\n \n```mysql\nEXPLAIN SELECT * FROM test ORDER BY sex;\n```\n#### 3. where\n\n \n```mysql\nEXPLAIN SELECT * FROM test WHERE sex = 1 AND age > 17 ORDER BY age;\n```\n \n```mysql\nEXPLAIN SELECT * FROM test WHERE sex > 1 AND age > 17 ORDER BY age;\n```\n\n \n```mysql\nEXPLAIN SELECT * FROM test WHERE sex > 1 AND age > 18 ORDER BY sex,age;\n```\n\n \n```mysql\nEXPLAIN SELECT * FROM test WHERE age > 17 ORDER BY age;\n```\n\n \n```mysql\nEXPLAIN SELECT * FROM test WHERE sex > 1 AND age > 17 ORDER BY sex;\n```\n- \n\nORDER BY LIMIT\n```mysql\nSELECT * FROM test WHERE realname = 'wen' ORDER BY sex LIMIT 100000,10;\n\nSELECT * FROM test INNER JOIN (SELECT id FROM test WHERE realname = 'wen' ORDER BY sex LIMIT 100000,10) t USING (id);\n```\n\n#### 2. \nMemory\n\n#### 3. R-Tree\n\n#### 4. (Full-text)\nB-Tree\n\n## \n","slug":"mysql/index-optimize","published":1,"updated":"2020-04-02T13:04:45.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf3v003cmv05blpt05io","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"1-B-Tree\"><a href=\"#1-B-Tree\" class=\"headerlink\" title=\"1. B-Tree\"></a>1. B-Tree</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">InnoDB()MyISAM()</span><br></pre></td></tr></table></figure>\n<ul>\n<li><p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">where</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>InnoDB</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">InnoDB</span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ORDER BYMySQLORDER BY</span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CREATE TABLE &#96;test&#96; (</span><br><span class=\"line\">  &#96;id&#96; int(11) NOT NULL AUTO_INCREMENT,</span><br><span class=\"line\">  &#96;realname&#96; varchar(10) NOT NULL DEFAULT &#39;&#39;,</span><br><span class=\"line\">  &#96;sex&#96; tinyint(4) NOT NULL DEFAULT &#39;0&#39;,</span><br><span class=\"line\">  &#96;age&#96; tinyint(4) NOT NULL DEFAULT &#39;0&#39;,</span><br><span class=\"line\">  &#96;job&#96; varchar(10) NOT NULL DEFAULT &#39;&#39;,</span><br><span class=\"line\">  PRIMARY KEY (&#96;id&#96;),</span><br><span class=\"line\">  KEY &#96;test_realname_sex_age_index&#96; (&#96;realname&#96;,&#96;sex&#96;,&#96;age&#96;),</span><br><span class=\"line\">  KEY &#96;sex_index&#96; (&#96;sex&#96;),</span><br><span class=\"line\">  KEY &#96;age_index&#96; (&#96;age&#96;)</span><br><span class=\"line\">) ENGINE&#x3D;InnoDB DEFAULT CHARSET&#x3D;utf8</span><br></pre></td></tr></table></figure>\n<h4 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h4></li>\n<li><p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test WHERE realname &#x3D; &#39;wen&#39; ORDER BY sex DESC ,age DESC;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test WHERE realname &#x3D; &#39;wen&#39; ORDER BY sex DESC ,age ASC;</span><br></pre></td></tr></table></figure>\n<h4 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h4></li>\n<li><p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test WHERE realname &#x3D; &#39;wen&#39; ORDER BY sex,job;</span><br></pre></td></tr></table></figure>\n<h4 id=\"3-where-order-by\"><a href=\"#3-where-order-by\" class=\"headerlink\" title=\"3. where order by\"></a>3. where order by</h4></li>\n<li><p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test WHERE realname &#x3D; &#39;wen&#39; ORDER BY age;</span><br></pre></td></tr></table></figure></li>\n<li><p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test WHERE realname &#x3D; &#39;wen&#39; ORDER BY sex;</span><br></pre></td></tr></table></figure>\n<h4 id=\"4-\"><a href=\"#4-\" class=\"headerlink\" title=\"4. \"></a>4. </h4></li>\n<li><p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test WHERE realname &gt; &#39;wen&#39; ORDER BY sex,age;</span><br><span class=\"line\"></span><br><span class=\"line\">EXPLAIN SELECT * FROM test WHERE realname BETWEEN &#39;wen1&#39; AND &#39;wen2&#39; ORDER BY sex,age;</span><br></pre></td></tr></table></figure>\n<h4 id=\"5-\"><a href=\"#5-\" class=\"headerlink\" title=\"5. \"></a>5. </h4></li>\n<li><p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test WHERE realname &#x3D; &#39;wen&#39; AND sex IN (1,2) ORDER BY  age;</span><br></pre></td></tr></table></figure>\n<h4 id=\"6-\"><a href=\"#6-\" class=\"headerlink\" title=\"6. \"></a>6. </h4></li>\n</ul>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test WHERE realname &gt; &#39;qqq&#39; ORDER BY realname;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test WHERE realname &#x3D; &#39;qqq&#39; ORDER BY realname;</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT count(DISTINCT realname)&#x2F;COUNT(\\*) realname_selectivity,count(DISTINCT sex)&#x2F;COUNT(\\*) sex_selectivity,count(DISTINCT age)&#x2F;COUNT(\\*) age_selectivity,count(\\*) total FROM test;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li></li>\n</ul>\n<h4 id=\"1-where\"><a href=\"#1-where\" class=\"headerlink\" title=\"1. where\"></a>1. where</h4><p> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test WHERE sex &#x3D; 1 ORDER BY age;</span><br></pre></td></tr></table></figure>\n<p> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test WHERE sex &#x3D; 1 ORDER BY sex;</span><br></pre></td></tr></table></figure>\n<p> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test WHERE age &gt; 17 ORDER BY age;</span><br></pre></td></tr></table></figure>\n<h4 id=\"2-where\"><a href=\"#2-where\" class=\"headerlink\" title=\"2. where\"></a>2. where</h4><p> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test ORDER BY id;</span><br></pre></td></tr></table></figure>\n<p> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test ORDER BY sex;</span><br></pre></td></tr></table></figure>\n<h4 id=\"3-where\"><a href=\"#3-where\" class=\"headerlink\" title=\"3. where\"></a>3. where</h4><p> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test WHERE sex &#x3D; 1 AND age &gt; 17 ORDER BY age;</span><br></pre></td></tr></table></figure>\n<p> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test WHERE sex &gt; 1 AND age &gt; 17 ORDER BY age;</span><br></pre></td></tr></table></figure>\n\n<p> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test WHERE sex &gt; 1 AND age &gt; 18 ORDER BY sex,age;</span><br></pre></td></tr></table></figure>\n\n<p> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test WHERE age &gt; 17 ORDER BY age;</span><br></pre></td></tr></table></figure>\n\n<p> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test WHERE sex &gt; 1 AND age &gt; 17 ORDER BY sex;</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<p>ORDER BY LIMIT</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT * FROM test WHERE realname &#x3D; &#39;wen&#39; ORDER BY sex LIMIT 100000,10;</span><br><span class=\"line\"></span><br><span class=\"line\">SELECT * FROM test INNER JOIN (SELECT id FROM test WHERE realname &#x3D; &#39;wen&#39; ORDER BY sex LIMIT 100000,10) t USING (id);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h4><p>Memory</p>\n<h4 id=\"3-R-Tree\"><a href=\"#3-R-Tree\" class=\"headerlink\" title=\"3. R-Tree\"></a>3. R-Tree</h4><h4 id=\"4--Full-text\"><a href=\"#4--Full-text\" class=\"headerlink\" title=\"4. (Full-text)\"></a>4. (Full-text)</h4><p>B-Tree</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"1-B-Tree\"><a href=\"#1-B-Tree\" class=\"headerlink\" title=\"1. B-Tree\"></a>1. B-Tree</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">InnoDB()MyISAM()</span><br></pre></td></tr></table></figure>\n<ul>\n<li><p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">where</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>InnoDB</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">InnoDB</span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ORDER BYMySQLORDER BY</span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CREATE TABLE &#96;test&#96; (</span><br><span class=\"line\">  &#96;id&#96; int(11) NOT NULL AUTO_INCREMENT,</span><br><span class=\"line\">  &#96;realname&#96; varchar(10) NOT NULL DEFAULT &#39;&#39;,</span><br><span class=\"line\">  &#96;sex&#96; tinyint(4) NOT NULL DEFAULT &#39;0&#39;,</span><br><span class=\"line\">  &#96;age&#96; tinyint(4) NOT NULL DEFAULT &#39;0&#39;,</span><br><span class=\"line\">  &#96;job&#96; varchar(10) NOT NULL DEFAULT &#39;&#39;,</span><br><span class=\"line\">  PRIMARY KEY (&#96;id&#96;),</span><br><span class=\"line\">  KEY &#96;test_realname_sex_age_index&#96; (&#96;realname&#96;,&#96;sex&#96;,&#96;age&#96;),</span><br><span class=\"line\">  KEY &#96;sex_index&#96; (&#96;sex&#96;),</span><br><span class=\"line\">  KEY &#96;age_index&#96; (&#96;age&#96;)</span><br><span class=\"line\">) ENGINE&#x3D;InnoDB DEFAULT CHARSET&#x3D;utf8</span><br></pre></td></tr></table></figure>\n<h4 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h4></li>\n<li><p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test WHERE realname &#x3D; &#39;wen&#39; ORDER BY sex DESC ,age DESC;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test WHERE realname &#x3D; &#39;wen&#39; ORDER BY sex DESC ,age ASC;</span><br></pre></td></tr></table></figure>\n<h4 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h4></li>\n<li><p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test WHERE realname &#x3D; &#39;wen&#39; ORDER BY sex,job;</span><br></pre></td></tr></table></figure>\n<h4 id=\"3-where-order-by\"><a href=\"#3-where-order-by\" class=\"headerlink\" title=\"3. where order by\"></a>3. where order by</h4></li>\n<li><p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test WHERE realname &#x3D; &#39;wen&#39; ORDER BY age;</span><br></pre></td></tr></table></figure></li>\n<li><p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test WHERE realname &#x3D; &#39;wen&#39; ORDER BY sex;</span><br></pre></td></tr></table></figure>\n<h4 id=\"4-\"><a href=\"#4-\" class=\"headerlink\" title=\"4. \"></a>4. </h4></li>\n<li><p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test WHERE realname &gt; &#39;wen&#39; ORDER BY sex,age;</span><br><span class=\"line\"></span><br><span class=\"line\">EXPLAIN SELECT * FROM test WHERE realname BETWEEN &#39;wen1&#39; AND &#39;wen2&#39; ORDER BY sex,age;</span><br></pre></td></tr></table></figure>\n<h4 id=\"5-\"><a href=\"#5-\" class=\"headerlink\" title=\"5. \"></a>5. </h4></li>\n<li><p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test WHERE realname &#x3D; &#39;wen&#39; AND sex IN (1,2) ORDER BY  age;</span><br></pre></td></tr></table></figure>\n<h4 id=\"6-\"><a href=\"#6-\" class=\"headerlink\" title=\"6. \"></a>6. </h4></li>\n</ul>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test WHERE realname &gt; &#39;qqq&#39; ORDER BY realname;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test WHERE realname &#x3D; &#39;qqq&#39; ORDER BY realname;</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT count(DISTINCT realname)&#x2F;COUNT(\\*) realname_selectivity,count(DISTINCT sex)&#x2F;COUNT(\\*) sex_selectivity,count(DISTINCT age)&#x2F;COUNT(\\*) age_selectivity,count(\\*) total FROM test;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li></li>\n</ul>\n<h4 id=\"1-where\"><a href=\"#1-where\" class=\"headerlink\" title=\"1. where\"></a>1. where</h4><p> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test WHERE sex &#x3D; 1 ORDER BY age;</span><br></pre></td></tr></table></figure>\n<p> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test WHERE sex &#x3D; 1 ORDER BY sex;</span><br></pre></td></tr></table></figure>\n<p> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test WHERE age &gt; 17 ORDER BY age;</span><br></pre></td></tr></table></figure>\n<h4 id=\"2-where\"><a href=\"#2-where\" class=\"headerlink\" title=\"2. where\"></a>2. where</h4><p> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test ORDER BY id;</span><br></pre></td></tr></table></figure>\n<p> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test ORDER BY sex;</span><br></pre></td></tr></table></figure>\n<h4 id=\"3-where\"><a href=\"#3-where\" class=\"headerlink\" title=\"3. where\"></a>3. where</h4><p> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test WHERE sex &#x3D; 1 AND age &gt; 17 ORDER BY age;</span><br></pre></td></tr></table></figure>\n<p> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test WHERE sex &gt; 1 AND age &gt; 17 ORDER BY age;</span><br></pre></td></tr></table></figure>\n\n<p> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test WHERE sex &gt; 1 AND age &gt; 18 ORDER BY sex,age;</span><br></pre></td></tr></table></figure>\n\n<p> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test WHERE age &gt; 17 ORDER BY age;</span><br></pre></td></tr></table></figure>\n\n<p> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPLAIN SELECT * FROM test WHERE sex &gt; 1 AND age &gt; 17 ORDER BY sex;</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<p>ORDER BY LIMIT</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT * FROM test WHERE realname &#x3D; &#39;wen&#39; ORDER BY sex LIMIT 100000,10;</span><br><span class=\"line\"></span><br><span class=\"line\">SELECT * FROM test INNER JOIN (SELECT id FROM test WHERE realname &#x3D; &#39;wen&#39; ORDER BY sex LIMIT 100000,10) t USING (id);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h4><p>Memory</p>\n<h4 id=\"3-R-Tree\"><a href=\"#3-R-Tree\" class=\"headerlink\" title=\"3. R-Tree\"></a>3. R-Tree</h4><h4 id=\"4--Full-text\"><a href=\"#4--Full-text\" class=\"headerlink\" title=\"4. (Full-text)\"></a>4. (Full-text)</h4><p>B-Tree</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2>"},{"url":"/2020/05/16/mysql-lock-transaction.html","title":"MySQL ","keywords":"MySQL,","description":"MySQL,","date":"2020-05-16T05:31:57.000Z","draft":true,"tags_weight":100,"categoryes_weight":100,"_content":"\n## \n\n\n\nshared lockexclusive lockread lockwrite lock.\n\n\n\n\nMySQL\n\n1. table lock\n\nMySQL\n\n2. row lock\n","source":"_posts/mysql/lock_transaction.md","raw":"---\nurl: /2020/05/16/mysql-lock-transaction.html\ntitle: \"MySQL \"\nkeywords: \"MySQL,\"\ndescription: \"MySQL,\"\ndate: 2020-05-16T21:31:57+08:00\ndraft: true\ntags: [\"MySQL\"]\ntags_weight: 100\ncategories: [\"MySQL\"]\ncategoryes_weight: 100\n---\n\n## \n\n\n\nshared lockexclusive lockread lockwrite lock.\n\n\n\n\nMySQL\n\n1. table lock\n\nMySQL\n\n2. row lock\n","slug":"mysql/lock_transaction","published":1,"updated":"2020-07-16T14:03:58.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf3w003fmv05d1qmfa8c","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><br><br>shared lockexclusive lockread lockwrite lock.</p>\n<p><br></p>\n<p>MySQL</p>\n<ol>\n<li>table lock</li>\n</ol>\n<p>MySQL</p>\n<ol start=\"2\">\n<li>row lock</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><br><br>shared lockexclusive lockread lockwrite lock.</p>\n<p><br></p>\n<p>MySQL</p>\n<ol>\n<li>table lock</li>\n</ol>\n<p>MySQL</p>\n<ol start=\"2\">\n<li>row lock</li>\n</ol>\n"},{"url":"/2018/10/01/design-patten-readme.html","title":"-","date":"2018-10-01T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n## \n\n- ****\n\n```\n\n\n\n\n\n```\n\n## -\n\n- ****\n\n```\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n```\n\n## \n\n- ****\n- ****\n\n```\n\n\n\n\n\n1. \n2. \n```\n\n## \n\n- ****\n\n```\n\n\n\n\n\n\n\n1. \n2. \n```\n\n## \n\n```\n\n\n\n\n\n\n\n\n```\n## /\n\n- **/**\n\n```\n\n\n\n\nABBA\n\n\n/\n\n```\n","source":"_posts/design_patten/README.md","raw":"---\nurl: /2018/10/01/design-patten-readme.html\ntitle: \"-\"\ndate: 2018-10-01T22:31:57+08:00\ndraft: false\ntags: [\"PHP\", \"\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n## \n\n- ****\n\n```\n\n\n\n\n\n```\n\n## -\n\n- ****\n\n```\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n```\n\n## \n\n- ****\n- ****\n\n```\n\n\n\n\n\n1. \n2. \n```\n\n## \n\n- ****\n\n```\n\n\n\n\n\n\n\n1. \n2. \n```\n\n## \n\n```\n\n\n\n\n\n\n\n\n```\n## /\n\n- **/**\n\n```\n\n\n\n\nABBA\n\n\n/\n\n```\n","slug":"design_patten/README","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf3y003kmv05azfub5pm","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><strong></strong></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"-\"></a>-</h2><ul>\n<li><strong></strong></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><strong></strong></li>\n<li><strong></strong></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">1. </span><br><span class=\"line\">2. </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><strong></strong></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">1. </span><br><span class=\"line\">2. </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"/\"></a>/</h2><ul>\n<li><strong>/</strong></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">ABBA</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><strong></strong></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"-\"></a>-</h2><ul>\n<li><strong></strong></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><strong></strong></li>\n<li><strong></strong></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">1. </span><br><span class=\"line\">2. </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><strong></strong></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">1. </span><br><span class=\"line\">2. </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"/\"></a>/</h2><ul>\n<li><strong>/</strong></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">ABBA</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n"},{"url":"/2018/10/01/design-patten-abstract-factory.html","title":"(1)-","keywords":",","description":"","date":"2018-10-01T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n[](https://github.com/wenjy/design_patten_php/blob/master/src/AbstractFactory.php)\n\n## \n\n```\n\n```\n\n## \n\n```php\n<?php\ninterface IDepartment\n{\n    public function insert(Department $department);\n\n    public function getDepartment($id);\n}\n\nclass MySqlDepartment implements IDepartment\n{\n    public function insert(Department $department)\n    {\n        echo 'mysql ' . PHP_EOL;\n    }\n\n    public function getDepartment($id)\n    {\n        echo 'mysql ' . PHP_EOL;\n    }\n}\n\nclass SqlServerDepartment implements IDepartment\n{\n    public function insert(Department $department)\n    {\n        echo 'sqlServer ' . PHP_EOL;\n    }\n\n    public function getDepartment($id)\n    {\n        echo 'sqlServer ' . PHP_EOL;\n    }\n}\n\ninterface InterfaceFactory\n{\n    public function createDepartment();\n}\n\nclass SqlServerFactory implements InterfaceFactory\n{\n    public function createDepartment()\n    {\n        return new SqlServerDepartment();\n    }\n}\n\nclass MySqlFactory implements InterfaceFactory\n{\n    public function createDepartment()\n    {\n        return new MySqlDepartment();\n    }\n}\n\nclass Department\n{\n\n}\n\n$department = new Department();\n\n$iDepartment = (new MySqlFactory())->createDepartment();\n$iDepartment->insert($department);\n$iDepartment->getDepartment(1);\n\n$iDepartment = (new SqlServerFactory())->createDepartment();\n$iDepartment->insert($department);\n$iDepartment->getDepartment(1);\n```\n","source":"_posts/design_patten/abstract_factory.md","raw":"---\nurl: /2018/10/01/design-patten-abstract-factory.html\ntitle: \"(1)-\"\nkeywords: \",\"\ndescription: \"\"\ndate: 2018-10-01T22:31:57+08:00\ndraft: false\ntags: [\"PHP\", \"\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n[](https://github.com/wenjy/design_patten_php/blob/master/src/AbstractFactory.php)\n\n## \n\n```\n\n```\n\n## \n\n```php\n<?php\ninterface IDepartment\n{\n    public function insert(Department $department);\n\n    public function getDepartment($id);\n}\n\nclass MySqlDepartment implements IDepartment\n{\n    public function insert(Department $department)\n    {\n        echo 'mysql ' . PHP_EOL;\n    }\n\n    public function getDepartment($id)\n    {\n        echo 'mysql ' . PHP_EOL;\n    }\n}\n\nclass SqlServerDepartment implements IDepartment\n{\n    public function insert(Department $department)\n    {\n        echo 'sqlServer ' . PHP_EOL;\n    }\n\n    public function getDepartment($id)\n    {\n        echo 'sqlServer ' . PHP_EOL;\n    }\n}\n\ninterface InterfaceFactory\n{\n    public function createDepartment();\n}\n\nclass SqlServerFactory implements InterfaceFactory\n{\n    public function createDepartment()\n    {\n        return new SqlServerDepartment();\n    }\n}\n\nclass MySqlFactory implements InterfaceFactory\n{\n    public function createDepartment()\n    {\n        return new MySqlDepartment();\n    }\n}\n\nclass Department\n{\n\n}\n\n$department = new Department();\n\n$iDepartment = (new MySqlFactory())->createDepartment();\n$iDepartment->insert($department);\n$iDepartment->getDepartment(1);\n\n$iDepartment = (new SqlServerFactory())->createDepartment();\n$iDepartment->insert($department);\n$iDepartment->getDepartment(1);\n```\n","slug":"design_patten/abstract_factory","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf40003nmv051782633g","content":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/AbstractFactory.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">IDepartment</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">insert</span>(<span class=\"params\">Department $department</span>)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getDepartment</span>(<span class=\"params\">$id</span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MySqlDepartment</span> <span class=\"keyword\">implements</span> <span class=\"title\">IDepartment</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">insert</span>(<span class=\"params\">Department $department</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;mysql &#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getDepartment</span>(<span class=\"params\">$id</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;mysql &#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SqlServerDepartment</span> <span class=\"keyword\">implements</span> <span class=\"title\">IDepartment</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">insert</span>(<span class=\"params\">Department $department</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;sqlServer &#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getDepartment</span>(<span class=\"params\">$id</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;sqlServer &#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">InterfaceFactory</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createDepartment</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SqlServerFactory</span> <span class=\"keyword\">implements</span> <span class=\"title\">InterfaceFactory</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createDepartment</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> SqlServerDepartment();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MySqlFactory</span> <span class=\"keyword\">implements</span> <span class=\"title\">InterfaceFactory</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createDepartment</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> MySqlDepartment();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Department</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$department = <span class=\"keyword\">new</span> Department();</span><br><span class=\"line\"></span><br><span class=\"line\">$iDepartment = (<span class=\"keyword\">new</span> MySqlFactory())-&gt;createDepartment();</span><br><span class=\"line\">$iDepartment-&gt;insert($department);</span><br><span class=\"line\">$iDepartment-&gt;getDepartment(<span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">$iDepartment = (<span class=\"keyword\">new</span> SqlServerFactory())-&gt;createDepartment();</span><br><span class=\"line\">$iDepartment-&gt;insert($department);</span><br><span class=\"line\">$iDepartment-&gt;getDepartment(<span class=\"number\">1</span>);</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/AbstractFactory.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">IDepartment</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">insert</span>(<span class=\"params\">Department $department</span>)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getDepartment</span>(<span class=\"params\">$id</span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MySqlDepartment</span> <span class=\"keyword\">implements</span> <span class=\"title\">IDepartment</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">insert</span>(<span class=\"params\">Department $department</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;mysql &#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getDepartment</span>(<span class=\"params\">$id</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;mysql &#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SqlServerDepartment</span> <span class=\"keyword\">implements</span> <span class=\"title\">IDepartment</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">insert</span>(<span class=\"params\">Department $department</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;sqlServer &#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getDepartment</span>(<span class=\"params\">$id</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;sqlServer &#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">InterfaceFactory</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createDepartment</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SqlServerFactory</span> <span class=\"keyword\">implements</span> <span class=\"title\">InterfaceFactory</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createDepartment</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> SqlServerDepartment();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MySqlFactory</span> <span class=\"keyword\">implements</span> <span class=\"title\">InterfaceFactory</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createDepartment</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> MySqlDepartment();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Department</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$department = <span class=\"keyword\">new</span> Department();</span><br><span class=\"line\"></span><br><span class=\"line\">$iDepartment = (<span class=\"keyword\">new</span> MySqlFactory())-&gt;createDepartment();</span><br><span class=\"line\">$iDepartment-&gt;insert($department);</span><br><span class=\"line\">$iDepartment-&gt;getDepartment(<span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">$iDepartment = (<span class=\"keyword\">new</span> SqlServerFactory())-&gt;createDepartment();</span><br><span class=\"line\">$iDepartment-&gt;insert($department);</span><br><span class=\"line\">$iDepartment-&gt;getDepartment(<span class=\"number\">1</span>);</span><br></pre></td></tr></table></figure>\n"},{"url":"/2018/10/02/design-patten-adapter.html","title":"(2)-","keywords":",","description":"","date":"2018-10-02T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Adapter.php)\n\n## \n\n```\n Adapter \n\n\n\n\n\n \n\n\n\n```\n\n## \n\n```php\n<?php\n/**\n * \n *\n * Class Adaptee\n */\nclass Adaptee\n{\n    public function specificRequest()\n    {\n        echo '' . PHP_EOL;\n    }\n}\n\n/**\n * \n *\n * Class Target\n */\nclass Target\n{\n    public function request()\n    {\n        echo '' . PHP_EOL;\n    }\n}\n\n/**\n *  Adapter  Target\n *  request()  Adaptee \n * Class Adapter\n */\nclass Adapter extends Target\n{\n    /**\n     * @var Adaptee\n     */\n    private $adaptee;\n\n    public function __construct()\n    {\n        $this->adaptee = new Adaptee();\n    }\n\n    public function request()\n    {\n        $this->adaptee->specificRequest();\n    }\n}\n\n$target = new Adapter();\n$target->request();\n```\n","source":"_posts/design_patten/adapter.md","raw":"---\nurl: /2018/10/02/design-patten-adapter.html\ntitle: \"(2)-\"\nkeywords: \",\"\ndescription: \"\"\ndate: 2018-10-02T22:31:57+08:00\ndraft: false\ntags: [\"PHP\", \"\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Adapter.php)\n\n## \n\n```\n Adapter \n\n\n\n\n\n \n\n\n\n```\n\n## \n\n```php\n<?php\n/**\n * \n *\n * Class Adaptee\n */\nclass Adaptee\n{\n    public function specificRequest()\n    {\n        echo '' . PHP_EOL;\n    }\n}\n\n/**\n * \n *\n * Class Target\n */\nclass Target\n{\n    public function request()\n    {\n        echo '' . PHP_EOL;\n    }\n}\n\n/**\n *  Adapter  Target\n *  request()  Adaptee \n * Class Adapter\n */\nclass Adapter extends Target\n{\n    /**\n     * @var Adaptee\n     */\n    private $adaptee;\n\n    public function __construct()\n    {\n        $this->adaptee = new Adaptee();\n    }\n\n    public function request()\n    {\n        $this->adaptee->specificRequest();\n    }\n}\n\n$target = new Adapter();\n$target->request();\n```\n","slug":"design_patten/adapter","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf42003smv050ei7gnlg","content":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Adapter.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> Adapter </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Adaptee</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Adaptee</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">specificRequest</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Target</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Target</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">request</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  Adapter  Target</span></span><br><span class=\"line\"><span class=\"comment\"> *  request()  Adaptee </span></span><br><span class=\"line\"><span class=\"comment\"> * Class Adapter</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Adapter</span> <span class=\"keyword\">extends</span> <span class=\"title\">Target</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> Adaptee</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $adaptee;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;adaptee = <span class=\"keyword\">new</span> Adaptee();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">request</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;adaptee-&gt;specificRequest();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$target = <span class=\"keyword\">new</span> Adapter();</span><br><span class=\"line\">$target-&gt;request();</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Adapter.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> Adapter </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Adaptee</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Adaptee</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">specificRequest</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Target</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Target</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">request</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  Adapter  Target</span></span><br><span class=\"line\"><span class=\"comment\"> *  request()  Adaptee </span></span><br><span class=\"line\"><span class=\"comment\"> * Class Adapter</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Adapter</span> <span class=\"keyword\">extends</span> <span class=\"title\">Target</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> Adaptee</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $adaptee;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;adaptee = <span class=\"keyword\">new</span> Adaptee();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">request</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;adaptee-&gt;specificRequest();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$target = <span class=\"keyword\">new</span> Adapter();</span><br><span class=\"line\">$target-&gt;request();</span><br></pre></td></tr></table></figure>\n"},{"url":"/2018/10/03/design-patten-bridge.html","title":"(3)-","keywords":",","description":"","date":"2018-10-03T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Bridge.php)\n\n## \n\n```\n\n\n\n\n\n\n\n\n\n\n```\n\n## \n\n```php\n<?php\n/**\n * \n *\n * Class Implementor\n */\nabstract class Implementor\n{\n    abstract public function operation();\n}\n\n/**\n * A\n *\n * Class ConcreteImplementorA\n */\nclass ConcreteImplementorA extends Implementor\n{\n    public function operation()\n    {\n        echo 'A' . PHP_EOL;\n    }\n}\n\n/**\n * B\n *\n * Class ConcreteImplementorB\n */\nclass ConcreteImplementorB extends Implementor\n{\n    public function operation()\n    {\n        echo 'B' . PHP_EOL;\n    }\n}\n\n/**\n * \n *\n * Class Abstraction\n */\nclass Abstraction\n{\n    /**\n     * @var Implementor\n     */\n    protected $implementor;\n\n    public function setImplementor(Implementor $implementor)\n    {\n        $this->implementor = $implementor;\n    }\n\n    /**\n     * \n     * @author jiangyi\n     */\n    public function operation()\n    {\n        $this->implementor->operation();\n    }\n}\n\n/**\n * \n * Class RefinedAbstraction\n */\nclass RefinedAbstraction extends Abstraction\n{\n    public function operation()\n    {\n        $this->implementor->operation();\n    }\n}\n\n$ab = new RefinedAbstraction();\n\n$ab->setImplementor(new ConcreteImplementorA());\n$ab->operation();\n\n$ab->setImplementor(new ConcreteImplementorB());\n$ab->operation();\n```\n","source":"_posts/design_patten/bridge.md","raw":"---\nurl: /2018/10/03/design-patten-bridge.html\ntitle: \"(3)-\"\nkeywords: \",\"\ndescription: \"\"\ndate: 2018-10-03T22:31:57+08:00\ndraft: false\ntags: [\"PHP\", \"\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Bridge.php)\n\n## \n\n```\n\n\n\n\n\n\n\n\n\n\n```\n\n## \n\n```php\n<?php\n/**\n * \n *\n * Class Implementor\n */\nabstract class Implementor\n{\n    abstract public function operation();\n}\n\n/**\n * A\n *\n * Class ConcreteImplementorA\n */\nclass ConcreteImplementorA extends Implementor\n{\n    public function operation()\n    {\n        echo 'A' . PHP_EOL;\n    }\n}\n\n/**\n * B\n *\n * Class ConcreteImplementorB\n */\nclass ConcreteImplementorB extends Implementor\n{\n    public function operation()\n    {\n        echo 'B' . PHP_EOL;\n    }\n}\n\n/**\n * \n *\n * Class Abstraction\n */\nclass Abstraction\n{\n    /**\n     * @var Implementor\n     */\n    protected $implementor;\n\n    public function setImplementor(Implementor $implementor)\n    {\n        $this->implementor = $implementor;\n    }\n\n    /**\n     * \n     * @author jiangyi\n     */\n    public function operation()\n    {\n        $this->implementor->operation();\n    }\n}\n\n/**\n * \n * Class RefinedAbstraction\n */\nclass RefinedAbstraction extends Abstraction\n{\n    public function operation()\n    {\n        $this->implementor->operation();\n    }\n}\n\n$ab = new RefinedAbstraction();\n\n$ab->setImplementor(new ConcreteImplementorA());\n$ab->operation();\n\n$ab->setImplementor(new ConcreteImplementorB());\n$ab->operation();\n```\n","slug":"design_patten/bridge","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf43003vmv050jrmeefz","content":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Bridge.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Implementor</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Implementor</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * A</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class ConcreteImplementorA</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteImplementorA</span> <span class=\"keyword\">extends</span> <span class=\"title\">Implementor</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;A&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * B</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class ConcreteImplementorB</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteImplementorB</span> <span class=\"keyword\">extends</span> <span class=\"title\">Implementor</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;B&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Abstraction</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Abstraction</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> Implementor</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> $implementor;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setImplementor</span>(<span class=\"params\">Implementor $implementor</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;implementor = $implementor;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;implementor-&gt;operation();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * Class RefinedAbstraction</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RefinedAbstraction</span> <span class=\"keyword\">extends</span> <span class=\"title\">Abstraction</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;implementor-&gt;operation();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$ab = <span class=\"keyword\">new</span> RefinedAbstraction();</span><br><span class=\"line\"></span><br><span class=\"line\">$ab-&gt;setImplementor(<span class=\"keyword\">new</span> ConcreteImplementorA());</span><br><span class=\"line\">$ab-&gt;operation();</span><br><span class=\"line\"></span><br><span class=\"line\">$ab-&gt;setImplementor(<span class=\"keyword\">new</span> ConcreteImplementorB());</span><br><span class=\"line\">$ab-&gt;operation();</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Bridge.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Implementor</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Implementor</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * A</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class ConcreteImplementorA</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteImplementorA</span> <span class=\"keyword\">extends</span> <span class=\"title\">Implementor</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;A&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * B</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class ConcreteImplementorB</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteImplementorB</span> <span class=\"keyword\">extends</span> <span class=\"title\">Implementor</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;B&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Abstraction</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Abstraction</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> Implementor</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> $implementor;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setImplementor</span>(<span class=\"params\">Implementor $implementor</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;implementor = $implementor;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;implementor-&gt;operation();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * Class RefinedAbstraction</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RefinedAbstraction</span> <span class=\"keyword\">extends</span> <span class=\"title\">Abstraction</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;implementor-&gt;operation();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$ab = <span class=\"keyword\">new</span> RefinedAbstraction();</span><br><span class=\"line\"></span><br><span class=\"line\">$ab-&gt;setImplementor(<span class=\"keyword\">new</span> ConcreteImplementorA());</span><br><span class=\"line\">$ab-&gt;operation();</span><br><span class=\"line\"></span><br><span class=\"line\">$ab-&gt;setImplementor(<span class=\"keyword\">new</span> ConcreteImplementorB());</span><br><span class=\"line\">$ab-&gt;operation();</span><br></pre></td></tr></table></figure>\n"},{"url":"/2018/10/04/design-patten-builder.html","title":"(4)-","keywords":",","description":"","date":"2018-10-04T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Builder.php)\n\n## \n\n```\n\n\n\n\n\n\n\n\n```\n\n## \n\n```php\n<?php\n/**\n * \n *\n * Class Product\n */\nclass Product\n{\n    /**\n     * @var array \n     */\n    public $parts = [];\n\n    public function add($part)\n    {\n        $this->parts[] = $part;\n    }\n\n    /**\n     * \n     *\n     * @author jiangyi\n     */\n    public function show()\n    {\n        echo '' . PHP_EOL;\n        foreach ($this->parts as $part) {\n            echo $part . PHP_EOL;\n        }\n    }\n}\n\n/**\n * Builder  Product \n *  Product  Product\n *\n * Class Builder\n */\nabstract class Builder\n{\n    abstract public function buildPartA();\n\n    abstract public function buildPartB();\n\n    /**\n     * \n     * @return mixed\n     * @author jiangyi\n     */\n    abstract public function getResult();\n}\n\n/**\n *  Builder \n *\n * Class ConcreteBuilder1\n */\nclass ConcreteBuilder1 extends Builder\n{\n    /**\n     * \n     * @var Product\n     */\n    private $product;\n\n    /**\n     * ConcreteBuilder1 constructor.\n     */\n    public function __construct()\n    {\n        $this->product = new Product();\n    }\n\n    public function buildPartA()\n    {\n        $this->product->add('A');\n    }\n\n    public function buildPartB()\n    {\n        $this->product->add('B');\n    }\n\n    public function getResult()\n    {\n        return $this->product;\n    }\n}\n\nclass ConcreteBuilder2 extends Builder\n{\n    private $product;\n\n    /**\n     * ConcreteBuilder2 constructor.\n     */\n    public function __construct()\n    {\n        $this->product = new Product();\n    }\n\n    public function buildPartA()\n    {\n        $this->product->add('X');\n    }\n\n    public function buildPartB()\n    {\n        $this->product->add('Y');\n    }\n\n    public function getResult()\n    {\n        return $this->product;\n    }\n}\n\n/**\n *  Builder \n *\n * Class Director\n */\nclass Director\n{\n    /**\n     * \n     *\n     * @param Builder $builder\n     * @author jiangyi\n     */\n    public function construct(Builder $builder)\n    {\n        $builder->buildPartA();\n        $builder->buildPartB();\n    }\n}\n\n// \n\n$director = new Director();\n$b1 = new ConcreteBuilder1();\n$b2 = new ConcreteBuilder2();\n\n$director->construct($b1);\n$p1 = $b1->getResult();\n$p1->show();\n\n$director->construct($b2);\n$p2 = $b2->getResult();\n$p2->show();\n```\n","source":"_posts/design_patten/builder.md","raw":"---\nurl: /2018/10/04/design-patten-builder.html\ntitle: \"(4)-\"\nkeywords: \",\"\ndescription: \"\"\ndate: 2018-10-04T22:31:57+08:00\ndraft: false\ntags: [\"PHP\", \"\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Builder.php)\n\n## \n\n```\n\n\n\n\n\n\n\n\n```\n\n## \n\n```php\n<?php\n/**\n * \n *\n * Class Product\n */\nclass Product\n{\n    /**\n     * @var array \n     */\n    public $parts = [];\n\n    public function add($part)\n    {\n        $this->parts[] = $part;\n    }\n\n    /**\n     * \n     *\n     * @author jiangyi\n     */\n    public function show()\n    {\n        echo '' . PHP_EOL;\n        foreach ($this->parts as $part) {\n            echo $part . PHP_EOL;\n        }\n    }\n}\n\n/**\n * Builder  Product \n *  Product  Product\n *\n * Class Builder\n */\nabstract class Builder\n{\n    abstract public function buildPartA();\n\n    abstract public function buildPartB();\n\n    /**\n     * \n     * @return mixed\n     * @author jiangyi\n     */\n    abstract public function getResult();\n}\n\n/**\n *  Builder \n *\n * Class ConcreteBuilder1\n */\nclass ConcreteBuilder1 extends Builder\n{\n    /**\n     * \n     * @var Product\n     */\n    private $product;\n\n    /**\n     * ConcreteBuilder1 constructor.\n     */\n    public function __construct()\n    {\n        $this->product = new Product();\n    }\n\n    public function buildPartA()\n    {\n        $this->product->add('A');\n    }\n\n    public function buildPartB()\n    {\n        $this->product->add('B');\n    }\n\n    public function getResult()\n    {\n        return $this->product;\n    }\n}\n\nclass ConcreteBuilder2 extends Builder\n{\n    private $product;\n\n    /**\n     * ConcreteBuilder2 constructor.\n     */\n    public function __construct()\n    {\n        $this->product = new Product();\n    }\n\n    public function buildPartA()\n    {\n        $this->product->add('X');\n    }\n\n    public function buildPartB()\n    {\n        $this->product->add('Y');\n    }\n\n    public function getResult()\n    {\n        return $this->product;\n    }\n}\n\n/**\n *  Builder \n *\n * Class Director\n */\nclass Director\n{\n    /**\n     * \n     *\n     * @param Builder $builder\n     * @author jiangyi\n     */\n    public function construct(Builder $builder)\n    {\n        $builder->buildPartA();\n        $builder->buildPartB();\n    }\n}\n\n// \n\n$director = new Director();\n$b1 = new ConcreteBuilder1();\n$b2 = new ConcreteBuilder2();\n\n$director->construct($b1);\n$p1 = $b1->getResult();\n$p1->show();\n\n$director->construct($b2);\n$p2 = $b2->getResult();\n$p2->show();\n```\n","slug":"design_patten/builder","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf450040mv053crhgpwx","content":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Builder.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Product</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Product</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> array </span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> $parts = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">$part</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;parts[] = $part;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">show</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"keyword\">$this</span>-&gt;parts <span class=\"keyword\">as</span> $part) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> $part . PHP_EOL;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Builder  Product </span></span><br><span class=\"line\"><span class=\"comment\"> *  Product  Product</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Builder</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Builder</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildPartA</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildPartB</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getResult</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  Builder </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class ConcreteBuilder1</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteBuilder1</span> <span class=\"keyword\">extends</span> <span class=\"title\">Builder</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> Product</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $product;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ConcreteBuilder1 constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;product = <span class=\"keyword\">new</span> Product();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildPartA</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;product-&gt;add(<span class=\"string\">&#x27;A&#x27;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildPartB</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;product-&gt;add(<span class=\"string\">&#x27;B&#x27;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getResult</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;product;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteBuilder2</span> <span class=\"keyword\">extends</span> <span class=\"title\">Builder</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $product;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ConcreteBuilder2 constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;product = <span class=\"keyword\">new</span> Product();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildPartA</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;product-&gt;add(<span class=\"string\">&#x27;X&#x27;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildPartB</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;product-&gt;add(<span class=\"string\">&#x27;Y&#x27;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getResult</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;product;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  Builder </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Director</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Director</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> Builder $builder</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">construct</span>(<span class=\"params\">Builder $builder</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        $builder-&gt;buildPartA();</span><br><span class=\"line\">        $builder-&gt;buildPartB();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"></span><br><span class=\"line\">$director = <span class=\"keyword\">new</span> Director();</span><br><span class=\"line\">$b1 = <span class=\"keyword\">new</span> ConcreteBuilder1();</span><br><span class=\"line\">$b2 = <span class=\"keyword\">new</span> ConcreteBuilder2();</span><br><span class=\"line\"></span><br><span class=\"line\">$director-&gt;construct($b1);</span><br><span class=\"line\">$p1 = $b1-&gt;getResult();</span><br><span class=\"line\">$p1-&gt;show();</span><br><span class=\"line\"></span><br><span class=\"line\">$director-&gt;construct($b2);</span><br><span class=\"line\">$p2 = $b2-&gt;getResult();</span><br><span class=\"line\">$p2-&gt;show();</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Builder.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Product</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Product</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> array </span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> $parts = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">$part</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;parts[] = $part;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">show</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"keyword\">$this</span>-&gt;parts <span class=\"keyword\">as</span> $part) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> $part . PHP_EOL;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Builder  Product </span></span><br><span class=\"line\"><span class=\"comment\"> *  Product  Product</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Builder</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Builder</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildPartA</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildPartB</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getResult</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  Builder </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class ConcreteBuilder1</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteBuilder1</span> <span class=\"keyword\">extends</span> <span class=\"title\">Builder</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> Product</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $product;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ConcreteBuilder1 constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;product = <span class=\"keyword\">new</span> Product();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildPartA</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;product-&gt;add(<span class=\"string\">&#x27;A&#x27;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildPartB</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;product-&gt;add(<span class=\"string\">&#x27;B&#x27;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getResult</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;product;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteBuilder2</span> <span class=\"keyword\">extends</span> <span class=\"title\">Builder</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $product;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ConcreteBuilder2 constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;product = <span class=\"keyword\">new</span> Product();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildPartA</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;product-&gt;add(<span class=\"string\">&#x27;X&#x27;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildPartB</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;product-&gt;add(<span class=\"string\">&#x27;Y&#x27;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getResult</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;product;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  Builder </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Director</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Director</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> Builder $builder</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">construct</span>(<span class=\"params\">Builder $builder</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        $builder-&gt;buildPartA();</span><br><span class=\"line\">        $builder-&gt;buildPartB();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"></span><br><span class=\"line\">$director = <span class=\"keyword\">new</span> Director();</span><br><span class=\"line\">$b1 = <span class=\"keyword\">new</span> ConcreteBuilder1();</span><br><span class=\"line\">$b2 = <span class=\"keyword\">new</span> ConcreteBuilder2();</span><br><span class=\"line\"></span><br><span class=\"line\">$director-&gt;construct($b1);</span><br><span class=\"line\">$p1 = $b1-&gt;getResult();</span><br><span class=\"line\">$p1-&gt;show();</span><br><span class=\"line\"></span><br><span class=\"line\">$director-&gt;construct($b2);</span><br><span class=\"line\">$p2 = $b2-&gt;getResult();</span><br><span class=\"line\">$p2-&gt;show();</span><br></pre></td></tr></table></figure>\n"},{"url":"/2018/10/05/design-patten-chain-of-responsibility.html","title":"(5)-","keywords":",","description":"","date":"2018-10-05T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n[](https://github.com/wenjy/design_patten_php/blob/master/src/ChainOfResponsibility.php)\n\n## \n\n```\n\n\n\n Handler \n\n\n\n\n\n\n\n```\n\n## \n\n```php\n<?php\n/**\n  * \n  *\n  * Class Handler\n  */\n abstract class Handler\n {\n     /**\n      * @var static\n      */\n     protected $successor;\n \n     public function setSuccessor(Handler $successor)\n     {\n         $this->successor = $successor;\n     }\n \n     /**\n      * \n      *\n      * @param $request\n      * @return mixed\n      * @author jiangyi\n      */\n     abstract public function handleRequest($request);\n }\n \n class ConcreteHandler1 extends Handler\n {\n     public function handleRequest($request)\n     {\n         if ($request >= 0 && $request < 10) {\n             echo get_class($this) . '' . $request . PHP_EOL;\n         } elseif ($this->successor != null) {\n             $this->successor->handleRequest($request);\n         }\n     }\n }\n \n class ConcreteHandler2 extends Handler\n {\n     public function handleRequest($request)\n     {\n         if ($request >= 10 && $request < 20) {\n             echo get_class($this) . '' . $request . PHP_EOL;\n         } elseif ($this->successor != null) {\n             $this->successor->handleRequest($request);\n         }\n     }\n }\n \n class ConcreteHandler3 extends Handler\n {\n     public function handleRequest($request)\n     {\n         if ($request >= 20 && $request < 30) {\n             echo get_class($this) . '' . $request . PHP_EOL;\n         } elseif ($this->successor != null) {\n             $this->successor->handleRequest($request);\n         }\n     }\n }\n \n $h1 = new ConcreteHandler1();\n $h2 = new ConcreteHandler2();\n $h3 = new ConcreteHandler3();\n \n // \n $h1->setSuccessor($h2);\n $h2->setSuccessor($h3);\n \n // 31 \n $requests = [1, 3, 15, 18, 22, 25, 14, 2, 16, 27, 31];\n \n foreach ($requests as $v) {\n     $h1->handleRequest($v);\n }\n```\n","source":"_posts/design_patten/chain_of_responsibility.md","raw":"---\nurl: /2018/10/05/design-patten-chain-of-responsibility.html\ntitle: \"(5)-\"\nkeywords: \",\"\ndescription: \"\"\ndate: 2018-10-05T22:31:57+08:00\ndraft: false\ntags: [\"PHP\", \"\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n[](https://github.com/wenjy/design_patten_php/blob/master/src/ChainOfResponsibility.php)\n\n## \n\n```\n\n\n\n Handler \n\n\n\n\n\n\n\n```\n\n## \n\n```php\n<?php\n/**\n  * \n  *\n  * Class Handler\n  */\n abstract class Handler\n {\n     /**\n      * @var static\n      */\n     protected $successor;\n \n     public function setSuccessor(Handler $successor)\n     {\n         $this->successor = $successor;\n     }\n \n     /**\n      * \n      *\n      * @param $request\n      * @return mixed\n      * @author jiangyi\n      */\n     abstract public function handleRequest($request);\n }\n \n class ConcreteHandler1 extends Handler\n {\n     public function handleRequest($request)\n     {\n         if ($request >= 0 && $request < 10) {\n             echo get_class($this) . '' . $request . PHP_EOL;\n         } elseif ($this->successor != null) {\n             $this->successor->handleRequest($request);\n         }\n     }\n }\n \n class ConcreteHandler2 extends Handler\n {\n     public function handleRequest($request)\n     {\n         if ($request >= 10 && $request < 20) {\n             echo get_class($this) . '' . $request . PHP_EOL;\n         } elseif ($this->successor != null) {\n             $this->successor->handleRequest($request);\n         }\n     }\n }\n \n class ConcreteHandler3 extends Handler\n {\n     public function handleRequest($request)\n     {\n         if ($request >= 20 && $request < 30) {\n             echo get_class($this) . '' . $request . PHP_EOL;\n         } elseif ($this->successor != null) {\n             $this->successor->handleRequest($request);\n         }\n     }\n }\n \n $h1 = new ConcreteHandler1();\n $h2 = new ConcreteHandler2();\n $h3 = new ConcreteHandler3();\n \n // \n $h1->setSuccessor($h2);\n $h2->setSuccessor($h3);\n \n // 31 \n $requests = [1, 3, 15, 18, 22, 25, 14, 2, 16, 27, 31];\n \n foreach ($requests as $v) {\n     $h1->handleRequest($v);\n }\n```\n","slug":"design_patten/chain_of_responsibility","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf470043mv05c96bdx7r","content":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/ChainOfResponsibility.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> Handler </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * </span></span><br><span class=\"line\"><span class=\"comment\">  *</span></span><br><span class=\"line\"><span class=\"comment\">  * Class Handler</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Handler</span></span></span><br><span class=\"line\"><span class=\"class\"> </span>&#123;</span><br><span class=\"line\">     <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">      * <span class=\"doctag\">@var</span> static</span></span><br><span class=\"line\"><span class=\"comment\">      */</span></span><br><span class=\"line\">     <span class=\"keyword\">protected</span> $successor;</span><br><span class=\"line\"> </span><br><span class=\"line\">     <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setSuccessor</span>(<span class=\"params\">Handler $successor</span>)</span></span><br><span class=\"line\"><span class=\"function\">     </span>&#123;</span><br><span class=\"line\">         <span class=\"keyword\">$this</span>-&gt;successor = $successor;</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">     <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">      * </span></span><br><span class=\"line\"><span class=\"comment\">      *</span></span><br><span class=\"line\"><span class=\"comment\">      * <span class=\"doctag\">@param</span> $request</span></span><br><span class=\"line\"><span class=\"comment\">      * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">      * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">      */</span></span><br><span class=\"line\">     <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleRequest</span>(<span class=\"params\">$request</span>)</span>;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteHandler1</span> <span class=\"keyword\">extends</span> <span class=\"title\">Handler</span></span></span><br><span class=\"line\"><span class=\"class\"> </span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleRequest</span>(<span class=\"params\">$request</span>)</span></span><br><span class=\"line\"><span class=\"function\">     </span>&#123;</span><br><span class=\"line\">         <span class=\"keyword\">if</span> ($request &gt;= <span class=\"number\">0</span> &amp;&amp; $request &lt; <span class=\"number\">10</span>) &#123;</span><br><span class=\"line\">             <span class=\"keyword\">echo</span> get_class(<span class=\"keyword\">$this</span>) . <span class=\"string\">&#x27;&#x27;</span> . $request . PHP_EOL;</span><br><span class=\"line\">         &#125; <span class=\"keyword\">elseif</span> (<span class=\"keyword\">$this</span>-&gt;successor != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">             <span class=\"keyword\">$this</span>-&gt;successor-&gt;handleRequest($request);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteHandler2</span> <span class=\"keyword\">extends</span> <span class=\"title\">Handler</span></span></span><br><span class=\"line\"><span class=\"class\"> </span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleRequest</span>(<span class=\"params\">$request</span>)</span></span><br><span class=\"line\"><span class=\"function\">     </span>&#123;</span><br><span class=\"line\">         <span class=\"keyword\">if</span> ($request &gt;= <span class=\"number\">10</span> &amp;&amp; $request &lt; <span class=\"number\">20</span>) &#123;</span><br><span class=\"line\">             <span class=\"keyword\">echo</span> get_class(<span class=\"keyword\">$this</span>) . <span class=\"string\">&#x27;&#x27;</span> . $request . PHP_EOL;</span><br><span class=\"line\">         &#125; <span class=\"keyword\">elseif</span> (<span class=\"keyword\">$this</span>-&gt;successor != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">             <span class=\"keyword\">$this</span>-&gt;successor-&gt;handleRequest($request);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteHandler3</span> <span class=\"keyword\">extends</span> <span class=\"title\">Handler</span></span></span><br><span class=\"line\"><span class=\"class\"> </span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleRequest</span>(<span class=\"params\">$request</span>)</span></span><br><span class=\"line\"><span class=\"function\">     </span>&#123;</span><br><span class=\"line\">         <span class=\"keyword\">if</span> ($request &gt;= <span class=\"number\">20</span> &amp;&amp; $request &lt; <span class=\"number\">30</span>) &#123;</span><br><span class=\"line\">             <span class=\"keyword\">echo</span> get_class(<span class=\"keyword\">$this</span>) . <span class=\"string\">&#x27;&#x27;</span> . $request . PHP_EOL;</span><br><span class=\"line\">         &#125; <span class=\"keyword\">elseif</span> (<span class=\"keyword\">$this</span>-&gt;successor != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">             <span class=\"keyword\">$this</span>-&gt;successor-&gt;handleRequest($request);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"> $h1 = <span class=\"keyword\">new</span> ConcreteHandler1();</span><br><span class=\"line\"> $h2 = <span class=\"keyword\">new</span> ConcreteHandler2();</span><br><span class=\"line\"> $h3 = <span class=\"keyword\">new</span> ConcreteHandler3();</span><br><span class=\"line\"> </span><br><span class=\"line\"> <span class=\"comment\">// </span></span><br><span class=\"line\"> $h1-&gt;setSuccessor($h2);</span><br><span class=\"line\"> $h2-&gt;setSuccessor($h3);</span><br><span class=\"line\"> </span><br><span class=\"line\"> <span class=\"comment\">// 31 </span></span><br><span class=\"line\"> $requests = [<span class=\"number\">1</span>, <span class=\"number\">3</span>, <span class=\"number\">15</span>, <span class=\"number\">18</span>, <span class=\"number\">22</span>, <span class=\"number\">25</span>, <span class=\"number\">14</span>, <span class=\"number\">2</span>, <span class=\"number\">16</span>, <span class=\"number\">27</span>, <span class=\"number\">31</span>];</span><br><span class=\"line\"> </span><br><span class=\"line\"> <span class=\"keyword\">foreach</span> ($requests <span class=\"keyword\">as</span> $v) &#123;</span><br><span class=\"line\">     $h1-&gt;handleRequest($v);</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/ChainOfResponsibility.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> Handler </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * </span></span><br><span class=\"line\"><span class=\"comment\">  *</span></span><br><span class=\"line\"><span class=\"comment\">  * Class Handler</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Handler</span></span></span><br><span class=\"line\"><span class=\"class\"> </span>&#123;</span><br><span class=\"line\">     <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">      * <span class=\"doctag\">@var</span> static</span></span><br><span class=\"line\"><span class=\"comment\">      */</span></span><br><span class=\"line\">     <span class=\"keyword\">protected</span> $successor;</span><br><span class=\"line\"> </span><br><span class=\"line\">     <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setSuccessor</span>(<span class=\"params\">Handler $successor</span>)</span></span><br><span class=\"line\"><span class=\"function\">     </span>&#123;</span><br><span class=\"line\">         <span class=\"keyword\">$this</span>-&gt;successor = $successor;</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">     <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">      * </span></span><br><span class=\"line\"><span class=\"comment\">      *</span></span><br><span class=\"line\"><span class=\"comment\">      * <span class=\"doctag\">@param</span> $request</span></span><br><span class=\"line\"><span class=\"comment\">      * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">      * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">      */</span></span><br><span class=\"line\">     <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleRequest</span>(<span class=\"params\">$request</span>)</span>;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteHandler1</span> <span class=\"keyword\">extends</span> <span class=\"title\">Handler</span></span></span><br><span class=\"line\"><span class=\"class\"> </span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleRequest</span>(<span class=\"params\">$request</span>)</span></span><br><span class=\"line\"><span class=\"function\">     </span>&#123;</span><br><span class=\"line\">         <span class=\"keyword\">if</span> ($request &gt;= <span class=\"number\">0</span> &amp;&amp; $request &lt; <span class=\"number\">10</span>) &#123;</span><br><span class=\"line\">             <span class=\"keyword\">echo</span> get_class(<span class=\"keyword\">$this</span>) . <span class=\"string\">&#x27;&#x27;</span> . $request . PHP_EOL;</span><br><span class=\"line\">         &#125; <span class=\"keyword\">elseif</span> (<span class=\"keyword\">$this</span>-&gt;successor != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">             <span class=\"keyword\">$this</span>-&gt;successor-&gt;handleRequest($request);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteHandler2</span> <span class=\"keyword\">extends</span> <span class=\"title\">Handler</span></span></span><br><span class=\"line\"><span class=\"class\"> </span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleRequest</span>(<span class=\"params\">$request</span>)</span></span><br><span class=\"line\"><span class=\"function\">     </span>&#123;</span><br><span class=\"line\">         <span class=\"keyword\">if</span> ($request &gt;= <span class=\"number\">10</span> &amp;&amp; $request &lt; <span class=\"number\">20</span>) &#123;</span><br><span class=\"line\">             <span class=\"keyword\">echo</span> get_class(<span class=\"keyword\">$this</span>) . <span class=\"string\">&#x27;&#x27;</span> . $request . PHP_EOL;</span><br><span class=\"line\">         &#125; <span class=\"keyword\">elseif</span> (<span class=\"keyword\">$this</span>-&gt;successor != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">             <span class=\"keyword\">$this</span>-&gt;successor-&gt;handleRequest($request);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteHandler3</span> <span class=\"keyword\">extends</span> <span class=\"title\">Handler</span></span></span><br><span class=\"line\"><span class=\"class\"> </span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleRequest</span>(<span class=\"params\">$request</span>)</span></span><br><span class=\"line\"><span class=\"function\">     </span>&#123;</span><br><span class=\"line\">         <span class=\"keyword\">if</span> ($request &gt;= <span class=\"number\">20</span> &amp;&amp; $request &lt; <span class=\"number\">30</span>) &#123;</span><br><span class=\"line\">             <span class=\"keyword\">echo</span> get_class(<span class=\"keyword\">$this</span>) . <span class=\"string\">&#x27;&#x27;</span> . $request . PHP_EOL;</span><br><span class=\"line\">         &#125; <span class=\"keyword\">elseif</span> (<span class=\"keyword\">$this</span>-&gt;successor != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">             <span class=\"keyword\">$this</span>-&gt;successor-&gt;handleRequest($request);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"> $h1 = <span class=\"keyword\">new</span> ConcreteHandler1();</span><br><span class=\"line\"> $h2 = <span class=\"keyword\">new</span> ConcreteHandler2();</span><br><span class=\"line\"> $h3 = <span class=\"keyword\">new</span> ConcreteHandler3();</span><br><span class=\"line\"> </span><br><span class=\"line\"> <span class=\"comment\">// </span></span><br><span class=\"line\"> $h1-&gt;setSuccessor($h2);</span><br><span class=\"line\"> $h2-&gt;setSuccessor($h3);</span><br><span class=\"line\"> </span><br><span class=\"line\"> <span class=\"comment\">// 31 </span></span><br><span class=\"line\"> $requests = [<span class=\"number\">1</span>, <span class=\"number\">3</span>, <span class=\"number\">15</span>, <span class=\"number\">18</span>, <span class=\"number\">22</span>, <span class=\"number\">25</span>, <span class=\"number\">14</span>, <span class=\"number\">2</span>, <span class=\"number\">16</span>, <span class=\"number\">27</span>, <span class=\"number\">31</span>];</span><br><span class=\"line\"> </span><br><span class=\"line\"> <span class=\"keyword\">foreach</span> ($requests <span class=\"keyword\">as</span> $v) &#123;</span><br><span class=\"line\">     $h1-&gt;handleRequest($v);</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n"},{"url":"/2018/10/06/design-patten-command.html","title":"(6)-","keywords":",","description":"","date":"2018-10-06T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Command.php)\n\n## \n\n```\n\n\n\n\n\n\n\n\n\n\n\n\n\n/\n```\n\n## \n\n```php\n<?php\n/**\n * \n */\nabstract class Command\n{\n    /**\n     * @var Receiver\n     */\n    protected $receiver;\n\n    /**\n     * Command constructor.\n     * @param $receiver\n     */\n    public function __construct(Receiver $receiver)\n    {\n        $this->receiver = $receiver;\n    }\n\n    /**\n     * \n     *\n     * @return mixed\n     * @author jiangyi\n     */\n    abstract public function execute();\n\n}\n\n/**\n *  execute\n *\n * Class ConcreteCommand\n */\nclass ConcreteCommand extends Command\n{\n    /**\n     * ConcreteCommand constructor.\n     */\n    public function __construct(Receiver $receiver)\n    {\n        parent::__construct($receiver);\n    }\n\n    public function execute()\n    {\n        $this->receiver->action();\n    }\n}\n\n/**\n * \n *\n * Class Invoker\n */\nclass Invoker\n{\n    /**\n     * @var Command\n     */\n    private $command;\n\n    /**\n     * @param mixed $command\n     */\n    public function setCommand($command)\n    {\n        $this->command = $command;\n    }\n\n    public function executeCommand()\n    {\n        $this->command->execute();\n    }\n}\n\n/**\n * \n * \n * \n *\n * Class Receiver\n */\nabstract class Receiver\n{\n    public function action()\n    {\n        echo '' . PHP_EOL;\n    }\n\n    public function action1()\n    {\n        echo '2' . PHP_EOL;\n    }\n\n    abstract function absAction();\n}\n\nclass ReceiverA extends Receiver\n{\n    function absAction()\n    {\n        echo 'A' . PHP_EOL;\n    }\n}\n\nclass ReceiverB extends Receiver\n{\n    function absAction()\n    {\n        echo 'B' . PHP_EOL;\n    }\n}\n\n// \n$r = new ReceiverA();\n// \n$c = new ConcreteCommand($r);\n\n// \n$i = new Invoker();\n$i->setCommand($c);\n$i->executeCommand();\n```\n","source":"_posts/design_patten/command.md","raw":"---\nurl: /2018/10/06/design-patten-command.html\ntitle: \"(6)-\"\nkeywords: \",\"\ndescription: \"\"\ndate: 2018-10-06T22:31:57+08:00\ndraft: false\ntags: [\"PHP\", \"\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Command.php)\n\n## \n\n```\n\n\n\n\n\n\n\n\n\n\n\n\n\n/\n```\n\n## \n\n```php\n<?php\n/**\n * \n */\nabstract class Command\n{\n    /**\n     * @var Receiver\n     */\n    protected $receiver;\n\n    /**\n     * Command constructor.\n     * @param $receiver\n     */\n    public function __construct(Receiver $receiver)\n    {\n        $this->receiver = $receiver;\n    }\n\n    /**\n     * \n     *\n     * @return mixed\n     * @author jiangyi\n     */\n    abstract public function execute();\n\n}\n\n/**\n *  execute\n *\n * Class ConcreteCommand\n */\nclass ConcreteCommand extends Command\n{\n    /**\n     * ConcreteCommand constructor.\n     */\n    public function __construct(Receiver $receiver)\n    {\n        parent::__construct($receiver);\n    }\n\n    public function execute()\n    {\n        $this->receiver->action();\n    }\n}\n\n/**\n * \n *\n * Class Invoker\n */\nclass Invoker\n{\n    /**\n     * @var Command\n     */\n    private $command;\n\n    /**\n     * @param mixed $command\n     */\n    public function setCommand($command)\n    {\n        $this->command = $command;\n    }\n\n    public function executeCommand()\n    {\n        $this->command->execute();\n    }\n}\n\n/**\n * \n * \n * \n *\n * Class Receiver\n */\nabstract class Receiver\n{\n    public function action()\n    {\n        echo '' . PHP_EOL;\n    }\n\n    public function action1()\n    {\n        echo '2' . PHP_EOL;\n    }\n\n    abstract function absAction();\n}\n\nclass ReceiverA extends Receiver\n{\n    function absAction()\n    {\n        echo 'A' . PHP_EOL;\n    }\n}\n\nclass ReceiverB extends Receiver\n{\n    function absAction()\n    {\n        echo 'B' . PHP_EOL;\n    }\n}\n\n// \n$r = new ReceiverA();\n// \n$c = new ConcreteCommand($r);\n\n// \n$i = new Invoker();\n$i->setCommand($c);\n$i->executeCommand();\n```\n","slug":"design_patten/command","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf490048mv0527ms67mu","content":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Command.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Command</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> Receiver</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> $receiver;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Command constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> $receiver</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">Receiver $receiver</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;receiver = $receiver;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">execute</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  execute</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class ConcreteCommand</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteCommand</span> <span class=\"keyword\">extends</span> <span class=\"title\">Command</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ConcreteCommand constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">Receiver $receiver</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">parent</span>::__construct($receiver);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">execute</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;receiver-&gt;action();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Invoker</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Invoker</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> Command</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $command;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $command</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setCommand</span>(<span class=\"params\">$command</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;command = $command;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">executeCommand</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;command-&gt;execute();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Receiver</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Receiver</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">action</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">action1</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;2&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">absAction</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ReceiverA</span> <span class=\"keyword\">extends</span> <span class=\"title\">Receiver</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">absAction</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;A&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ReceiverB</span> <span class=\"keyword\">extends</span> <span class=\"title\">Receiver</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">absAction</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;B&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$r = <span class=\"keyword\">new</span> ReceiverA();</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$c = <span class=\"keyword\">new</span> ConcreteCommand($r);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$i = <span class=\"keyword\">new</span> Invoker();</span><br><span class=\"line\">$i-&gt;setCommand($c);</span><br><span class=\"line\">$i-&gt;executeCommand();</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Command.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Command</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> Receiver</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> $receiver;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Command constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> $receiver</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">Receiver $receiver</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;receiver = $receiver;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">execute</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  execute</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class ConcreteCommand</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteCommand</span> <span class=\"keyword\">extends</span> <span class=\"title\">Command</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ConcreteCommand constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">Receiver $receiver</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">parent</span>::__construct($receiver);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">execute</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;receiver-&gt;action();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Invoker</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Invoker</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> Command</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $command;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $command</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setCommand</span>(<span class=\"params\">$command</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;command = $command;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">executeCommand</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;command-&gt;execute();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Receiver</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Receiver</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">action</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">action1</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;2&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">absAction</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ReceiverA</span> <span class=\"keyword\">extends</span> <span class=\"title\">Receiver</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">absAction</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;A&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ReceiverB</span> <span class=\"keyword\">extends</span> <span class=\"title\">Receiver</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">absAction</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;B&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$r = <span class=\"keyword\">new</span> ReceiverA();</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$c = <span class=\"keyword\">new</span> ConcreteCommand($r);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$i = <span class=\"keyword\">new</span> Invoker();</span><br><span class=\"line\">$i-&gt;setCommand($c);</span><br><span class=\"line\">$i-&gt;executeCommand();</span><br></pre></td></tr></table></figure>\n"},{"url":"/2018/10/07/design-patten-composite.html","title":"(7)-","keywords":",","description":"","date":"2018-10-07T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Composite.php)\n\n## \n\n```\n-\n\n\n\n\n\n\n\n\n\n\n```\n\n## \n\n```php\n<?php\n/**\n * \n *  Component \n *\n * Class Component\n */\nabstract class Component\n{\n    protected $name;\n\n    /**\n     * Component constructor.\n     * @param $name\n     */\n    public function __construct($name)\n    {\n        $this->name = $name;\n    }\n\n    abstract public function add(Component $c);\n\n    abstract public function remove(Component $c);\n\n    abstract public function display($depth);\n\n}\n\n/**\n * \n *\n * Class Leaf\n */\nclass Leaf extends Component\n{\n\n    /**\n     * Leaf constructor.\n     */\n    public function __construct($name)\n    {\n        parent::__construct($name);\n    }\n\n    public function add(Component $c)\n    {\n        echo '' . PHP_EOL;\n    }\n\n    public function remove(Component $c)\n    {\n        echo '' . PHP_EOL;\n    }\n\n    public function display($depth)\n    {\n        echo str_repeat('-', $depth) . $this->name . PHP_EOL;\n    }\n}\n\n/**\n *  Component \n * \n *\n * Class Composite\n */\nclass Composite extends Component\n{\n    /**\n     * @var Component[]\n     */\n    private $list = [];\n\n    /**\n     * Composite constructor.\n     */\n    public function __construct($name)\n    {\n        parent::__construct($name);\n    }\n\n    public function add(Component $c)\n    {\n        $this->list[] = $c;\n    }\n\n    public function remove(Component $c)\n    {\n        $key = array_search($c, $this->list);\n        if ($key !== false && array_key_exists($key, $this->list)) {\n            unset($this->list[$key]);\n        }\n    }\n\n    public function display($depth)\n    {\n        echo str_repeat('-', $depth) . $this->name . PHP_EOL;\n        foreach ($this->list as $children) {\n            $children->display($depth + 1);\n        }\n    }\n\n}\n\n$root = new Composite('root');\n$root->add(new Leaf('leaf a'));\n$root->add(new Leaf('left b'));\n\n$comp = new Composite('x');\n$comp->add(new Leaf('x a'));\n$comp->add(new Leaf('x b'));\n\n$root->add($comp);\n\n$comp2 = new Composite('xy');\n$comp2->add(new Leaf('xy a'));\n$comp2->add(new Leaf('xy b'));\n\n$root->add(new Leaf('leaf c'));\n$leafd = new Leaf('leaf d');\n$root->add($leafd);\n$root->remove($leafd);\n\n$root->add($comp2);\n$root->display(0);\n```\n","source":"_posts/design_patten/composite.md","raw":"---\nurl: /2018/10/07/design-patten-composite.html\ntitle: \"(7)-\"\nkeywords: \",\"\ndescription: \"\"\ndate: 2018-10-07T22:31:57+08:00\ndraft: false\ntags: [\"PHP\", \"\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Composite.php)\n\n## \n\n```\n-\n\n\n\n\n\n\n\n\n\n\n```\n\n## \n\n```php\n<?php\n/**\n * \n *  Component \n *\n * Class Component\n */\nabstract class Component\n{\n    protected $name;\n\n    /**\n     * Component constructor.\n     * @param $name\n     */\n    public function __construct($name)\n    {\n        $this->name = $name;\n    }\n\n    abstract public function add(Component $c);\n\n    abstract public function remove(Component $c);\n\n    abstract public function display($depth);\n\n}\n\n/**\n * \n *\n * Class Leaf\n */\nclass Leaf extends Component\n{\n\n    /**\n     * Leaf constructor.\n     */\n    public function __construct($name)\n    {\n        parent::__construct($name);\n    }\n\n    public function add(Component $c)\n    {\n        echo '' . PHP_EOL;\n    }\n\n    public function remove(Component $c)\n    {\n        echo '' . PHP_EOL;\n    }\n\n    public function display($depth)\n    {\n        echo str_repeat('-', $depth) . $this->name . PHP_EOL;\n    }\n}\n\n/**\n *  Component \n * \n *\n * Class Composite\n */\nclass Composite extends Component\n{\n    /**\n     * @var Component[]\n     */\n    private $list = [];\n\n    /**\n     * Composite constructor.\n     */\n    public function __construct($name)\n    {\n        parent::__construct($name);\n    }\n\n    public function add(Component $c)\n    {\n        $this->list[] = $c;\n    }\n\n    public function remove(Component $c)\n    {\n        $key = array_search($c, $this->list);\n        if ($key !== false && array_key_exists($key, $this->list)) {\n            unset($this->list[$key]);\n        }\n    }\n\n    public function display($depth)\n    {\n        echo str_repeat('-', $depth) . $this->name . PHP_EOL;\n        foreach ($this->list as $children) {\n            $children->display($depth + 1);\n        }\n    }\n\n}\n\n$root = new Composite('root');\n$root->add(new Leaf('leaf a'));\n$root->add(new Leaf('left b'));\n\n$comp = new Composite('x');\n$comp->add(new Leaf('x a'));\n$comp->add(new Leaf('x b'));\n\n$root->add($comp);\n\n$comp2 = new Composite('xy');\n$comp2->add(new Leaf('xy a'));\n$comp2->add(new Leaf('xy b'));\n\n$root->add(new Leaf('leaf c'));\n$leafd = new Leaf('leaf d');\n$root->add($leafd);\n$root->remove($leafd);\n\n$root->add($comp2);\n$root->display(0);\n```\n","slug":"design_patten/composite","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf4a004bmv055gx32sh9","content":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Composite.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *  Component </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Component</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Component</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">protected</span> $name;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Component constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> $name</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">$name</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;name = $name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">Component $c</span>)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">remove</span>(<span class=\"params\">Component $c</span>)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">display</span>(<span class=\"params\">$depth</span>)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Leaf</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Leaf</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Leaf constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">$name</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">parent</span>::__construct($name);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">Component $c</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">remove</span>(<span class=\"params\">Component $c</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">display</span>(<span class=\"params\">$depth</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> str_repeat(<span class=\"string\">&#x27;-&#x27;</span>, $depth) . <span class=\"keyword\">$this</span>-&gt;name . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  Component </span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Composite</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Composite</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> Component[]</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $list = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Composite constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">$name</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">parent</span>::__construct($name);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">Component $c</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;list[] = $c;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">remove</span>(<span class=\"params\">Component $c</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        $key = array_search($c, <span class=\"keyword\">$this</span>-&gt;list);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($key !== <span class=\"literal\">false</span> &amp;&amp; array_key_exists($key, <span class=\"keyword\">$this</span>-&gt;list)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">unset</span>(<span class=\"keyword\">$this</span>-&gt;list[$key]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">display</span>(<span class=\"params\">$depth</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> str_repeat(<span class=\"string\">&#x27;-&#x27;</span>, $depth) . <span class=\"keyword\">$this</span>-&gt;name . PHP_EOL;</span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"keyword\">$this</span>-&gt;list <span class=\"keyword\">as</span> $children) &#123;</span><br><span class=\"line\">            $children-&gt;display($depth + <span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$root = <span class=\"keyword\">new</span> Composite(<span class=\"string\">&#x27;root&#x27;</span>);</span><br><span class=\"line\">$root-&gt;add(<span class=\"keyword\">new</span> Leaf(<span class=\"string\">&#x27;leaf a&#x27;</span>));</span><br><span class=\"line\">$root-&gt;add(<span class=\"keyword\">new</span> Leaf(<span class=\"string\">&#x27;left b&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">$comp = <span class=\"keyword\">new</span> Composite(<span class=\"string\">&#x27;x&#x27;</span>);</span><br><span class=\"line\">$comp-&gt;add(<span class=\"keyword\">new</span> Leaf(<span class=\"string\">&#x27;x a&#x27;</span>));</span><br><span class=\"line\">$comp-&gt;add(<span class=\"keyword\">new</span> Leaf(<span class=\"string\">&#x27;x b&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">$root-&gt;add($comp);</span><br><span class=\"line\"></span><br><span class=\"line\">$comp2 = <span class=\"keyword\">new</span> Composite(<span class=\"string\">&#x27;xy&#x27;</span>);</span><br><span class=\"line\">$comp2-&gt;add(<span class=\"keyword\">new</span> Leaf(<span class=\"string\">&#x27;xy a&#x27;</span>));</span><br><span class=\"line\">$comp2-&gt;add(<span class=\"keyword\">new</span> Leaf(<span class=\"string\">&#x27;xy b&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">$root-&gt;add(<span class=\"keyword\">new</span> Leaf(<span class=\"string\">&#x27;leaf c&#x27;</span>));</span><br><span class=\"line\">$leafd = <span class=\"keyword\">new</span> Leaf(<span class=\"string\">&#x27;leaf d&#x27;</span>);</span><br><span class=\"line\">$root-&gt;add($leafd);</span><br><span class=\"line\">$root-&gt;remove($leafd);</span><br><span class=\"line\"></span><br><span class=\"line\">$root-&gt;add($comp2);</span><br><span class=\"line\">$root-&gt;display(<span class=\"number\">0</span>);</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Composite.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *  Component </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Component</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Component</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">protected</span> $name;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Component constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> $name</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">$name</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;name = $name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">Component $c</span>)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">remove</span>(<span class=\"params\">Component $c</span>)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">display</span>(<span class=\"params\">$depth</span>)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Leaf</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Leaf</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Leaf constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">$name</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">parent</span>::__construct($name);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">Component $c</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">remove</span>(<span class=\"params\">Component $c</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">display</span>(<span class=\"params\">$depth</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> str_repeat(<span class=\"string\">&#x27;-&#x27;</span>, $depth) . <span class=\"keyword\">$this</span>-&gt;name . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  Component </span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Composite</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Composite</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> Component[]</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $list = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Composite constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">$name</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">parent</span>::__construct($name);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">Component $c</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;list[] = $c;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">remove</span>(<span class=\"params\">Component $c</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        $key = array_search($c, <span class=\"keyword\">$this</span>-&gt;list);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($key !== <span class=\"literal\">false</span> &amp;&amp; array_key_exists($key, <span class=\"keyword\">$this</span>-&gt;list)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">unset</span>(<span class=\"keyword\">$this</span>-&gt;list[$key]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">display</span>(<span class=\"params\">$depth</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> str_repeat(<span class=\"string\">&#x27;-&#x27;</span>, $depth) . <span class=\"keyword\">$this</span>-&gt;name . PHP_EOL;</span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"keyword\">$this</span>-&gt;list <span class=\"keyword\">as</span> $children) &#123;</span><br><span class=\"line\">            $children-&gt;display($depth + <span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$root = <span class=\"keyword\">new</span> Composite(<span class=\"string\">&#x27;root&#x27;</span>);</span><br><span class=\"line\">$root-&gt;add(<span class=\"keyword\">new</span> Leaf(<span class=\"string\">&#x27;leaf a&#x27;</span>));</span><br><span class=\"line\">$root-&gt;add(<span class=\"keyword\">new</span> Leaf(<span class=\"string\">&#x27;left b&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">$comp = <span class=\"keyword\">new</span> Composite(<span class=\"string\">&#x27;x&#x27;</span>);</span><br><span class=\"line\">$comp-&gt;add(<span class=\"keyword\">new</span> Leaf(<span class=\"string\">&#x27;x a&#x27;</span>));</span><br><span class=\"line\">$comp-&gt;add(<span class=\"keyword\">new</span> Leaf(<span class=\"string\">&#x27;x b&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">$root-&gt;add($comp);</span><br><span class=\"line\"></span><br><span class=\"line\">$comp2 = <span class=\"keyword\">new</span> Composite(<span class=\"string\">&#x27;xy&#x27;</span>);</span><br><span class=\"line\">$comp2-&gt;add(<span class=\"keyword\">new</span> Leaf(<span class=\"string\">&#x27;xy a&#x27;</span>));</span><br><span class=\"line\">$comp2-&gt;add(<span class=\"keyword\">new</span> Leaf(<span class=\"string\">&#x27;xy b&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">$root-&gt;add(<span class=\"keyword\">new</span> Leaf(<span class=\"string\">&#x27;leaf c&#x27;</span>));</span><br><span class=\"line\">$leafd = <span class=\"keyword\">new</span> Leaf(<span class=\"string\">&#x27;leaf d&#x27;</span>);</span><br><span class=\"line\">$root-&gt;add($leafd);</span><br><span class=\"line\">$root-&gt;remove($leafd);</span><br><span class=\"line\"></span><br><span class=\"line\">$root-&gt;add($comp2);</span><br><span class=\"line\">$root-&gt;display(<span class=\"number\">0</span>);</span><br></pre></td></tr></table></figure>\n"},{"url":"/2018/10/08/design-patten-decorator.html","title":"(8)-","keywords":",","description":"","date":"2018-10-08T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Decorator.php)\n\n## \n\n```\n\n\n\n\n\n\n\n\n\n```\n\n## \n\n```php\n<?php\n/**\n * \n *\n * Class Component\n */\nabstract class Component\n{\n    public abstract function operation();\n}\n\n/**\n * \n *\n *  ConcreteComponent  Component  Decorator \n *  ConcreteComponent  Decorator \n *  Decorator  Decorator  ConcreteComponent \n *\n * Class ConcreteComponent\n */\nclass ConcreteComponent extends Component\n{\n    public function operation()\n    {\n        echo '' . PHP_EOL;\n    }\n\n    public function test()\n    {\n\n    }\n}\n\n/**\n *  Component  Component  Component \n *  Decorator \n *  setComponent \n * \n *\n * Class Decorator\n */\nclass Decorator extends Component\n{\n    /**\n     * @var Component\n     */\n    protected $component;\n\n    /**\n     * \n     *\n     * @param Component $component\n     * @author jiangyi\n     */\n    public function setComponent(Component $component)\n    {\n        $this->component = $component;\n    }\n\n    public function operation()\n    {\n        if ($this->component != null) {\n            $this->component->operation();\n        }\n    }\n}\n\n/**\n *  Component \n *\n * Class DecoratorA\n */\nclass DecoratorA extends Decorator\n{\n    private $addedState;\n\n    public function operation()\n    {\n        parent::operation();\n        $this->addedState = 'New State';\n        echo 'A' . PHP_EOL;\n    }\n}\n\nclass DecoratorB extends Decorator\n{\n    public function operation()\n    {\n        parent::operation();\n        $this->addedBehavior();\n        echo 'B' . PHP_EOL;\n    }\n\n    private function addedBehavior()\n    {\n\n    }\n}\n\nclass DecoratorC extends Decorator\n{\n    public function operation()\n    {\n        parent::operation();\n        $this->addedBehavior();\n        echo 'C' . PHP_EOL;\n    }\n\n    private function addedBehavior()\n    {\n\n    }\n}\n\n$c = new ConcreteComponent();\n$d1 = new DecoratorA();\n$d2 = new DecoratorB();\n$d3 = new DecoratorC();\n\n// \n// d1c\n$d1->setComponent($c);\n// d2d1\n$d2->setComponent($d1);\n// d3d2\n$d3->setComponent($d2);\n//var_dump($d3);\n$d3->operation();\n```\n","source":"_posts/design_patten/decorator.md","raw":"---\nurl: /2018/10/08/design-patten-decorator.html\ntitle: \"(8)-\"\nkeywords: \",\"\ndescription: \"\"\ndate: 2018-10-08T22:31:57+08:00\ndraft: false\ntags: [\"PHP\", \"\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Decorator.php)\n\n## \n\n```\n\n\n\n\n\n\n\n\n\n```\n\n## \n\n```php\n<?php\n/**\n * \n *\n * Class Component\n */\nabstract class Component\n{\n    public abstract function operation();\n}\n\n/**\n * \n *\n *  ConcreteComponent  Component  Decorator \n *  ConcreteComponent  Decorator \n *  Decorator  Decorator  ConcreteComponent \n *\n * Class ConcreteComponent\n */\nclass ConcreteComponent extends Component\n{\n    public function operation()\n    {\n        echo '' . PHP_EOL;\n    }\n\n    public function test()\n    {\n\n    }\n}\n\n/**\n *  Component  Component  Component \n *  Decorator \n *  setComponent \n * \n *\n * Class Decorator\n */\nclass Decorator extends Component\n{\n    /**\n     * @var Component\n     */\n    protected $component;\n\n    /**\n     * \n     *\n     * @param Component $component\n     * @author jiangyi\n     */\n    public function setComponent(Component $component)\n    {\n        $this->component = $component;\n    }\n\n    public function operation()\n    {\n        if ($this->component != null) {\n            $this->component->operation();\n        }\n    }\n}\n\n/**\n *  Component \n *\n * Class DecoratorA\n */\nclass DecoratorA extends Decorator\n{\n    private $addedState;\n\n    public function operation()\n    {\n        parent::operation();\n        $this->addedState = 'New State';\n        echo 'A' . PHP_EOL;\n    }\n}\n\nclass DecoratorB extends Decorator\n{\n    public function operation()\n    {\n        parent::operation();\n        $this->addedBehavior();\n        echo 'B' . PHP_EOL;\n    }\n\n    private function addedBehavior()\n    {\n\n    }\n}\n\nclass DecoratorC extends Decorator\n{\n    public function operation()\n    {\n        parent::operation();\n        $this->addedBehavior();\n        echo 'C' . PHP_EOL;\n    }\n\n    private function addedBehavior()\n    {\n\n    }\n}\n\n$c = new ConcreteComponent();\n$d1 = new DecoratorA();\n$d2 = new DecoratorB();\n$d3 = new DecoratorC();\n\n// \n// d1c\n$d1->setComponent($c);\n// d2d1\n$d2->setComponent($d1);\n// d3d2\n$d3->setComponent($d2);\n//var_dump($d3);\n$d3->operation();\n```\n","slug":"design_patten/decorator","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf4c004emv055ihk2e9i","content":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Decorator.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Component</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Component</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> *  ConcreteComponent  Component  Decorator </span></span><br><span class=\"line\"><span class=\"comment\"> *  ConcreteComponent  Decorator </span></span><br><span class=\"line\"><span class=\"comment\"> *  Decorator  Decorator  ConcreteComponent </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class ConcreteComponent</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteComponent</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  Component  Component  Component </span></span><br><span class=\"line\"><span class=\"comment\"> *  Decorator </span></span><br><span class=\"line\"><span class=\"comment\"> *  setComponent </span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Decorator</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Decorator</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> Component</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> $component;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> Component $component</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setComponent</span>(<span class=\"params\">Component $component</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;component = $component;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">$this</span>-&gt;component != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;component-&gt;operation();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  Component </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class DecoratorA</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DecoratorA</span> <span class=\"keyword\">extends</span> <span class=\"title\">Decorator</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $addedState;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">parent</span>::operation();</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;addedState = <span class=\"string\">&#x27;New State&#x27;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;A&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DecoratorB</span> <span class=\"keyword\">extends</span> <span class=\"title\">Decorator</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">parent</span>::operation();</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;addedBehavior();</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;B&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addedBehavior</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DecoratorC</span> <span class=\"keyword\">extends</span> <span class=\"title\">Decorator</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">parent</span>::operation();</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;addedBehavior();</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;C&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addedBehavior</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$c = <span class=\"keyword\">new</span> ConcreteComponent();</span><br><span class=\"line\">$d1 = <span class=\"keyword\">new</span> DecoratorA();</span><br><span class=\"line\">$d2 = <span class=\"keyword\">new</span> DecoratorB();</span><br><span class=\"line\">$d3 = <span class=\"keyword\">new</span> DecoratorC();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"comment\">// d1c</span></span><br><span class=\"line\">$d1-&gt;setComponent($c);</span><br><span class=\"line\"><span class=\"comment\">// d2d1</span></span><br><span class=\"line\">$d2-&gt;setComponent($d1);</span><br><span class=\"line\"><span class=\"comment\">// d3d2</span></span><br><span class=\"line\">$d3-&gt;setComponent($d2);</span><br><span class=\"line\"><span class=\"comment\">//var_dump($d3);</span></span><br><span class=\"line\">$d3-&gt;operation();</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Decorator.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Component</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Component</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> *  ConcreteComponent  Component  Decorator </span></span><br><span class=\"line\"><span class=\"comment\"> *  ConcreteComponent  Decorator </span></span><br><span class=\"line\"><span class=\"comment\"> *  Decorator  Decorator  ConcreteComponent </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class ConcreteComponent</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteComponent</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  Component  Component  Component </span></span><br><span class=\"line\"><span class=\"comment\"> *  Decorator </span></span><br><span class=\"line\"><span class=\"comment\"> *  setComponent </span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Decorator</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Decorator</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> Component</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> $component;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> Component $component</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setComponent</span>(<span class=\"params\">Component $component</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;component = $component;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">$this</span>-&gt;component != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;component-&gt;operation();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  Component </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class DecoratorA</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DecoratorA</span> <span class=\"keyword\">extends</span> <span class=\"title\">Decorator</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $addedState;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">parent</span>::operation();</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;addedState = <span class=\"string\">&#x27;New State&#x27;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;A&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DecoratorB</span> <span class=\"keyword\">extends</span> <span class=\"title\">Decorator</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">parent</span>::operation();</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;addedBehavior();</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;B&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addedBehavior</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DecoratorC</span> <span class=\"keyword\">extends</span> <span class=\"title\">Decorator</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">parent</span>::operation();</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;addedBehavior();</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;C&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addedBehavior</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$c = <span class=\"keyword\">new</span> ConcreteComponent();</span><br><span class=\"line\">$d1 = <span class=\"keyword\">new</span> DecoratorA();</span><br><span class=\"line\">$d2 = <span class=\"keyword\">new</span> DecoratorB();</span><br><span class=\"line\">$d3 = <span class=\"keyword\">new</span> DecoratorC();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"comment\">// d1c</span></span><br><span class=\"line\">$d1-&gt;setComponent($c);</span><br><span class=\"line\"><span class=\"comment\">// d2d1</span></span><br><span class=\"line\">$d2-&gt;setComponent($d1);</span><br><span class=\"line\"><span class=\"comment\">// d3d2</span></span><br><span class=\"line\">$d3-&gt;setComponent($d2);</span><br><span class=\"line\"><span class=\"comment\">//var_dump($d3);</span></span><br><span class=\"line\">$d3-&gt;operation();</span><br></pre></td></tr></table></figure>\n"},{"url":"/2018/10/09/design-patten-facade.html","title":"(9)-","keywords":",","description":"","date":"2018-10-09T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Facade.php)\n\n## \n\n```\n\n\n\nMVC\n Facade\n\n Facade\n\n\n Facade \n Facade \nFacade \n```\n\n## \n\n```php\n<?php\nclass SubSystemOne\n{\n    public function methodOne()\n    {\n        echo ''.PHP_EOL;\n    }\n}\n\nclass SubSystemTwo\n{\n    public function methodTwo()\n    {\n        echo ''.PHP_EOL;\n    }\n}\n\nclass SubSystemThree\n{\n    public function methodThree()\n    {\n        echo ''.PHP_EOL;\n    }\n}\n\nclass SubSystemFour\n{\n    public function methodFour()\n    {\n        echo '' .PHP_EOL;\n    }\n}\n\n/**\n * \n *\n * Class Facade\n */\nclass Facade\n{\n    public $one;\n    public $two;\n    public $three;\n    public $four;\n\n    /**\n     * Facade constructor.\n     */\n    public function __construct()\n    {\n        $this->one = new SubSystemOne();\n        $this->two = new  SubSystemTwo();\n        $this->three = new SubSystemThree();\n        $this->four = new SubSystemFour();\n    }\n\n    public function methodA()\n    {\n        echo 'A:' . PHP_EOL;\n        $this->one->methodOne();\n        $this->three->methodThree();\n    }\n\n    public function methodB()\n    {\n        echo 'B:' . PHP_EOL;\n        $this->four->methodFour();\n        $this->two->methodTwo();\n    }\n\n}\n\n$facade = new Facade();\n$facade->methodA();\n$facade->methodB();\n```\n","source":"_posts/design_patten/facade.md","raw":"---\nurl: /2018/10/09/design-patten-facade.html\ntitle: \"(9)-\"\nkeywords: \",\"\ndescription: \"\"\ndate: 2018-10-09T22:31:57+08:00\ndraft: false\ntags: [\"PHP\", \"\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Facade.php)\n\n## \n\n```\n\n\n\nMVC\n Facade\n\n Facade\n\n\n Facade \n Facade \nFacade \n```\n\n## \n\n```php\n<?php\nclass SubSystemOne\n{\n    public function methodOne()\n    {\n        echo ''.PHP_EOL;\n    }\n}\n\nclass SubSystemTwo\n{\n    public function methodTwo()\n    {\n        echo ''.PHP_EOL;\n    }\n}\n\nclass SubSystemThree\n{\n    public function methodThree()\n    {\n        echo ''.PHP_EOL;\n    }\n}\n\nclass SubSystemFour\n{\n    public function methodFour()\n    {\n        echo '' .PHP_EOL;\n    }\n}\n\n/**\n * \n *\n * Class Facade\n */\nclass Facade\n{\n    public $one;\n    public $two;\n    public $three;\n    public $four;\n\n    /**\n     * Facade constructor.\n     */\n    public function __construct()\n    {\n        $this->one = new SubSystemOne();\n        $this->two = new  SubSystemTwo();\n        $this->three = new SubSystemThree();\n        $this->four = new SubSystemFour();\n    }\n\n    public function methodA()\n    {\n        echo 'A:' . PHP_EOL;\n        $this->one->methodOne();\n        $this->three->methodThree();\n    }\n\n    public function methodB()\n    {\n        echo 'B:' . PHP_EOL;\n        $this->four->methodFour();\n        $this->two->methodTwo();\n    }\n\n}\n\n$facade = new Facade();\n$facade->methodA();\n$facade->methodB();\n```\n","slug":"design_patten/facade","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf4d004hmv056vv4dzg0","content":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Facade.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">MVC</span><br><span class=\"line\"> Facade</span><br><span class=\"line\"></span><br><span class=\"line\"> Facade</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> Facade </span><br><span class=\"line\"> Facade </span><br><span class=\"line\">Facade </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SubSystemOne</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">methodOne</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span>.PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SubSystemTwo</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">methodTwo</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span>.PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SubSystemThree</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">methodThree</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span>.PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SubSystemFour</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">methodFour</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> .PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Facade</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Facade</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> $one;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> $two;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> $three;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> $four;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Facade constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;one = <span class=\"keyword\">new</span> SubSystemOne();</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;two = <span class=\"keyword\">new</span>  SubSystemTwo();</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;three = <span class=\"keyword\">new</span> SubSystemThree();</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;four = <span class=\"keyword\">new</span> SubSystemFour();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">methodA</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;A:&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;one-&gt;methodOne();</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;three-&gt;methodThree();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">methodB</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;B:&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;four-&gt;methodFour();</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;two-&gt;methodTwo();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$facade = <span class=\"keyword\">new</span> Facade();</span><br><span class=\"line\">$facade-&gt;methodA();</span><br><span class=\"line\">$facade-&gt;methodB();</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Facade.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">MVC</span><br><span class=\"line\"> Facade</span><br><span class=\"line\"></span><br><span class=\"line\"> Facade</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> Facade </span><br><span class=\"line\"> Facade </span><br><span class=\"line\">Facade </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SubSystemOne</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">methodOne</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span>.PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SubSystemTwo</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">methodTwo</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span>.PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SubSystemThree</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">methodThree</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span>.PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SubSystemFour</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">methodFour</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> .PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Facade</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Facade</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> $one;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> $two;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> $three;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> $four;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Facade constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;one = <span class=\"keyword\">new</span> SubSystemOne();</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;two = <span class=\"keyword\">new</span>  SubSystemTwo();</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;three = <span class=\"keyword\">new</span> SubSystemThree();</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;four = <span class=\"keyword\">new</span> SubSystemFour();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">methodA</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;A:&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;one-&gt;methodOne();</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;three-&gt;methodThree();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">methodB</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;B:&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;four-&gt;methodFour();</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;two-&gt;methodTwo();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$facade = <span class=\"keyword\">new</span> Facade();</span><br><span class=\"line\">$facade-&gt;methodA();</span><br><span class=\"line\">$facade-&gt;methodB();</span><br></pre></td></tr></table></figure>\n"},{"url":"/2018/10/10/design-patten-factory-method.html","title":"(10)-","keywords":",","description":"","date":"2018-10-10T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n[](https://github.com/wenjy/design_patten_php/blob/master/src/FactoryMethod.php)\n\n## \n\n```\n\n\n-\n\n```\n\n## \n\n```php\n<?php\nclass LeiFeng\n{\n    public function sweep()\n    {\n        echo '' . PHP_EOL;\n    }\n\n    public function wash()\n    {\n        echo '' . PHP_EOL;\n    }\n\n    public function buyRice()\n    {\n        echo '' . PHP_EOL;\n    }\n}\n\n/**\n * \n * \n *\n * Class Undergraduate\n */\nclass Undergraduate extends LeiFeng\n{\n    public function sweep()\n    {\n        parent::sweep();\n        echo '' . PHP_EOL;\n    }\n\n}\n\nclass Volunteer extends LeiFeng\n{\n\n}\n\n/**\n * \n *\n * Interface IFactory\n */\ninterface IFactory\n{\n    public function createLeiFeng();\n}\n\n/**\n * \n *\n * Class UndergraduateFactory\n */\nclass UndergraduateFactory implements IFactory\n{\n    public function createLeiFeng()\n    {\n        return new Undergraduate();\n    }\n}\n\nclass VolunteerFactory implements IFactory\n{\n    public function createLeiFeng()\n    {\n        return new Volunteer();\n    }\n}\n\n$factory = new UndergraduateFactory();\n$student = $factory->createLeiFeng();\n\n$student->buyRice();\n$student->sweep();\n$student->wash();\n```\n","source":"_posts/design_patten/factory_method.md","raw":"---\nurl: /2018/10/10/design-patten-factory-method.html\ntitle: \"(10)-\"\nkeywords: \",\"\ndescription: \"\"\ndate: 2018-10-10T22:31:57+08:00\ndraft: false\ntags: [\"PHP\", \"\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n[](https://github.com/wenjy/design_patten_php/blob/master/src/FactoryMethod.php)\n\n## \n\n```\n\n\n-\n\n```\n\n## \n\n```php\n<?php\nclass LeiFeng\n{\n    public function sweep()\n    {\n        echo '' . PHP_EOL;\n    }\n\n    public function wash()\n    {\n        echo '' . PHP_EOL;\n    }\n\n    public function buyRice()\n    {\n        echo '' . PHP_EOL;\n    }\n}\n\n/**\n * \n * \n *\n * Class Undergraduate\n */\nclass Undergraduate extends LeiFeng\n{\n    public function sweep()\n    {\n        parent::sweep();\n        echo '' . PHP_EOL;\n    }\n\n}\n\nclass Volunteer extends LeiFeng\n{\n\n}\n\n/**\n * \n *\n * Interface IFactory\n */\ninterface IFactory\n{\n    public function createLeiFeng();\n}\n\n/**\n * \n *\n * Class UndergraduateFactory\n */\nclass UndergraduateFactory implements IFactory\n{\n    public function createLeiFeng()\n    {\n        return new Undergraduate();\n    }\n}\n\nclass VolunteerFactory implements IFactory\n{\n    public function createLeiFeng()\n    {\n        return new Volunteer();\n    }\n}\n\n$factory = new UndergraduateFactory();\n$student = $factory->createLeiFeng();\n\n$student->buyRice();\n$student->sweep();\n$student->wash();\n```\n","slug":"design_patten/factory_method","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf4f004jmv05cejo4u0x","content":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/FactoryMethod.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">-</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LeiFeng</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sweep</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">wash</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buyRice</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Undergraduate</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Undergraduate</span> <span class=\"keyword\">extends</span> <span class=\"title\">LeiFeng</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sweep</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">parent</span>::sweep();</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Volunteer</span> <span class=\"keyword\">extends</span> <span class=\"title\">LeiFeng</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Interface IFactory</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">IFactory</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createLeiFeng</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class UndergraduateFactory</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UndergraduateFactory</span> <span class=\"keyword\">implements</span> <span class=\"title\">IFactory</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createLeiFeng</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Undergraduate();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">VolunteerFactory</span> <span class=\"keyword\">implements</span> <span class=\"title\">IFactory</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createLeiFeng</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Volunteer();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$factory = <span class=\"keyword\">new</span> UndergraduateFactory();</span><br><span class=\"line\">$student = $factory-&gt;createLeiFeng();</span><br><span class=\"line\"></span><br><span class=\"line\">$student-&gt;buyRice();</span><br><span class=\"line\">$student-&gt;sweep();</span><br><span class=\"line\">$student-&gt;wash();</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/FactoryMethod.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">-</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LeiFeng</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sweep</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">wash</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buyRice</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Undergraduate</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Undergraduate</span> <span class=\"keyword\">extends</span> <span class=\"title\">LeiFeng</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sweep</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">parent</span>::sweep();</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Volunteer</span> <span class=\"keyword\">extends</span> <span class=\"title\">LeiFeng</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Interface IFactory</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">IFactory</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createLeiFeng</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class UndergraduateFactory</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UndergraduateFactory</span> <span class=\"keyword\">implements</span> <span class=\"title\">IFactory</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createLeiFeng</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Undergraduate();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">VolunteerFactory</span> <span class=\"keyword\">implements</span> <span class=\"title\">IFactory</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createLeiFeng</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Volunteer();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$factory = <span class=\"keyword\">new</span> UndergraduateFactory();</span><br><span class=\"line\">$student = $factory-&gt;createLeiFeng();</span><br><span class=\"line\"></span><br><span class=\"line\">$student-&gt;buyRice();</span><br><span class=\"line\">$student-&gt;sweep();</span><br><span class=\"line\">$student-&gt;wash();</span><br></pre></td></tr></table></figure>\n"},{"url":"/2018/10/12/design-patten-interpreter.html","title":"(12)-","keywords":",","description":"","date":"2018-10-12T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Interpreter.php)\n\n## \n\n```\n\n\n\n\n```\n\n## \n\n```php\n<?php\n/**\n * \n * Class AbstractExpression\n */\nabstract class AbstractExpression\n{\n    abstract public function interpret(Context $context);\n}\n\nclass TerminalExpression extends AbstractExpression\n{\n    public function interpret(Context $context)\n    {\n        echo '' . PHP_EOL;\n    }\n}\n\nclass NonTerminalExpression extends AbstractExpression\n{\n    public function interpret(Context $context)\n    {\n        echo '' . PHP_EOL;\n    }\n}\n\n/**\n * \n *\n * Class Context\n */\nclass Context\n{\n    private $input;\n\n    private $output;\n\n    /**\n     * @return mixed\n     */\n    public function getOutput()\n    {\n        return $this->output;\n    }\n\n    /**\n     * @param mixed $output\n     */\n    public function setOutput($output)\n    {\n        $this->output = $output;\n    }\n\n    /**\n     * @return mixed\n     */\n    public function getInput()\n    {\n        return $this->input;\n    }\n\n    /**\n     * @param mixed $input\n     */\n    public function setInput($input)\n    {\n        $this->input = $input;\n    }\n\n}\n\n$context = new Context();\n\n$list[] = new NonTerminalExpression();\n$list[] = new NonTerminalExpression();\n$list[] = new TerminalExpression();\n\n/* @var $v AbstractExpression */\nforeach ($list as $v) {\n    $v->interpret($context);\n}\n```\n","source":"_posts/design_patten/interperter.md","raw":"---\nurl: /2018/10/12/design-patten-interpreter.html\ntitle: \"(12)-\"\nkeywords: \",\"\ndescription: \"\"\ndate: 2018-10-12T22:31:57+08:00\ndraft: false\ntags: [\"PHP\", \"\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Interpreter.php)\n\n## \n\n```\n\n\n\n\n```\n\n## \n\n```php\n<?php\n/**\n * \n * Class AbstractExpression\n */\nabstract class AbstractExpression\n{\n    abstract public function interpret(Context $context);\n}\n\nclass TerminalExpression extends AbstractExpression\n{\n    public function interpret(Context $context)\n    {\n        echo '' . PHP_EOL;\n    }\n}\n\nclass NonTerminalExpression extends AbstractExpression\n{\n    public function interpret(Context $context)\n    {\n        echo '' . PHP_EOL;\n    }\n}\n\n/**\n * \n *\n * Class Context\n */\nclass Context\n{\n    private $input;\n\n    private $output;\n\n    /**\n     * @return mixed\n     */\n    public function getOutput()\n    {\n        return $this->output;\n    }\n\n    /**\n     * @param mixed $output\n     */\n    public function setOutput($output)\n    {\n        $this->output = $output;\n    }\n\n    /**\n     * @return mixed\n     */\n    public function getInput()\n    {\n        return $this->input;\n    }\n\n    /**\n     * @param mixed $input\n     */\n    public function setInput($input)\n    {\n        $this->input = $input;\n    }\n\n}\n\n$context = new Context();\n\n$list[] = new NonTerminalExpression();\n$list[] = new NonTerminalExpression();\n$list[] = new TerminalExpression();\n\n/* @var $v AbstractExpression */\nforeach ($list as $v) {\n    $v->interpret($context);\n}\n```\n","slug":"design_patten/interperter","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf4g004nmv053ifya413","content":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Interpreter.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * Class AbstractExpression</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AbstractExpression</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">interpret</span>(<span class=\"params\">Context $context</span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TerminalExpression</span> <span class=\"keyword\">extends</span> <span class=\"title\">AbstractExpression</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">interpret</span>(<span class=\"params\">Context $context</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">NonTerminalExpression</span> <span class=\"keyword\">extends</span> <span class=\"title\">AbstractExpression</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">interpret</span>(<span class=\"params\">Context $context</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Context</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Context</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $input;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $output;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getOutput</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;output;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $output</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setOutput</span>(<span class=\"params\">$output</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;output = $output;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getInput</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;input;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $input</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setInput</span>(<span class=\"params\">$input</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;input = $input;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$context = <span class=\"keyword\">new</span> Context();</span><br><span class=\"line\"></span><br><span class=\"line\">$list[] = <span class=\"keyword\">new</span> NonTerminalExpression();</span><br><span class=\"line\">$list[] = <span class=\"keyword\">new</span> NonTerminalExpression();</span><br><span class=\"line\">$list[] = <span class=\"keyword\">new</span> TerminalExpression();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* <span class=\"doctag\">@var</span> $v AbstractExpression */</span></span><br><span class=\"line\"><span class=\"keyword\">foreach</span> ($list <span class=\"keyword\">as</span> $v) &#123;</span><br><span class=\"line\">    $v-&gt;interpret($context);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Interpreter.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * Class AbstractExpression</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AbstractExpression</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">interpret</span>(<span class=\"params\">Context $context</span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TerminalExpression</span> <span class=\"keyword\">extends</span> <span class=\"title\">AbstractExpression</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">interpret</span>(<span class=\"params\">Context $context</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">NonTerminalExpression</span> <span class=\"keyword\">extends</span> <span class=\"title\">AbstractExpression</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">interpret</span>(<span class=\"params\">Context $context</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Context</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Context</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $input;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $output;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getOutput</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;output;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $output</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setOutput</span>(<span class=\"params\">$output</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;output = $output;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getInput</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;input;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $input</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setInput</span>(<span class=\"params\">$input</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;input = $input;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$context = <span class=\"keyword\">new</span> Context();</span><br><span class=\"line\"></span><br><span class=\"line\">$list[] = <span class=\"keyword\">new</span> NonTerminalExpression();</span><br><span class=\"line\">$list[] = <span class=\"keyword\">new</span> NonTerminalExpression();</span><br><span class=\"line\">$list[] = <span class=\"keyword\">new</span> TerminalExpression();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* <span class=\"doctag\">@var</span> $v AbstractExpression */</span></span><br><span class=\"line\"><span class=\"keyword\">foreach</span> ($list <span class=\"keyword\">as</span> $v) &#123;</span><br><span class=\"line\">    $v-&gt;interpret($context);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n"},{"url":"/2018/10/13/design-patten-mediator.html","title":"(13)-","keywords":",","description":"","date":"2018-10-13T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Mediator.php)\n\n## \n\n```\n\n\n\n\n\n\n\n```\n\n## \n\n```php\n<?php\n/**\n * \n *\n * Class Mediator\n */\nabstract class Mediator\n{\n    /**\n     * \n     * @param $message\n     * @param Colleague $colleague\n     * @return mixed\n     */\n    abstract public function send($message, Colleague $colleague);\n}\n\n/**\n * \n *\n * Class Colleague\n */\nabstract class Colleague\n{\n    /**\n     * @var Mediator\n     */\n    protected $mediator;\n\n    /**\n     * Colleague constructor.\n     * @param $mediator\n     */\n    public function __construct(Mediator $mediator)\n    {\n        $this->mediator = $mediator;\n    }\n\n}\n\n/**\n * \n * \n *\n * Class ConcreteMediator\n */\nclass ConcreteMediator extends Mediator\n{\n    /**\n     * @var ConcreteColleague1\n     */\n    private $colleague1;\n\n    /**\n     * @var ConcreteColleague2\n     */\n    private $colleague2;\n\n    /**\n     * @param mixed $colleague1\n     */\n    public function setColleague1($colleague1)\n    {\n        $this->colleague1 = $colleague1;\n    }\n\n    /**\n     * @param mixed $colleague2\n     */\n    public function setColleague2($colleague2)\n    {\n        $this->colleague2 = $colleague2;\n    }\n\n    public function send($message, Colleague $colleague)\n    {\n        if ($colleague === $this->colleague1) {\n            $this->colleague2->notify($message);\n        } else {\n            $this->colleague1->notify($message);\n        }\n    }\n\n    /**\n     * @var array  Colleague \n     */\n    private $colleagueList = [];\n\n    public function setColleague(Colleague $colleague)\n    {\n        $this->colleagueList[get_class($colleague)] = $colleague;\n    }\n\n    public function send1($message, Colleague $colleague)\n    {\n        //$this->colleagueList[get_class($colleague)]->notify($message);\n        $colleague->notify($message);\n    }\n}\n\n/**\n * \n * \n *\n * Class ConcreteColleague1\n */\nclass ConcreteColleague1 extends Colleague\n{\n\n    /**\n     * ConcreteColleague1 constructor.\n     */\n    public function __construct(Mediator $mediator)\n    {\n        parent::__construct($mediator);\n    }\n\n    public function send($message)\n    {\n        $this->mediator->send1($message, $this);\n    }\n\n    public function notify($message)\n    {\n        echo '1' . $message . PHP_EOL;\n    }\n}\n\nclass ConcreteColleague2 extends Colleague\n{\n    /**\n     * ConcreteColleague2 constructor.\n     */\n    public function __construct(Mediator $mediator)\n    {\n        parent::__construct($mediator);\n    }\n\n    public function send($message)\n    {\n        $this->mediator->send1($message, $this);\n    }\n\n    public function notify($message)\n    {\n        echo '2' . $message . PHP_EOL;\n    }\n}\n\n$m = new ConcreteMediator();\n\n// \n$c1 = new ConcreteColleague1($m);\n$c2 = new ConcreteColleague2($m);\n\n// \n//$m->setColleague1($c1);\n//$m->setColleague2($c2);\n$m->setColleague($c1);\n$m->setColleague($c2);\n\n// \n$c1->send('');\n$c2->send('');\n\n```\n","source":"_posts/design_patten/mediator.md","raw":"---\nurl: /2018/10/13/design-patten-mediator.html\ntitle: \"(13)-\"\nkeywords: \",\"\ndescription: \"\"\ndate: 2018-10-13T22:31:57+08:00\ndraft: false\ntags: [\"PHP\", \"\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Mediator.php)\n\n## \n\n```\n\n\n\n\n\n\n\n```\n\n## \n\n```php\n<?php\n/**\n * \n *\n * Class Mediator\n */\nabstract class Mediator\n{\n    /**\n     * \n     * @param $message\n     * @param Colleague $colleague\n     * @return mixed\n     */\n    abstract public function send($message, Colleague $colleague);\n}\n\n/**\n * \n *\n * Class Colleague\n */\nabstract class Colleague\n{\n    /**\n     * @var Mediator\n     */\n    protected $mediator;\n\n    /**\n     * Colleague constructor.\n     * @param $mediator\n     */\n    public function __construct(Mediator $mediator)\n    {\n        $this->mediator = $mediator;\n    }\n\n}\n\n/**\n * \n * \n *\n * Class ConcreteMediator\n */\nclass ConcreteMediator extends Mediator\n{\n    /**\n     * @var ConcreteColleague1\n     */\n    private $colleague1;\n\n    /**\n     * @var ConcreteColleague2\n     */\n    private $colleague2;\n\n    /**\n     * @param mixed $colleague1\n     */\n    public function setColleague1($colleague1)\n    {\n        $this->colleague1 = $colleague1;\n    }\n\n    /**\n     * @param mixed $colleague2\n     */\n    public function setColleague2($colleague2)\n    {\n        $this->colleague2 = $colleague2;\n    }\n\n    public function send($message, Colleague $colleague)\n    {\n        if ($colleague === $this->colleague1) {\n            $this->colleague2->notify($message);\n        } else {\n            $this->colleague1->notify($message);\n        }\n    }\n\n    /**\n     * @var array  Colleague \n     */\n    private $colleagueList = [];\n\n    public function setColleague(Colleague $colleague)\n    {\n        $this->colleagueList[get_class($colleague)] = $colleague;\n    }\n\n    public function send1($message, Colleague $colleague)\n    {\n        //$this->colleagueList[get_class($colleague)]->notify($message);\n        $colleague->notify($message);\n    }\n}\n\n/**\n * \n * \n *\n * Class ConcreteColleague1\n */\nclass ConcreteColleague1 extends Colleague\n{\n\n    /**\n     * ConcreteColleague1 constructor.\n     */\n    public function __construct(Mediator $mediator)\n    {\n        parent::__construct($mediator);\n    }\n\n    public function send($message)\n    {\n        $this->mediator->send1($message, $this);\n    }\n\n    public function notify($message)\n    {\n        echo '1' . $message . PHP_EOL;\n    }\n}\n\nclass ConcreteColleague2 extends Colleague\n{\n    /**\n     * ConcreteColleague2 constructor.\n     */\n    public function __construct(Mediator $mediator)\n    {\n        parent::__construct($mediator);\n    }\n\n    public function send($message)\n    {\n        $this->mediator->send1($message, $this);\n    }\n\n    public function notify($message)\n    {\n        echo '2' . $message . PHP_EOL;\n    }\n}\n\n$m = new ConcreteMediator();\n\n// \n$c1 = new ConcreteColleague1($m);\n$c2 = new ConcreteColleague2($m);\n\n// \n//$m->setColleague1($c1);\n//$m->setColleague2($c2);\n$m->setColleague($c1);\n$m->setColleague($c2);\n\n// \n$c1->send('');\n$c2->send('');\n\n```\n","slug":"design_patten/mediator","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf4h004pmv05ajy5006d","content":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Mediator.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Mediator</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Mediator</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> $message</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> Colleague $colleague</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">send</span>(<span class=\"params\">$message, Colleague $colleague</span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Colleague</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Colleague</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> Mediator</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> $mediator;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Colleague constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> $mediator</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">Mediator $mediator</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;mediator = $mediator;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class ConcreteMediator</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteMediator</span> <span class=\"keyword\">extends</span> <span class=\"title\">Mediator</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> ConcreteColleague1</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $colleague1;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> ConcreteColleague2</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $colleague2;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $colleague1</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setColleague1</span>(<span class=\"params\">$colleague1</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;colleague1 = $colleague1;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $colleague2</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setColleague2</span>(<span class=\"params\">$colleague2</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;colleague2 = $colleague2;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">send</span>(<span class=\"params\">$message, Colleague $colleague</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($colleague === <span class=\"keyword\">$this</span>-&gt;colleague1) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;colleague2-&gt;notify($message);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;colleague1-&gt;notify($message);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> array  Colleague </span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $colleagueList = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setColleague</span>(<span class=\"params\">Colleague $colleague</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;colleagueList[get_class($colleague)] = $colleague;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">send1</span>(<span class=\"params\">$message, Colleague $colleague</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//$this-&gt;colleagueList[get_class($colleague)]-&gt;notify($message);</span></span><br><span class=\"line\">        $colleague-&gt;notify($message);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class ConcreteColleague1</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteColleague1</span> <span class=\"keyword\">extends</span> <span class=\"title\">Colleague</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ConcreteColleague1 constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">Mediator $mediator</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">parent</span>::__construct($mediator);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">send</span>(<span class=\"params\">$message</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;mediator-&gt;send1($message, <span class=\"keyword\">$this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">notify</span>(<span class=\"params\">$message</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;1&#x27;</span> . $message . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteColleague2</span> <span class=\"keyword\">extends</span> <span class=\"title\">Colleague</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ConcreteColleague2 constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">Mediator $mediator</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">parent</span>::__construct($mediator);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">send</span>(<span class=\"params\">$message</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;mediator-&gt;send1($message, <span class=\"keyword\">$this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">notify</span>(<span class=\"params\">$message</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;2&#x27;</span> . $message . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$m = <span class=\"keyword\">new</span> ConcreteMediator();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$c1 = <span class=\"keyword\">new</span> ConcreteColleague1($m);</span><br><span class=\"line\">$c2 = <span class=\"keyword\">new</span> ConcreteColleague2($m);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"comment\">//$m-&gt;setColleague1($c1);</span></span><br><span class=\"line\"><span class=\"comment\">//$m-&gt;setColleague2($c2);</span></span><br><span class=\"line\">$m-&gt;setColleague($c1);</span><br><span class=\"line\">$m-&gt;setColleague($c2);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$c1-&gt;send(<span class=\"string\">&#x27;&#x27;</span>);</span><br><span class=\"line\">$c2-&gt;send(<span class=\"string\">&#x27;&#x27;</span>);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Mediator.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Mediator</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Mediator</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> $message</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> Colleague $colleague</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">send</span>(<span class=\"params\">$message, Colleague $colleague</span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Colleague</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Colleague</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> Mediator</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> $mediator;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Colleague constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> $mediator</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">Mediator $mediator</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;mediator = $mediator;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class ConcreteMediator</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteMediator</span> <span class=\"keyword\">extends</span> <span class=\"title\">Mediator</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> ConcreteColleague1</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $colleague1;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> ConcreteColleague2</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $colleague2;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $colleague1</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setColleague1</span>(<span class=\"params\">$colleague1</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;colleague1 = $colleague1;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $colleague2</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setColleague2</span>(<span class=\"params\">$colleague2</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;colleague2 = $colleague2;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">send</span>(<span class=\"params\">$message, Colleague $colleague</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($colleague === <span class=\"keyword\">$this</span>-&gt;colleague1) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;colleague2-&gt;notify($message);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;colleague1-&gt;notify($message);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> array  Colleague </span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $colleagueList = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setColleague</span>(<span class=\"params\">Colleague $colleague</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;colleagueList[get_class($colleague)] = $colleague;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">send1</span>(<span class=\"params\">$message, Colleague $colleague</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//$this-&gt;colleagueList[get_class($colleague)]-&gt;notify($message);</span></span><br><span class=\"line\">        $colleague-&gt;notify($message);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class ConcreteColleague1</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteColleague1</span> <span class=\"keyword\">extends</span> <span class=\"title\">Colleague</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ConcreteColleague1 constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">Mediator $mediator</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">parent</span>::__construct($mediator);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">send</span>(<span class=\"params\">$message</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;mediator-&gt;send1($message, <span class=\"keyword\">$this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">notify</span>(<span class=\"params\">$message</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;1&#x27;</span> . $message . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteColleague2</span> <span class=\"keyword\">extends</span> <span class=\"title\">Colleague</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ConcreteColleague2 constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">Mediator $mediator</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">parent</span>::__construct($mediator);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">send</span>(<span class=\"params\">$message</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;mediator-&gt;send1($message, <span class=\"keyword\">$this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">notify</span>(<span class=\"params\">$message</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;2&#x27;</span> . $message . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$m = <span class=\"keyword\">new</span> ConcreteMediator();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$c1 = <span class=\"keyword\">new</span> ConcreteColleague1($m);</span><br><span class=\"line\">$c2 = <span class=\"keyword\">new</span> ConcreteColleague2($m);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"comment\">//$m-&gt;setColleague1($c1);</span></span><br><span class=\"line\"><span class=\"comment\">//$m-&gt;setColleague2($c2);</span></span><br><span class=\"line\">$m-&gt;setColleague($c1);</span><br><span class=\"line\">$m-&gt;setColleague($c2);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$c1-&gt;send(<span class=\"string\">&#x27;&#x27;</span>);</span><br><span class=\"line\">$c2-&gt;send(<span class=\"string\">&#x27;&#x27;</span>);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n"},{"url":"/2018/10/11/design-patten-flyweight.html","title":"(11)-","keywords":",","description":"","date":"2018-10-11T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Flyweight.php)\n\n## \n\n```\n\n\n\n\n\n\n\n\n\n```\n\n## \n\n```php\n<?php\nclass User\n{\n    private $name;\n\n    /**\n     * User constructor.\n     * @param $name\n     */\n    public function __construct($name)\n    {\n        $this->name = $name;\n    }\n\n    /**\n     * @return mixed\n     */\n    public function getName()\n    {\n        return $this->name;\n    }\n\n}\n\n/**\n * \n *\n * Class WebSite\n */\nabstract class WebSite\n{\n    abstract public function use1(User $user);\n}\n\nclass ConcreteWebSite extends WebSite\n{\n    private $name = '';\n\n    /**\n     * WebSite constructor.\n     * @param string $name\n     */\n    public function __construct($name)\n    {\n        $this->name = $name;\n    }\n\n    public function use1(User $user)\n    {\n        echo '' . $this->name . '' . $user->getName() . PHP_EOL;\n    }\n}\n\n/**\n *  WebSite  WebSite\n *  WebSite \n *\n * Class WebSiteFactory\n */\nclass WebSiteFactory\n{\n    /**\n     * @var array \n     */\n    private $flyweights = [];\n\n    public function getWebSiteCategory($key)\n    {\n        if (!isset($this->flyweights[$key])) {\n            $this->flyweights[$key] = new ConcreteWebSite($key);\n            return $this->flyweights[$key];\n        }\n        return null;\n    }\n\n    public function getWebSiteCount()\n    {\n        return count($this->flyweights);\n    }\n}\n\n$f = new WebSiteFactory();\n\n$fx = $f->getWebSiteCategory('');\n$fx->use1(new User(''));\n```\n","source":"_posts/design_patten/flyweight.md","raw":"---\nurl: /2018/10/11/design-patten-flyweight.html\ntitle: \"(11)-\"\nkeywords: \",\"\ndescription: \"\"\ndate: 2018-10-11T22:31:57+08:00\ndraft: false\ntags: [\"PHP\", \"\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Flyweight.php)\n\n## \n\n```\n\n\n\n\n\n\n\n\n\n```\n\n## \n\n```php\n<?php\nclass User\n{\n    private $name;\n\n    /**\n     * User constructor.\n     * @param $name\n     */\n    public function __construct($name)\n    {\n        $this->name = $name;\n    }\n\n    /**\n     * @return mixed\n     */\n    public function getName()\n    {\n        return $this->name;\n    }\n\n}\n\n/**\n * \n *\n * Class WebSite\n */\nabstract class WebSite\n{\n    abstract public function use1(User $user);\n}\n\nclass ConcreteWebSite extends WebSite\n{\n    private $name = '';\n\n    /**\n     * WebSite constructor.\n     * @param string $name\n     */\n    public function __construct($name)\n    {\n        $this->name = $name;\n    }\n\n    public function use1(User $user)\n    {\n        echo '' . $this->name . '' . $user->getName() . PHP_EOL;\n    }\n}\n\n/**\n *  WebSite  WebSite\n *  WebSite \n *\n * Class WebSiteFactory\n */\nclass WebSiteFactory\n{\n    /**\n     * @var array \n     */\n    private $flyweights = [];\n\n    public function getWebSiteCategory($key)\n    {\n        if (!isset($this->flyweights[$key])) {\n            $this->flyweights[$key] = new ConcreteWebSite($key);\n            return $this->flyweights[$key];\n        }\n        return null;\n    }\n\n    public function getWebSiteCount()\n    {\n        return count($this->flyweights);\n    }\n}\n\n$f = new WebSiteFactory();\n\n$fx = $f->getWebSiteCategory('');\n$fx->use1(new User(''));\n```\n","slug":"design_patten/flyweight","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf4j004tmv054qplcegt","content":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Flyweight.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $name;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * User constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> $name</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">$name</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;name = $name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getName</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class WebSite</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WebSite</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">use1</span>(<span class=\"params\">User $user</span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteWebSite</span> <span class=\"keyword\">extends</span> <span class=\"title\">WebSite</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $name = <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * WebSite constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> string $name</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">$name</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;name = $name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">use1</span>(<span class=\"params\">User $user</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . <span class=\"keyword\">$this</span>-&gt;name . <span class=\"string\">&#x27;&#x27;</span> . $user-&gt;getName() . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  WebSite  WebSite</span></span><br><span class=\"line\"><span class=\"comment\"> *  WebSite </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class WebSiteFactory</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WebSiteFactory</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> array </span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $flyweights = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getWebSiteCategory</span>(<span class=\"params\">$key</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!<span class=\"keyword\">isset</span>(<span class=\"keyword\">$this</span>-&gt;flyweights[$key])) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;flyweights[$key] = <span class=\"keyword\">new</span> ConcreteWebSite($key);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;flyweights[$key];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getWebSiteCount</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> count(<span class=\"keyword\">$this</span>-&gt;flyweights);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$f = <span class=\"keyword\">new</span> WebSiteFactory();</span><br><span class=\"line\"></span><br><span class=\"line\">$fx = $f-&gt;getWebSiteCategory(<span class=\"string\">&#x27;&#x27;</span>);</span><br><span class=\"line\">$fx-&gt;use1(<span class=\"keyword\">new</span> User(<span class=\"string\">&#x27;&#x27;</span>));</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Flyweight.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $name;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * User constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> $name</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">$name</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;name = $name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getName</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class WebSite</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WebSite</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">use1</span>(<span class=\"params\">User $user</span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteWebSite</span> <span class=\"keyword\">extends</span> <span class=\"title\">WebSite</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $name = <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * WebSite constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> string $name</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">$name</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;name = $name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">use1</span>(<span class=\"params\">User $user</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . <span class=\"keyword\">$this</span>-&gt;name . <span class=\"string\">&#x27;&#x27;</span> . $user-&gt;getName() . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  WebSite  WebSite</span></span><br><span class=\"line\"><span class=\"comment\"> *  WebSite </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class WebSiteFactory</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WebSiteFactory</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> array </span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $flyweights = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getWebSiteCategory</span>(<span class=\"params\">$key</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!<span class=\"keyword\">isset</span>(<span class=\"keyword\">$this</span>-&gt;flyweights[$key])) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;flyweights[$key] = <span class=\"keyword\">new</span> ConcreteWebSite($key);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;flyweights[$key];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getWebSiteCount</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> count(<span class=\"keyword\">$this</span>-&gt;flyweights);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$f = <span class=\"keyword\">new</span> WebSiteFactory();</span><br><span class=\"line\"></span><br><span class=\"line\">$fx = $f-&gt;getWebSiteCategory(<span class=\"string\">&#x27;&#x27;</span>);</span><br><span class=\"line\">$fx-&gt;use1(<span class=\"keyword\">new</span> User(<span class=\"string\">&#x27;&#x27;</span>));</span><br></pre></td></tr></table></figure>\n"},{"url":"/2018/10/14/design-patten-memento.html","title":"(14)-","keywords":",","description":"","date":"2018-10-14T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Memento.php)\n\n## \n\n```\n\n\n\n\n Originator  Memento \n\n\n\n\n\n```\n\n## \n\n```php\n<?php\n/**\n *  Memento \n *\n * Class Originator\n */\nclass Originator\n{\n    private $state;\n\n    /**\n     * @return mixed\n     */\n    public function getState()\n    {\n        return $this->state;\n    }\n\n    /**\n     * @param mixed $state\n     */\n    public function setState($state)\n    {\n        $this->state = $state;\n    }\n\n    public function createMemento()\n    {\n        return (new Memento($this->state));\n    }\n\n    public function setMemento(Memento $memento)\n    {\n        $this->state = $memento->getState();\n    }\n\n    public function show()\n    {\n        echo 'State:' . $this->state . PHP_EOL;\n    }\n}\n\n/**\n *  Originator  Originator  Memento\n *\n * Class Memento\n */\nclass Memento\n{\n    private $state;\n\n    /**\n     * Memento constructor.\n     * @param $state\n     */\n    public function __construct($state)\n    {\n        $this->state = $state;\n    }\n\n    /**\n     * @return mixed\n     */\n    public function getState()\n    {\n        return $this->state;\n    }\n\n}\n\n/**\n *  Memento\n *\n * Class Caretaker\n */\nclass Caretaker\n{\n    private $memento;\n\n    /**\n     * @return mixed\n     */\n    public function getMemento()\n    {\n        return $this->memento;\n    }\n\n    /**\n     * @param mixed $memento\n     */\n    public function setMemento($memento)\n    {\n        $this->memento = $memento;\n    }\n\n}\n\n// \n$o = new Originator();\n$o->setState('on');\n$o->show();\n\n// \n$c = new Caretaker();\n$c->setMemento($o->createMemento());\n\n// \n$o->setState('off');\n$o->show();\n\n// \n$o->setMemento($c->getMemento());\n$o->show();\n```\n","source":"_posts/design_patten/memento.md","raw":"---\nurl: /2018/10/14/design-patten-memento.html\ntitle: \"(14)-\"\nkeywords: \",\"\ndescription: \"\"\ndate: 2018-10-14T22:31:57+08:00\ndraft: false\ntags: [\"PHP\", \"\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Memento.php)\n\n## \n\n```\n\n\n\n\n Originator  Memento \n\n\n\n\n\n```\n\n## \n\n```php\n<?php\n/**\n *  Memento \n *\n * Class Originator\n */\nclass Originator\n{\n    private $state;\n\n    /**\n     * @return mixed\n     */\n    public function getState()\n    {\n        return $this->state;\n    }\n\n    /**\n     * @param mixed $state\n     */\n    public function setState($state)\n    {\n        $this->state = $state;\n    }\n\n    public function createMemento()\n    {\n        return (new Memento($this->state));\n    }\n\n    public function setMemento(Memento $memento)\n    {\n        $this->state = $memento->getState();\n    }\n\n    public function show()\n    {\n        echo 'State:' . $this->state . PHP_EOL;\n    }\n}\n\n/**\n *  Originator  Originator  Memento\n *\n * Class Memento\n */\nclass Memento\n{\n    private $state;\n\n    /**\n     * Memento constructor.\n     * @param $state\n     */\n    public function __construct($state)\n    {\n        $this->state = $state;\n    }\n\n    /**\n     * @return mixed\n     */\n    public function getState()\n    {\n        return $this->state;\n    }\n\n}\n\n/**\n *  Memento\n *\n * Class Caretaker\n */\nclass Caretaker\n{\n    private $memento;\n\n    /**\n     * @return mixed\n     */\n    public function getMemento()\n    {\n        return $this->memento;\n    }\n\n    /**\n     * @param mixed $memento\n     */\n    public function setMemento($memento)\n    {\n        $this->memento = $memento;\n    }\n\n}\n\n// \n$o = new Originator();\n$o->setState('on');\n$o->show();\n\n// \n$c = new Caretaker();\n$c->setMemento($o->createMemento());\n\n// \n$o->setState('off');\n$o->show();\n\n// \n$o->setMemento($c->getMemento());\n$o->show();\n```\n","slug":"design_patten/memento","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf4k004umv055mol7hfj","content":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Memento.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> Originator  Memento </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  Memento </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Originator</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Originator</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $state;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getState</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;state;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $state</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setState</span>(<span class=\"params\">$state</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;state = $state;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createMemento</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (<span class=\"keyword\">new</span> Memento(<span class=\"keyword\">$this</span>-&gt;state));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setMemento</span>(<span class=\"params\">Memento $memento</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;state = $memento-&gt;getState();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">show</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;State:&#x27;</span> . <span class=\"keyword\">$this</span>-&gt;state . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  Originator  Originator  Memento</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Memento</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Memento</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $state;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Memento constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> $state</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">$state</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;state = $state;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getState</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;state;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  Memento</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Caretaker</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Caretaker</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $memento;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getMemento</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;memento;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $memento</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setMemento</span>(<span class=\"params\">$memento</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;memento = $memento;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$o = <span class=\"keyword\">new</span> Originator();</span><br><span class=\"line\">$o-&gt;setState(<span class=\"string\">&#x27;on&#x27;</span>);</span><br><span class=\"line\">$o-&gt;show();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$c = <span class=\"keyword\">new</span> Caretaker();</span><br><span class=\"line\">$c-&gt;setMemento($o-&gt;createMemento());</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$o-&gt;setState(<span class=\"string\">&#x27;off&#x27;</span>);</span><br><span class=\"line\">$o-&gt;show();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$o-&gt;setMemento($c-&gt;getMemento());</span><br><span class=\"line\">$o-&gt;show();</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Memento.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> Originator  Memento </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  Memento </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Originator</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Originator</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $state;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getState</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;state;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $state</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setState</span>(<span class=\"params\">$state</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;state = $state;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createMemento</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (<span class=\"keyword\">new</span> Memento(<span class=\"keyword\">$this</span>-&gt;state));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setMemento</span>(<span class=\"params\">Memento $memento</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;state = $memento-&gt;getState();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">show</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;State:&#x27;</span> . <span class=\"keyword\">$this</span>-&gt;state . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  Originator  Originator  Memento</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Memento</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Memento</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $state;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Memento constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> $state</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">$state</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;state = $state;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getState</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;state;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  Memento</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Caretaker</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Caretaker</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $memento;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getMemento</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;memento;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $memento</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setMemento</span>(<span class=\"params\">$memento</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;memento = $memento;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$o = <span class=\"keyword\">new</span> Originator();</span><br><span class=\"line\">$o-&gt;setState(<span class=\"string\">&#x27;on&#x27;</span>);</span><br><span class=\"line\">$o-&gt;show();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$c = <span class=\"keyword\">new</span> Caretaker();</span><br><span class=\"line\">$c-&gt;setMemento($o-&gt;createMemento());</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$o-&gt;setState(<span class=\"string\">&#x27;off&#x27;</span>);</span><br><span class=\"line\">$o-&gt;show();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$o-&gt;setMemento($c-&gt;getMemento());</span><br><span class=\"line\">$o-&gt;show();</span><br></pre></td></tr></table></figure>\n"},{"url":"/2018/10/15/design-patten-observer.html","title":"(15)-","keywords":",","description":"","date":"2018-10-15T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Observer.php)\n\n## \n\n```\n\n\n\nSubject \n\n\n\n\n\n\n\n\n\n\n\n\n```\n\n## \n\n```php\n<?php\n/**\n * \n * \n *\n * Class MySubject\n */\nabstract class MySubject\n{\n    private $list = [];\n\n    public function attach($observer)\n    {\n        $this->list[] = $observer;\n    }\n\n    public function detach($observer)\n    {\n        $key = array_search($observer, $this->list);\n        if ($key !== false && array_key_exists($key, $this->list)) {\n            unset($this->list[$key]);\n        }\n    }\n\n    public function notify()\n    {\n        foreach ($this->list as $observer) {\n            $observer->update();\n        }\n    }\n}\n\n/**\n * Observer \n *\n * Class Observer\n */\nabstract class Observer\n{\n    abstract public function update();\n}\n\n/**\n * \n *\n * Class ConcreteSubject\n */\nclass ConcreteSubject extends MySubject\n{\n    /**\n     * \n     */\n    private $subjectState;\n\n    /**\n     * @return mixed\n     */\n    public function getSubjectState()\n    {\n        return $this->subjectState;\n    }\n\n    /**\n     * @param mixed $subjectState\n     */\n    public function setSubjectState($subjectState)\n    {\n        $this->subjectState = $subjectState;\n    }\n\n}\n\n/**\n * \n *\n * Class ConcreteObserver\n */\nclass ConcreteObserver extends Observer\n{\n    private $name;\n    private $observerState;\n\n    /**\n     * @var ConcreteSubject\n     */\n    private $subject;\n\n    /**\n     * ConcreteObserver constructor.\n     * @param $name\n     */\n    public function __construct(ConcreteSubject $subject, $name)\n    {\n        $this->subject = $subject;\n        $this->name = $name;\n    }\n\n    public function update()\n    {\n        $this->observerState = $this->subject->getSubjectState();\n        echo '' . $this->name . '' . $this->observerState . PHP_EOL;\n    }\n\n    /**\n     * @return mixed\n     */\n    public function getSubject()\n    {\n        return $this->subject;\n    }\n\n    /**\n     * @param mixed $subject\n     */\n    public function setSubject($subject)\n    {\n        $this->subject = $subject;\n    }\n\n}\n\n// \n$s = new ConcreteSubject();\n// \n$s->attach(new ConcreteObserver($s, 'X'));\n$s->attach(new ConcreteObserver($s, 'Y'));\n$s->attach(new ConcreteObserver($s, 'Z'));\n\n// \n$s->setSubjectState('ABC');\n// \n$s->notify();\n\n/**\n * PHP spl\n * Class MySplSubject\n */\nclass MySplSubject implements SplSubject\n{\n    private $subjectState;\n    private $observers;\n\n    public function __construct()\n    {\n        $this->observers = new SplObjectStorage();\n    }\n\n    public function attach(SplObserver $observer)\n    {\n        $this->observers->attach($observer);\n    }\n\n    public function detach(SplObserver $observer)\n    {\n        $this->observers->detach($observer);\n    }\n\n    public function notify()\n    {\n        foreach ($this->observers as $observer) {\n            $observer->update($this);\n        }\n    }\n\n    public function getSubjectState()\n    {\n        return $this->subjectState;\n    }\n\n    public function setSubjectState($subjectState)\n    {\n        $this->subjectState = $subjectState;\n    }\n}\n\nclass MySplObserver implements SplObserver\n{\n    private $name;\n    private $observerState;\n\n    public function __construct($name)\n    {\n        $this->name = $name;\n    }\n\n    public function setObserverState($observerState)\n    {\n        $this->observerState = $observerState;\n    }\n\n    public function update(SplSubject $subject)\n    {\n\n        $this->observerState = $subject->getSubjectState();\n        echo '' . $this->name . '' . $this->observerState . PHP_EOL;\n    }\n}\n\n// \n$s = new MySplSubject();\n// \n$s->attach(new MySplObserver('X'));\n$s->attach(new MySplObserver('Y'));\n$s->attach(new MySplObserver('Z'));\n\n// \n$s->setSubjectState('ABC');\n// \n$s->notify();\n```\n","source":"_posts/design_patten/observer.md","raw":"---\nurl: /2018/10/15/design-patten-observer.html\ntitle: \"(15)-\"\nkeywords: \",\"\ndescription: \"\"\ndate: 2018-10-15T22:31:57+08:00\ndraft: false\ntags: [\"PHP\", \"\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Observer.php)\n\n## \n\n```\n\n\n\nSubject \n\n\n\n\n\n\n\n\n\n\n\n\n```\n\n## \n\n```php\n<?php\n/**\n * \n * \n *\n * Class MySubject\n */\nabstract class MySubject\n{\n    private $list = [];\n\n    public function attach($observer)\n    {\n        $this->list[] = $observer;\n    }\n\n    public function detach($observer)\n    {\n        $key = array_search($observer, $this->list);\n        if ($key !== false && array_key_exists($key, $this->list)) {\n            unset($this->list[$key]);\n        }\n    }\n\n    public function notify()\n    {\n        foreach ($this->list as $observer) {\n            $observer->update();\n        }\n    }\n}\n\n/**\n * Observer \n *\n * Class Observer\n */\nabstract class Observer\n{\n    abstract public function update();\n}\n\n/**\n * \n *\n * Class ConcreteSubject\n */\nclass ConcreteSubject extends MySubject\n{\n    /**\n     * \n     */\n    private $subjectState;\n\n    /**\n     * @return mixed\n     */\n    public function getSubjectState()\n    {\n        return $this->subjectState;\n    }\n\n    /**\n     * @param mixed $subjectState\n     */\n    public function setSubjectState($subjectState)\n    {\n        $this->subjectState = $subjectState;\n    }\n\n}\n\n/**\n * \n *\n * Class ConcreteObserver\n */\nclass ConcreteObserver extends Observer\n{\n    private $name;\n    private $observerState;\n\n    /**\n     * @var ConcreteSubject\n     */\n    private $subject;\n\n    /**\n     * ConcreteObserver constructor.\n     * @param $name\n     */\n    public function __construct(ConcreteSubject $subject, $name)\n    {\n        $this->subject = $subject;\n        $this->name = $name;\n    }\n\n    public function update()\n    {\n        $this->observerState = $this->subject->getSubjectState();\n        echo '' . $this->name . '' . $this->observerState . PHP_EOL;\n    }\n\n    /**\n     * @return mixed\n     */\n    public function getSubject()\n    {\n        return $this->subject;\n    }\n\n    /**\n     * @param mixed $subject\n     */\n    public function setSubject($subject)\n    {\n        $this->subject = $subject;\n    }\n\n}\n\n// \n$s = new ConcreteSubject();\n// \n$s->attach(new ConcreteObserver($s, 'X'));\n$s->attach(new ConcreteObserver($s, 'Y'));\n$s->attach(new ConcreteObserver($s, 'Z'));\n\n// \n$s->setSubjectState('ABC');\n// \n$s->notify();\n\n/**\n * PHP spl\n * Class MySplSubject\n */\nclass MySplSubject implements SplSubject\n{\n    private $subjectState;\n    private $observers;\n\n    public function __construct()\n    {\n        $this->observers = new SplObjectStorage();\n    }\n\n    public function attach(SplObserver $observer)\n    {\n        $this->observers->attach($observer);\n    }\n\n    public function detach(SplObserver $observer)\n    {\n        $this->observers->detach($observer);\n    }\n\n    public function notify()\n    {\n        foreach ($this->observers as $observer) {\n            $observer->update($this);\n        }\n    }\n\n    public function getSubjectState()\n    {\n        return $this->subjectState;\n    }\n\n    public function setSubjectState($subjectState)\n    {\n        $this->subjectState = $subjectState;\n    }\n}\n\nclass MySplObserver implements SplObserver\n{\n    private $name;\n    private $observerState;\n\n    public function __construct($name)\n    {\n        $this->name = $name;\n    }\n\n    public function setObserverState($observerState)\n    {\n        $this->observerState = $observerState;\n    }\n\n    public function update(SplSubject $subject)\n    {\n\n        $this->observerState = $subject->getSubjectState();\n        echo '' . $this->name . '' . $this->observerState . PHP_EOL;\n    }\n}\n\n// \n$s = new MySplSubject();\n// \n$s->attach(new MySplObserver('X'));\n$s->attach(new MySplObserver('Y'));\n$s->attach(new MySplObserver('Z'));\n\n// \n$s->setSubjectState('ABC');\n// \n$s->notify();\n```\n","slug":"design_patten/observer","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf4m004zmv054hg4h7cb","content":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Observer.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Subject </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class MySubject</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MySubject</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $list = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">attach</span>(<span class=\"params\">$observer</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;list[] = $observer;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">detach</span>(<span class=\"params\">$observer</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        $key = array_search($observer, <span class=\"keyword\">$this</span>-&gt;list);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($key !== <span class=\"literal\">false</span> &amp;&amp; array_key_exists($key, <span class=\"keyword\">$this</span>-&gt;list)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">unset</span>(<span class=\"keyword\">$this</span>-&gt;list[$key]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">notify</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"keyword\">$this</span>-&gt;list <span class=\"keyword\">as</span> $observer) &#123;</span><br><span class=\"line\">            $observer-&gt;update();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Observer </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Observer</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Observer</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">update</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class ConcreteSubject</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteSubject</span> <span class=\"keyword\">extends</span> <span class=\"title\">MySubject</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $subjectState;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getSubjectState</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;subjectState;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $subjectState</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setSubjectState</span>(<span class=\"params\">$subjectState</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;subjectState = $subjectState;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class ConcreteObserver</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteObserver</span> <span class=\"keyword\">extends</span> <span class=\"title\">Observer</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $observerState;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> ConcreteSubject</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $subject;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ConcreteObserver constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> $name</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">ConcreteSubject $subject, $name</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;subject = $subject;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;name = $name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">update</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;observerState = <span class=\"keyword\">$this</span>-&gt;subject-&gt;getSubjectState();</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . <span class=\"keyword\">$this</span>-&gt;name . <span class=\"string\">&#x27;&#x27;</span> . <span class=\"keyword\">$this</span>-&gt;observerState . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getSubject</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;subject;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $subject</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setSubject</span>(<span class=\"params\">$subject</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;subject = $subject;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$s = <span class=\"keyword\">new</span> ConcreteSubject();</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$s-&gt;attach(<span class=\"keyword\">new</span> ConcreteObserver($s, <span class=\"string\">&#x27;X&#x27;</span>));</span><br><span class=\"line\">$s-&gt;attach(<span class=\"keyword\">new</span> ConcreteObserver($s, <span class=\"string\">&#x27;Y&#x27;</span>));</span><br><span class=\"line\">$s-&gt;attach(<span class=\"keyword\">new</span> ConcreteObserver($s, <span class=\"string\">&#x27;Z&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$s-&gt;setSubjectState(<span class=\"string\">&#x27;ABC&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$s-&gt;notify();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * PHP spl</span></span><br><span class=\"line\"><span class=\"comment\"> * Class MySplSubject</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MySplSubject</span> <span class=\"keyword\">implements</span> <span class=\"title\">SplSubject</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $subjectState;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $observers;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;observers = <span class=\"keyword\">new</span> <span class=\"built_in\">SplObjectStorage</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">attach</span>(<span class=\"params\"><span class=\"built_in\">SplObserver</span> $observer</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;observers-&gt;attach($observer);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">detach</span>(<span class=\"params\"><span class=\"built_in\">SplObserver</span> $observer</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;observers-&gt;detach($observer);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">notify</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"keyword\">$this</span>-&gt;observers <span class=\"keyword\">as</span> $observer) &#123;</span><br><span class=\"line\">            $observer-&gt;update(<span class=\"keyword\">$this</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getSubjectState</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;subjectState;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setSubjectState</span>(<span class=\"params\">$subjectState</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;subjectState = $subjectState;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MySplObserver</span> <span class=\"keyword\">implements</span> <span class=\"title\">SplObserver</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $observerState;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">$name</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;name = $name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setObserverState</span>(<span class=\"params\">$observerState</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;observerState = $observerState;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">update</span>(<span class=\"params\"><span class=\"built_in\">SplSubject</span> $subject</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;observerState = $subject-&gt;getSubjectState();</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . <span class=\"keyword\">$this</span>-&gt;name . <span class=\"string\">&#x27;&#x27;</span> . <span class=\"keyword\">$this</span>-&gt;observerState . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$s = <span class=\"keyword\">new</span> MySplSubject();</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$s-&gt;attach(<span class=\"keyword\">new</span> MySplObserver(<span class=\"string\">&#x27;X&#x27;</span>));</span><br><span class=\"line\">$s-&gt;attach(<span class=\"keyword\">new</span> MySplObserver(<span class=\"string\">&#x27;Y&#x27;</span>));</span><br><span class=\"line\">$s-&gt;attach(<span class=\"keyword\">new</span> MySplObserver(<span class=\"string\">&#x27;Z&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$s-&gt;setSubjectState(<span class=\"string\">&#x27;ABC&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$s-&gt;notify();</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Observer.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Subject </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class MySubject</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MySubject</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $list = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">attach</span>(<span class=\"params\">$observer</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;list[] = $observer;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">detach</span>(<span class=\"params\">$observer</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        $key = array_search($observer, <span class=\"keyword\">$this</span>-&gt;list);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($key !== <span class=\"literal\">false</span> &amp;&amp; array_key_exists($key, <span class=\"keyword\">$this</span>-&gt;list)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">unset</span>(<span class=\"keyword\">$this</span>-&gt;list[$key]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">notify</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"keyword\">$this</span>-&gt;list <span class=\"keyword\">as</span> $observer) &#123;</span><br><span class=\"line\">            $observer-&gt;update();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Observer </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Observer</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Observer</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">update</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class ConcreteSubject</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteSubject</span> <span class=\"keyword\">extends</span> <span class=\"title\">MySubject</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $subjectState;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getSubjectState</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;subjectState;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $subjectState</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setSubjectState</span>(<span class=\"params\">$subjectState</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;subjectState = $subjectState;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class ConcreteObserver</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteObserver</span> <span class=\"keyword\">extends</span> <span class=\"title\">Observer</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $observerState;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> ConcreteSubject</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $subject;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ConcreteObserver constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> $name</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">ConcreteSubject $subject, $name</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;subject = $subject;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;name = $name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">update</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;observerState = <span class=\"keyword\">$this</span>-&gt;subject-&gt;getSubjectState();</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . <span class=\"keyword\">$this</span>-&gt;name . <span class=\"string\">&#x27;&#x27;</span> . <span class=\"keyword\">$this</span>-&gt;observerState . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getSubject</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;subject;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $subject</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setSubject</span>(<span class=\"params\">$subject</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;subject = $subject;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$s = <span class=\"keyword\">new</span> ConcreteSubject();</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$s-&gt;attach(<span class=\"keyword\">new</span> ConcreteObserver($s, <span class=\"string\">&#x27;X&#x27;</span>));</span><br><span class=\"line\">$s-&gt;attach(<span class=\"keyword\">new</span> ConcreteObserver($s, <span class=\"string\">&#x27;Y&#x27;</span>));</span><br><span class=\"line\">$s-&gt;attach(<span class=\"keyword\">new</span> ConcreteObserver($s, <span class=\"string\">&#x27;Z&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$s-&gt;setSubjectState(<span class=\"string\">&#x27;ABC&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$s-&gt;notify();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * PHP spl</span></span><br><span class=\"line\"><span class=\"comment\"> * Class MySplSubject</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MySplSubject</span> <span class=\"keyword\">implements</span> <span class=\"title\">SplSubject</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $subjectState;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $observers;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;observers = <span class=\"keyword\">new</span> <span class=\"built_in\">SplObjectStorage</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">attach</span>(<span class=\"params\"><span class=\"built_in\">SplObserver</span> $observer</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;observers-&gt;attach($observer);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">detach</span>(<span class=\"params\"><span class=\"built_in\">SplObserver</span> $observer</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;observers-&gt;detach($observer);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">notify</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"keyword\">$this</span>-&gt;observers <span class=\"keyword\">as</span> $observer) &#123;</span><br><span class=\"line\">            $observer-&gt;update(<span class=\"keyword\">$this</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getSubjectState</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;subjectState;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setSubjectState</span>(<span class=\"params\">$subjectState</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;subjectState = $subjectState;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MySplObserver</span> <span class=\"keyword\">implements</span> <span class=\"title\">SplObserver</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $observerState;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">$name</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;name = $name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setObserverState</span>(<span class=\"params\">$observerState</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;observerState = $observerState;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">update</span>(<span class=\"params\"><span class=\"built_in\">SplSubject</span> $subject</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;observerState = $subject-&gt;getSubjectState();</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . <span class=\"keyword\">$this</span>-&gt;name . <span class=\"string\">&#x27;&#x27;</span> . <span class=\"keyword\">$this</span>-&gt;observerState . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$s = <span class=\"keyword\">new</span> MySplSubject();</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$s-&gt;attach(<span class=\"keyword\">new</span> MySplObserver(<span class=\"string\">&#x27;X&#x27;</span>));</span><br><span class=\"line\">$s-&gt;attach(<span class=\"keyword\">new</span> MySplObserver(<span class=\"string\">&#x27;Y&#x27;</span>));</span><br><span class=\"line\">$s-&gt;attach(<span class=\"keyword\">new</span> MySplObserver(<span class=\"string\">&#x27;Z&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$s-&gt;setSubjectState(<span class=\"string\">&#x27;ABC&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$s-&gt;notify();</span><br></pre></td></tr></table></figure>\n"},{"url":"/2018/10/16/design-patten-operation.html","title":"(16)-","keywords":",","description":"","date":"2018-10-16T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Operation.php)\n\n## \n\n```\nswith\n```\n\n## \n\n```php\n<?php\n/**\n * \n *\n * \n *\n * Class Operation\n */\nclass Operation\n{\n    /**\n     * @var int\n     */\n    private $numberA = 0;\n\n    /**\n     * @var int\n     */\n    private $numberB = 0;\n\n    /**\n     * @return int\n     */\n    public function getNumberA()\n    {\n        return $this->numberA;\n    }\n\n    /**\n     * @param int $numberA\n     */\n    public function setNumberA($numberA)\n    {\n        $this->numberA = $numberA;\n    }\n\n    /**\n     * @return int\n     */\n    public function getNumberB()\n    {\n        return $this->numberB;\n    }\n\n    /**\n     * @param int $numberB\n     */\n    public function setNumberB($numberB)\n    {\n        $this->numberB = $numberB;\n    }\n\n    /**\n     * \n     *\n     * @return int\n     * @author jiangyi\n     */\n    public function getResult()\n    {\n        return 0;\n    }\n}\n\n/**\n * \n *\n * Class OperationAdd\n */\nclass OperationAdd extends Operation\n{\n    public function getResult()\n    {\n        return $this->getNumberA() + $this->getNumberB();\n    }\n}\n\n/**\n * \n *\n * Class OperationSub\n */\nclass OperationSub extends Operation\n{\n    public function getResult()\n    {\n        return $this->getNumberA() - $this->getNumberB();\n    }\n}\n\n/**\n * \n *\n * Class OperationMul\n */\nclass OperationMul extends Operation\n{\n    public function getResult()\n    {\n        return $this->getNumberA() * $this->getNumberB();\n    }\n}\n\n/**\n * \n *\n * Class OperationDiv\n *\n */\nclass OperationDiv extends Operation\n{\n    public function getResult()\n    {\n        if ($this->getNumberB() == 0) {\n            throw new Exception('0');\n        }\n        return $this->getNumberA() / $this->getNumberB();\n    }\n}\n\n/**\n * \n * new\n *\n * Class OperationFactory\n */\nclass OperationFactory\n{\n    /**\n     * @param $operate\n     * @return null|OperationAdd|OperationDiv|OperationMul|OperationSub\n     */\n    public static function createOperate($operate)\n    {\n        $operateObject = null;\n        switch ($operate) {\n            case '+':\n                $operateObject = new OperationAdd();\n                break;\n            case '-':\n                $operateObject = new OperationSub();\n                break;\n            case '*':\n                $operateObject = new OperationMul();\n                break;\n            case '/':\n                $operateObject = new OperationDiv();\n                break;\n        }\n        return $operateObject;\n    }\n}\n\n$oper = OperationFactory::createOperate('+');\n$oper->setNumberA(1);\n$oper->setNumberB(4);\n$result = $oper->getResult();\necho $result;\n```\n","source":"_posts/design_patten/operation.md","raw":"---\nurl: /2018/10/16/design-patten-operation.html\ntitle: \"(16)-\"\nkeywords: \",\"\ndescription: \"\"\ndate: 2018-10-16T22:31:57+08:00\ndraft: false\ntags: [\"PHP\", \"\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Operation.php)\n\n## \n\n```\nswith\n```\n\n## \n\n```php\n<?php\n/**\n * \n *\n * \n *\n * Class Operation\n */\nclass Operation\n{\n    /**\n     * @var int\n     */\n    private $numberA = 0;\n\n    /**\n     * @var int\n     */\n    private $numberB = 0;\n\n    /**\n     * @return int\n     */\n    public function getNumberA()\n    {\n        return $this->numberA;\n    }\n\n    /**\n     * @param int $numberA\n     */\n    public function setNumberA($numberA)\n    {\n        $this->numberA = $numberA;\n    }\n\n    /**\n     * @return int\n     */\n    public function getNumberB()\n    {\n        return $this->numberB;\n    }\n\n    /**\n     * @param int $numberB\n     */\n    public function setNumberB($numberB)\n    {\n        $this->numberB = $numberB;\n    }\n\n    /**\n     * \n     *\n     * @return int\n     * @author jiangyi\n     */\n    public function getResult()\n    {\n        return 0;\n    }\n}\n\n/**\n * \n *\n * Class OperationAdd\n */\nclass OperationAdd extends Operation\n{\n    public function getResult()\n    {\n        return $this->getNumberA() + $this->getNumberB();\n    }\n}\n\n/**\n * \n *\n * Class OperationSub\n */\nclass OperationSub extends Operation\n{\n    public function getResult()\n    {\n        return $this->getNumberA() - $this->getNumberB();\n    }\n}\n\n/**\n * \n *\n * Class OperationMul\n */\nclass OperationMul extends Operation\n{\n    public function getResult()\n    {\n        return $this->getNumberA() * $this->getNumberB();\n    }\n}\n\n/**\n * \n *\n * Class OperationDiv\n *\n */\nclass OperationDiv extends Operation\n{\n    public function getResult()\n    {\n        if ($this->getNumberB() == 0) {\n            throw new Exception('0');\n        }\n        return $this->getNumberA() / $this->getNumberB();\n    }\n}\n\n/**\n * \n * new\n *\n * Class OperationFactory\n */\nclass OperationFactory\n{\n    /**\n     * @param $operate\n     * @return null|OperationAdd|OperationDiv|OperationMul|OperationSub\n     */\n    public static function createOperate($operate)\n    {\n        $operateObject = null;\n        switch ($operate) {\n            case '+':\n                $operateObject = new OperationAdd();\n                break;\n            case '-':\n                $operateObject = new OperationSub();\n                break;\n            case '*':\n                $operateObject = new OperationMul();\n                break;\n            case '/':\n                $operateObject = new OperationDiv();\n                break;\n        }\n        return $operateObject;\n    }\n}\n\n$oper = OperationFactory::createOperate('+');\n$oper->setNumberA(1);\n$oper->setNumberB(4);\n$result = $oper->getResult();\necho $result;\n```\n","slug":"design_patten/operation","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf4n0051mv05dy0c4b6o","content":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Operation.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">swith</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Operation</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Operation</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> int</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $numberA = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> int</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $numberB = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> int</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getNumberA</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;numberA;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> int $numberA</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setNumberA</span>(<span class=\"params\">$numberA</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;numberA = $numberA;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> int</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getNumberB</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;numberB;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> int $numberB</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setNumberB</span>(<span class=\"params\">$numberB</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;numberB = $numberB;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> int</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getResult</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class OperationAdd</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OperationAdd</span> <span class=\"keyword\">extends</span> <span class=\"title\">Operation</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getResult</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;getNumberA() + <span class=\"keyword\">$this</span>-&gt;getNumberB();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class OperationSub</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OperationSub</span> <span class=\"keyword\">extends</span> <span class=\"title\">Operation</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getResult</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;getNumberA() - <span class=\"keyword\">$this</span>-&gt;getNumberB();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class OperationMul</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OperationMul</span> <span class=\"keyword\">extends</span> <span class=\"title\">Operation</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getResult</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;getNumberA() * <span class=\"keyword\">$this</span>-&gt;getNumberB();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class OperationDiv</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OperationDiv</span> <span class=\"keyword\">extends</span> <span class=\"title\">Operation</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getResult</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">$this</span>-&gt;getNumberB() == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Exception</span>(<span class=\"string\">&#x27;0&#x27;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;getNumberA() / <span class=\"keyword\">$this</span>-&gt;getNumberB();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * new</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class OperationFactory</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OperationFactory</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> $operate</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> null|OperationAdd|OperationDiv|OperationMul|OperationSub</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createOperate</span>(<span class=\"params\">$operate</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        $operateObject = <span class=\"literal\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">switch</span> ($operate) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;+&#x27;</span>:</span><br><span class=\"line\">                $operateObject = <span class=\"keyword\">new</span> OperationAdd();</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;-&#x27;</span>:</span><br><span class=\"line\">                $operateObject = <span class=\"keyword\">new</span> OperationSub();</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;*&#x27;</span>:</span><br><span class=\"line\">                $operateObject = <span class=\"keyword\">new</span> OperationMul();</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;/&#x27;</span>:</span><br><span class=\"line\">                $operateObject = <span class=\"keyword\">new</span> OperationDiv();</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> $operateObject;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$oper = OperationFactory::createOperate(<span class=\"string\">&#x27;+&#x27;</span>);</span><br><span class=\"line\">$oper-&gt;setNumberA(<span class=\"number\">1</span>);</span><br><span class=\"line\">$oper-&gt;setNumberB(<span class=\"number\">4</span>);</span><br><span class=\"line\">$result = $oper-&gt;getResult();</span><br><span class=\"line\"><span class=\"keyword\">echo</span> $result;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Operation.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">swith</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Operation</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Operation</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> int</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $numberA = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> int</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $numberB = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> int</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getNumberA</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;numberA;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> int $numberA</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setNumberA</span>(<span class=\"params\">$numberA</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;numberA = $numberA;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> int</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getNumberB</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;numberB;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> int $numberB</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setNumberB</span>(<span class=\"params\">$numberB</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;numberB = $numberB;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> int</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getResult</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class OperationAdd</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OperationAdd</span> <span class=\"keyword\">extends</span> <span class=\"title\">Operation</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getResult</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;getNumberA() + <span class=\"keyword\">$this</span>-&gt;getNumberB();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class OperationSub</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OperationSub</span> <span class=\"keyword\">extends</span> <span class=\"title\">Operation</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getResult</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;getNumberA() - <span class=\"keyword\">$this</span>-&gt;getNumberB();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class OperationMul</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OperationMul</span> <span class=\"keyword\">extends</span> <span class=\"title\">Operation</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getResult</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;getNumberA() * <span class=\"keyword\">$this</span>-&gt;getNumberB();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class OperationDiv</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OperationDiv</span> <span class=\"keyword\">extends</span> <span class=\"title\">Operation</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getResult</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">$this</span>-&gt;getNumberB() == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Exception</span>(<span class=\"string\">&#x27;0&#x27;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;getNumberA() / <span class=\"keyword\">$this</span>-&gt;getNumberB();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * new</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class OperationFactory</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OperationFactory</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> $operate</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> null|OperationAdd|OperationDiv|OperationMul|OperationSub</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createOperate</span>(<span class=\"params\">$operate</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        $operateObject = <span class=\"literal\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">switch</span> ($operate) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;+&#x27;</span>:</span><br><span class=\"line\">                $operateObject = <span class=\"keyword\">new</span> OperationAdd();</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;-&#x27;</span>:</span><br><span class=\"line\">                $operateObject = <span class=\"keyword\">new</span> OperationSub();</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;*&#x27;</span>:</span><br><span class=\"line\">                $operateObject = <span class=\"keyword\">new</span> OperationMul();</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;/&#x27;</span>:</span><br><span class=\"line\">                $operateObject = <span class=\"keyword\">new</span> OperationDiv();</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> $operateObject;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$oper = OperationFactory::createOperate(<span class=\"string\">&#x27;+&#x27;</span>);</span><br><span class=\"line\">$oper-&gt;setNumberA(<span class=\"number\">1</span>);</span><br><span class=\"line\">$oper-&gt;setNumberB(<span class=\"number\">4</span>);</span><br><span class=\"line\">$result = $oper-&gt;getResult();</span><br><span class=\"line\"><span class=\"keyword\">echo</span> $result;</span><br></pre></td></tr></table></figure>\n"},{"url":"/2018/10/17/design-patten-prototype.html","title":"(17)-","keywords":",","description":"","date":"2018-10-17T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Prototype.php)\n\n## \n\n```\n\n\n\n```\n\n## \n\n```php\n<?php\nabstract class Prototype\n{\n    private $id;\n\n    public function __construct($id)\n    {\n        $this->id = $id;\n    }\n\n    public function getId()\n    {\n        return $this->id;\n    }\n\n    public function setId($id)\n    {\n        $this->id = $id;\n    }\n\n    public abstract function cloneOne();\n}\n\nclass ConcretePrototype extends Prototype\n{\n    public function __construct($id)\n    {\n        parent::__construct($id);\n    }\n\n    public function cloneOne()\n    {\n        return clone $this;\n    }\n}\n\n$p1 = new ConcretePrototype('a');\n$p1->setId('p1');\n$c1 = $p1->cloneOne();\n//var_dump($p1 === $c1);\n$c1->setId('c1');\necho $p1->getId() . PHP_EOL;\necho $c1->getId() . PHP_EOL;\n```\n","source":"_posts/design_patten/prototype.md","raw":"---\nurl: /2018/10/17/design-patten-prototype.html\ntitle: \"(17)-\"\nkeywords: \",\"\ndescription: \"\"\ndate: 2018-10-17T22:31:57+08:00\ndraft: false\ntags: [\"PHP\", \"\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Prototype.php)\n\n## \n\n```\n\n\n\n```\n\n## \n\n```php\n<?php\nabstract class Prototype\n{\n    private $id;\n\n    public function __construct($id)\n    {\n        $this->id = $id;\n    }\n\n    public function getId()\n    {\n        return $this->id;\n    }\n\n    public function setId($id)\n    {\n        $this->id = $id;\n    }\n\n    public abstract function cloneOne();\n}\n\nclass ConcretePrototype extends Prototype\n{\n    public function __construct($id)\n    {\n        parent::__construct($id);\n    }\n\n    public function cloneOne()\n    {\n        return clone $this;\n    }\n}\n\n$p1 = new ConcretePrototype('a');\n$p1->setId('p1');\n$c1 = $p1->cloneOne();\n//var_dump($p1 === $c1);\n$c1->setId('c1');\necho $p1->getId() . PHP_EOL;\necho $c1->getId() . PHP_EOL;\n```\n","slug":"design_patten/prototype","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf4r0054mv05cg6udjde","content":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Prototype.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Prototype</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $id;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">$id</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;id = $id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getId</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setId</span>(<span class=\"params\">$id</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;id = $id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">cloneOne</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcretePrototype</span> <span class=\"keyword\">extends</span> <span class=\"title\">Prototype</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">$id</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">parent</span>::__construct($id);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">cloneOne</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">clone</span> <span class=\"keyword\">$this</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$p1 = <span class=\"keyword\">new</span> ConcretePrototype(<span class=\"string\">&#x27;a&#x27;</span>);</span><br><span class=\"line\">$p1-&gt;setId(<span class=\"string\">&#x27;p1&#x27;</span>);</span><br><span class=\"line\">$c1 = $p1-&gt;cloneOne();</span><br><span class=\"line\"><span class=\"comment\">//var_dump($p1 === $c1);</span></span><br><span class=\"line\">$c1-&gt;setId(<span class=\"string\">&#x27;c1&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> $p1-&gt;getId() . PHP_EOL;</span><br><span class=\"line\"><span class=\"keyword\">echo</span> $c1-&gt;getId() . PHP_EOL;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Prototype.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Prototype</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $id;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">$id</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;id = $id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getId</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setId</span>(<span class=\"params\">$id</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;id = $id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">cloneOne</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcretePrototype</span> <span class=\"keyword\">extends</span> <span class=\"title\">Prototype</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">$id</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">parent</span>::__construct($id);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">cloneOne</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">clone</span> <span class=\"keyword\">$this</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$p1 = <span class=\"keyword\">new</span> ConcretePrototype(<span class=\"string\">&#x27;a&#x27;</span>);</span><br><span class=\"line\">$p1-&gt;setId(<span class=\"string\">&#x27;p1&#x27;</span>);</span><br><span class=\"line\">$c1 = $p1-&gt;cloneOne();</span><br><span class=\"line\"><span class=\"comment\">//var_dump($p1 === $c1);</span></span><br><span class=\"line\">$c1-&gt;setId(<span class=\"string\">&#x27;c1&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> $p1-&gt;getId() . PHP_EOL;</span><br><span class=\"line\"><span class=\"keyword\">echo</span> $c1-&gt;getId() . PHP_EOL;</span><br></pre></td></tr></table></figure>\n"},{"url":"/2018/10/18/design-patten-proxy.html","title":"(18)-","keywords":",","description":"","date":"2018-10-18T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Proxy.php)\n\n## \n\n```\n\n\n\n\nhtml\n\n\n\n\n\n\n```\n\n## \n\n```php\n<?php\n/**\n * Subject  RealSubject  Proxy \n *  RealSubject  Proxy\n *\n * Interface Subject\n */\ninterface Subject\n{\n    public function request();\n}\n\n/**\n *  Proxy \n *\n * Class RealSubject\n */\nclass RealSubject implements Subject\n{\n    public function request()\n    {\n        echo '';\n    }\n}\n\n/**\n *  Subject \n * \n *\n * Class Proxy\n */\nclass Proxy implements Subject\n{\n    /**\n     * @var Subject\n     */\n    public $realSubject;\n\n    public function Request()\n    {\n        if ($this->realSubject == null) {\n            $this->realSubject = new RealSubject();\n        }\n        $this->realSubject->request();\n    }\n}\n\n$proxy = new Proxy();\n$proxy->request();\n```\n","source":"_posts/design_patten/proxy.md","raw":"---\nurl: /2018/10/18/design-patten-proxy.html\ntitle: \"(18)-\"\nkeywords: \",\"\ndescription: \"\"\ndate: 2018-10-18T22:31:57+08:00\ndraft: false\ntags: [\"PHP\", \"\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Proxy.php)\n\n## \n\n```\n\n\n\n\nhtml\n\n\n\n\n\n\n```\n\n## \n\n```php\n<?php\n/**\n * Subject  RealSubject  Proxy \n *  RealSubject  Proxy\n *\n * Interface Subject\n */\ninterface Subject\n{\n    public function request();\n}\n\n/**\n *  Proxy \n *\n * Class RealSubject\n */\nclass RealSubject implements Subject\n{\n    public function request()\n    {\n        echo '';\n    }\n}\n\n/**\n *  Subject \n * \n *\n * Class Proxy\n */\nclass Proxy implements Subject\n{\n    /**\n     * @var Subject\n     */\n    public $realSubject;\n\n    public function Request()\n    {\n        if ($this->realSubject == null) {\n            $this->realSubject = new RealSubject();\n        }\n        $this->realSubject->request();\n    }\n}\n\n$proxy = new Proxy();\n$proxy->request();\n```\n","slug":"design_patten/proxy","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf4v0056mv052cswegqf","content":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Proxy.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">html</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Subject  RealSubject  Proxy </span></span><br><span class=\"line\"><span class=\"comment\"> *  RealSubject  Proxy</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Interface Subject</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Subject</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">request</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  Proxy </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class RealSubject</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RealSubject</span> <span class=\"keyword\">implements</span> <span class=\"title\">Subject</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">request</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  Subject </span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Proxy</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Proxy</span> <span class=\"keyword\">implements</span> <span class=\"title\">Subject</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> Subject</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> $realSubject;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Request</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">$this</span>-&gt;realSubject == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;realSubject = <span class=\"keyword\">new</span> RealSubject();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;realSubject-&gt;request();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$proxy = <span class=\"keyword\">new</span> Proxy();</span><br><span class=\"line\">$proxy-&gt;request();</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Proxy.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">html</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Subject  RealSubject  Proxy </span></span><br><span class=\"line\"><span class=\"comment\"> *  RealSubject  Proxy</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Interface Subject</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Subject</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">request</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  Proxy </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class RealSubject</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RealSubject</span> <span class=\"keyword\">implements</span> <span class=\"title\">Subject</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">request</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  Subject </span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Proxy</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Proxy</span> <span class=\"keyword\">implements</span> <span class=\"title\">Subject</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> Subject</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> $realSubject;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Request</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">$this</span>-&gt;realSubject == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;realSubject = <span class=\"keyword\">new</span> RealSubject();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;realSubject-&gt;request();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$proxy = <span class=\"keyword\">new</span> Proxy();</span><br><span class=\"line\">$proxy-&gt;request();</span><br></pre></td></tr></table></figure>\n"},{"url":"/2018/10/19/design-patten-singleton.html","title":"(19)-","keywords":",","description":"","date":"2018-10-19T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Singleton.php)\n\n## \n\n```\n\n\n\n\n\n```\n\n## \n\n```php\n<?php\nclass Singleton\n{\n    private static $instance;\n\n    private function __construct()\n    {\n    }\n\n    private function __clone()\n    {\n    }\n\n    public static function getInstance()\n    {\n        if (self::$instance === null) {\n            self::$instance = new self();\n        }\n\n        return self::$instance;\n    }\n}\n\n$s1 = Singleton::getInstance();\n$s2 = Singleton::getInstance();\n\nif ($s1 === $s2) {\n    echo '';\n}\n```\n","source":"_posts/design_patten/singleton.md","raw":"---\nurl: /2018/10/19/design-patten-singleton.html\ntitle: \"(19)-\"\nkeywords: \",\"\ndescription: \"\"\ndate: 2018-10-19T22:31:57+08:00\ndraft: false\ntags: [\"PHP\", \"\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Singleton.php)\n\n## \n\n```\n\n\n\n\n\n```\n\n## \n\n```php\n<?php\nclass Singleton\n{\n    private static $instance;\n\n    private function __construct()\n    {\n    }\n\n    private function __clone()\n    {\n    }\n\n    public static function getInstance()\n    {\n        if (self::$instance === null) {\n            self::$instance = new self();\n        }\n\n        return self::$instance;\n    }\n}\n\n$s1 = Singleton::getInstance();\n$s2 = Singleton::getInstance();\n\nif ($s1 === $s2) {\n    echo '';\n}\n```\n","slug":"design_patten/singleton","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf4w0058mv054frgf0lb","content":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Singleton.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Singleton</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"built_in\">static</span> $instance;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__clone</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getInstance</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">self</span>::$instance === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">self</span>::$instance = <span class=\"keyword\">new</span> <span class=\"built_in\">self</span>();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">self</span>::$instance;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$s1 = Singleton::getInstance();</span><br><span class=\"line\">$s2 = Singleton::getInstance();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> ($s1 === $s2) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Singleton.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Singleton</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"built_in\">static</span> $instance;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__clone</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getInstance</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">self</span>::$instance === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">self</span>::$instance = <span class=\"keyword\">new</span> <span class=\"built_in\">self</span>();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">self</span>::$instance;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$s1 = Singleton::getInstance();</span><br><span class=\"line\">$s2 = Singleton::getInstance();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> ($s1 === $s2) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n"},{"url":"/2018/10/20/design-patten-state.html","title":"(20)-","keywords":",","description":"","date":"2018-10-20T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n[](https://github.com/wenjy/design_patten_php/blob/master/src/State.php)\n\n## \n\n```\n\n\n\n\n\n\n\n State \n\n\n State \n\n\n```\n\n## \n\n```php\n<?php\n/**\n *  Context \n *\n * Class State\n */\nabstract class State\n{\n    abstract public function handle(Context $context);\n}\n\n/**\n *  Context \n *\n * Class ConcreteStateA\n */\nclass ConcreteStateA extends State\n{\n    public function handle(Context $context)\n    {\n        // \n        $context->setState(new ConcreteStateB());\n    }\n}\n\nclass ConcreteStateB extends State\n{\n    public function handle(Context $context)\n    {\n        $context->setState(new ConcreteStateA());\n    }\n}\n\n/**\n *  State \n *\n * Class Context\n */\nclass Context\n{\n    private $state;\n\n    /**\n     * Context constructor.\n     * @param $state\n     */\n    public function __construct(State $state)\n    {\n        $this->state = $state;\n    }\n\n    /**\n     * @return mixed\n     */\n    public function getState()\n    {\n        return $this->state;\n    }\n\n    /**\n     * @param mixed $state\n     */\n    public function setState($state)\n    {\n        $this->state = $state;\n        echo '' . get_class($this->state) . PHP_EOL;\n    }\n\n    public function request()\n    {\n        // \n        $this->state->handle($this);\n    }\n\n}\n\n$c = new Context(new ConcreteStateA());\n\n$c->request();\n$c->request();\n$c->request();\n$c->request();\n```\n","source":"_posts/design_patten/state.md","raw":"---\nurl: /2018/10/20/design-patten-state.html\ntitle: \"(20)-\"\nkeywords: \",\"\ndescription: \"\"\ndate: 2018-10-20T22:31:57+08:00\ndraft: false\ntags: [\"PHP\", \"\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n[](https://github.com/wenjy/design_patten_php/blob/master/src/State.php)\n\n## \n\n```\n\n\n\n\n\n\n\n State \n\n\n State \n\n\n```\n\n## \n\n```php\n<?php\n/**\n *  Context \n *\n * Class State\n */\nabstract class State\n{\n    abstract public function handle(Context $context);\n}\n\n/**\n *  Context \n *\n * Class ConcreteStateA\n */\nclass ConcreteStateA extends State\n{\n    public function handle(Context $context)\n    {\n        // \n        $context->setState(new ConcreteStateB());\n    }\n}\n\nclass ConcreteStateB extends State\n{\n    public function handle(Context $context)\n    {\n        $context->setState(new ConcreteStateA());\n    }\n}\n\n/**\n *  State \n *\n * Class Context\n */\nclass Context\n{\n    private $state;\n\n    /**\n     * Context constructor.\n     * @param $state\n     */\n    public function __construct(State $state)\n    {\n        $this->state = $state;\n    }\n\n    /**\n     * @return mixed\n     */\n    public function getState()\n    {\n        return $this->state;\n    }\n\n    /**\n     * @param mixed $state\n     */\n    public function setState($state)\n    {\n        $this->state = $state;\n        echo '' . get_class($this->state) . PHP_EOL;\n    }\n\n    public function request()\n    {\n        // \n        $this->state->handle($this);\n    }\n\n}\n\n$c = new Context(new ConcreteStateA());\n\n$c->request();\n$c->request();\n$c->request();\n$c->request();\n```\n","slug":"design_patten/state","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf4x005cmv057kwuguhk","content":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/State.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> State </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> State </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  Context </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class State</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">State</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handle</span>(<span class=\"params\">Context $context</span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  Context </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class ConcreteStateA</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteStateA</span> <span class=\"keyword\">extends</span> <span class=\"title\">State</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handle</span>(<span class=\"params\">Context $context</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        $context-&gt;setState(<span class=\"keyword\">new</span> ConcreteStateB());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteStateB</span> <span class=\"keyword\">extends</span> <span class=\"title\">State</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handle</span>(<span class=\"params\">Context $context</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        $context-&gt;setState(<span class=\"keyword\">new</span> ConcreteStateA());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  State </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Context</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Context</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $state;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Context constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> $state</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">State $state</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;state = $state;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getState</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;state;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $state</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setState</span>(<span class=\"params\">$state</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;state = $state;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . get_class(<span class=\"keyword\">$this</span>-&gt;state) . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">request</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;state-&gt;handle(<span class=\"keyword\">$this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$c = <span class=\"keyword\">new</span> Context(<span class=\"keyword\">new</span> ConcreteStateA());</span><br><span class=\"line\"></span><br><span class=\"line\">$c-&gt;request();</span><br><span class=\"line\">$c-&gt;request();</span><br><span class=\"line\">$c-&gt;request();</span><br><span class=\"line\">$c-&gt;request();</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/State.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> State </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> State </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  Context </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class State</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">State</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handle</span>(<span class=\"params\">Context $context</span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  Context </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class ConcreteStateA</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteStateA</span> <span class=\"keyword\">extends</span> <span class=\"title\">State</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handle</span>(<span class=\"params\">Context $context</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        $context-&gt;setState(<span class=\"keyword\">new</span> ConcreteStateB());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteStateB</span> <span class=\"keyword\">extends</span> <span class=\"title\">State</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handle</span>(<span class=\"params\">Context $context</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        $context-&gt;setState(<span class=\"keyword\">new</span> ConcreteStateA());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  State </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Context</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Context</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $state;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Context constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> $state</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">State $state</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;state = $state;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getState</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;state;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $state</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setState</span>(<span class=\"params\">$state</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;state = $state;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . get_class(<span class=\"keyword\">$this</span>-&gt;state) . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">request</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;state-&gt;handle(<span class=\"keyword\">$this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$c = <span class=\"keyword\">new</span> Context(<span class=\"keyword\">new</span> ConcreteStateA());</span><br><span class=\"line\"></span><br><span class=\"line\">$c-&gt;request();</span><br><span class=\"line\">$c-&gt;request();</span><br><span class=\"line\">$c-&gt;request();</span><br><span class=\"line\">$c-&gt;request();</span><br></pre></td></tr></table></figure>\n"},{"url":"/2018/10/20/design-patten-state-work.html","title":"(20)-2","keywords":",","description":"","date":"2018-10-20T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n[2](https://github.com/wenjy/design_patten_php/blob/master/src/StateWork.php)\n\n## \n\n```\n\n```\n\n## \n\n```php\n<?php\nabstract class StateWork\n{\n    abstract public function writeProgram(Work $w);\n}\n\nclass ForenoonState extends StateWork\n{\n    public function writeProgram(Work $w)\n    {\n        if ($w->getHour() < 12) {\n            echo '' . $w->getHour() . '';\n        } else {\n            $w->setState(new NoonState());\n            $w->writeProgram();\n        }\n    }\n}\n\nclass NoonState extends StateWork\n{\n    public function writeProgram(Work $w)\n    {\n        if ($w->getHour() < 13) {\n            echo '' . $w->getHour() . '';\n        } else {\n            $w->setState(new AfternoonState());\n            $w->writeProgram();\n        }\n    }\n}\n\nclass AfternoonState extends StateWork\n{\n    public function writeProgram(Work $w)\n    {\n        if ($w->getHour() < 17) {\n            echo '' . $w->getHour() . '';\n        } else {\n            $w->setState(new EveningState());\n            $w->writeProgram();\n        }\n    }\n}\n\nclass EveningState extends StateWork\n{\n    public function writeProgram(Work $w)\n    {\n        if ($w->getFinish()) {\n            $w->setState(new RestState());\n            $w->writeProgram();\n        } else {\n            if ($w->getHour() < 21) {\n                echo '' . $w->getHour() . '';\n            } else {\n                $w->setState(new SleepingState());\n                $w->writeProgram();\n            }\n        }\n    }\n}\n\nclass SleepingState extends StateWork\n{\n    public function writeProgram(Work $w)\n    {\n        echo '' . $w->getHour() . '';\n    }\n}\n\nclass RestState extends StateWork\n{\n    public function writeProgram(Work $w)\n    {\n        echo '' . $w->getHour() . '';\n    }\n}\n\nclass Work\n{\n    private $current;\n    private $hour;\n    private $finish;\n\n    /**\n     * Work constructor.\n     */\n    public function __construct()\n    {\n        $this->current = new ForenoonState();\n    }\n\n    /**\n     * @return mixed\n     */\n    public function getCurrent()\n    {\n        return $this->current;\n    }\n\n    /**\n     * @param mixed $current\n     */\n    public function setCurrent($current)\n    {\n        $this->current = $current;\n    }\n\n    /**\n     * @return mixed\n     */\n    public function getHour()\n    {\n        return $this->hour;\n    }\n\n    /**\n     * @param mixed $hour\n     */\n    public function setHour($hour)\n    {\n        $this->hour = $hour;\n    }\n\n    /**\n     * @return mixed\n     */\n    public function getFinish()\n    {\n        return $this->finish;\n    }\n\n    /**\n     * @param mixed $finish\n     */\n    public function setFinish($finish)\n    {\n        $this->finish = $finish;\n    }\n\n    public function setState(StateWork $s)\n    {\n        $this->current = $s;\n    }\n\n    public function writeProgram()\n    {\n        $this->current->writeProgram($this);\n    }\n}\n\n$work = new Work();\n$work->setHour(22);\n$work->writeProgram();\n```\n","source":"_posts/design_patten/state_work.md","raw":"---\nurl: /2018/10/20/design-patten-state-work.html\ntitle: \"(20)-2\"\nkeywords: \",\"\ndescription: \"\"\ndate: 2018-10-20T22:31:57+08:00\ndraft: false\ntags: [\"PHP\", \"\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n[2](https://github.com/wenjy/design_patten_php/blob/master/src/StateWork.php)\n\n## \n\n```\n\n```\n\n## \n\n```php\n<?php\nabstract class StateWork\n{\n    abstract public function writeProgram(Work $w);\n}\n\nclass ForenoonState extends StateWork\n{\n    public function writeProgram(Work $w)\n    {\n        if ($w->getHour() < 12) {\n            echo '' . $w->getHour() . '';\n        } else {\n            $w->setState(new NoonState());\n            $w->writeProgram();\n        }\n    }\n}\n\nclass NoonState extends StateWork\n{\n    public function writeProgram(Work $w)\n    {\n        if ($w->getHour() < 13) {\n            echo '' . $w->getHour() . '';\n        } else {\n            $w->setState(new AfternoonState());\n            $w->writeProgram();\n        }\n    }\n}\n\nclass AfternoonState extends StateWork\n{\n    public function writeProgram(Work $w)\n    {\n        if ($w->getHour() < 17) {\n            echo '' . $w->getHour() . '';\n        } else {\n            $w->setState(new EveningState());\n            $w->writeProgram();\n        }\n    }\n}\n\nclass EveningState extends StateWork\n{\n    public function writeProgram(Work $w)\n    {\n        if ($w->getFinish()) {\n            $w->setState(new RestState());\n            $w->writeProgram();\n        } else {\n            if ($w->getHour() < 21) {\n                echo '' . $w->getHour() . '';\n            } else {\n                $w->setState(new SleepingState());\n                $w->writeProgram();\n            }\n        }\n    }\n}\n\nclass SleepingState extends StateWork\n{\n    public function writeProgram(Work $w)\n    {\n        echo '' . $w->getHour() . '';\n    }\n}\n\nclass RestState extends StateWork\n{\n    public function writeProgram(Work $w)\n    {\n        echo '' . $w->getHour() . '';\n    }\n}\n\nclass Work\n{\n    private $current;\n    private $hour;\n    private $finish;\n\n    /**\n     * Work constructor.\n     */\n    public function __construct()\n    {\n        $this->current = new ForenoonState();\n    }\n\n    /**\n     * @return mixed\n     */\n    public function getCurrent()\n    {\n        return $this->current;\n    }\n\n    /**\n     * @param mixed $current\n     */\n    public function setCurrent($current)\n    {\n        $this->current = $current;\n    }\n\n    /**\n     * @return mixed\n     */\n    public function getHour()\n    {\n        return $this->hour;\n    }\n\n    /**\n     * @param mixed $hour\n     */\n    public function setHour($hour)\n    {\n        $this->hour = $hour;\n    }\n\n    /**\n     * @return mixed\n     */\n    public function getFinish()\n    {\n        return $this->finish;\n    }\n\n    /**\n     * @param mixed $finish\n     */\n    public function setFinish($finish)\n    {\n        $this->finish = $finish;\n    }\n\n    public function setState(StateWork $s)\n    {\n        $this->current = $s;\n    }\n\n    public function writeProgram()\n    {\n        $this->current->writeProgram($this);\n    }\n}\n\n$work = new Work();\n$work->setHour(22);\n$work->writeProgram();\n```\n","slug":"design_patten/state_work","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf4y005fmv053aq254dl","content":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/StateWork.php\">2</a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">StateWork</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">writeProgram</span>(<span class=\"params\">Work $w</span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ForenoonState</span> <span class=\"keyword\">extends</span> <span class=\"title\">StateWork</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">writeProgram</span>(<span class=\"params\">Work $w</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($w-&gt;getHour() &lt; <span class=\"number\">12</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . $w-&gt;getHour() . <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            $w-&gt;setState(<span class=\"keyword\">new</span> NoonState());</span><br><span class=\"line\">            $w-&gt;writeProgram();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">NoonState</span> <span class=\"keyword\">extends</span> <span class=\"title\">StateWork</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">writeProgram</span>(<span class=\"params\">Work $w</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($w-&gt;getHour() &lt; <span class=\"number\">13</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . $w-&gt;getHour() . <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            $w-&gt;setState(<span class=\"keyword\">new</span> AfternoonState());</span><br><span class=\"line\">            $w-&gt;writeProgram();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AfternoonState</span> <span class=\"keyword\">extends</span> <span class=\"title\">StateWork</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">writeProgram</span>(<span class=\"params\">Work $w</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($w-&gt;getHour() &lt; <span class=\"number\">17</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . $w-&gt;getHour() . <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            $w-&gt;setState(<span class=\"keyword\">new</span> EveningState());</span><br><span class=\"line\">            $w-&gt;writeProgram();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">EveningState</span> <span class=\"keyword\">extends</span> <span class=\"title\">StateWork</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">writeProgram</span>(<span class=\"params\">Work $w</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($w-&gt;getFinish()) &#123;</span><br><span class=\"line\">            $w-&gt;setState(<span class=\"keyword\">new</span> RestState());</span><br><span class=\"line\">            $w-&gt;writeProgram();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> ($w-&gt;getHour() &lt; <span class=\"number\">21</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . $w-&gt;getHour() . <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                $w-&gt;setState(<span class=\"keyword\">new</span> SleepingState());</span><br><span class=\"line\">                $w-&gt;writeProgram();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SleepingState</span> <span class=\"keyword\">extends</span> <span class=\"title\">StateWork</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">writeProgram</span>(<span class=\"params\">Work $w</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . $w-&gt;getHour() . <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RestState</span> <span class=\"keyword\">extends</span> <span class=\"title\">StateWork</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">writeProgram</span>(<span class=\"params\">Work $w</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . $w-&gt;getHour() . <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Work</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $current;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $hour;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $finish;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Work constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;current = <span class=\"keyword\">new</span> ForenoonState();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getCurrent</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;current;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $current</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setCurrent</span>(<span class=\"params\">$current</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;current = $current;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getHour</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;hour;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $hour</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setHour</span>(<span class=\"params\">$hour</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;hour = $hour;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getFinish</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;finish;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $finish</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setFinish</span>(<span class=\"params\">$finish</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;finish = $finish;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setState</span>(<span class=\"params\">StateWork $s</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;current = $s;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">writeProgram</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;current-&gt;writeProgram(<span class=\"keyword\">$this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$work = <span class=\"keyword\">new</span> Work();</span><br><span class=\"line\">$work-&gt;setHour(<span class=\"number\">22</span>);</span><br><span class=\"line\">$work-&gt;writeProgram();</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/StateWork.php\">2</a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">StateWork</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">writeProgram</span>(<span class=\"params\">Work $w</span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ForenoonState</span> <span class=\"keyword\">extends</span> <span class=\"title\">StateWork</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">writeProgram</span>(<span class=\"params\">Work $w</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($w-&gt;getHour() &lt; <span class=\"number\">12</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . $w-&gt;getHour() . <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            $w-&gt;setState(<span class=\"keyword\">new</span> NoonState());</span><br><span class=\"line\">            $w-&gt;writeProgram();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">NoonState</span> <span class=\"keyword\">extends</span> <span class=\"title\">StateWork</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">writeProgram</span>(<span class=\"params\">Work $w</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($w-&gt;getHour() &lt; <span class=\"number\">13</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . $w-&gt;getHour() . <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            $w-&gt;setState(<span class=\"keyword\">new</span> AfternoonState());</span><br><span class=\"line\">            $w-&gt;writeProgram();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AfternoonState</span> <span class=\"keyword\">extends</span> <span class=\"title\">StateWork</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">writeProgram</span>(<span class=\"params\">Work $w</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($w-&gt;getHour() &lt; <span class=\"number\">17</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . $w-&gt;getHour() . <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            $w-&gt;setState(<span class=\"keyword\">new</span> EveningState());</span><br><span class=\"line\">            $w-&gt;writeProgram();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">EveningState</span> <span class=\"keyword\">extends</span> <span class=\"title\">StateWork</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">writeProgram</span>(<span class=\"params\">Work $w</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($w-&gt;getFinish()) &#123;</span><br><span class=\"line\">            $w-&gt;setState(<span class=\"keyword\">new</span> RestState());</span><br><span class=\"line\">            $w-&gt;writeProgram();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> ($w-&gt;getHour() &lt; <span class=\"number\">21</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . $w-&gt;getHour() . <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                $w-&gt;setState(<span class=\"keyword\">new</span> SleepingState());</span><br><span class=\"line\">                $w-&gt;writeProgram();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SleepingState</span> <span class=\"keyword\">extends</span> <span class=\"title\">StateWork</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">writeProgram</span>(<span class=\"params\">Work $w</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . $w-&gt;getHour() . <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RestState</span> <span class=\"keyword\">extends</span> <span class=\"title\">StateWork</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">writeProgram</span>(<span class=\"params\">Work $w</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&#x27;</span> . $w-&gt;getHour() . <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Work</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $current;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $hour;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $finish;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Work constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;current = <span class=\"keyword\">new</span> ForenoonState();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getCurrent</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;current;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $current</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setCurrent</span>(<span class=\"params\">$current</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;current = $current;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getHour</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;hour;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $hour</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setHour</span>(<span class=\"params\">$hour</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;hour = $hour;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getFinish</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;finish;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> mixed $finish</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setFinish</span>(<span class=\"params\">$finish</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;finish = $finish;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setState</span>(<span class=\"params\">StateWork $s</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;current = $s;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">writeProgram</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;current-&gt;writeProgram(<span class=\"keyword\">$this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$work = <span class=\"keyword\">new</span> Work();</span><br><span class=\"line\">$work-&gt;setHour(<span class=\"number\">22</span>);</span><br><span class=\"line\">$work-&gt;writeProgram();</span><br></pre></td></tr></table></figure>\n"},{"url":"/2018/10/21/design-patten-strategy.html","title":"(21)-","keywords":",","description":"","date":"2018-10-21T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Strategy.php)\n\n## \n\n```\n\n\n\n\n\n\n Strategy  Context \n\n\n\n\n\nStrategy \n\n\n\n```\n\n## \n\n```php\n<?php\n/**\n * \n *\n * Class Strategy\n */\nabstract class Strategy\n{\n    /**\n     * \n     *\n     * @return mixed\n     */\n    public abstract function algorithmInterface();\n}\n\n/**\n * \n * Class StrategyA\n */\nclass StrategyA extends Strategy\n{\n    public function algorithmInterface()\n    {\n        echo 'A' . PHP_EOL;\n    }\n}\n\nclass StrategyB extends Strategy\n{\n    public function algorithmInterface()\n    {\n        echo 'B' . PHP_EOL;\n    }\n}\n\nclass StrategyC extends Strategy\n{\n    public function AlgorithmInterface()\n    {\n        echo 'C' . PHP_EOL;\n    }\n}\n\n/**\n * Class Context\n * contextInterfaceStrategy\n */\nclass Context\n{\n    /**\n     * \n     *\n     * @var Strategy\n     */\n    private $strategy;\n\n    /**\n     * Context constructor.\n     * @param $strategy\n     */\n    public function __construct($strategy)\n    {\n        $this->strategy = $strategy;\n    }\n\n    /**\n     * \n     *\n     * @author jiangyi\n     */\n    public function contextInterface()\n    {\n        $this->strategy->algorithmInterface();\n    }\n}\n\n// \n$context = new Context(new StrategyA());\n$context->contextInterface();\n\n/**\n * \n *\n */\nclass CashContext\n{\n    /**\n     * @var Strategy\n     */\n    public $strategy;\n\n    /**\n     * CashContext constructor.\n     * \n     * @param $type\n     * @throws Exception\n     */\n    public function __construct($type)\n    {\n        switch (strtoupper($type)) {\n            case 'A':\n                $this->strategy = new StrategyA();\n                break;\n            case 'B':\n                $this->strategy = new StrategyB();\n                break;\n            case 'C':\n                $this->strategy = new StrategyC();\n                break;\n            default:\n                throw new Exception('');\n                break;\n        }\n    }\n\n    /**\n     * \n     *\n     * @author jiangyi\n     */\n    public function contextInterface()\n    {\n        $this->strategy->algorithmInterface();\n    }\n}\n\n$cashContext = new CashContext('B');\n$cashContext->contextInterface();\n\nclass MyContext\n{\n    /**\n     * @var Strategy\n     */\n    public $strategy;\n\n    /**\n     * \n     * @var array\n     */\n    protected $config = [\n        'A' => StrategyA::class,\n        'B' => StrategyB::class,\n        'C' => StrategyC::class,\n    ];\n\n    /**\n     * MyContext constructor.\n     * @param $type\n     * @throws Exception\n     */\n    public function __construct($type)\n    {\n        if (!isset($this->config[strtoupper($type)])) {\n            throw new Exception('');\n        }\n        $this->strategy = new $this->config[strtoupper($type)];\n    }\n\n    /**\n     * \n     *\n     * @author jiangyi\n     */\n    public function contextInterface()\n    {\n        $this->strategy->algorithmInterface();\n    }\n}\n\n$cashContext = new MyContext('c');\n$cashContext->contextInterface();\n```\n","source":"_posts/design_patten/strategy.md","raw":"---\nurl: /2018/10/21/design-patten-strategy.html\ntitle: \"(21)-\"\nkeywords: \",\"\ndescription: \"\"\ndate: 2018-10-21T22:31:57+08:00\ndraft: false\ntags: [\"PHP\", \"\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Strategy.php)\n\n## \n\n```\n\n\n\n\n\n\n Strategy  Context \n\n\n\n\n\nStrategy \n\n\n\n```\n\n## \n\n```php\n<?php\n/**\n * \n *\n * Class Strategy\n */\nabstract class Strategy\n{\n    /**\n     * \n     *\n     * @return mixed\n     */\n    public abstract function algorithmInterface();\n}\n\n/**\n * \n * Class StrategyA\n */\nclass StrategyA extends Strategy\n{\n    public function algorithmInterface()\n    {\n        echo 'A' . PHP_EOL;\n    }\n}\n\nclass StrategyB extends Strategy\n{\n    public function algorithmInterface()\n    {\n        echo 'B' . PHP_EOL;\n    }\n}\n\nclass StrategyC extends Strategy\n{\n    public function AlgorithmInterface()\n    {\n        echo 'C' . PHP_EOL;\n    }\n}\n\n/**\n * Class Context\n * contextInterfaceStrategy\n */\nclass Context\n{\n    /**\n     * \n     *\n     * @var Strategy\n     */\n    private $strategy;\n\n    /**\n     * Context constructor.\n     * @param $strategy\n     */\n    public function __construct($strategy)\n    {\n        $this->strategy = $strategy;\n    }\n\n    /**\n     * \n     *\n     * @author jiangyi\n     */\n    public function contextInterface()\n    {\n        $this->strategy->algorithmInterface();\n    }\n}\n\n// \n$context = new Context(new StrategyA());\n$context->contextInterface();\n\n/**\n * \n *\n */\nclass CashContext\n{\n    /**\n     * @var Strategy\n     */\n    public $strategy;\n\n    /**\n     * CashContext constructor.\n     * \n     * @param $type\n     * @throws Exception\n     */\n    public function __construct($type)\n    {\n        switch (strtoupper($type)) {\n            case 'A':\n                $this->strategy = new StrategyA();\n                break;\n            case 'B':\n                $this->strategy = new StrategyB();\n                break;\n            case 'C':\n                $this->strategy = new StrategyC();\n                break;\n            default:\n                throw new Exception('');\n                break;\n        }\n    }\n\n    /**\n     * \n     *\n     * @author jiangyi\n     */\n    public function contextInterface()\n    {\n        $this->strategy->algorithmInterface();\n    }\n}\n\n$cashContext = new CashContext('B');\n$cashContext->contextInterface();\n\nclass MyContext\n{\n    /**\n     * @var Strategy\n     */\n    public $strategy;\n\n    /**\n     * \n     * @var array\n     */\n    protected $config = [\n        'A' => StrategyA::class,\n        'B' => StrategyB::class,\n        'C' => StrategyC::class,\n    ];\n\n    /**\n     * MyContext constructor.\n     * @param $type\n     * @throws Exception\n     */\n    public function __construct($type)\n    {\n        if (!isset($this->config[strtoupper($type)])) {\n            throw new Exception('');\n        }\n        $this->strategy = new $this->config[strtoupper($type)];\n    }\n\n    /**\n     * \n     *\n     * @author jiangyi\n     */\n    public function contextInterface()\n    {\n        $this->strategy->algorithmInterface();\n    }\n}\n\n$cashContext = new MyContext('c');\n$cashContext->contextInterface();\n```\n","slug":"design_patten/strategy","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf50005imv05djfw38wd","content":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Strategy.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> Strategy  Context </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Strategy </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Strategy</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Strategy</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">algorithmInterface</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * Class StrategyA</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">StrategyA</span> <span class=\"keyword\">extends</span> <span class=\"title\">Strategy</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">algorithmInterface</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;A&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">StrategyB</span> <span class=\"keyword\">extends</span> <span class=\"title\">Strategy</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">algorithmInterface</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;B&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">StrategyC</span> <span class=\"keyword\">extends</span> <span class=\"title\">Strategy</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">AlgorithmInterface</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;C&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Context</span></span><br><span class=\"line\"><span class=\"comment\"> * contextInterfaceStrategy</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Context</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> Strategy</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $strategy;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Context constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> $strategy</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">$strategy</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;strategy = $strategy;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">contextInterface</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;strategy-&gt;algorithmInterface();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$context = <span class=\"keyword\">new</span> Context(<span class=\"keyword\">new</span> StrategyA());</span><br><span class=\"line\">$context-&gt;contextInterface();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CashContext</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> Strategy</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> $strategy;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * CashContext constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> $type</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> Exception</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">$type</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">switch</span> (strtoupper($type)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;A&#x27;</span>:</span><br><span class=\"line\">                <span class=\"keyword\">$this</span>-&gt;strategy = <span class=\"keyword\">new</span> StrategyA();</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;B&#x27;</span>:</span><br><span class=\"line\">                <span class=\"keyword\">$this</span>-&gt;strategy = <span class=\"keyword\">new</span> StrategyB();</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;C&#x27;</span>:</span><br><span class=\"line\">                <span class=\"keyword\">$this</span>-&gt;strategy = <span class=\"keyword\">new</span> StrategyC();</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">default</span>:</span><br><span class=\"line\">                <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Exception</span>(<span class=\"string\">&#x27;&#x27;</span>);</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">contextInterface</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;strategy-&gt;algorithmInterface();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$cashContext = <span class=\"keyword\">new</span> CashContext(<span class=\"string\">&#x27;B&#x27;</span>);</span><br><span class=\"line\">$cashContext-&gt;contextInterface();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyContext</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> Strategy</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> $strategy;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> array</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> $config = [</span><br><span class=\"line\">        <span class=\"string\">&#x27;A&#x27;</span> =&gt; StrategyA::class,</span><br><span class=\"line\">        <span class=\"string\">&#x27;B&#x27;</span> =&gt; StrategyB::class,</span><br><span class=\"line\">        <span class=\"string\">&#x27;C&#x27;</span> =&gt; StrategyC::class,</span><br><span class=\"line\">    ];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * MyContext constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> $type</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> Exception</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">$type</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!<span class=\"keyword\">isset</span>(<span class=\"keyword\">$this</span>-&gt;config[strtoupper($type)])) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Exception</span>(<span class=\"string\">&#x27;&#x27;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;strategy = <span class=\"keyword\">new</span> <span class=\"keyword\">$this</span>-&gt;config[strtoupper($type)];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">contextInterface</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;strategy-&gt;algorithmInterface();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$cashContext = <span class=\"keyword\">new</span> MyContext(<span class=\"string\">&#x27;c&#x27;</span>);</span><br><span class=\"line\">$cashContext-&gt;contextInterface();</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Strategy.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> Strategy  Context </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Strategy </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Strategy</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Strategy</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">algorithmInterface</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * Class StrategyA</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">StrategyA</span> <span class=\"keyword\">extends</span> <span class=\"title\">Strategy</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">algorithmInterface</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;A&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">StrategyB</span> <span class=\"keyword\">extends</span> <span class=\"title\">Strategy</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">algorithmInterface</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;B&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">StrategyC</span> <span class=\"keyword\">extends</span> <span class=\"title\">Strategy</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">AlgorithmInterface</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;C&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Context</span></span><br><span class=\"line\"><span class=\"comment\"> * contextInterfaceStrategy</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Context</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> Strategy</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $strategy;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Context constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> $strategy</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">$strategy</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;strategy = $strategy;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">contextInterface</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;strategy-&gt;algorithmInterface();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$context = <span class=\"keyword\">new</span> Context(<span class=\"keyword\">new</span> StrategyA());</span><br><span class=\"line\">$context-&gt;contextInterface();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CashContext</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> Strategy</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> $strategy;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * CashContext constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> $type</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> Exception</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">$type</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">switch</span> (strtoupper($type)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;A&#x27;</span>:</span><br><span class=\"line\">                <span class=\"keyword\">$this</span>-&gt;strategy = <span class=\"keyword\">new</span> StrategyA();</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;B&#x27;</span>:</span><br><span class=\"line\">                <span class=\"keyword\">$this</span>-&gt;strategy = <span class=\"keyword\">new</span> StrategyB();</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;C&#x27;</span>:</span><br><span class=\"line\">                <span class=\"keyword\">$this</span>-&gt;strategy = <span class=\"keyword\">new</span> StrategyC();</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">default</span>:</span><br><span class=\"line\">                <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Exception</span>(<span class=\"string\">&#x27;&#x27;</span>);</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">contextInterface</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;strategy-&gt;algorithmInterface();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$cashContext = <span class=\"keyword\">new</span> CashContext(<span class=\"string\">&#x27;B&#x27;</span>);</span><br><span class=\"line\">$cashContext-&gt;contextInterface();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyContext</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> Strategy</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> $strategy;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> array</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> $config = [</span><br><span class=\"line\">        <span class=\"string\">&#x27;A&#x27;</span> =&gt; StrategyA::class,</span><br><span class=\"line\">        <span class=\"string\">&#x27;B&#x27;</span> =&gt; StrategyB::class,</span><br><span class=\"line\">        <span class=\"string\">&#x27;C&#x27;</span> =&gt; StrategyC::class,</span><br><span class=\"line\">    ];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * MyContext constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> $type</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> Exception</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">$type</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!<span class=\"keyword\">isset</span>(<span class=\"keyword\">$this</span>-&gt;config[strtoupper($type)])) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Exception</span>(<span class=\"string\">&#x27;&#x27;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;strategy = <span class=\"keyword\">new</span> <span class=\"keyword\">$this</span>-&gt;config[strtoupper($type)];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@author</span> jiangyi</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">contextInterface</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;strategy-&gt;algorithmInterface();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$cashContext = <span class=\"keyword\">new</span> MyContext(<span class=\"string\">&#x27;c&#x27;</span>);</span><br><span class=\"line\">$cashContext-&gt;contextInterface();</span><br></pre></td></tr></table></figure>\n"},{"url":"/2018/10/22/design-patten-template-method.html","title":"(22)-","keywords":",","description":"","date":"2018-10-22T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n[](https://github.com/wenjy/design_patten_php/blob/master/src/TemplateMethod.php)\n\n## \n\n```\n\n\n\n\n\n\n\n\n\n\n```\n\n## \n\n```php\n<?php\n/**\n * \n *\n * Class AbstractClass\n */\nabstract class AbstractClass\n{\n    public abstract function operation1();\n\n    public abstract function operation2();\n\n    public function templateMethod()\n    {\n        $this->operation1();\n        $this->operation2();\n    }\n}\n\n/**\n * \n *\n * Class ClassA\n */\nclass ClassA extends AbstractClass\n{\n    public function operation1()\n    {\n        echo 'A 1 ' . PHP_EOL;\n    }\n\n    public function operation2()\n    {\n        echo 'A 2 ' . PHP_EOL;\n    }\n}\n\nclass ClassB extends AbstractClass\n{\n    public function operation1()\n    {\n        echo 'B 1 ' . PHP_EOL;\n    }\n\n    public function operation2()\n    {\n        echo 'B 2 ' . PHP_EOL;\n    }\n}\n\n$c = new ClassA();\n$c->templateMethod();\n\n$c = new ClassB();\n$c->templateMethod();\n```\n","source":"_posts/design_patten/template_method.md","raw":"---\nurl: /2018/10/22/design-patten-template-method.html\ntitle: \"(22)-\"\nkeywords: \",\"\ndescription: \"\"\ndate: 2018-10-22T22:31:57+08:00\ndraft: false\ntags: [\"PHP\", \"\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n[](https://github.com/wenjy/design_patten_php/blob/master/src/TemplateMethod.php)\n\n## \n\n```\n\n\n\n\n\n\n\n\n\n\n```\n\n## \n\n```php\n<?php\n/**\n * \n *\n * Class AbstractClass\n */\nabstract class AbstractClass\n{\n    public abstract function operation1();\n\n    public abstract function operation2();\n\n    public function templateMethod()\n    {\n        $this->operation1();\n        $this->operation2();\n    }\n}\n\n/**\n * \n *\n * Class ClassA\n */\nclass ClassA extends AbstractClass\n{\n    public function operation1()\n    {\n        echo 'A 1 ' . PHP_EOL;\n    }\n\n    public function operation2()\n    {\n        echo 'A 2 ' . PHP_EOL;\n    }\n}\n\nclass ClassB extends AbstractClass\n{\n    public function operation1()\n    {\n        echo 'B 1 ' . PHP_EOL;\n    }\n\n    public function operation2()\n    {\n        echo 'B 2 ' . PHP_EOL;\n    }\n}\n\n$c = new ClassA();\n$c->templateMethod();\n\n$c = new ClassB();\n$c->templateMethod();\n```\n","slug":"design_patten/template_method","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf51005kmv055qg940mg","content":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/TemplateMethod.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class AbstractClass</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AbstractClass</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation1</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation2</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">templateMethod</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;operation1();</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;operation2();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class ClassA</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ClassA</span> <span class=\"keyword\">extends</span> <span class=\"title\">AbstractClass</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation1</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;A 1 &#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation2</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;A 2 &#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ClassB</span> <span class=\"keyword\">extends</span> <span class=\"title\">AbstractClass</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation1</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;B 1 &#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation2</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;B 2 &#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$c = <span class=\"keyword\">new</span> ClassA();</span><br><span class=\"line\">$c-&gt;templateMethod();</span><br><span class=\"line\"></span><br><span class=\"line\">$c = <span class=\"keyword\">new</span> ClassB();</span><br><span class=\"line\">$c-&gt;templateMethod();</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/TemplateMethod.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class AbstractClass</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AbstractClass</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation1</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation2</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">templateMethod</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;operation1();</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;operation2();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class ClassA</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ClassA</span> <span class=\"keyword\">extends</span> <span class=\"title\">AbstractClass</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation1</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;A 1 &#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation2</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;A 2 &#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ClassB</span> <span class=\"keyword\">extends</span> <span class=\"title\">AbstractClass</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation1</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;B 1 &#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation2</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;B 2 &#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$c = <span class=\"keyword\">new</span> ClassA();</span><br><span class=\"line\">$c-&gt;templateMethod();</span><br><span class=\"line\"></span><br><span class=\"line\">$c = <span class=\"keyword\">new</span> ClassB();</span><br><span class=\"line\">$c-&gt;templateMethod();</span><br></pre></td></tr></table></figure>\n"},{"url":"/2018/10/23/design-patten-visitor.html","title":"(23)-","keywords":",","description":"","date":"2018-10-23T06:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Visitor.php)\n\n## \n\n```\n\n\n\n\n\n\n\n\n\n\n\n\n\n```\n\n## \n\n```php\n<?php\n/**\n *  ConcreteElement  Visit \n * Class Visitor\n */\nabstract class Visitor\n{\n    // \n    abstract public function visitConcreteElementA(ConcreteElementA $concreteElementA);\n\n    abstract public function visitConcreteElementB(ConcreteElementB $concreteElementB);\n}\n\n/**\n *  Visitor \n * \n *\n * Class ConcreteVisitor1\n */\nclass ConcreteVisitor1 extends Visitor\n{\n    public function visitConcreteElementA(ConcreteElementA $concreteElementA)\n    {\n        echo get_class($concreteElementA) . '' . get_class($this) . '' . PHP_EOL;\n    }\n\n    public function visitConcreteElementB(ConcreteElementB $concreteElementB)\n    {\n        echo get_class($concreteElementB) . '' . get_class($this) . '' . PHP_EOL;\n    }\n}\n\nclass ConcreteVisitor2 extends Visitor\n{\n    public function visitConcreteElementA(ConcreteElementA $concreteElementA)\n    {\n        echo get_class($concreteElementA) . '' . get_class($this) . '' . PHP_EOL;\n    }\n\n    public function visitConcreteElementB(ConcreteElementB $concreteElementB)\n    {\n        echo get_class($concreteElementB) . '' . get_class($this) . '' . PHP_EOL;\n    }\n}\n\n/**\n *  accept \n *\n * Class Element\n */\nabstract class Element\n{\n    abstract public function accept(Visitor $visitor);\n}\n\nclass ConcreteElementA extends Element\n{\n    public function accept(Visitor $visitor)\n    {\n        $visitor->visitConcreteElementA($this);\n    }\n\n    public function operationA()\n    {\n\n    }\n}\n\nclass ConcreteElementB extends Element\n{\n    public function accept(Visitor $visitor)\n    {\n        $visitor->visitConcreteElementB($this);\n    }\n\n    public function operationB()\n    {\n\n    }\n}\n\n/**\n * \n *\n * Class ObjectStructure\n */\nclass ObjectStructure\n{\n    /**\n     * @var Element[]\n     */\n    private $elements;\n\n    public function attach(Element $element)\n    {\n        $key = get_class($element);\n        $this->elements[$key] = $element;\n    }\n\n    public function detach(Element $element)\n    {\n        $key = get_class($element);\n        if (isset($this->elements[$key])) {\n            unset($this->elements[$key]);\n        }\n    }\n\n    public function accept(Visitor $visitor)\n    {\n        foreach ($this->elements as $v) {\n            $v->accept($visitor);\n        }\n    }\n}\n\n$o = new ObjectStructure();\n\n// \n$o->attach(new ConcreteElementA());\n$o->attach(new ConcreteElementB());\n\n// \n$o->accept(new ConcreteVisitor1());\n$o->accept(new ConcreteVisitor2());\n```\n","source":"_posts/design_patten/visitor.md","raw":"---\nurl: /2018/10/23/design-patten-visitor.html\ntitle: \"(23)-\"\nkeywords: \",\"\ndescription: \"\"\ndate: 2018-10-23T22:31:57+08:00\ndraft: false\ntags: [\"PHP\", \"\"]\ntags_weight: 100\ncategories: [\"PHP\", \"\"]\ncategoryes_weight: 100\n---\n\n[](https://github.com/wenjy/design_patten_php/blob/master/src/Visitor.php)\n\n## \n\n```\n\n\n\n\n\n\n\n\n\n\n\n\n\n```\n\n## \n\n```php\n<?php\n/**\n *  ConcreteElement  Visit \n * Class Visitor\n */\nabstract class Visitor\n{\n    // \n    abstract public function visitConcreteElementA(ConcreteElementA $concreteElementA);\n\n    abstract public function visitConcreteElementB(ConcreteElementB $concreteElementB);\n}\n\n/**\n *  Visitor \n * \n *\n * Class ConcreteVisitor1\n */\nclass ConcreteVisitor1 extends Visitor\n{\n    public function visitConcreteElementA(ConcreteElementA $concreteElementA)\n    {\n        echo get_class($concreteElementA) . '' . get_class($this) . '' . PHP_EOL;\n    }\n\n    public function visitConcreteElementB(ConcreteElementB $concreteElementB)\n    {\n        echo get_class($concreteElementB) . '' . get_class($this) . '' . PHP_EOL;\n    }\n}\n\nclass ConcreteVisitor2 extends Visitor\n{\n    public function visitConcreteElementA(ConcreteElementA $concreteElementA)\n    {\n        echo get_class($concreteElementA) . '' . get_class($this) . '' . PHP_EOL;\n    }\n\n    public function visitConcreteElementB(ConcreteElementB $concreteElementB)\n    {\n        echo get_class($concreteElementB) . '' . get_class($this) . '' . PHP_EOL;\n    }\n}\n\n/**\n *  accept \n *\n * Class Element\n */\nabstract class Element\n{\n    abstract public function accept(Visitor $visitor);\n}\n\nclass ConcreteElementA extends Element\n{\n    public function accept(Visitor $visitor)\n    {\n        $visitor->visitConcreteElementA($this);\n    }\n\n    public function operationA()\n    {\n\n    }\n}\n\nclass ConcreteElementB extends Element\n{\n    public function accept(Visitor $visitor)\n    {\n        $visitor->visitConcreteElementB($this);\n    }\n\n    public function operationB()\n    {\n\n    }\n}\n\n/**\n * \n *\n * Class ObjectStructure\n */\nclass ObjectStructure\n{\n    /**\n     * @var Element[]\n     */\n    private $elements;\n\n    public function attach(Element $element)\n    {\n        $key = get_class($element);\n        $this->elements[$key] = $element;\n    }\n\n    public function detach(Element $element)\n    {\n        $key = get_class($element);\n        if (isset($this->elements[$key])) {\n            unset($this->elements[$key]);\n        }\n    }\n\n    public function accept(Visitor $visitor)\n    {\n        foreach ($this->elements as $v) {\n            $v->accept($visitor);\n        }\n    }\n}\n\n$o = new ObjectStructure();\n\n// \n$o->attach(new ConcreteElementA());\n$o->attach(new ConcreteElementB());\n\n// \n$o->accept(new ConcreteVisitor1());\n$o->accept(new ConcreteVisitor2());\n```\n","slug":"design_patten/visitor","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf52005nmv055xkydwoq","content":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Visitor.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  ConcreteElement  Visit </span></span><br><span class=\"line\"><span class=\"comment\"> * Class Visitor</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Visitor</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">visitConcreteElementA</span>(<span class=\"params\">ConcreteElementA $concreteElementA</span>)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">visitConcreteElementB</span>(<span class=\"params\">ConcreteElementB $concreteElementB</span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  Visitor </span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class ConcreteVisitor1</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteVisitor1</span> <span class=\"keyword\">extends</span> <span class=\"title\">Visitor</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">visitConcreteElementA</span>(<span class=\"params\">ConcreteElementA $concreteElementA</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> get_class($concreteElementA) . <span class=\"string\">&#x27;&#x27;</span> . get_class(<span class=\"keyword\">$this</span>) . <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">visitConcreteElementB</span>(<span class=\"params\">ConcreteElementB $concreteElementB</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> get_class($concreteElementB) . <span class=\"string\">&#x27;&#x27;</span> . get_class(<span class=\"keyword\">$this</span>) . <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteVisitor2</span> <span class=\"keyword\">extends</span> <span class=\"title\">Visitor</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">visitConcreteElementA</span>(<span class=\"params\">ConcreteElementA $concreteElementA</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> get_class($concreteElementA) . <span class=\"string\">&#x27;&#x27;</span> . get_class(<span class=\"keyword\">$this</span>) . <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">visitConcreteElementB</span>(<span class=\"params\">ConcreteElementB $concreteElementB</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> get_class($concreteElementB) . <span class=\"string\">&#x27;&#x27;</span> . get_class(<span class=\"keyword\">$this</span>) . <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  accept </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Element</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Element</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">accept</span>(<span class=\"params\">Visitor $visitor</span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteElementA</span> <span class=\"keyword\">extends</span> <span class=\"title\">Element</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">accept</span>(<span class=\"params\">Visitor $visitor</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        $visitor-&gt;visitConcreteElementA(<span class=\"keyword\">$this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operationA</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteElementB</span> <span class=\"keyword\">extends</span> <span class=\"title\">Element</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">accept</span>(<span class=\"params\">Visitor $visitor</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        $visitor-&gt;visitConcreteElementB(<span class=\"keyword\">$this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operationB</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class ObjectStructure</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ObjectStructure</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> Element[]</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $elements;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">attach</span>(<span class=\"params\">Element $element</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        $key = get_class($element);</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;elements[$key] = $element;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">detach</span>(<span class=\"params\">Element $element</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        $key = get_class($element);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">isset</span>(<span class=\"keyword\">$this</span>-&gt;elements[$key])) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">unset</span>(<span class=\"keyword\">$this</span>-&gt;elements[$key]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">accept</span>(<span class=\"params\">Visitor $visitor</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"keyword\">$this</span>-&gt;elements <span class=\"keyword\">as</span> $v) &#123;</span><br><span class=\"line\">            $v-&gt;accept($visitor);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$o = <span class=\"keyword\">new</span> ObjectStructure();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$o-&gt;attach(<span class=\"keyword\">new</span> ConcreteElementA());</span><br><span class=\"line\">$o-&gt;attach(<span class=\"keyword\">new</span> ConcreteElementB());</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$o-&gt;accept(<span class=\"keyword\">new</span> ConcreteVisitor1());</span><br><span class=\"line\">$o-&gt;accept(<span class=\"keyword\">new</span> ConcreteVisitor2());</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/wenjy/design_patten_php/blob/master/src/Visitor.php\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  ConcreteElement  Visit </span></span><br><span class=\"line\"><span class=\"comment\"> * Class Visitor</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Visitor</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">visitConcreteElementA</span>(<span class=\"params\">ConcreteElementA $concreteElementA</span>)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">visitConcreteElementB</span>(<span class=\"params\">ConcreteElementB $concreteElementB</span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  Visitor </span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class ConcreteVisitor1</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteVisitor1</span> <span class=\"keyword\">extends</span> <span class=\"title\">Visitor</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">visitConcreteElementA</span>(<span class=\"params\">ConcreteElementA $concreteElementA</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> get_class($concreteElementA) . <span class=\"string\">&#x27;&#x27;</span> . get_class(<span class=\"keyword\">$this</span>) . <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">visitConcreteElementB</span>(<span class=\"params\">ConcreteElementB $concreteElementB</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> get_class($concreteElementB) . <span class=\"string\">&#x27;&#x27;</span> . get_class(<span class=\"keyword\">$this</span>) . <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteVisitor2</span> <span class=\"keyword\">extends</span> <span class=\"title\">Visitor</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">visitConcreteElementA</span>(<span class=\"params\">ConcreteElementA $concreteElementA</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> get_class($concreteElementA) . <span class=\"string\">&#x27;&#x27;</span> . get_class(<span class=\"keyword\">$this</span>) . <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">visitConcreteElementB</span>(<span class=\"params\">ConcreteElementB $concreteElementB</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> get_class($concreteElementB) . <span class=\"string\">&#x27;&#x27;</span> . get_class(<span class=\"keyword\">$this</span>) . <span class=\"string\">&#x27;&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  accept </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class Element</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Element</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">accept</span>(<span class=\"params\">Visitor $visitor</span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteElementA</span> <span class=\"keyword\">extends</span> <span class=\"title\">Element</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">accept</span>(<span class=\"params\">Visitor $visitor</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        $visitor-&gt;visitConcreteElementA(<span class=\"keyword\">$this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operationA</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteElementB</span> <span class=\"keyword\">extends</span> <span class=\"title\">Element</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">accept</span>(<span class=\"params\">Visitor $visitor</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        $visitor-&gt;visitConcreteElementB(<span class=\"keyword\">$this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operationB</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Class ObjectStructure</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ObjectStructure</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> Element[]</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $elements;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">attach</span>(<span class=\"params\">Element $element</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        $key = get_class($element);</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;elements[$key] = $element;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">detach</span>(<span class=\"params\">Element $element</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        $key = get_class($element);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">isset</span>(<span class=\"keyword\">$this</span>-&gt;elements[$key])) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">unset</span>(<span class=\"keyword\">$this</span>-&gt;elements[$key]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">accept</span>(<span class=\"params\">Visitor $visitor</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"keyword\">$this</span>-&gt;elements <span class=\"keyword\">as</span> $v) &#123;</span><br><span class=\"line\">            $v-&gt;accept($visitor);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$o = <span class=\"keyword\">new</span> ObjectStructure();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$o-&gt;attach(<span class=\"keyword\">new</span> ConcreteElementA());</span><br><span class=\"line\">$o-&gt;attach(<span class=\"keyword\">new</span> ConcreteElementB());</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">$o-&gt;accept(<span class=\"keyword\">new</span> ConcreteVisitor1());</span><br><span class=\"line\">$o-&gt;accept(<span class=\"keyword\">new</span> ConcreteVisitor2());</span><br></pre></td></tr></table></figure>\n"},{"url":"/2020/08/18/binary-tree.html","title":"","keywords":"","description":"","date":"2020-08-18T04:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n## \n\nnode\n\n`<``>=`\n\n## \n\n```php\n/**\n * \n */\nclass Node\n{\n    /**\n     * @var int \n     */\n    private $index;\n    /**\n     * @var Node \n     */\n    private $leftNode;\n    /**\n     * @var Node \n     */\n    private $rightNode;\n\n    /**\n     * Node constructor.\n     * @param int $index\n     */\n    public function __construct(int $index)\n    {\n        $this->index = $index;\n    }\n\n    /**\n     * @return int\n     */\n    public function getIndex(): int\n    {\n        return $this->index;\n    }\n\n    /**\n     * @return Node\n     */\n    public function getLeftNode(): ?Node\n    {\n        return $this->leftNode;\n    }\n\n    /**\n     * @return Node\n     */\n    public function getRightNode(): ?Node\n    {\n        return $this->rightNode;\n    }\n\n    /**\n     * @param Node $leftNode\n     */\n    public function setLeftNode(Node $leftNode): void\n    {\n        $this->leftNode = $leftNode;\n    }\n\n    /**\n     * @param Node $rightNode\n     */\n    public function setRightNode(Node $rightNode): void\n    {\n        $this->rightNode = $rightNode;\n    }\n}\n\n/**\n * \n */\nclass Tree\n{\n    /**\n     * @var Node \n     */\n    private $root;\n\n    /**\n     * \n     * @param int $index\n     */\n    public function insert(int $index)\n    {\n        $node = new Node($index);\n        if (is_null($this->root)) {\n            $this->root = $node;\n        } else {\n            $current = $this->root;\n            $parent = null;\n            while (true) {\n                $parent = $current; // currentnull\n                // \n                if ($index < $current->getIndex()) {\n                    $current = $current->getLeftNode();\n                    if (is_null($current)) {\n                        $parent->setLeftNode($node);\n                        return;\n                    }\n                } else {\n                    $current = $current->getRightNode();\n                    if (is_null($current)) {\n                        $parent->setRightNode($node);\n                        return;\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * \n     * @param int $index\n     * @return Node|null\n     */\n    public function find(int $index): ?Node\n    {\n        $current = $this->root;\n        if (is_null($current)) {\n            return null;\n        }\n\n        while ($current->getIndex() != $index) {\n            if ($current->getIndex() > $index) {\n                $current = $current->getLeftNode();\n            } else {\n                $current = $current->getRightNode();\n            }\n            if (is_null($current)) {\n                return null;\n            }\n        }\n        return $current;\n    }\n}\n\n$tree = new Tree();\n$tree->insert(3);\n$tree->insert(2);\n$tree->insert(6);\n$tree->insert(4);\n$tree->insert(5);\n$tree->insert(1);\nvar_dump($tree->find(1));\n```\n","source":"_posts/algorithms/tree/binary_tree.md","raw":"---\nurl: /2020/08/18/binary-tree.html\ntitle: \"\"\nkeywords: \"\"\ndescription: \"\"\ndate: 2020-08-18T20:31:57+08:00\ndraft: false\ntags: [\"\"]\ntags_weight: 100\ncategories: [\"\"]\ncategoryes_weight: 100\n---\n\n## \n\nnode\n\n`<``>=`\n\n## \n\n```php\n/**\n * \n */\nclass Node\n{\n    /**\n     * @var int \n     */\n    private $index;\n    /**\n     * @var Node \n     */\n    private $leftNode;\n    /**\n     * @var Node \n     */\n    private $rightNode;\n\n    /**\n     * Node constructor.\n     * @param int $index\n     */\n    public function __construct(int $index)\n    {\n        $this->index = $index;\n    }\n\n    /**\n     * @return int\n     */\n    public function getIndex(): int\n    {\n        return $this->index;\n    }\n\n    /**\n     * @return Node\n     */\n    public function getLeftNode(): ?Node\n    {\n        return $this->leftNode;\n    }\n\n    /**\n     * @return Node\n     */\n    public function getRightNode(): ?Node\n    {\n        return $this->rightNode;\n    }\n\n    /**\n     * @param Node $leftNode\n     */\n    public function setLeftNode(Node $leftNode): void\n    {\n        $this->leftNode = $leftNode;\n    }\n\n    /**\n     * @param Node $rightNode\n     */\n    public function setRightNode(Node $rightNode): void\n    {\n        $this->rightNode = $rightNode;\n    }\n}\n\n/**\n * \n */\nclass Tree\n{\n    /**\n     * @var Node \n     */\n    private $root;\n\n    /**\n     * \n     * @param int $index\n     */\n    public function insert(int $index)\n    {\n        $node = new Node($index);\n        if (is_null($this->root)) {\n            $this->root = $node;\n        } else {\n            $current = $this->root;\n            $parent = null;\n            while (true) {\n                $parent = $current; // currentnull\n                // \n                if ($index < $current->getIndex()) {\n                    $current = $current->getLeftNode();\n                    if (is_null($current)) {\n                        $parent->setLeftNode($node);\n                        return;\n                    }\n                } else {\n                    $current = $current->getRightNode();\n                    if (is_null($current)) {\n                        $parent->setRightNode($node);\n                        return;\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * \n     * @param int $index\n     * @return Node|null\n     */\n    public function find(int $index): ?Node\n    {\n        $current = $this->root;\n        if (is_null($current)) {\n            return null;\n        }\n\n        while ($current->getIndex() != $index) {\n            if ($current->getIndex() > $index) {\n                $current = $current->getLeftNode();\n            } else {\n                $current = $current->getRightNode();\n            }\n            if (is_null($current)) {\n                return null;\n            }\n        }\n        return $current;\n    }\n}\n\n$tree = new Tree();\n$tree->insert(3);\n$tree->insert(2);\n$tree->insert(6);\n$tree->insert(4);\n$tree->insert(5);\n$tree->insert(1);\nvar_dump($tree->find(1));\n```\n","slug":"algorithms/tree/binary_tree","published":1,"updated":"2020-09-22T14:31:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf53005pmv056ohsb767","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>node</p>\n<p><code>&lt;</code><code>&gt;=</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> int </span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $index;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> Node </span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $leftNode;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> Node </span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $rightNode;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Node constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> int $index</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"><span class=\"keyword\">int</span> $index</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;index = $index;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> int</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getIndex</span>(<span class=\"params\"></span>): <span class=\"title\">int</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;index;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> Node</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getLeftNode</span>(<span class=\"params\"></span>): ?<span class=\"title\">Node</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;leftNode;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> Node</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getRightNode</span>(<span class=\"params\"></span>): ?<span class=\"title\">Node</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;rightNode;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> Node $leftNode</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setLeftNode</span>(<span class=\"params\">Node $leftNode</span>): <span class=\"title\">void</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;leftNode = $leftNode;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> Node $rightNode</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setRightNode</span>(<span class=\"params\">Node $rightNode</span>): <span class=\"title\">void</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;rightNode = $rightNode;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Tree</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> Node </span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $root;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> int $index</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">insert</span>(<span class=\"params\"><span class=\"keyword\">int</span> $index</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        $node = <span class=\"keyword\">new</span> Node($index);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (is_null(<span class=\"keyword\">$this</span>-&gt;root)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;root = $node;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            $current = <span class=\"keyword\">$this</span>-&gt;root;</span><br><span class=\"line\">            $parent = <span class=\"literal\">null</span>;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">                $parent = $current; <span class=\"comment\">// currentnull</span></span><br><span class=\"line\">                <span class=\"comment\">// </span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> ($index &lt; $current-&gt;getIndex()) &#123;</span><br><span class=\"line\">                    $current = $current-&gt;getLeftNode();</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (is_null($current)) &#123;</span><br><span class=\"line\">                        $parent-&gt;setLeftNode($node);</span><br><span class=\"line\">                        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    $current = $current-&gt;getRightNode();</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (is_null($current)) &#123;</span><br><span class=\"line\">                        $parent-&gt;setRightNode($node);</span><br><span class=\"line\">                        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> int $index</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> Node|null</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">find</span>(<span class=\"params\"><span class=\"keyword\">int</span> $index</span>): ?<span class=\"title\">Node</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        $current = <span class=\"keyword\">$this</span>-&gt;root;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (is_null($current)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">while</span> ($current-&gt;getIndex() != $index) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> ($current-&gt;getIndex() &gt; $index) &#123;</span><br><span class=\"line\">                $current = $current-&gt;getLeftNode();</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                $current = $current-&gt;getRightNode();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (is_null($current)) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> $current;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$tree = <span class=\"keyword\">new</span> Tree();</span><br><span class=\"line\">$tree-&gt;insert(<span class=\"number\">3</span>);</span><br><span class=\"line\">$tree-&gt;insert(<span class=\"number\">2</span>);</span><br><span class=\"line\">$tree-&gt;insert(<span class=\"number\">6</span>);</span><br><span class=\"line\">$tree-&gt;insert(<span class=\"number\">4</span>);</span><br><span class=\"line\">$tree-&gt;insert(<span class=\"number\">5</span>);</span><br><span class=\"line\">$tree-&gt;insert(<span class=\"number\">1</span>);</span><br><span class=\"line\">var_dump($tree-&gt;find(<span class=\"number\">1</span>));</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>node</p>\n<p><code>&lt;</code><code>&gt;=</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> int </span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $index;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> Node </span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $leftNode;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> Node </span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $rightNode;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Node constructor.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> int $index</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"><span class=\"keyword\">int</span> $index</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;index = $index;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> int</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getIndex</span>(<span class=\"params\"></span>): <span class=\"title\">int</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;index;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> Node</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getLeftNode</span>(<span class=\"params\"></span>): ?<span class=\"title\">Node</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;leftNode;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> Node</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getRightNode</span>(<span class=\"params\"></span>): ?<span class=\"title\">Node</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;rightNode;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> Node $leftNode</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setLeftNode</span>(<span class=\"params\">Node $leftNode</span>): <span class=\"title\">void</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;leftNode = $leftNode;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> Node $rightNode</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setRightNode</span>(<span class=\"params\">Node $rightNode</span>): <span class=\"title\">void</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;rightNode = $rightNode;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Tree</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> Node </span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> $root;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> int $index</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">insert</span>(<span class=\"params\"><span class=\"keyword\">int</span> $index</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        $node = <span class=\"keyword\">new</span> Node($index);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (is_null(<span class=\"keyword\">$this</span>-&gt;root)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;root = $node;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            $current = <span class=\"keyword\">$this</span>-&gt;root;</span><br><span class=\"line\">            $parent = <span class=\"literal\">null</span>;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">                $parent = $current; <span class=\"comment\">// currentnull</span></span><br><span class=\"line\">                <span class=\"comment\">// </span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> ($index &lt; $current-&gt;getIndex()) &#123;</span><br><span class=\"line\">                    $current = $current-&gt;getLeftNode();</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (is_null($current)) &#123;</span><br><span class=\"line\">                        $parent-&gt;setLeftNode($node);</span><br><span class=\"line\">                        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    $current = $current-&gt;getRightNode();</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (is_null($current)) &#123;</span><br><span class=\"line\">                        $parent-&gt;setRightNode($node);</span><br><span class=\"line\">                        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> int $index</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> Node|null</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">find</span>(<span class=\"params\"><span class=\"keyword\">int</span> $index</span>): ?<span class=\"title\">Node</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        $current = <span class=\"keyword\">$this</span>-&gt;root;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (is_null($current)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">while</span> ($current-&gt;getIndex() != $index) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> ($current-&gt;getIndex() &gt; $index) &#123;</span><br><span class=\"line\">                $current = $current-&gt;getLeftNode();</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                $current = $current-&gt;getRightNode();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (is_null($current)) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> $current;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$tree = <span class=\"keyword\">new</span> Tree();</span><br><span class=\"line\">$tree-&gt;insert(<span class=\"number\">3</span>);</span><br><span class=\"line\">$tree-&gt;insert(<span class=\"number\">2</span>);</span><br><span class=\"line\">$tree-&gt;insert(<span class=\"number\">6</span>);</span><br><span class=\"line\">$tree-&gt;insert(<span class=\"number\">4</span>);</span><br><span class=\"line\">$tree-&gt;insert(<span class=\"number\">5</span>);</span><br><span class=\"line\">$tree-&gt;insert(<span class=\"number\">1</span>);</span><br><span class=\"line\">var_dump($tree-&gt;find(<span class=\"number\">1</span>));</span><br></pre></td></tr></table></figure>\n"},{"url":"/2020/08/18/binary-tree.html","title":"","keywords":"","description":"","date":"2020-08-25T04:31:57.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"\n## \n\n\n11\n\nO(logN)\nO(logN)\n","source":"_posts/algorithms/tree/balanced_binary_tree.md","raw":"---\nurl: /2020/08/18/binary-tree.html\ntitle: \"\"\nkeywords: \"\"\ndescription: \"\"\ndate: 2020-08-25T20:31:57+08:00\ndraft: false\ntags: [\"Algorithms\"]\ntags_weight: 100\ncategories: [\"Algorithms\"]\ncategoryes_weight: 100\n---\n\n## \n\n\n11\n\nO(logN)\nO(logN)\n","slug":"algorithms/tree/balanced_binary_tree","published":1,"updated":"2020-08-25T14:35:03.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf55005tmv053f1u3xse","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><br>11<br><br>O(logN)<br>O(logN)</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><br>11<br><br>O(logN)<br>O(logN)</p>\n"},{"url":"/2020/04/01/http-response-status-codes.html","title":"HTTP ","keywords":"HTTP","description":"HTTP ","date":"2020-04-01T06:53:12.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"_content":"## 1xx\n\n\nHTTP/1.01xx1xx\n\n\n### 100 CONTINUE\n\nbodyPOST\nExpect: 100-continue\n100 Continue403()405()\n417(HTTP/1.0)\n\n### 101 SWITCHING_PROTOCOLS\n\nUpgrade\nUpgrade\nHTTPHTTP/2WebSocket\n\n### 102 PROCESSING\n\nWebDAV\n\n\n### 103 EARLY_HINTS\n\nHTTP\n\n## 2xx\n\n\n\n### 200 OK\n\n\nGETPOST\n\n### 201 CREATED\n\nURILocation\n`202 Accepted`\n\n### 202 ACCEPTED\n\n\n\n### 203 NON_AUTHORITATIVE_INFORMATION\n\ntransforming proxy200 OK\n\n### 204 NO_CONTENT\n\n\n\n### 205 RESET_CONTENT\n\n204\n\n### 206 PARTIAL_CONTENT\n\nGETFlashGetHTTP \n\n### 207 MULTI_STATUS\n\nXML\n\n### 208 ALREADY_REPORTED\n\nDAV( multistatus)\n\n### 226 IM_USED\n\n\n\n## 3xx\n\nURL`Location`\n`GET``HEAD`\nABCAAA\nHTTP/1.05\n\n### 300 MULTIPLE_CHOICES\n\n\n`HEAD`\n`Content-Type`\nRFC 2616 `Location`URI\n`Location`\n\n### 301 MOVED_PERMANENTLY\n\nURI\n\nURI`Location``HEAD`URI\n`GET``HEAD`\nHTTP/1.0POST301GET\n\n### 302 FOUND\n\nMoved Temporarily\n`Cache-Control``Expires` URI`Location`\nHEADURI \nGETHEAD \nRFC 1945RFC 2068302303GETLocationURI\n303307\n\n### 303 SEE_OTHER\n\n`URI``POST``PUT` / `DELETE`GET\n`POST`\nURI303 \nURI`Location`HEADURI \nHTTP/1.1303\n302302303\n\n### 304 NOT_MODIFIED\n\n`If-Modified-Since``If-None-Match`\n\n### 305 USE_PROXY\n\n`Location`URI\n305HTTPMozilla FirefoxInternet Explorer\nRFC 2068305\n\n### 306 RESERVED\n\n306\n\n### 307 TEMPORARY_REDIRECT\n\n`URI``URI` `302` \n`POST``POST`\n\n### 308 PERMANENTLY_REDIRECT\n\nURI 307308302301HTTP \n\n## 4xx\n\nHEAD\n\n\n\nTCP\nTCP\n\n\n### 400 BAD_REQUEST\n\n\n\n### 401 UNAUTHORIZED\n\nHTTPHTTP `403 Forbidden``401`\n`WWW-Authenticate`\n`Authorization``Authorization``401`\n`401` \nIP401\n\n### 402 PAYMENT_REQUIRED\n\n\nGoogle Developers API\nSipgate\nShopify\nStripe\n\n### 403 FORBIDDEN\n\n401\n`HEAD``404`\n\n### 404 NOT_FOUND\n\n\n`410`\n404\n\n### 405 METHOD_NOT_ALLOWED\n\n`Allow`\n`POST``GET``PUT` \n`PUT``DELETE``405`\n\n### 406 NOT_ACCEPTABLE\n\n \n`HEAD`\n`Content-Type`\n\n### 407 PROXY_AUTHENTICATION_REQUIRED\n\n401`Proxy-Authenticate`\n`Proxy-Authorization`\n\n### 408 REQUEST_TIMEOUT\n\nHTTP\n\n### 409 CONFLICT\n\n\n\n### 410 GONE\n\n\n410404\n\n### 411 LENGTH_REQUIRED\n\n`Content-Length``Content-Length`\n\n### 412 PRECONDITION_FAILED\n\n\n\n\n### 413 REQUEST_ENTITY_TOO_LARGE\n\n\n `Retry-After`\n\n### 414 REQUEST_URI_TOO_LONG\n\nURIGETPOST\n `POST``GET` \nURIURIURIURI \nURIGET414\n\n### 415 UNSUPPORTED_MEDIA_TYPE\n\n\nsvgjpg\n\n### 416 REQUESTED_RANGE_NOT_SATISFIABLE\n\nByte serving\n\n### 417 EXPECTATION_FAILED\n\n`Expect``Expect`\n\n### 418 I_AM_A_TEAPOT\n\n1998IETF, RFC 2324'HTTP\nHTCPCPBREWPOSTHTTPGoogle.comNode.jsASP.NETGo\n\n### 421 MISDIRECTED_REQUEST\n\n\n\n### 422 UNPROCESSABLE_ENTITY\n\n\n\n### 423 LOCKED\n\n\n\n### 424 FAILED_DEPENDENCY\n\nPROPPATCH\n\n### 425 TOO_EARLY\n\n\n\n### 426 UPGRADE_REQUIRED\n\nTLS/1.0HTTP/1.1 `Upgrade`\n\n### 428 PRECONDITION_REQUIRED\n\nGETPUT\n\n\n### 429 TOO_MANY_REQUESTS\n\n\n\n### 431 REQUEST_HEADER_FIELDS_TOO_LARGE\n\n\n\n### 451 UNAVAILABLE_FOR_LEGAL_REASONS\n\nIETF2015\n\n## 5xx\n\n\nHEAD\n\n\n### 500 INTERNAL_SERVER_ERROR\n\n\n\n### 501 NOT_IMPLEMENTED\n\nAPI\n\n### 502 BAD_GATEWAY\n\n\n\n### 503 SERVICE_UNAVAILABLE\n\n\n`Retry-After``Retry-After`500\n\n### 504 GATEWAY_TIMEOUT\n\nURIHTTPFTPLDAPDNS\nDNS400500\n\n### 505 VERSION_NOT_SUPPORTED\n\nHTTP\n\n### 506 VARIANT_ALSO_NEGOTIATES_EXPERIMENTAL\n\n\n\n### 507 INSUFFICIENT_STORAGE\n\n\n\n### 508 LOOP_DETECTED\n\n 208\n\n### 510 NOT_EXTENDED\n\n\n\n### 511 NETWORK_AUTHENTICATION_REQUIRED\n\nWiFi\n\n\n\n[](https://en.wikipedia.org/wiki/List_of_HTTP_status_codes)\n\n[](https://www.flysnow.org/tools/table/http-status-codes/)\n","source":"_posts/tools/http_response_status_codes.md","raw":"---\nurl: /2020/04/01/http-response-status-codes.html\ntitle: \"HTTP \"\nkeywords: \"HTTP\"\ndescription: \"HTTP \"\ndate: 2020-04-01T22:53:12+08:00\ndraft: false\ntags: [\"Http\"]\ntags_weight: 100\ncategories: [\"Http\"]\ncategoryes_weight: 100\n---\n## 1xx\n\n\nHTTP/1.01xx1xx\n\n\n### 100 CONTINUE\n\nbodyPOST\nExpect: 100-continue\n100 Continue403()405()\n417(HTTP/1.0)\n\n### 101 SWITCHING_PROTOCOLS\n\nUpgrade\nUpgrade\nHTTPHTTP/2WebSocket\n\n### 102 PROCESSING\n\nWebDAV\n\n\n### 103 EARLY_HINTS\n\nHTTP\n\n## 2xx\n\n\n\n### 200 OK\n\n\nGETPOST\n\n### 201 CREATED\n\nURILocation\n`202 Accepted`\n\n### 202 ACCEPTED\n\n\n\n### 203 NON_AUTHORITATIVE_INFORMATION\n\ntransforming proxy200 OK\n\n### 204 NO_CONTENT\n\n\n\n### 205 RESET_CONTENT\n\n204\n\n### 206 PARTIAL_CONTENT\n\nGETFlashGetHTTP \n\n### 207 MULTI_STATUS\n\nXML\n\n### 208 ALREADY_REPORTED\n\nDAV( multistatus)\n\n### 226 IM_USED\n\n\n\n## 3xx\n\nURL`Location`\n`GET``HEAD`\nABCAAA\nHTTP/1.05\n\n### 300 MULTIPLE_CHOICES\n\n\n`HEAD`\n`Content-Type`\nRFC 2616 `Location`URI\n`Location`\n\n### 301 MOVED_PERMANENTLY\n\nURI\n\nURI`Location``HEAD`URI\n`GET``HEAD`\nHTTP/1.0POST301GET\n\n### 302 FOUND\n\nMoved Temporarily\n`Cache-Control``Expires` URI`Location`\nHEADURI \nGETHEAD \nRFC 1945RFC 2068302303GETLocationURI\n303307\n\n### 303 SEE_OTHER\n\n`URI``POST``PUT` / `DELETE`GET\n`POST`\nURI303 \nURI`Location`HEADURI \nHTTP/1.1303\n302302303\n\n### 304 NOT_MODIFIED\n\n`If-Modified-Since``If-None-Match`\n\n### 305 USE_PROXY\n\n`Location`URI\n305HTTPMozilla FirefoxInternet Explorer\nRFC 2068305\n\n### 306 RESERVED\n\n306\n\n### 307 TEMPORARY_REDIRECT\n\n`URI``URI` `302` \n`POST``POST`\n\n### 308 PERMANENTLY_REDIRECT\n\nURI 307308302301HTTP \n\n## 4xx\n\nHEAD\n\n\n\nTCP\nTCP\n\n\n### 400 BAD_REQUEST\n\n\n\n### 401 UNAUTHORIZED\n\nHTTPHTTP `403 Forbidden``401`\n`WWW-Authenticate`\n`Authorization``Authorization``401`\n`401` \nIP401\n\n### 402 PAYMENT_REQUIRED\n\n\nGoogle Developers API\nSipgate\nShopify\nStripe\n\n### 403 FORBIDDEN\n\n401\n`HEAD``404`\n\n### 404 NOT_FOUND\n\n\n`410`\n404\n\n### 405 METHOD_NOT_ALLOWED\n\n`Allow`\n`POST``GET``PUT` \n`PUT``DELETE``405`\n\n### 406 NOT_ACCEPTABLE\n\n \n`HEAD`\n`Content-Type`\n\n### 407 PROXY_AUTHENTICATION_REQUIRED\n\n401`Proxy-Authenticate`\n`Proxy-Authorization`\n\n### 408 REQUEST_TIMEOUT\n\nHTTP\n\n### 409 CONFLICT\n\n\n\n### 410 GONE\n\n\n410404\n\n### 411 LENGTH_REQUIRED\n\n`Content-Length``Content-Length`\n\n### 412 PRECONDITION_FAILED\n\n\n\n\n### 413 REQUEST_ENTITY_TOO_LARGE\n\n\n `Retry-After`\n\n### 414 REQUEST_URI_TOO_LONG\n\nURIGETPOST\n `POST``GET` \nURIURIURIURI \nURIGET414\n\n### 415 UNSUPPORTED_MEDIA_TYPE\n\n\nsvgjpg\n\n### 416 REQUESTED_RANGE_NOT_SATISFIABLE\n\nByte serving\n\n### 417 EXPECTATION_FAILED\n\n`Expect``Expect`\n\n### 418 I_AM_A_TEAPOT\n\n1998IETF, RFC 2324'HTTP\nHTCPCPBREWPOSTHTTPGoogle.comNode.jsASP.NETGo\n\n### 421 MISDIRECTED_REQUEST\n\n\n\n### 422 UNPROCESSABLE_ENTITY\n\n\n\n### 423 LOCKED\n\n\n\n### 424 FAILED_DEPENDENCY\n\nPROPPATCH\n\n### 425 TOO_EARLY\n\n\n\n### 426 UPGRADE_REQUIRED\n\nTLS/1.0HTTP/1.1 `Upgrade`\n\n### 428 PRECONDITION_REQUIRED\n\nGETPUT\n\n\n### 429 TOO_MANY_REQUESTS\n\n\n\n### 431 REQUEST_HEADER_FIELDS_TOO_LARGE\n\n\n\n### 451 UNAVAILABLE_FOR_LEGAL_REASONS\n\nIETF2015\n\n## 5xx\n\n\nHEAD\n\n\n### 500 INTERNAL_SERVER_ERROR\n\n\n\n### 501 NOT_IMPLEMENTED\n\nAPI\n\n### 502 BAD_GATEWAY\n\n\n\n### 503 SERVICE_UNAVAILABLE\n\n\n`Retry-After``Retry-After`500\n\n### 504 GATEWAY_TIMEOUT\n\nURIHTTPFTPLDAPDNS\nDNS400500\n\n### 505 VERSION_NOT_SUPPORTED\n\nHTTP\n\n### 506 VARIANT_ALSO_NEGOTIATES_EXPERIMENTAL\n\n\n\n### 507 INSUFFICIENT_STORAGE\n\n\n\n### 508 LOOP_DETECTED\n\n 208\n\n### 510 NOT_EXTENDED\n\n\n\n### 511 NETWORK_AUTHENTICATION_REQUIRED\n\nWiFi\n\n\n\n[](https://en.wikipedia.org/wiki/List_of_HTTP_status_codes)\n\n[](https://www.flysnow.org/tools/table/http-status-codes/)\n","slug":"tools/http_response_status_codes","published":1,"updated":"2020-04-02T13:50:03.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf6e00armv059q4d73pd","content":"<h2 id=\"1xx\"><a href=\"#1xx\" class=\"headerlink\" title=\"1xx\"></a>1xx</h2><p><br>HTTP/1.01xx1xx<br></p>\n<h3 id=\"100-CONTINUE\"><a href=\"#100-CONTINUE\" class=\"headerlink\" title=\"100 CONTINUE\"></a>100 CONTINUE</h3><p>bodyPOST<br>Expect: 100-continue<br>100 Continue403()405()<br>417(HTTP/1.0)</p>\n<h3 id=\"101-SWITCHING-PROTOCOLS\"><a href=\"#101-SWITCHING-PROTOCOLS\" class=\"headerlink\" title=\"101 SWITCHING_PROTOCOLS\"></a>101 SWITCHING_PROTOCOLS</h3><p>Upgrade<br>Upgrade<br>HTTPHTTP/2WebSocket</p>\n<h3 id=\"102-PROCESSING\"><a href=\"#102-PROCESSING\" class=\"headerlink\" title=\"102 PROCESSING\"></a>102 PROCESSING</h3><p>WebDAV<br></p>\n<h3 id=\"103-EARLY-HINTS\"><a href=\"#103-EARLY-HINTS\" class=\"headerlink\" title=\"103 EARLY_HINTS\"></a>103 EARLY_HINTS</h3><p>HTTP</p>\n<h2 id=\"2xx\"><a href=\"#2xx\" class=\"headerlink\" title=\"2xx\"></a>2xx</h2><p></p>\n<h3 id=\"200-OK\"><a href=\"#200-OK\" class=\"headerlink\" title=\"200 OK\"></a>200 OK</h3><p><br>GETPOST</p>\n<h3 id=\"201-CREATED\"><a href=\"#201-CREATED\" class=\"headerlink\" title=\"201 CREATED\"></a>201 CREATED</h3><p>URILocation<br><code>202 Accepted</code></p>\n<h3 id=\"202-ACCEPTED\"><a href=\"#202-ACCEPTED\" class=\"headerlink\" title=\"202 ACCEPTED\"></a>202 ACCEPTED</h3><p></p>\n<h3 id=\"203-NON-AUTHORITATIVE-INFORMATION\"><a href=\"#203-NON-AUTHORITATIVE-INFORMATION\" class=\"headerlink\" title=\"203 NON_AUTHORITATIVE_INFORMATION\"></a>203 NON_AUTHORITATIVE_INFORMATION</h3><p>transforming proxy200 OK</p>\n<h3 id=\"204-NO-CONTENT\"><a href=\"#204-NO-CONTENT\" class=\"headerlink\" title=\"204 NO_CONTENT\"></a>204 NO_CONTENT</h3><p></p>\n<h3 id=\"205-RESET-CONTENT\"><a href=\"#205-RESET-CONTENT\" class=\"headerlink\" title=\"205 RESET_CONTENT\"></a>205 RESET_CONTENT</h3><p>204</p>\n<h3 id=\"206-PARTIAL-CONTENT\"><a href=\"#206-PARTIAL-CONTENT\" class=\"headerlink\" title=\"206 PARTIAL_CONTENT\"></a>206 PARTIAL_CONTENT</h3><p>GETFlashGetHTTP </p>\n<h3 id=\"207-MULTI-STATUS\"><a href=\"#207-MULTI-STATUS\" class=\"headerlink\" title=\"207 MULTI_STATUS\"></a>207 MULTI_STATUS</h3><p>XML</p>\n<h3 id=\"208-ALREADY-REPORTED\"><a href=\"#208-ALREADY-REPORTED\" class=\"headerlink\" title=\"208 ALREADY_REPORTED\"></a>208 ALREADY_REPORTED</h3><p>DAV( multistatus)</p>\n<h3 id=\"226-IM-USED\"><a href=\"#226-IM-USED\" class=\"headerlink\" title=\"226 IM_USED\"></a>226 IM_USED</h3><p></p>\n<h2 id=\"3xx\"><a href=\"#3xx\" class=\"headerlink\" title=\"3xx\"></a>3xx</h2><p>URL<code>Location</code><br><code>GET</code><code>HEAD</code><br>ABCAAA<br>HTTP/1.05</p>\n<h3 id=\"300-MULTIPLE-CHOICES\"><a href=\"#300-MULTIPLE-CHOICES\" class=\"headerlink\" title=\"300 MULTIPLE_CHOICES\"></a>300 MULTIPLE_CHOICES</h3><p><br><code>HEAD</code><br><code>Content-Type</code><br>RFC 2616 <code>Location</code>URI<br><code>Location</code></p>\n<h3 id=\"301-MOVED-PERMANENTLY\"><a href=\"#301-MOVED-PERMANENTLY\" class=\"headerlink\" title=\"301 MOVED_PERMANENTLY\"></a>301 MOVED_PERMANENTLY</h3><p>URI<br><br>URI<code>Location</code><code>HEAD</code>URI<br><code>GET</code><code>HEAD</code><br>HTTP/1.0POST301GET</p>\n<h3 id=\"302-FOUND\"><a href=\"#302-FOUND\" class=\"headerlink\" title=\"302 FOUND\"></a>302 FOUND</h3><p>Moved Temporarily<br><code>Cache-Control</code><code>Expires</code> URI<code>Location</code><br>HEADURI<br>GETHEAD<br>RFC 1945RFC 2068302303GETLocationURI<br>303307</p>\n<h3 id=\"303-SEE-OTHER\"><a href=\"#303-SEE-OTHER\" class=\"headerlink\" title=\"303 SEE_OTHER\"></a>303 SEE_OTHER</h3><p><code>URI</code><code>POST</code><code>PUT</code> / <code>DELETE</code>GET<br><code>POST</code><br>URI303<br>URI<code>Location</code>HEADURI<br>HTTP/1.1303<br>302302303</p>\n<h3 id=\"304-NOT-MODIFIED\"><a href=\"#304-NOT-MODIFIED\" class=\"headerlink\" title=\"304 NOT_MODIFIED\"></a>304 NOT_MODIFIED</h3><p><code>If-Modified-Since</code><code>If-None-Match</code></p>\n<h3 id=\"305-USE-PROXY\"><a href=\"#305-USE-PROXY\" class=\"headerlink\" title=\"305 USE_PROXY\"></a>305 USE_PROXY</h3><p><code>Location</code>URI<br>305HTTPMozilla FirefoxInternet Explorer<br>RFC 2068305</p>\n<h3 id=\"306-RESERVED\"><a href=\"#306-RESERVED\" class=\"headerlink\" title=\"306 RESERVED\"></a>306 RESERVED</h3><p>306</p>\n<h3 id=\"307-TEMPORARY-REDIRECT\"><a href=\"#307-TEMPORARY-REDIRECT\" class=\"headerlink\" title=\"307 TEMPORARY_REDIRECT\"></a>307 TEMPORARY_REDIRECT</h3><p><code>URI</code><code>URI</code> <code>302</code><br><code>POST</code><code>POST</code></p>\n<h3 id=\"308-PERMANENTLY-REDIRECT\"><a href=\"#308-PERMANENTLY-REDIRECT\" class=\"headerlink\" title=\"308 PERMANENTLY_REDIRECT\"></a>308 PERMANENTLY_REDIRECT</h3><p>URI 307308302301HTTP </p>\n<h2 id=\"4xx\"><a href=\"#4xx\" class=\"headerlink\" title=\"4xx\"></a>4xx</h2><p>HEAD<br><br></p>\n<p>TCP<br>TCP<br></p>\n<h3 id=\"400-BAD-REQUEST\"><a href=\"#400-BAD-REQUEST\" class=\"headerlink\" title=\"400 BAD_REQUEST\"></a>400 BAD_REQUEST</h3><p></p>\n<h3 id=\"401-UNAUTHORIZED\"><a href=\"#401-UNAUTHORIZED\" class=\"headerlink\" title=\"401 UNAUTHORIZED\"></a>401 UNAUTHORIZED</h3><p>HTTPHTTP <code>403 Forbidden</code><code>401</code><br><code>WWW-Authenticate</code><br><code>Authorization</code><code>Authorization</code><code>401</code><br><code>401</code><br>IP401</p>\n<h3 id=\"402-PAYMENT-REQUIRED\"><a href=\"#402-PAYMENT-REQUIRED\" class=\"headerlink\" title=\"402 PAYMENT_REQUIRED\"></a>402 PAYMENT_REQUIRED</h3><p><br>Google Developers API<br>Sipgate<br>Shopify<br>Stripe</p>\n<h3 id=\"403-FORBIDDEN\"><a href=\"#403-FORBIDDEN\" class=\"headerlink\" title=\"403 FORBIDDEN\"></a>403 FORBIDDEN</h3><p>401<br><code>HEAD</code><code>404</code></p>\n<h3 id=\"404-NOT-FOUND\"><a href=\"#404-NOT-FOUND\" class=\"headerlink\" title=\"404 NOT_FOUND\"></a>404 NOT_FOUND</h3><p><br><code>410</code><br>404</p>\n<h3 id=\"405-METHOD-NOT-ALLOWED\"><a href=\"#405-METHOD-NOT-ALLOWED\" class=\"headerlink\" title=\"405 METHOD_NOT_ALLOWED\"></a>405 METHOD_NOT_ALLOWED</h3><p><code>Allow</code><br><code>POST</code><code>GET</code><code>PUT</code><br><code>PUT</code><code>DELETE</code><code>405</code></p>\n<h3 id=\"406-NOT-ACCEPTABLE\"><a href=\"#406-NOT-ACCEPTABLE\" class=\"headerlink\" title=\"406 NOT_ACCEPTABLE\"></a>406 NOT_ACCEPTABLE</h3><p> <br><code>HEAD</code><br><code>Content-Type</code></p>\n<h3 id=\"407-PROXY-AUTHENTICATION-REQUIRED\"><a href=\"#407-PROXY-AUTHENTICATION-REQUIRED\" class=\"headerlink\" title=\"407 PROXY_AUTHENTICATION_REQUIRED\"></a>407 PROXY_AUTHENTICATION_REQUIRED</h3><p>401<code>Proxy-Authenticate</code><br><code>Proxy-Authorization</code></p>\n<h3 id=\"408-REQUEST-TIMEOUT\"><a href=\"#408-REQUEST-TIMEOUT\" class=\"headerlink\" title=\"408 REQUEST_TIMEOUT\"></a>408 REQUEST_TIMEOUT</h3><p>HTTP</p>\n<h3 id=\"409-CONFLICT\"><a href=\"#409-CONFLICT\" class=\"headerlink\" title=\"409 CONFLICT\"></a>409 CONFLICT</h3><p></p>\n<h3 id=\"410-GONE\"><a href=\"#410-GONE\" class=\"headerlink\" title=\"410 GONE\"></a>410 GONE</h3><p><br>410404</p>\n<h3 id=\"411-LENGTH-REQUIRED\"><a href=\"#411-LENGTH-REQUIRED\" class=\"headerlink\" title=\"411 LENGTH_REQUIRED\"></a>411 LENGTH_REQUIRED</h3><p><code>Content-Length</code><code>Content-Length</code></p>\n<h3 id=\"412-PRECONDITION-FAILED\"><a href=\"#412-PRECONDITION-FAILED\" class=\"headerlink\" title=\"412 PRECONDITION_FAILED\"></a>412 PRECONDITION_FAILED</h3><p><br></p>\n<h3 id=\"413-REQUEST-ENTITY-TOO-LARGE\"><a href=\"#413-REQUEST-ENTITY-TOO-LARGE\" class=\"headerlink\" title=\"413 REQUEST_ENTITY_TOO_LARGE\"></a>413 REQUEST_ENTITY_TOO_LARGE</h3><p><br> <code>Retry-After</code></p>\n<h3 id=\"414-REQUEST-URI-TOO-LONG\"><a href=\"#414-REQUEST-URI-TOO-LONG\" class=\"headerlink\" title=\"414 REQUEST_URI_TOO_LONG\"></a>414 REQUEST_URI_TOO_LONG</h3><p>URIGETPOST<br> <code>POST</code><code>GET</code><br>URIURIURIURI <br>URIGET414</p>\n<h3 id=\"415-UNSUPPORTED-MEDIA-TYPE\"><a href=\"#415-UNSUPPORTED-MEDIA-TYPE\" class=\"headerlink\" title=\"415 UNSUPPORTED_MEDIA_TYPE\"></a>415 UNSUPPORTED_MEDIA_TYPE</h3><p><br>svgjpg</p>\n<h3 id=\"416-REQUESTED-RANGE-NOT-SATISFIABLE\"><a href=\"#416-REQUESTED-RANGE-NOT-SATISFIABLE\" class=\"headerlink\" title=\"416 REQUESTED_RANGE_NOT_SATISFIABLE\"></a>416 REQUESTED_RANGE_NOT_SATISFIABLE</h3><p>Byte serving</p>\n<h3 id=\"417-EXPECTATION-FAILED\"><a href=\"#417-EXPECTATION-FAILED\" class=\"headerlink\" title=\"417 EXPECTATION_FAILED\"></a>417 EXPECTATION_FAILED</h3><p><code>Expect</code><code>Expect</code></p>\n<h3 id=\"418-I-AM-A-TEAPOT\"><a href=\"#418-I-AM-A-TEAPOT\" class=\"headerlink\" title=\"418 I_AM_A_TEAPOT\"></a>418 I_AM_A_TEAPOT</h3><p>1998IETF, RFC 2324HTTP<br>HTCPCPBREWPOSTHTTPGoogle.comNode.jsASP.NETGo</p>\n<h3 id=\"421-MISDIRECTED-REQUEST\"><a href=\"#421-MISDIRECTED-REQUEST\" class=\"headerlink\" title=\"421 MISDIRECTED_REQUEST\"></a>421 MISDIRECTED_REQUEST</h3><p></p>\n<h3 id=\"422-UNPROCESSABLE-ENTITY\"><a href=\"#422-UNPROCESSABLE-ENTITY\" class=\"headerlink\" title=\"422 UNPROCESSABLE_ENTITY\"></a>422 UNPROCESSABLE_ENTITY</h3><p></p>\n<h3 id=\"423-LOCKED\"><a href=\"#423-LOCKED\" class=\"headerlink\" title=\"423 LOCKED\"></a>423 LOCKED</h3><p></p>\n<h3 id=\"424-FAILED-DEPENDENCY\"><a href=\"#424-FAILED-DEPENDENCY\" class=\"headerlink\" title=\"424 FAILED_DEPENDENCY\"></a>424 FAILED_DEPENDENCY</h3><p>PROPPATCH</p>\n<h3 id=\"425-TOO-EARLY\"><a href=\"#425-TOO-EARLY\" class=\"headerlink\" title=\"425 TOO_EARLY\"></a>425 TOO_EARLY</h3><p></p>\n<h3 id=\"426-UPGRADE-REQUIRED\"><a href=\"#426-UPGRADE-REQUIRED\" class=\"headerlink\" title=\"426 UPGRADE_REQUIRED\"></a>426 UPGRADE_REQUIRED</h3><p>TLS/1.0HTTP/1.1 <code>Upgrade</code></p>\n<h3 id=\"428-PRECONDITION-REQUIRED\"><a href=\"#428-PRECONDITION-REQUIRED\" class=\"headerlink\" title=\"428 PRECONDITION_REQUIRED\"></a>428 PRECONDITION_REQUIRED</h3><p>GETPUT<br></p>\n<h3 id=\"429-TOO-MANY-REQUESTS\"><a href=\"#429-TOO-MANY-REQUESTS\" class=\"headerlink\" title=\"429 TOO_MANY_REQUESTS\"></a>429 TOO_MANY_REQUESTS</h3><p></p>\n<h3 id=\"431-REQUEST-HEADER-FIELDS-TOO-LARGE\"><a href=\"#431-REQUEST-HEADER-FIELDS-TOO-LARGE\" class=\"headerlink\" title=\"431 REQUEST_HEADER_FIELDS_TOO_LARGE\"></a>431 REQUEST_HEADER_FIELDS_TOO_LARGE</h3><p></p>\n<h3 id=\"451-UNAVAILABLE-FOR-LEGAL-REASONS\"><a href=\"#451-UNAVAILABLE-FOR-LEGAL-REASONS\" class=\"headerlink\" title=\"451 UNAVAILABLE_FOR_LEGAL_REASONS\"></a>451 UNAVAILABLE_FOR_LEGAL_REASONS</h3><p>IETF2015</p>\n<h2 id=\"5xx\"><a href=\"#5xx\" class=\"headerlink\" title=\"5xx\"></a>5xx</h2><p><br>HEAD<br></p>\n<h3 id=\"500-INTERNAL-SERVER-ERROR\"><a href=\"#500-INTERNAL-SERVER-ERROR\" class=\"headerlink\" title=\"500 INTERNAL_SERVER_ERROR\"></a>500 INTERNAL_SERVER_ERROR</h3><p></p>\n<h3 id=\"501-NOT-IMPLEMENTED\"><a href=\"#501-NOT-IMPLEMENTED\" class=\"headerlink\" title=\"501 NOT_IMPLEMENTED\"></a>501 NOT_IMPLEMENTED</h3><p>API</p>\n<h3 id=\"502-BAD-GATEWAY\"><a href=\"#502-BAD-GATEWAY\" class=\"headerlink\" title=\"502 BAD_GATEWAY\"></a>502 BAD_GATEWAY</h3><p></p>\n<h3 id=\"503-SERVICE-UNAVAILABLE\"><a href=\"#503-SERVICE-UNAVAILABLE\" class=\"headerlink\" title=\"503 SERVICE_UNAVAILABLE\"></a>503 SERVICE_UNAVAILABLE</h3><p><br><code>Retry-After</code><code>Retry-After</code>500</p>\n<h3 id=\"504-GATEWAY-TIMEOUT\"><a href=\"#504-GATEWAY-TIMEOUT\" class=\"headerlink\" title=\"504 GATEWAY_TIMEOUT\"></a>504 GATEWAY_TIMEOUT</h3><p>URIHTTPFTPLDAPDNS<br>DNS400500</p>\n<h3 id=\"505-VERSION-NOT-SUPPORTED\"><a href=\"#505-VERSION-NOT-SUPPORTED\" class=\"headerlink\" title=\"505 VERSION_NOT_SUPPORTED\"></a>505 VERSION_NOT_SUPPORTED</h3><p>HTTP</p>\n<h3 id=\"506-VARIANT-ALSO-NEGOTIATES-EXPERIMENTAL\"><a href=\"#506-VARIANT-ALSO-NEGOTIATES-EXPERIMENTAL\" class=\"headerlink\" title=\"506 VARIANT_ALSO_NEGOTIATES_EXPERIMENTAL\"></a>506 VARIANT_ALSO_NEGOTIATES_EXPERIMENTAL</h3><p></p>\n<h3 id=\"507-INSUFFICIENT-STORAGE\"><a href=\"#507-INSUFFICIENT-STORAGE\" class=\"headerlink\" title=\"507 INSUFFICIENT_STORAGE\"></a>507 INSUFFICIENT_STORAGE</h3><p></p>\n<h3 id=\"508-LOOP-DETECTED\"><a href=\"#508-LOOP-DETECTED\" class=\"headerlink\" title=\"508 LOOP_DETECTED\"></a>508 LOOP_DETECTED</h3><p> 208</p>\n<h3 id=\"510-NOT-EXTENDED\"><a href=\"#510-NOT-EXTENDED\" class=\"headerlink\" title=\"510 NOT_EXTENDED\"></a>510 NOT_EXTENDED</h3><p></p>\n<h3 id=\"511-NETWORK-AUTHENTICATION-REQUIRED\"><a href=\"#511-NETWORK-AUTHENTICATION-REQUIRED\" class=\"headerlink\" title=\"511 NETWORK_AUTHENTICATION_REQUIRED\"></a>511 NETWORK_AUTHENTICATION_REQUIRED</h3><p>WiFi</p>\n<p></p>\n<p><a href=\"https://en.wikipedia.org/wiki/List_of_HTTP_status_codes\"></a></p>\n<p><a href=\"https://www.flysnow.org/tools/table/http-status-codes/\"></a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1xx\"><a href=\"#1xx\" class=\"headerlink\" title=\"1xx\"></a>1xx</h2><p><br>HTTP/1.01xx1xx<br></p>\n<h3 id=\"100-CONTINUE\"><a href=\"#100-CONTINUE\" class=\"headerlink\" title=\"100 CONTINUE\"></a>100 CONTINUE</h3><p>bodyPOST<br>Expect: 100-continue<br>100 Continue403()405()<br>417(HTTP/1.0)</p>\n<h3 id=\"101-SWITCHING-PROTOCOLS\"><a href=\"#101-SWITCHING-PROTOCOLS\" class=\"headerlink\" title=\"101 SWITCHING_PROTOCOLS\"></a>101 SWITCHING_PROTOCOLS</h3><p>Upgrade<br>Upgrade<br>HTTPHTTP/2WebSocket</p>\n<h3 id=\"102-PROCESSING\"><a href=\"#102-PROCESSING\" class=\"headerlink\" title=\"102 PROCESSING\"></a>102 PROCESSING</h3><p>WebDAV<br></p>\n<h3 id=\"103-EARLY-HINTS\"><a href=\"#103-EARLY-HINTS\" class=\"headerlink\" title=\"103 EARLY_HINTS\"></a>103 EARLY_HINTS</h3><p>HTTP</p>\n<h2 id=\"2xx\"><a href=\"#2xx\" class=\"headerlink\" title=\"2xx\"></a>2xx</h2><p></p>\n<h3 id=\"200-OK\"><a href=\"#200-OK\" class=\"headerlink\" title=\"200 OK\"></a>200 OK</h3><p><br>GETPOST</p>\n<h3 id=\"201-CREATED\"><a href=\"#201-CREATED\" class=\"headerlink\" title=\"201 CREATED\"></a>201 CREATED</h3><p>URILocation<br><code>202 Accepted</code></p>\n<h3 id=\"202-ACCEPTED\"><a href=\"#202-ACCEPTED\" class=\"headerlink\" title=\"202 ACCEPTED\"></a>202 ACCEPTED</h3><p></p>\n<h3 id=\"203-NON-AUTHORITATIVE-INFORMATION\"><a href=\"#203-NON-AUTHORITATIVE-INFORMATION\" class=\"headerlink\" title=\"203 NON_AUTHORITATIVE_INFORMATION\"></a>203 NON_AUTHORITATIVE_INFORMATION</h3><p>transforming proxy200 OK</p>\n<h3 id=\"204-NO-CONTENT\"><a href=\"#204-NO-CONTENT\" class=\"headerlink\" title=\"204 NO_CONTENT\"></a>204 NO_CONTENT</h3><p></p>\n<h3 id=\"205-RESET-CONTENT\"><a href=\"#205-RESET-CONTENT\" class=\"headerlink\" title=\"205 RESET_CONTENT\"></a>205 RESET_CONTENT</h3><p>204</p>\n<h3 id=\"206-PARTIAL-CONTENT\"><a href=\"#206-PARTIAL-CONTENT\" class=\"headerlink\" title=\"206 PARTIAL_CONTENT\"></a>206 PARTIAL_CONTENT</h3><p>GETFlashGetHTTP </p>\n<h3 id=\"207-MULTI-STATUS\"><a href=\"#207-MULTI-STATUS\" class=\"headerlink\" title=\"207 MULTI_STATUS\"></a>207 MULTI_STATUS</h3><p>XML</p>\n<h3 id=\"208-ALREADY-REPORTED\"><a href=\"#208-ALREADY-REPORTED\" class=\"headerlink\" title=\"208 ALREADY_REPORTED\"></a>208 ALREADY_REPORTED</h3><p>DAV( multistatus)</p>\n<h3 id=\"226-IM-USED\"><a href=\"#226-IM-USED\" class=\"headerlink\" title=\"226 IM_USED\"></a>226 IM_USED</h3><p></p>\n<h2 id=\"3xx\"><a href=\"#3xx\" class=\"headerlink\" title=\"3xx\"></a>3xx</h2><p>URL<code>Location</code><br><code>GET</code><code>HEAD</code><br>ABCAAA<br>HTTP/1.05</p>\n<h3 id=\"300-MULTIPLE-CHOICES\"><a href=\"#300-MULTIPLE-CHOICES\" class=\"headerlink\" title=\"300 MULTIPLE_CHOICES\"></a>300 MULTIPLE_CHOICES</h3><p><br><code>HEAD</code><br><code>Content-Type</code><br>RFC 2616 <code>Location</code>URI<br><code>Location</code></p>\n<h3 id=\"301-MOVED-PERMANENTLY\"><a href=\"#301-MOVED-PERMANENTLY\" class=\"headerlink\" title=\"301 MOVED_PERMANENTLY\"></a>301 MOVED_PERMANENTLY</h3><p>URI<br><br>URI<code>Location</code><code>HEAD</code>URI<br><code>GET</code><code>HEAD</code><br>HTTP/1.0POST301GET</p>\n<h3 id=\"302-FOUND\"><a href=\"#302-FOUND\" class=\"headerlink\" title=\"302 FOUND\"></a>302 FOUND</h3><p>Moved Temporarily<br><code>Cache-Control</code><code>Expires</code> URI<code>Location</code><br>HEADURI<br>GETHEAD<br>RFC 1945RFC 2068302303GETLocationURI<br>303307</p>\n<h3 id=\"303-SEE-OTHER\"><a href=\"#303-SEE-OTHER\" class=\"headerlink\" title=\"303 SEE_OTHER\"></a>303 SEE_OTHER</h3><p><code>URI</code><code>POST</code><code>PUT</code> / <code>DELETE</code>GET<br><code>POST</code><br>URI303<br>URI<code>Location</code>HEADURI<br>HTTP/1.1303<br>302302303</p>\n<h3 id=\"304-NOT-MODIFIED\"><a href=\"#304-NOT-MODIFIED\" class=\"headerlink\" title=\"304 NOT_MODIFIED\"></a>304 NOT_MODIFIED</h3><p><code>If-Modified-Since</code><code>If-None-Match</code></p>\n<h3 id=\"305-USE-PROXY\"><a href=\"#305-USE-PROXY\" class=\"headerlink\" title=\"305 USE_PROXY\"></a>305 USE_PROXY</h3><p><code>Location</code>URI<br>305HTTPMozilla FirefoxInternet Explorer<br>RFC 2068305</p>\n<h3 id=\"306-RESERVED\"><a href=\"#306-RESERVED\" class=\"headerlink\" title=\"306 RESERVED\"></a>306 RESERVED</h3><p>306</p>\n<h3 id=\"307-TEMPORARY-REDIRECT\"><a href=\"#307-TEMPORARY-REDIRECT\" class=\"headerlink\" title=\"307 TEMPORARY_REDIRECT\"></a>307 TEMPORARY_REDIRECT</h3><p><code>URI</code><code>URI</code> <code>302</code><br><code>POST</code><code>POST</code></p>\n<h3 id=\"308-PERMANENTLY-REDIRECT\"><a href=\"#308-PERMANENTLY-REDIRECT\" class=\"headerlink\" title=\"308 PERMANENTLY_REDIRECT\"></a>308 PERMANENTLY_REDIRECT</h3><p>URI 307308302301HTTP </p>\n<h2 id=\"4xx\"><a href=\"#4xx\" class=\"headerlink\" title=\"4xx\"></a>4xx</h2><p>HEAD<br><br></p>\n<p>TCP<br>TCP<br></p>\n<h3 id=\"400-BAD-REQUEST\"><a href=\"#400-BAD-REQUEST\" class=\"headerlink\" title=\"400 BAD_REQUEST\"></a>400 BAD_REQUEST</h3><p></p>\n<h3 id=\"401-UNAUTHORIZED\"><a href=\"#401-UNAUTHORIZED\" class=\"headerlink\" title=\"401 UNAUTHORIZED\"></a>401 UNAUTHORIZED</h3><p>HTTPHTTP <code>403 Forbidden</code><code>401</code><br><code>WWW-Authenticate</code><br><code>Authorization</code><code>Authorization</code><code>401</code><br><code>401</code><br>IP401</p>\n<h3 id=\"402-PAYMENT-REQUIRED\"><a href=\"#402-PAYMENT-REQUIRED\" class=\"headerlink\" title=\"402 PAYMENT_REQUIRED\"></a>402 PAYMENT_REQUIRED</h3><p><br>Google Developers API<br>Sipgate<br>Shopify<br>Stripe</p>\n<h3 id=\"403-FORBIDDEN\"><a href=\"#403-FORBIDDEN\" class=\"headerlink\" title=\"403 FORBIDDEN\"></a>403 FORBIDDEN</h3><p>401<br><code>HEAD</code><code>404</code></p>\n<h3 id=\"404-NOT-FOUND\"><a href=\"#404-NOT-FOUND\" class=\"headerlink\" title=\"404 NOT_FOUND\"></a>404 NOT_FOUND</h3><p><br><code>410</code><br>404</p>\n<h3 id=\"405-METHOD-NOT-ALLOWED\"><a href=\"#405-METHOD-NOT-ALLOWED\" class=\"headerlink\" title=\"405 METHOD_NOT_ALLOWED\"></a>405 METHOD_NOT_ALLOWED</h3><p><code>Allow</code><br><code>POST</code><code>GET</code><code>PUT</code><br><code>PUT</code><code>DELETE</code><code>405</code></p>\n<h3 id=\"406-NOT-ACCEPTABLE\"><a href=\"#406-NOT-ACCEPTABLE\" class=\"headerlink\" title=\"406 NOT_ACCEPTABLE\"></a>406 NOT_ACCEPTABLE</h3><p> <br><code>HEAD</code><br><code>Content-Type</code></p>\n<h3 id=\"407-PROXY-AUTHENTICATION-REQUIRED\"><a href=\"#407-PROXY-AUTHENTICATION-REQUIRED\" class=\"headerlink\" title=\"407 PROXY_AUTHENTICATION_REQUIRED\"></a>407 PROXY_AUTHENTICATION_REQUIRED</h3><p>401<code>Proxy-Authenticate</code><br><code>Proxy-Authorization</code></p>\n<h3 id=\"408-REQUEST-TIMEOUT\"><a href=\"#408-REQUEST-TIMEOUT\" class=\"headerlink\" title=\"408 REQUEST_TIMEOUT\"></a>408 REQUEST_TIMEOUT</h3><p>HTTP</p>\n<h3 id=\"409-CONFLICT\"><a href=\"#409-CONFLICT\" class=\"headerlink\" title=\"409 CONFLICT\"></a>409 CONFLICT</h3><p></p>\n<h3 id=\"410-GONE\"><a href=\"#410-GONE\" class=\"headerlink\" title=\"410 GONE\"></a>410 GONE</h3><p><br>410404</p>\n<h3 id=\"411-LENGTH-REQUIRED\"><a href=\"#411-LENGTH-REQUIRED\" class=\"headerlink\" title=\"411 LENGTH_REQUIRED\"></a>411 LENGTH_REQUIRED</h3><p><code>Content-Length</code><code>Content-Length</code></p>\n<h3 id=\"412-PRECONDITION-FAILED\"><a href=\"#412-PRECONDITION-FAILED\" class=\"headerlink\" title=\"412 PRECONDITION_FAILED\"></a>412 PRECONDITION_FAILED</h3><p><br></p>\n<h3 id=\"413-REQUEST-ENTITY-TOO-LARGE\"><a href=\"#413-REQUEST-ENTITY-TOO-LARGE\" class=\"headerlink\" title=\"413 REQUEST_ENTITY_TOO_LARGE\"></a>413 REQUEST_ENTITY_TOO_LARGE</h3><p><br> <code>Retry-After</code></p>\n<h3 id=\"414-REQUEST-URI-TOO-LONG\"><a href=\"#414-REQUEST-URI-TOO-LONG\" class=\"headerlink\" title=\"414 REQUEST_URI_TOO_LONG\"></a>414 REQUEST_URI_TOO_LONG</h3><p>URIGETPOST<br> <code>POST</code><code>GET</code><br>URIURIURIURI <br>URIGET414</p>\n<h3 id=\"415-UNSUPPORTED-MEDIA-TYPE\"><a href=\"#415-UNSUPPORTED-MEDIA-TYPE\" class=\"headerlink\" title=\"415 UNSUPPORTED_MEDIA_TYPE\"></a>415 UNSUPPORTED_MEDIA_TYPE</h3><p><br>svgjpg</p>\n<h3 id=\"416-REQUESTED-RANGE-NOT-SATISFIABLE\"><a href=\"#416-REQUESTED-RANGE-NOT-SATISFIABLE\" class=\"headerlink\" title=\"416 REQUESTED_RANGE_NOT_SATISFIABLE\"></a>416 REQUESTED_RANGE_NOT_SATISFIABLE</h3><p>Byte serving</p>\n<h3 id=\"417-EXPECTATION-FAILED\"><a href=\"#417-EXPECTATION-FAILED\" class=\"headerlink\" title=\"417 EXPECTATION_FAILED\"></a>417 EXPECTATION_FAILED</h3><p><code>Expect</code><code>Expect</code></p>\n<h3 id=\"418-I-AM-A-TEAPOT\"><a href=\"#418-I-AM-A-TEAPOT\" class=\"headerlink\" title=\"418 I_AM_A_TEAPOT\"></a>418 I_AM_A_TEAPOT</h3><p>1998IETF, RFC 2324HTTP<br>HTCPCPBREWPOSTHTTPGoogle.comNode.jsASP.NETGo</p>\n<h3 id=\"421-MISDIRECTED-REQUEST\"><a href=\"#421-MISDIRECTED-REQUEST\" class=\"headerlink\" title=\"421 MISDIRECTED_REQUEST\"></a>421 MISDIRECTED_REQUEST</h3><p></p>\n<h3 id=\"422-UNPROCESSABLE-ENTITY\"><a href=\"#422-UNPROCESSABLE-ENTITY\" class=\"headerlink\" title=\"422 UNPROCESSABLE_ENTITY\"></a>422 UNPROCESSABLE_ENTITY</h3><p></p>\n<h3 id=\"423-LOCKED\"><a href=\"#423-LOCKED\" class=\"headerlink\" title=\"423 LOCKED\"></a>423 LOCKED</h3><p></p>\n<h3 id=\"424-FAILED-DEPENDENCY\"><a href=\"#424-FAILED-DEPENDENCY\" class=\"headerlink\" title=\"424 FAILED_DEPENDENCY\"></a>424 FAILED_DEPENDENCY</h3><p>PROPPATCH</p>\n<h3 id=\"425-TOO-EARLY\"><a href=\"#425-TOO-EARLY\" class=\"headerlink\" title=\"425 TOO_EARLY\"></a>425 TOO_EARLY</h3><p></p>\n<h3 id=\"426-UPGRADE-REQUIRED\"><a href=\"#426-UPGRADE-REQUIRED\" class=\"headerlink\" title=\"426 UPGRADE_REQUIRED\"></a>426 UPGRADE_REQUIRED</h3><p>TLS/1.0HTTP/1.1 <code>Upgrade</code></p>\n<h3 id=\"428-PRECONDITION-REQUIRED\"><a href=\"#428-PRECONDITION-REQUIRED\" class=\"headerlink\" title=\"428 PRECONDITION_REQUIRED\"></a>428 PRECONDITION_REQUIRED</h3><p>GETPUT<br></p>\n<h3 id=\"429-TOO-MANY-REQUESTS\"><a href=\"#429-TOO-MANY-REQUESTS\" class=\"headerlink\" title=\"429 TOO_MANY_REQUESTS\"></a>429 TOO_MANY_REQUESTS</h3><p></p>\n<h3 id=\"431-REQUEST-HEADER-FIELDS-TOO-LARGE\"><a href=\"#431-REQUEST-HEADER-FIELDS-TOO-LARGE\" class=\"headerlink\" title=\"431 REQUEST_HEADER_FIELDS_TOO_LARGE\"></a>431 REQUEST_HEADER_FIELDS_TOO_LARGE</h3><p></p>\n<h3 id=\"451-UNAVAILABLE-FOR-LEGAL-REASONS\"><a href=\"#451-UNAVAILABLE-FOR-LEGAL-REASONS\" class=\"headerlink\" title=\"451 UNAVAILABLE_FOR_LEGAL_REASONS\"></a>451 UNAVAILABLE_FOR_LEGAL_REASONS</h3><p>IETF2015</p>\n<h2 id=\"5xx\"><a href=\"#5xx\" class=\"headerlink\" title=\"5xx\"></a>5xx</h2><p><br>HEAD<br></p>\n<h3 id=\"500-INTERNAL-SERVER-ERROR\"><a href=\"#500-INTERNAL-SERVER-ERROR\" class=\"headerlink\" title=\"500 INTERNAL_SERVER_ERROR\"></a>500 INTERNAL_SERVER_ERROR</h3><p></p>\n<h3 id=\"501-NOT-IMPLEMENTED\"><a href=\"#501-NOT-IMPLEMENTED\" class=\"headerlink\" title=\"501 NOT_IMPLEMENTED\"></a>501 NOT_IMPLEMENTED</h3><p>API</p>\n<h3 id=\"502-BAD-GATEWAY\"><a href=\"#502-BAD-GATEWAY\" class=\"headerlink\" title=\"502 BAD_GATEWAY\"></a>502 BAD_GATEWAY</h3><p></p>\n<h3 id=\"503-SERVICE-UNAVAILABLE\"><a href=\"#503-SERVICE-UNAVAILABLE\" class=\"headerlink\" title=\"503 SERVICE_UNAVAILABLE\"></a>503 SERVICE_UNAVAILABLE</h3><p><br><code>Retry-After</code><code>Retry-After</code>500</p>\n<h3 id=\"504-GATEWAY-TIMEOUT\"><a href=\"#504-GATEWAY-TIMEOUT\" class=\"headerlink\" title=\"504 GATEWAY_TIMEOUT\"></a>504 GATEWAY_TIMEOUT</h3><p>URIHTTPFTPLDAPDNS<br>DNS400500</p>\n<h3 id=\"505-VERSION-NOT-SUPPORTED\"><a href=\"#505-VERSION-NOT-SUPPORTED\" class=\"headerlink\" title=\"505 VERSION_NOT_SUPPORTED\"></a>505 VERSION_NOT_SUPPORTED</h3><p>HTTP</p>\n<h3 id=\"506-VARIANT-ALSO-NEGOTIATES-EXPERIMENTAL\"><a href=\"#506-VARIANT-ALSO-NEGOTIATES-EXPERIMENTAL\" class=\"headerlink\" title=\"506 VARIANT_ALSO_NEGOTIATES_EXPERIMENTAL\"></a>506 VARIANT_ALSO_NEGOTIATES_EXPERIMENTAL</h3><p></p>\n<h3 id=\"507-INSUFFICIENT-STORAGE\"><a href=\"#507-INSUFFICIENT-STORAGE\" class=\"headerlink\" title=\"507 INSUFFICIENT_STORAGE\"></a>507 INSUFFICIENT_STORAGE</h3><p></p>\n<h3 id=\"508-LOOP-DETECTED\"><a href=\"#508-LOOP-DETECTED\" class=\"headerlink\" title=\"508 LOOP_DETECTED\"></a>508 LOOP_DETECTED</h3><p> 208</p>\n<h3 id=\"510-NOT-EXTENDED\"><a href=\"#510-NOT-EXTENDED\" class=\"headerlink\" title=\"510 NOT_EXTENDED\"></a>510 NOT_EXTENDED</h3><p></p>\n<h3 id=\"511-NETWORK-AUTHENTICATION-REQUIRED\"><a href=\"#511-NETWORK-AUTHENTICATION-REQUIRED\" class=\"headerlink\" title=\"511 NETWORK_AUTHENTICATION_REQUIRED\"></a>511 NETWORK_AUTHENTICATION_REQUIRED</h3><p>WiFi</p>\n<p></p>\n<p><a href=\"https://en.wikipedia.org/wiki/List_of_HTTP_status_codes\"></a></p>\n<p><a href=\"https://www.flysnow.org/tools/table/http-status-codes/\"></a></p>\n"},{"url":"/2020/08/21/.html","title":"","keywords":"","description":"","date":"2020-08-21T04:29:21.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"type":"reprinted","_content":"# \n\n## \n\n**\njio**\n\n## \n\n**\n\n\n**\n\n## \n\n**\n\n**\n\n## \n\n**\n**\n\n## \n\n**\ntuyu**\n\n## \n\n**pn**\n\n## \n\n**\n**\n\n## \n\n**\n**\n\n## \n\n**zhu\n**\n\n## \n\n**\n\nsh**\n\n## \n\n**gshn(zh)\nyu**\n\n## \n\n**tin\n**\n\n## \n\n**\n\n**\n\n## \n\n**je\njiomn\n\n**\n\n## \n\n**\n\n**\n\n## \n\n**\n**\n\n## \n\n**\n\"\"**\n\n## \n\n****\n\n## \n\n**\n**\n\n## \n\n**\n\nli\n\ndnli\n**\n\n## \n\n**\n\n**\n\n## \n\n**\n\n**\n\n## \n\n**\n\n**\n\n## \n\n**\n**\n\n## \n\n**\n\n**\n\n## \n\n**z\n**\n\n## \n\n**\n\n**\n\n## \n\n**\n\n\n**\n\n## \n\n**\nhu**\n\n## \n\n**\n\n**\n\n## \n\n**\n\n\n**\n\n## \n\n**\n\n**\n\n## \n\n**\n**\n\n## \n\n**\n**\n\n## \n\n**\n**\n\n##  \n\n**x\n\n\n**\n\n## \n\n**\n\n\n**\n\n## \n\n**\n\ng\nlu**\n\n## \n\n****\n\n## \n\n**\nli\n\n**\n\n## \n\n**\n\n**\n\n## \n\n****\n\n## \n\n**\n**\n\n## \n\n**\n**\n\n## \n\n**\n**\n\n## \n\n**\n**\n\n## \n\n**\n\nx**\n\n## \n\n**\ns\n**\n\n## \n\n**\n\n**\n\n## \n\n**\n\n**\n\n## \n\n**\n**\n\n## \n\n**\n\n**\n\n## \n\n**chihuju\npnsh\n**\n\n## \n\n**\n**\n\n## \n\n**\n\n**\n\n## \n\n**\ngu**\n\n## \n\n**\n**\n\n## \n\n**\n**\n\n## \n\n**\n\n**\n\n## \n\n**\n\n**\n\n## \n\n**\n\n**\n\n## \n\n**\n\n\n\n**\n\n## \n\n**\n**\n\n## \n\n**\n\n**\n\n## \n\n**\n\n\n**\n\n## \n\n**\n**\n\n## \n\n**\n**\n\n## \n\n**\nh**\n\n## \n\n****\n\n## \n\n**\n**\n\n## \n\n**\n\n**\n\n## \n\n**\nzhu**\n\n## \n\n**\n**\n\n## \n\n**\n**\n\n## \n\n**\n\n**\n\n## \n\n**\n**\n\n## \n\n****\n\n## \n\n**\n**\n\n## \n\n**\n**\n","source":"_posts//.md","raw":"---\nurl: /2020/08/21/.html\ntitle: \"\"\nkeywords: \"\"\ndescription: \"\"\ndate: 2020-08-21T20:29:21+08:00\ndraft: false\ntags: [\"\"]\ntags_weight: 100\ncategories: [\"\"]\ncategoryes_weight: 100\ntype: \"reprinted\"\n---\n# \n\n## \n\n**\njio**\n\n## \n\n**\n\n\n**\n\n## \n\n**\n\n**\n\n## \n\n**\n**\n\n## \n\n**\ntuyu**\n\n## \n\n**pn**\n\n## \n\n**\n**\n\n## \n\n**\n**\n\n## \n\n**zhu\n**\n\n## \n\n**\n\nsh**\n\n## \n\n**gshn(zh)\nyu**\n\n## \n\n**tin\n**\n\n## \n\n**\n\n**\n\n## \n\n**je\njiomn\n\n**\n\n## \n\n**\n\n**\n\n## \n\n**\n**\n\n## \n\n**\n\"\"**\n\n## \n\n****\n\n## \n\n**\n**\n\n## \n\n**\n\nli\n\ndnli\n**\n\n## \n\n**\n\n**\n\n## \n\n**\n\n**\n\n## \n\n**\n\n**\n\n## \n\n**\n**\n\n## \n\n**\n\n**\n\n## \n\n**z\n**\n\n## \n\n**\n\n**\n\n## \n\n**\n\n\n**\n\n## \n\n**\nhu**\n\n## \n\n**\n\n**\n\n## \n\n**\n\n\n**\n\n## \n\n**\n\n**\n\n## \n\n**\n**\n\n## \n\n**\n**\n\n## \n\n**\n**\n\n##  \n\n**x\n\n\n**\n\n## \n\n**\n\n\n**\n\n## \n\n**\n\ng\nlu**\n\n## \n\n****\n\n## \n\n**\nli\n\n**\n\n## \n\n**\n\n**\n\n## \n\n****\n\n## \n\n**\n**\n\n## \n\n**\n**\n\n## \n\n**\n**\n\n## \n\n**\n**\n\n## \n\n**\n\nx**\n\n## \n\n**\ns\n**\n\n## \n\n**\n\n**\n\n## \n\n**\n\n**\n\n## \n\n**\n**\n\n## \n\n**\n\n**\n\n## \n\n**chihuju\npnsh\n**\n\n## \n\n**\n**\n\n## \n\n**\n\n**\n\n## \n\n**\ngu**\n\n## \n\n**\n**\n\n## \n\n**\n**\n\n## \n\n**\n\n**\n\n## \n\n**\n\n**\n\n## \n\n**\n\n**\n\n## \n\n**\n\n\n\n**\n\n## \n\n**\n**\n\n## \n\n**\n\n**\n\n## \n\n**\n\n\n**\n\n## \n\n**\n**\n\n## \n\n**\n**\n\n## \n\n**\nh**\n\n## \n\n****\n\n## \n\n**\n**\n\n## \n\n**\n\n**\n\n## \n\n**\nzhu**\n\n## \n\n**\n**\n\n## \n\n**\n**\n\n## \n\n**\n\n**\n\n## \n\n**\n**\n\n## \n\n****\n\n## \n\n**\n**\n\n## \n\n**\n**\n","slug":"/","published":1,"updated":"2020-10-11T07:14:18.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf6f00asmv05b5necutj","content":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br>jio</strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br>tuyu</strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong>pn</strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong>zhu<br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br>sh</strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong>gshn(zh)<br>yu</strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong>tin<br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong>je<br>jiomn<br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br>li<br><br>dnli<br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong>z<br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br>hu</strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><strong>x<br><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br>g<br>lu</strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br>li<br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br>x</strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br>s<br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong>chihuju<br>pnsh<br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br>gu</strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br>h</strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br>zhu</strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br>jio</strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br>tuyu</strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong>pn</strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong>zhu<br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br>sh</strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong>gshn(zh)<br>yu</strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong>tin<br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong>je<br>jiomn<br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br>li<br><br>dnli<br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong>z<br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br>hu</strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><strong>x<br><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br>g<br>lu</strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br>li<br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br>x</strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br>s<br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong>chihuju<br>pnsh<br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br>gu</strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br>h</strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br>zhu</strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong><br></strong></p>\n"},{"url":"/2020/10/11/.html","title":"","keywords":"","description":"","date":"2020-10-10T23:29:21.000Z","draft":false,"tags_weight":100,"categoryes_weight":100,"type":"reprinted","_content":"\n# \n\n##   \n\n  \n\n\n  \n\n\n  \n\n\n##   \n\n   \n   \n   \n   \n \n   \n   \n   \n \n \n   \n   \n   \n \n \n ## gi \n \n   \n \n\n##  \n\n\n\n##  \n\n  \n  \n   \n  \n\n\n##  \n\n  \n  \n  \n  \n\n\n##  \n\n  \n  \n  \n  \n\n\n##  \n\n  \ndn  \n  \n  \n  \n  \n\n\n##  \n\n  \n  \n  \n   \n  \n    \n\n\n##  \n\n  \n  \n  \n\n\n  \n  \n  \n  \n\n  \n  \n  \n\n\n  \n  \n  \n\n\n##   \n\n  \n  \n  \n  \n  \n  \n  \n  \n  \n\n\n##   \n\n  \n  \n  \n\n\n##   \n\n  \n  \n  \n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n\n  \n  \n  \n  \n  \ntu  \n  \n  \n  \n  \n\n\n  \n  \n  \n  \n  \n  \n  \n  \n  \n\n\n##  \n\n  \n   \n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n  \n  \ntng  \n   \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n  \n  \n\n\n##   \n\n  \n\n\n##   \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \nzh\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n  \n  \n  \n  \n  \n   \n  \n  \n  \n  \n  \n  \n  \npng  \n  \n  \n  \n  \n  \n  \n\n\n## tio \n\n  \n  \n  \n  \n   \n  \n\n\n## qing \n\n  \n  \n  \n  \n  \n  \n  \n  \n  \nxu  \n  \n\n\n\n##  \n\n  \n  \n  \n  \n  \n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##   \n\n  \n  \n   \n  \n  \n\n\n##  \n\n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n  \n  \n\n\n##  ho\n\n  \n  \n  \n \n\n##   \n\n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n  \n  \n \n\n##  \n\n  \n  \n  \n  \n  \n  \n  \n  \n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n  \nqn  \n  \n  \n  \n  \n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n  \n\n\n##  \n\n  \n\n\n##   \n\n  \n\n\n##   \n\n  \n\n\n##   \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \np  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \nqn  \n  \nqing  \n  \n  \n  \n  \nchu  \n  \njing  \n  \ny  \n  \n  \n  \n  \n  \nhun  \n  \n  \n  \n  \n  \n  \n\n\n##  \n\n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n\n\n##  zhn\n\n  \n\n\n##   \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##   \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n  \n  \n\n\n##   \n\n  \n  \n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n  \n  \ntn\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##   \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n  \n  \n\n\n##   \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##   \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##   \n\n  \n\n\n##   \n\n  \n\n\n##   \n\n  \n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n## - \n\n  \n\n\n##  \n\n\n  \n\n\n\n##  \n\nzh  \n\n","source":"_posts//.md","raw":"---\nurl: /2020/10/11/.html\ntitle: \"\"\nkeywords: \"\"\ndescription: \"\"\ndate: 2020-10-11T15:29:21+08:00\ndraft: false\ntags: [\"\"]\ntags_weight: 100\ncategories: [\"\"]\ncategoryes_weight: 100\ntype: \"reprinted\"\n---\n\n# \n\n##   \n\n  \n\n\n  \n\n\n  \n\n\n##   \n\n   \n   \n   \n   \n \n   \n   \n   \n \n \n   \n   \n   \n \n \n ## gi \n \n   \n \n\n##  \n\n\n\n##  \n\n  \n  \n   \n  \n\n\n##  \n\n  \n  \n  \n  \n\n\n##  \n\n  \n  \n  \n  \n\n\n##  \n\n  \ndn  \n  \n  \n  \n  \n\n\n##  \n\n  \n  \n  \n   \n  \n    \n\n\n##  \n\n  \n  \n  \n\n\n  \n  \n  \n  \n\n  \n  \n  \n\n\n  \n  \n  \n\n\n##   \n\n  \n  \n  \n  \n  \n  \n  \n  \n  \n\n\n##   \n\n  \n  \n  \n\n\n##   \n\n  \n  \n  \n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n\n  \n  \n  \n  \n  \ntu  \n  \n  \n  \n  \n\n\n  \n  \n  \n  \n  \n  \n  \n  \n  \n\n\n##  \n\n  \n   \n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n  \n  \ntng  \n   \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n  \n  \n\n\n##   \n\n  \n\n\n##   \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \nzh\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n  \n  \n  \n  \n  \n   \n  \n  \n  \n  \n  \n  \n  \npng  \n  \n  \n  \n  \n  \n  \n\n\n## tio \n\n  \n  \n  \n  \n   \n  \n\n\n## qing \n\n  \n  \n  \n  \n  \n  \n  \n  \n  \nxu  \n  \n\n\n\n##  \n\n  \n  \n  \n  \n  \n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##   \n\n  \n  \n   \n  \n  \n\n\n##  \n\n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n  \n  \n\n\n##  ho\n\n  \n  \n  \n \n\n##   \n\n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n  \n  \n \n\n##  \n\n  \n  \n  \n  \n  \n  \n  \n  \n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n  \nqn  \n  \n  \n  \n  \n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n  \n\n\n##  \n\n  \n\n\n##   \n\n  \n\n\n##   \n\n  \n\n\n##   \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \np  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \nqn  \n  \nqing  \n  \n  \n  \n  \nchu  \n  \njing  \n  \ny  \n  \n  \n  \n  \n  \nhun  \n  \n  \n  \n  \n  \n  \n\n\n##  \n\n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n\n\n##  zhn\n\n  \n\n\n##   \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##   \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n  \n  \n\n\n##   \n\n  \n  \n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n  \n  \ntn\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##   \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n  \n  \n\n\n##   \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##   \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n  \n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n##   \n\n  \n\n\n##   \n\n  \n\n\n##   \n\n  \n\n\n##  \n\n\n\n##  \n\n\n\n##  \n\n  \n\n\n##  \n\n  \n\n\n## - \n\n  \n\n\n##  \n\n\n  \n\n\n\n##  \n\nzh  \n\n","slug":"/","published":1,"updated":"2020-10-29T15:33:41.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8tf6i00b1mv051mtj5f82","content":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br></p>\n<p><br></p>\n<p><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p> <br> <br> <br>   </p>\n<p> <br> <br> <br> </p>\n<p> <br> <br> <br> </p>\n<h2 id=\"gai-\"><a href=\"#gai-\" class=\"headerlink\" title=\"gi \"></a>gi </h2><p> <br> </p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br> <br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br>dn<br><br><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br> <br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<p><br><br><br>  </p>\n<p><br><br><br></p>\n<p><br><br><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br><br><br><br><br><br><br><br><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br><br><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br><br><br><br><br><br><br>  </p>\n<p><br><br><br><br><br>tu<br><br><br><br><br></p>\n<p><br><br><br><br><br><br><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br> <br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br>tng<br> <br><br><br><br><br><br><br><br><br><br><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br>zh</p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br><br><br><br> <br><br><br><br><br><br><br><br>png<br><br><br><br><br><br><br></p>\n<h2 id=\"tiao-\"><a href=\"#tiao-\" class=\"headerlink\" title=\"tio \"></a>tio </h2><p><br><br><br><br> <br><br></p>\n<h2 id=\"qiang-\"><a href=\"#qiang-\" class=\"headerlink\" title=\"qing \"></a>qing </h2><p><br><br><br><br><br><br><br><br><br>xu<br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br><br> <br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-hao\"><a href=\"#-hao\" class=\"headerlink\" title=\" ho\"></a> ho</h2><p><br><br><br> </p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br> </p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br><br><br><br><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br>qn<br><br><br><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>p<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>qn<br><br>qing<br><br><br><br><br>chu<br><br>jing<br><br>y<br><br><br><br><br><br>hun<br><br><br><br><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-zhen\"><a href=\"#-zhen\" class=\"headerlink\" title=\" zhn\"></a> zhn</h2><p><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br>tn</p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"- \"></a>- </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p>zh<br></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br></p>\n<p><br></p>\n<p><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p> <br> <br> <br>   </p>\n<p> <br> <br> <br> </p>\n<p> <br> <br> <br> </p>\n<h2 id=\"gai-\"><a href=\"#gai-\" class=\"headerlink\" title=\"gi \"></a>gi </h2><p> <br> </p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br> <br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br>dn<br><br><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br> <br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<p><br><br><br>  </p>\n<p><br><br><br></p>\n<p><br><br><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br><br><br><br><br><br><br><br><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br><br><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br><br><br><br><br><br><br>  </p>\n<p><br><br><br><br><br>tu<br><br><br><br><br></p>\n<p><br><br><br><br><br><br><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br> <br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br>tng<br> <br><br><br><br><br><br><br><br><br><br><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br>zh</p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br><br><br><br> <br><br><br><br><br><br><br><br>png<br><br><br><br><br><br><br></p>\n<h2 id=\"tiao-\"><a href=\"#tiao-\" class=\"headerlink\" title=\"tio \"></a>tio </h2><p><br><br><br><br> <br><br></p>\n<h2 id=\"qiang-\"><a href=\"#qiang-\" class=\"headerlink\" title=\"qing \"></a>qing </h2><p><br><br><br><br><br><br><br><br><br>xu<br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br><br> <br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-hao\"><a href=\"#-hao\" class=\"headerlink\" title=\" ho\"></a> ho</h2><p><br><br><br> </p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br> </p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br><br><br><br><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br>qn<br><br><br><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>p<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>qn<br><br>qing<br><br><br><br><br>chu<br><br>jing<br><br>y<br><br><br><br><br><br>hun<br><br><br><br><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-zhen\"><a href=\"#-zhen\" class=\"headerlink\" title=\" zhn\"></a> zhn</h2><p><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br>tn</p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br></p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"- \"></a>- </h2><p><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br><br><br></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p>zh<br></p>\n"},{"url":"/2020/09/12/english-word1.html","title":"1","keywords":"","description":"","date":"2020-09-12T04:31:57.000Z","draft":true,"tags_weight":100,"categoryes_weight":100,"_content":"\n|||\n---|---|---|---\nabbreviation||MIA is an abbreviation for 'Missing in Action'.|MIA  Missing in Action \n","source":"_drafts/english/1.md","raw":"---\nurl: /2020/09/12/english-word1.html\ntitle: \"1\"\nkeywords: \"\"\ndescription: \"\"\ndate: 2020-09-12T20:31:57+08:00\ndraft: true\ntags: [\"\"]\ntags_weight: 100\ncategories: [\"\"]\ncategoryes_weight: 100\n---\n\n|||\n---|---|---|---\nabbreviation||MIA is an abbreviation for 'Missing in Action'.|MIA  Missing in Action \n","slug":"english/1","published":0,"updated":"2020-10-11T07:37:12.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8z69t00b4mv05ca13e97y","content":"<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>abbreviation</td>\n<td></td>\n<td>MIA is an abbreviation for Missing in Action.</td>\n<td>MIA  Missing in Action </td>\n</tr>\n</tbody></table>\n","site":{"data":{}},"excerpt":"","more":"<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>abbreviation</td>\n<td></td>\n<td>MIA is an abbreviation for Missing in Action.</td>\n<td>MIA  Missing in Action </td>\n</tr>\n</tbody></table>\n"},{"url":"/2020/09/12/english-word2.html","title":"2","keywords":"","description":"","date":"2020-09-12T04:31:57.000Z","draft":true,"tags_weight":100,"categoryes_weight":100,"_content":"\n|||\n---|---|---|---\nabandon||I'm sorry I abandoned you like that.|\n","source":"_drafts/english/2.md","raw":"---\nurl: /2020/09/12/english-word2.html\ntitle: \"2\"\nkeywords: \"\"\ndescription: \"\"\ndate: 2020-09-12T20:31:57+08:00\ndraft: true\ntags: [\"\"]\ntags_weight: 100\ncategories: [\"\"]\ncategoryes_weight: 100\n---\n\n|||\n---|---|---|---\nabandon||I'm sorry I abandoned you like that.|\n","slug":"english/2","published":0,"updated":"2020-10-11T07:37:12.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8z69v00b5mv052bbi2fw7","content":"<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>abandon</td>\n<td></td>\n<td>Im sorry I abandoned you like that.</td>\n<td></td>\n</tr>\n</tbody></table>\n","site":{"data":{}},"excerpt":"","more":"<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>abandon</td>\n<td></td>\n<td>Im sorry I abandoned you like that.</td>\n<td></td>\n</tr>\n</tbody></table>\n"},{"url":"/2020/09/12/english-word3.html","title":"3","keywords":"","description":"","date":"2020-09-12T04:31:57.000Z","draft":true,"tags_weight":100,"categoryes_weight":100,"_content":"\n|||\n---|---|---|---\na||You need a dictionary.|\nability||Managers have different talents and abilities|\n","source":"_drafts/english/3.md","raw":"---\nurl: /2020/09/12/english-word3.html\ntitle: \"3\"\nkeywords: \"\"\ndescription: \"\"\ndate: 2020-09-12T20:31:57+08:00\ndraft: true\ntags: [\"\"]\ntags_weight: 100\ncategories: [\"\"]\ncategoryes_weight: 100\n---\n\n|||\n---|---|---|---\na||You need a dictionary.|\nability||Managers have different talents and abilities|\n","slug":"english/3","published":0,"updated":"2020-10-11T07:37:12.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckhg8z69w00b7mv054ktd2llh","content":"<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>a</td>\n<td></td>\n<td>You need a dictionary.</td>\n<td></td>\n</tr>\n<tr>\n<td>ability</td>\n<td></td>\n<td>Managers have different talents and abilities</td>\n<td></td>\n</tr>\n</tbody></table>\n","site":{"data":{}},"excerpt":"","more":"<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>a</td>\n<td></td>\n<td>You need a dictionary.</td>\n<td></td>\n</tr>\n<tr>\n<td>ability</td>\n<td></td>\n<td>Managers have different talents and abilities</td>\n<td></td>\n</tr>\n</tbody></table>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"ckhg8rer40000fw052gw344wn","category_id":"ckhg8rerf0001fw05498h316a","_id":"ckhg8reri0004fw051mx33egu"},{"post_id":"ckhg8tf1z0000mv05hd6q2i89","category_id":"ckhg8tf260002mv0536637cq3","_id":"ckhg8tf2g000bmv052k0996ze"},{"post_id":"ckhg8tf280004mv0547qu7yb4","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf2o000nmv05d1wte4mk"},{"post_id":"ckhg8tf2o000pmv05dpxdevvx","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf2t000xmv054ejdb7cg"},{"post_id":"ckhg8tf2o000pmv05dpxdevvx","category_id":"ckhg8tf2n000mmv05a1lh12no","_id":"ckhg8tf2v0012mv051inn85b0"},{"post_id":"ckhg8tf2d0009mv054hn17x1x","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf2w0015mv059zbhdox4"},{"post_id":"ckhg8tf2d0009mv054hn17x1x","category_id":"ckhg8tf2n000mmv05a1lh12no","_id":"ckhg8tf2y001amv05dvr57cx5"},{"post_id":"ckhg8tf2p000qmv05e2qw09x3","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf2z001dmv05dtmjhuik"},{"post_id":"ckhg8tf2p000qmv05e2qw09x3","category_id":"ckhg8tf2n000mmv05a1lh12no","_id":"ckhg8tf31001imv05d3tf90mi"},{"post_id":"ckhg8tf2r000umv058aqth0cb","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf32001lmv057ox897sg"},{"post_id":"ckhg8tf2r000umv058aqth0cb","category_id":"ckhg8tf2n000mmv05a1lh12no","_id":"ckhg8tf33001qmv052r765tf2"},{"post_id":"ckhg8tf240001mv054gewgqn8","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf37001tmv054vv4hezu"},{"post_id":"ckhg8tf240001mv054gewgqn8","category_id":"ckhg8tf2q000rmv05e90120g4","_id":"ckhg8tf39001ymv0572fe4p9j"},{"post_id":"ckhg8tf2s000wmv05fw0ehr6z","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf3a0021mv050evf8nmn"},{"post_id":"ckhg8tf2s000wmv05fw0ehr6z","category_id":"ckhg8tf2n000mmv05a1lh12no","_id":"ckhg8tf3c0026mv05h1fpaa30"},{"post_id":"ckhg8tf2f000amv05epcm1qeu","category_id":"ckhg8tf2t0010mv051m51c017","_id":"ckhg8tf3e0029mv05bfs6em5w"},{"post_id":"ckhg8tf2i000emv059xnbde3d","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf3g002emv056i4gcqbp"},{"post_id":"ckhg8tf2i000emv059xnbde3d","category_id":"ckhg8tf2n000mmv05a1lh12no","_id":"ckhg8tf3h002hmv0590lb8a3g"},{"post_id":"ckhg8tf2k000gmv05gca9birg","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf3i002lmv0512d04ip1"},{"post_id":"ckhg8tf2k000gmv05gca9birg","category_id":"ckhg8tf2n000mmv05a1lh12no","_id":"ckhg8tf3k002pmv05cgy65cjb"},{"post_id":"ckhg8tf2m000jmv05hu3748lf","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf3l002smv0536j17ii9"},{"post_id":"ckhg8tf2m000jmv05hu3748lf","category_id":"ckhg8tf2n000mmv05a1lh12no","_id":"ckhg8tf3n002xmv050bd69o0p"},{"post_id":"ckhg8tf2b0005mv05fdk26zvr","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf3p0030mv05fdp23y45"},{"post_id":"ckhg8tf2b0005mv05fdk26zvr","category_id":"ckhg8tf2n000mmv05a1lh12no","_id":"ckhg8tf3r0035mv055otceepm"},{"post_id":"ckhg8tf2n000lmv05fg9f7ynv","category_id":"ckhg8tf2t0010mv051m51c017","_id":"ckhg8tf3s0038mv05gkj3fprz"},{"post_id":"ckhg8tf3e002cmv05exzlfdnw","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf3w003dmv05c81f0sbe"},{"post_id":"ckhg8tf3g002gmv05eiqlhv7u","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf3x003gmv05c4wk8pqy"},{"post_id":"ckhg8tf2u0011mv05cmsyfszu","category_id":"ckhg8tf3f002dmv054bh84h71","_id":"ckhg8tf3z003lmv05d21pem9v"},{"post_id":"ckhg8tf3h002jmv05hfqh59f3","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf40003omv056s6o5lpd"},{"post_id":"ckhg8tf30001gmv05ejgx0zrk","category_id":"ckhg8tf3u003amv0594wf37v1","_id":"ckhg8tf470044mv05df2bagdo"},{"post_id":"ckhg8tf31001kmv056cvj4ul2","category_id":"ckhg8tf3u003amv0594wf37v1","_id":"ckhg8tf4a0049mv0524pt5lv7"},{"post_id":"ckhg8tf33001omv05df3dd9h6","category_id":"ckhg8tf3u003amv0594wf37v1","_id":"ckhg8tf4b004cmv05gjlofq5u"},{"post_id":"ckhg8tf34001smv059v3wg3as","category_id":"ckhg8tf3u003amv0594wf37v1","_id":"ckhg8tf4d004gmv05b32derce"},{"post_id":"ckhg8tf38001wmv052p1ff0c5","category_id":"ckhg8tf490047mv058j0p8qvo","_id":"ckhg8tf4f004kmv05439u65h7"},{"post_id":"ckhg8tf3a0020mv0557988imy","category_id":"ckhg8tf4d004fmv05g8dqetv9","_id":"ckhg8tf4i004rmv0537pehv6p"},{"post_id":"ckhg8tf3b0024mv05f58475o4","category_id":"ckhg8tf4g004lmv055o6a3iz7","_id":"ckhg8tf4m004wmv05cv62cb87"},{"post_id":"ckhg8tf3d0028mv057j6bd7a3","category_id":"ckhg8tf4j004smv051zvg0gon","_id":"ckhg8tf4r0053mv051ynh0190"},{"post_id":"ckhg8tf3j002omv050ck8dfnm","category_id":"ckhg8tf4m004xmv054xsz0d69","_id":"ckhg8tf4x005amv0564kca42z"},{"post_id":"ckhg8tf3k002rmv050xex0m1i","category_id":"ckhg8tf3u003amv0594wf37v1","_id":"ckhg8tf4z005gmv0589vs6ms9"},{"post_id":"ckhg8tf3m002wmv0548z3251x","category_id":"ckhg8tf4x0059mv05dfki4ue0","_id":"ckhg8tf52005lmv055paj875r"},{"post_id":"ckhg8tf3n002zmv05b5zq29v3","category_id":"ckhg8tf4z005hmv05gxf43s8t","_id":"ckhg8tf55005qmv052xlf1lcw"},{"post_id":"ckhg8tf3q0034mv0532rd63s5","category_id":"ckhg8tf52005mmv051t2x8v8g","_id":"ckhg8tf57005xmv05b5n47o8n"},{"post_id":"ckhg8tf53005pmv056ohsb767","category_id":"ckhg8tf2t0010mv051m51c017","_id":"ckhg8tf580060mv05d9za7mh3"},{"post_id":"ckhg8tf3r0037mv05bbhacny6","category_id":"ckhg8tf55005smv05ammt8qr4","_id":"ckhg8tf590064mv057ocp3sit"},{"post_id":"ckhg8tf3v003cmv05blpt05io","category_id":"ckhg8tf55005smv05ammt8qr4","_id":"ckhg8tf5a0068mv05afpi12pu"},{"post_id":"ckhg8tf3w003fmv05d1qmfa8c","category_id":"ckhg8tf55005smv05ammt8qr4","_id":"ckhg8tf5b006bmv051rtm5xlu"},{"post_id":"ckhg8tf3y003kmv05azfub5pm","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf5c006gmv05ark2bzmh"},{"post_id":"ckhg8tf3y003kmv05azfub5pm","category_id":"ckhg8tf5a0067mv054vkvc983","_id":"ckhg8tf5d006imv054dy9a9y9"},{"post_id":"ckhg8tf40003nmv051782633g","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf5d006lmv052fkb7hu1"},{"post_id":"ckhg8tf40003nmv051782633g","category_id":"ckhg8tf5a0067mv054vkvc983","_id":"ckhg8tf5e006nmv05aooo018a"},{"post_id":"ckhg8tf42003smv050ei7gnlg","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf5f006qmv050mtobv45"},{"post_id":"ckhg8tf42003smv050ei7gnlg","category_id":"ckhg8tf5a0067mv054vkvc983","_id":"ckhg8tf5f006smv05c311g35w"},{"post_id":"ckhg8tf43003vmv050jrmeefz","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf5f006umv05b6xdboy0"},{"post_id":"ckhg8tf43003vmv050jrmeefz","category_id":"ckhg8tf5a0067mv054vkvc983","_id":"ckhg8tf5g006xmv05aaquc5z9"},{"post_id":"ckhg8tf450040mv053crhgpwx","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf5g0070mv054rpugq3g"},{"post_id":"ckhg8tf450040mv053crhgpwx","category_id":"ckhg8tf5a0067mv054vkvc983","_id":"ckhg8tf5h0073mv0513w97xti"},{"post_id":"ckhg8tf470043mv05c96bdx7r","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf5i0076mv05hdnpcaf6"},{"post_id":"ckhg8tf470043mv05c96bdx7r","category_id":"ckhg8tf5a0067mv054vkvc983","_id":"ckhg8tf5i0079mv05ftt7clrq"},{"post_id":"ckhg8tf490048mv0527ms67mu","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf5j007cmv058dv24y4g"},{"post_id":"ckhg8tf490048mv0527ms67mu","category_id":"ckhg8tf5a0067mv054vkvc983","_id":"ckhg8tf5k007fmv0548q5ga95"},{"post_id":"ckhg8tf4a004bmv055gx32sh9","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf5k007imv0588aa1295"},{"post_id":"ckhg8tf4a004bmv055gx32sh9","category_id":"ckhg8tf5a0067mv054vkvc983","_id":"ckhg8tf5l007lmv051lgrdl2k"},{"post_id":"ckhg8tf4c004emv055ihk2e9i","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf5l007omv05bko277ds"},{"post_id":"ckhg8tf4c004emv055ihk2e9i","category_id":"ckhg8tf5a0067mv054vkvc983","_id":"ckhg8tf5m007rmv05e5ez57ze"},{"post_id":"ckhg8tf4d004hmv056vv4dzg0","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf5n007umv051l9h067e"},{"post_id":"ckhg8tf4d004hmv056vv4dzg0","category_id":"ckhg8tf5a0067mv054vkvc983","_id":"ckhg8tf5n007xmv053t6i9vmr"},{"post_id":"ckhg8tf4f004jmv05cejo4u0x","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf5o0080mv05bwgo7z8a"},{"post_id":"ckhg8tf4f004jmv05cejo4u0x","category_id":"ckhg8tf5a0067mv054vkvc983","_id":"ckhg8tf5p0083mv05hmk9aps2"},{"post_id":"ckhg8tf4g004nmv053ifya413","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf5p0086mv05g9vh8grt"},{"post_id":"ckhg8tf4g004nmv053ifya413","category_id":"ckhg8tf5a0067mv054vkvc983","_id":"ckhg8tf5q0089mv053ukneg8p"},{"post_id":"ckhg8tf4h004pmv05ajy5006d","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf5r008cmv05bifa3vx4"},{"post_id":"ckhg8tf4h004pmv05ajy5006d","category_id":"ckhg8tf5a0067mv054vkvc983","_id":"ckhg8tf5s008fmv05cw66c430"},{"post_id":"ckhg8tf4j004tmv054qplcegt","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf5s008imv059hkmfbdj"},{"post_id":"ckhg8tf4j004tmv054qplcegt","category_id":"ckhg8tf5a0067mv054vkvc983","_id":"ckhg8tf5t008lmv05aclidtth"},{"post_id":"ckhg8tf4k004umv055mol7hfj","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf5t008omv05ag1y7iw2"},{"post_id":"ckhg8tf4k004umv055mol7hfj","category_id":"ckhg8tf5a0067mv054vkvc983","_id":"ckhg8tf5u008rmv051ke50bri"},{"post_id":"ckhg8tf4m004zmv054hg4h7cb","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf5v008umv05c17n80d5"},{"post_id":"ckhg8tf4m004zmv054hg4h7cb","category_id":"ckhg8tf5a0067mv054vkvc983","_id":"ckhg8tf5v008xmv055jir2nyi"},{"post_id":"ckhg8tf4n0051mv05dy0c4b6o","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf5w0090mv057fz2csaz"},{"post_id":"ckhg8tf4n0051mv05dy0c4b6o","category_id":"ckhg8tf5a0067mv054vkvc983","_id":"ckhg8tf5x0093mv05h3jdccvw"},{"post_id":"ckhg8tf4r0054mv05cg6udjde","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf5x0096mv05d9e87kw3"},{"post_id":"ckhg8tf4r0054mv05cg6udjde","category_id":"ckhg8tf5a0067mv054vkvc983","_id":"ckhg8tf5y0099mv0512cidqq3"},{"post_id":"ckhg8tf4v0056mv052cswegqf","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf5z009cmv050i9lapps"},{"post_id":"ckhg8tf4v0056mv052cswegqf","category_id":"ckhg8tf5a0067mv054vkvc983","_id":"ckhg8tf5z009fmv05cdc040i6"},{"post_id":"ckhg8tf4w0058mv054frgf0lb","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf60009imv05615l4hba"},{"post_id":"ckhg8tf4w0058mv054frgf0lb","category_id":"ckhg8tf5a0067mv054vkvc983","_id":"ckhg8tf61009lmv05e27y9i58"},{"post_id":"ckhg8tf4x005cmv057kwuguhk","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf61009omv050pli7shl"},{"post_id":"ckhg8tf4x005cmv057kwuguhk","category_id":"ckhg8tf5a0067mv054vkvc983","_id":"ckhg8tf62009rmv050y68byh5"},{"post_id":"ckhg8tf4y005fmv053aq254dl","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf62009umv05bzqugwzk"},{"post_id":"ckhg8tf4y005fmv053aq254dl","category_id":"ckhg8tf5a0067mv054vkvc983","_id":"ckhg8tf63009xmv050lfoaqip"},{"post_id":"ckhg8tf50005imv05djfw38wd","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf6300a0mv05dg8ufa8w"},{"post_id":"ckhg8tf50005imv05djfw38wd","category_id":"ckhg8tf5a0067mv054vkvc983","_id":"ckhg8tf6400a3mv0511ylgjqu"},{"post_id":"ckhg8tf51005kmv055qg940mg","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf6700a6mv058v19ddgc"},{"post_id":"ckhg8tf51005kmv055qg940mg","category_id":"ckhg8tf5a0067mv054vkvc983","_id":"ckhg8tf6700a9mv05hxkt3vzp"},{"post_id":"ckhg8tf52005nmv055xkydwoq","category_id":"ckhg8tf2c0006mv05b75c60uq","_id":"ckhg8tf6800abmv0559ct0l4q"},{"post_id":"ckhg8tf52005nmv055xkydwoq","category_id":"ckhg8tf5a0067mv054vkvc983","_id":"ckhg8tf6a00aemv058jb88ask"},{"post_id":"ckhg8tf55005tmv053f1u3xse","category_id":"ckhg8tf6600a5mv059xte870v","_id":"ckhg8tf6a00ahmv05eeum8gqa"},{"post_id":"ckhg8tf6e00armv059q4d73pd","category_id":"ckhg8tf6g00atmv053028dzfn","_id":"ckhg8tf6h00aymv057k2xdpw9"},{"post_id":"ckhg8tf6f00asmv05b5necutj","category_id":"ckhg8tf6g00avmv058r4d1jiz","_id":"ckhg8tf6h00b0mv05flbefwma"},{"post_id":"ckhg8tf6i00b1mv051mtj5f82","category_id":"ckhg8tf6g00avmv058r4d1jiz","_id":"ckhg8tf6j00b3mv05ehukd7dg"},{"post_id":"ckhg8z69t00b4mv05ca13e97y","category_id":"ckhg8tf3i002mmv05fi0fb0j0","_id":"ckhg8z69y00b9mv05bd2y68gt"},{"post_id":"ckhg8z69v00b5mv052bbi2fw7","category_id":"ckhg8tf3i002mmv05fi0fb0j0","_id":"ckhg8z69y00bbmv05g4hlbut8"},{"post_id":"ckhg8z69w00b7mv054ktd2llh","category_id":"ckhg8tf3i002mmv05fi0fb0j0","_id":"ckhg8z69z00bcmv053nj7gqmd"}],"PostTag":[{"post_id":"ckhg8rer40000fw052gw344wn","tag_id":"ckhg8rerh0002fw05g2ita820","_id":"ckhg8reri0003fw05551lbels"},{"post_id":"ckhg8tf1z0000mv05hd6q2i89","tag_id":"ckhg8tf280003mv05fjii0yo5","_id":"ckhg8tf2d0008mv057pnhfuyq"},{"post_id":"ckhg8tf240001mv054gewgqn8","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf2j000fmv0529a83s37"},{"post_id":"ckhg8tf280004mv0547qu7yb4","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf2m000kmv0582uqazhg"},{"post_id":"ckhg8tf2o000pmv05dpxdevvx","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf2q000tmv05gqpveiq6"},{"post_id":"ckhg8tf2o000pmv05dpxdevvx","tag_id":"ckhg8tf2o000omv05fwewexol","_id":"ckhg8tf2s000vmv057nh25ggn"},{"post_id":"ckhg8tf2b0005mv05fdk26zvr","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf2t000zmv058sdjbug7"},{"post_id":"ckhg8tf2b0005mv05fdk26zvr","tag_id":"ckhg8tf2o000omv05fwewexol","_id":"ckhg8tf2v0013mv05683k1wkw"},{"post_id":"ckhg8tf2p000qmv05e2qw09x3","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf2w0017mv05bb7k4g2y"},{"post_id":"ckhg8tf2p000qmv05e2qw09x3","tag_id":"ckhg8tf2o000omv05fwewexol","_id":"ckhg8tf2y001bmv0527em3q1a"},{"post_id":"ckhg8tf2r000umv058aqth0cb","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf2z001fmv057e580j9m"},{"post_id":"ckhg8tf2r000umv058aqth0cb","tag_id":"ckhg8tf2o000omv05fwewexol","_id":"ckhg8tf31001jmv05a47j37qk"},{"post_id":"ckhg8tf2d0009mv054hn17x1x","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf32001nmv05dtjlf0o2"},{"post_id":"ckhg8tf2d0009mv054hn17x1x","tag_id":"ckhg8tf2o000omv05fwewexol","_id":"ckhg8tf34001rmv0576eh3em8"},{"post_id":"ckhg8tf2s000wmv05fw0ehr6z","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf37001vmv056txh32dn"},{"post_id":"ckhg8tf2s000wmv05fw0ehr6z","tag_id":"ckhg8tf2o000omv05fwewexol","_id":"ckhg8tf39001zmv059fiu0u1a"},{"post_id":"ckhg8tf2f000amv05epcm1qeu","tag_id":"ckhg8tf2o000omv05fwewexol","_id":"ckhg8tf3b0023mv05hzcl678c"},{"post_id":"ckhg8tf2i000emv059xnbde3d","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf3d0027mv052ewc3nsy"},{"post_id":"ckhg8tf2i000emv059xnbde3d","tag_id":"ckhg8tf2o000omv05fwewexol","_id":"ckhg8tf3e002amv057fgy8cye"},{"post_id":"ckhg8tf2k000gmv05gca9birg","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf3g002fmv054il92pmd"},{"post_id":"ckhg8tf2k000gmv05gca9birg","tag_id":"ckhg8tf2o000omv05fwewexol","_id":"ckhg8tf3h002imv051l042w35"},{"post_id":"ckhg8tf2m000jmv05hu3748lf","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf3j002nmv05dhzxbfoe"},{"post_id":"ckhg8tf2m000jmv05hu3748lf","tag_id":"ckhg8tf2o000omv05fwewexol","_id":"ckhg8tf3k002qmv052jg12a52"},{"post_id":"ckhg8tf2n000lmv05fg9f7ynv","tag_id":"ckhg8tf2o000omv05fwewexol","_id":"ckhg8tf3m002vmv052asw4pmm"},{"post_id":"ckhg8tf3e002cmv05exzlfdnw","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf3n002ymv05c1ok00yc"},{"post_id":"ckhg8tf3g002gmv05eiqlhv7u","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf3q0033mv052x0c1ddn"},{"post_id":"ckhg8tf2u0011mv05cmsyfszu","tag_id":"ckhg8tf3b0022mv058d7i2ilb","_id":"ckhg8tf3r0036mv050j1d5hx2"},{"post_id":"ckhg8tf2u0011mv05cmsyfszu","tag_id":"ckhg8tf3e002bmv05f4cg5xjk","_id":"ckhg8tf3v003bmv05abyt81dl"},{"post_id":"ckhg8tf3h002jmv05hfqh59f3","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf3w003emv054xbo5wu1"},{"post_id":"ckhg8tf3k002rmv050xex0m1i","tag_id":"ckhg8tf3e002bmv05f4cg5xjk","_id":"ckhg8tf40003mmv058ph18b68"},{"post_id":"ckhg8tf30001gmv05ejgx0zrk","tag_id":"ckhg8tf3e002bmv05f4cg5xjk","_id":"ckhg8tf44003ymv05ew0udlpv"},{"post_id":"ckhg8tf31001kmv056cvj4ul2","tag_id":"ckhg8tf3e002bmv05f4cg5xjk","_id":"ckhg8tf460042mv0522rkavk2"},{"post_id":"ckhg8tf33001omv05df3dd9h6","tag_id":"ckhg8tf3e002bmv05f4cg5xjk","_id":"ckhg8tf480046mv054mb4dotw"},{"post_id":"ckhg8tf34001smv059v3wg3as","tag_id":"ckhg8tf3e002bmv05f4cg5xjk","_id":"ckhg8tf4a004amv05e8sifejy"},{"post_id":"ckhg8tf38001wmv052p1ff0c5","tag_id":"ckhg8tf480045mv0595bb3ipt","_id":"ckhg8tf4g004mmv055uraew4s"},{"post_id":"ckhg8tf38001wmv052p1ff0c5","tag_id":"ckhg8tf4b004dmv05dhwgas4j","_id":"ckhg8tf4h004omv058q7i9ju1"},{"post_id":"ckhg8tf3a0020mv0557988imy","tag_id":"ckhg8tf4f004imv05615o65cb","_id":"ckhg8tf4m004ymv05g27w0b52"},{"post_id":"ckhg8tf3a0020mv0557988imy","tag_id":"ckhg8tf4b004dmv05dhwgas4j","_id":"ckhg8tf4n0050mv0519xy5uy3"},{"post_id":"ckhg8tf3b0024mv05f58475o4","tag_id":"ckhg8tf4l004vmv05fg8i3v8f","_id":"ckhg8tf4x005bmv05a9d46fr1"},{"post_id":"ckhg8tf3b0024mv05f58475o4","tag_id":"ckhg8tf4b004dmv05dhwgas4j","_id":"ckhg8tf4y005dmv05feel8opz"},{"post_id":"ckhg8tf3d0028mv057j6bd7a3","tag_id":"ckhg8tf4v0057mv059xmw9jbs","_id":"ckhg8tf55005rmv053gbeesqn"},{"post_id":"ckhg8tf3d0028mv057j6bd7a3","tag_id":"ckhg8tf4y005emv052tq00n3x","_id":"ckhg8tf56005umv05a1ps70xf"},{"post_id":"ckhg8tf3d0028mv057j6bd7a3","tag_id":"ckhg8tf4b004dmv05dhwgas4j","_id":"ckhg8tf57005wmv05gunrcdbi"},{"post_id":"ckhg8tf53005pmv056ohsb767","tag_id":"ckhg8tf2o000omv05fwewexol","_id":"ckhg8tf57005zmv0562jy1sb3"},{"post_id":"ckhg8tf3j002omv050ck8dfnm","tag_id":"ckhg8tf53005omv0561qf1kw7","_id":"ckhg8tf590062mv05bmgf82ux"},{"post_id":"ckhg8tf3m002wmv0548z3251x","tag_id":"ckhg8tf56005vmv051q3yh2pl","_id":"ckhg8tf5a0065mv05b6u6d205"},{"post_id":"ckhg8tf3n002zmv05b5zq29v3","tag_id":"ckhg8tf580061mv0568pf751s","_id":"ckhg8tf5b0069mv057z48fqmy"},{"post_id":"ckhg8tf3q0034mv0532rd63s5","tag_id":"ckhg8tf5a0066mv05fzul57wd","_id":"ckhg8tf5c006dmv0593es20bl"},{"post_id":"ckhg8tf3r0037mv05bbhacny6","tag_id":"ckhg8tf5b006amv05arvx9m3a","_id":"ckhg8tf5d006hmv056ox19288"},{"post_id":"ckhg8tf3v003cmv05blpt05io","tag_id":"ckhg8tf5b006amv05arvx9m3a","_id":"ckhg8tf5e006mmv05cfl13q48"},{"post_id":"ckhg8tf3w003fmv05d1qmfa8c","tag_id":"ckhg8tf5b006amv05arvx9m3a","_id":"ckhg8tf5f006rmv05c3c45gr9"},{"post_id":"ckhg8tf3y003kmv05azfub5pm","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf5g006wmv053lach2el"},{"post_id":"ckhg8tf3y003kmv05azfub5pm","tag_id":"ckhg8tf5e006omv052pbc3ybv","_id":"ckhg8tf5g006ymv055b5m8mm5"},{"post_id":"ckhg8tf40003nmv051782633g","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf5h0072mv057kyldmpr"},{"post_id":"ckhg8tf40003nmv051782633g","tag_id":"ckhg8tf5e006omv052pbc3ybv","_id":"ckhg8tf5h0074mv058i4w5fe6"},{"post_id":"ckhg8tf42003smv050ei7gnlg","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf5i0078mv05bj60byke"},{"post_id":"ckhg8tf42003smv050ei7gnlg","tag_id":"ckhg8tf5e006omv052pbc3ybv","_id":"ckhg8tf5j007amv0593ek499o"},{"post_id":"ckhg8tf43003vmv050jrmeefz","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf5k007emv05bmb8c2ep"},{"post_id":"ckhg8tf43003vmv050jrmeefz","tag_id":"ckhg8tf5e006omv052pbc3ybv","_id":"ckhg8tf5k007gmv05f1tm5fks"},{"post_id":"ckhg8tf450040mv053crhgpwx","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf5l007kmv05cbl9ahtv"},{"post_id":"ckhg8tf450040mv053crhgpwx","tag_id":"ckhg8tf5e006omv052pbc3ybv","_id":"ckhg8tf5l007mmv05gohbginx"},{"post_id":"ckhg8tf470043mv05c96bdx7r","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf5m007qmv05c5sm8kej"},{"post_id":"ckhg8tf470043mv05c96bdx7r","tag_id":"ckhg8tf5e006omv052pbc3ybv","_id":"ckhg8tf5m007smv05bypgayq2"},{"post_id":"ckhg8tf490048mv0527ms67mu","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf5n007wmv050skf7u6m"},{"post_id":"ckhg8tf490048mv0527ms67mu","tag_id":"ckhg8tf5e006omv052pbc3ybv","_id":"ckhg8tf5n007ymv05duak9cgg"},{"post_id":"ckhg8tf4a004bmv055gx32sh9","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf5p0082mv052sx5f1yf"},{"post_id":"ckhg8tf4a004bmv055gx32sh9","tag_id":"ckhg8tf5e006omv052pbc3ybv","_id":"ckhg8tf5p0084mv05bcevgx42"},{"post_id":"ckhg8tf4c004emv055ihk2e9i","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf5q0088mv05aoh9358e"},{"post_id":"ckhg8tf4c004emv055ihk2e9i","tag_id":"ckhg8tf5e006omv052pbc3ybv","_id":"ckhg8tf5q008amv051kq98orq"},{"post_id":"ckhg8tf4d004hmv056vv4dzg0","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf5s008emv058a9u8aat"},{"post_id":"ckhg8tf4d004hmv056vv4dzg0","tag_id":"ckhg8tf5e006omv052pbc3ybv","_id":"ckhg8tf5s008gmv050mrb3jxs"},{"post_id":"ckhg8tf4f004jmv05cejo4u0x","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf5t008kmv05fwjdhi47"},{"post_id":"ckhg8tf4f004jmv05cejo4u0x","tag_id":"ckhg8tf5e006omv052pbc3ybv","_id":"ckhg8tf5t008mmv05g8b63vva"},{"post_id":"ckhg8tf4g004nmv053ifya413","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf5u008qmv052bj22yoy"},{"post_id":"ckhg8tf4g004nmv053ifya413","tag_id":"ckhg8tf5e006omv052pbc3ybv","_id":"ckhg8tf5u008smv05a4ex9hxx"},{"post_id":"ckhg8tf4h004pmv05ajy5006d","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf5v008wmv055ge63zxs"},{"post_id":"ckhg8tf4h004pmv05ajy5006d","tag_id":"ckhg8tf5e006omv052pbc3ybv","_id":"ckhg8tf5w008ymv0547o89zi5"},{"post_id":"ckhg8tf4j004tmv054qplcegt","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf5x0092mv05dd0h7axu"},{"post_id":"ckhg8tf4j004tmv054qplcegt","tag_id":"ckhg8tf5e006omv052pbc3ybv","_id":"ckhg8tf5x0094mv05ayifctug"},{"post_id":"ckhg8tf4k004umv055mol7hfj","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf5y0098mv050litdu2s"},{"post_id":"ckhg8tf4k004umv055mol7hfj","tag_id":"ckhg8tf5e006omv052pbc3ybv","_id":"ckhg8tf5y009amv057uh8fpu7"},{"post_id":"ckhg8tf4m004zmv054hg4h7cb","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf5z009emv056qrd8zag"},{"post_id":"ckhg8tf4m004zmv054hg4h7cb","tag_id":"ckhg8tf5e006omv052pbc3ybv","_id":"ckhg8tf60009gmv050wcfbk0s"},{"post_id":"ckhg8tf4n0051mv05dy0c4b6o","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf61009kmv052p8g7rus"},{"post_id":"ckhg8tf4n0051mv05dy0c4b6o","tag_id":"ckhg8tf5e006omv052pbc3ybv","_id":"ckhg8tf61009mmv051iz521rx"},{"post_id":"ckhg8tf4r0054mv05cg6udjde","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf62009qmv058p016pur"},{"post_id":"ckhg8tf4r0054mv05cg6udjde","tag_id":"ckhg8tf5e006omv052pbc3ybv","_id":"ckhg8tf62009smv05d4ju9h6z"},{"post_id":"ckhg8tf4v0056mv052cswegqf","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf63009wmv051xweb5sw"},{"post_id":"ckhg8tf4v0056mv052cswegqf","tag_id":"ckhg8tf5e006omv052pbc3ybv","_id":"ckhg8tf63009ymv0535cnbewr"},{"post_id":"ckhg8tf4w0058mv054frgf0lb","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf6400a2mv0578yscbts"},{"post_id":"ckhg8tf4w0058mv054frgf0lb","tag_id":"ckhg8tf5e006omv052pbc3ybv","_id":"ckhg8tf6500a4mv055tyneku1"},{"post_id":"ckhg8tf4x005cmv057kwuguhk","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf6700a8mv05f7hn548f"},{"post_id":"ckhg8tf4x005cmv057kwuguhk","tag_id":"ckhg8tf5e006omv052pbc3ybv","_id":"ckhg8tf6800aamv053n0jdfko"},{"post_id":"ckhg8tf4y005fmv053aq254dl","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf6900admv051pik7yc9"},{"post_id":"ckhg8tf4y005fmv053aq254dl","tag_id":"ckhg8tf5e006omv052pbc3ybv","_id":"ckhg8tf6a00afmv057uk33ff7"},{"post_id":"ckhg8tf50005imv05djfw38wd","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf6a00aimv0598n71lkx"},{"post_id":"ckhg8tf50005imv05djfw38wd","tag_id":"ckhg8tf5e006omv052pbc3ybv","_id":"ckhg8tf6b00ajmv05h5jgdhub"},{"post_id":"ckhg8tf51005kmv055qg940mg","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf6b00almv05hj8ba5p3"},{"post_id":"ckhg8tf51005kmv055qg940mg","tag_id":"ckhg8tf5e006omv052pbc3ybv","_id":"ckhg8tf6b00ammv056w7rdjl1"},{"post_id":"ckhg8tf52005nmv055xkydwoq","tag_id":"ckhg8tf2c0007mv05bl5bfwng","_id":"ckhg8tf6c00aomv05bd6o38th"},{"post_id":"ckhg8tf52005nmv055xkydwoq","tag_id":"ckhg8tf5e006omv052pbc3ybv","_id":"ckhg8tf6c00apmv05e2legkqa"},{"post_id":"ckhg8tf55005tmv053f1u3xse","tag_id":"ckhg8tf6b00anmv0581b20uqu","_id":"ckhg8tf6c00aqmv05hou38mmr"},{"post_id":"ckhg8tf6e00armv059q4d73pd","tag_id":"ckhg8tf6g00aumv05ah0189ic","_id":"ckhg8tf6h00axmv053yg2g5im"},{"post_id":"ckhg8tf6f00asmv05b5necutj","tag_id":"ckhg8tf6g00awmv053u93b6di","_id":"ckhg8tf6h00azmv050utx71e1"},{"post_id":"ckhg8tf6i00b1mv051mtj5f82","tag_id":"ckhg8tf6g00awmv053u93b6di","_id":"ckhg8tf6j00b2mv052e9m7zc2"},{"post_id":"ckhg8z69t00b4mv05ca13e97y","tag_id":"ckhg8tf3i002kmv05bovm0h6v","_id":"ckhg8z69w00b6mv054g6vgnnt"},{"post_id":"ckhg8z69v00b5mv052bbi2fw7","tag_id":"ckhg8tf3i002kmv05bovm0h6v","_id":"ckhg8z69x00b8mv051uar06kw"},{"post_id":"ckhg8z69w00b7mv054ktd2llh","tag_id":"ckhg8tf3i002kmv05bovm0h6v","_id":"ckhg8z69y00bamv059q0ydifz"}],"Tag":[{"name":"","_id":"ckhg8rerh0002fw05g2ita820"},{"name":"","_id":"ckhg8tf280003mv05fjii0yo5"},{"name":"PHP","_id":"ckhg8tf2c0007mv05bl5bfwng"},{"name":"","_id":"ckhg8tf2o000omv05fwewexol"},{"name":"Redis","_id":"ckhg8tf3b0022mv058d7i2ilb"},{"name":"Linux","_id":"ckhg8tf3e002bmv05f4cg5xjk"},{"name":"","_id":"ckhg8tf3i002kmv05bovm0h6v"},{"name":"5G","_id":"ckhg8tf480045mv0595bb3ipt"},{"name":"Network","_id":"ckhg8tf4b004dmv05dhwgas4j"},{"name":"NAT","_id":"ckhg8tf4f004imv05615o65cb"},{"name":"TCP","_id":"ckhg8tf4l004vmv05fg8i3v8f"},{"name":"TLS","_id":"ckhg8tf4v0057mv059xmw9jbs"},{"name":"RSA","_id":"ckhg8tf4y005emv052tq00n3x"},{"name":"Git","_id":"ckhg8tf53005omv0561qf1kw7"},{"name":"Markdown","_id":"ckhg8tf56005vmv051q3yh2pl"},{"name":"Phpstorm","_id":"ckhg8tf580061mv0568pf751s"},{"name":"","_id":"ckhg8tf5a0066mv05fzul57wd"},{"name":"MySQL","_id":"ckhg8tf5b006amv05arvx9m3a"},{"name":"","_id":"ckhg8tf5e006omv052pbc3ybv"},{"name":"Algorithms","_id":"ckhg8tf6b00anmv0581b20uqu"},{"name":"Http","_id":"ckhg8tf6g00aumv05ah0189ic"},{"name":"","_id":"ckhg8tf6g00awmv053u93b6di"}]}}